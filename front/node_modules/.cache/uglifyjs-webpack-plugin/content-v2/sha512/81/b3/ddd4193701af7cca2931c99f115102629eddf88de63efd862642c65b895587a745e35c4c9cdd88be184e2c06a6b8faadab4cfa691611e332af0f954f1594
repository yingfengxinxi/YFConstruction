{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-29dd\"],{\"+9MU\":function(e,t,i){e.exports=i.p+\"static/img/field_file.e3d3243.png\"},\"/hTO\":function(e,t,i){e.exports=i.p+\"static/img/field_date.da50b3d.png\"},\"1ya0\":function(e,t,i){\"use strict\";i.r(t);var a={name:\"CheckboxForm\",mixins:[i(\"v4DC\").default],data:function(){return{}},computed:{disabled:function(){return 2==this.attr.operating||3==this.attr.operating}},mounted:function(){}},n=(i(\"6KEI\"),i(\"KHd+\")),l=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"box-wrapper\"},[i(\"div\",{staticClass:\"title\"},[i(\"span\",[e._v(e._s(e.attr.isNull?\"*\":\"\"))]),e._v(e._s(e.attr.name)),e.attr.inputTips?i(\"span\",[e._v(e._s(\"（\"+e.attr.inputTips+\"）\"))]):e._e()]),e._v(\" \"),i(\"div\",{staticClass:\"box\"},[i(\"el-checkbox-group\",{attrs:{disabled:e.disabled},model:{value:e.attr.defaultValue,callback:function(t){e.$set(e.attr,\"defaultValue\",t)},expression:\"attr.defaultValue\"}},e._l(e.attr.showSetting,function(e,t){return i(\"el-checkbox\",{key:t,staticClass:\"checkbox\",attrs:{label:e.value}})}))],1),e._v(\" \"),e.isShow?i(\"span\",{staticClass:\"el-icon-delete control\",on:{click:e.handleDelete}}):e._e()])},[],!1,null,\"2cfdbd84\",null);l.options.__file=\"CheckboxForm.vue\";t.default=l.exports},\"4nTe\":function(e,t,i){e.exports=i.p+\"static/img/field_datetime.dbf5c84.png\"},\"4tar\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"t2rG\"),n=i.n(a),l=i(\"7Qib\"),s={name:\"FieldInfo\",components:{draggable:n.a},props:{field:{type:Object,default:function(){return{name:\"\",formType:\"\",isUnique:!1,isNull:!1,isHidden:!1,inputTips:\"\",maxLength:\"\",defaultValue:\"\",setting:\"\",showSetting:\"\",relevant:\"\"}}},canTransform:Boolean,transformData:Object,canUnique:{type:Boolean,default:!0}},data:function(){return{}},computed:{defaultTips:function(){return\"floatnumber\"==this.field.formType?\"货币的整数部分须少于15位，小数部分须少于2位\":\"number\"==this.field.formType?\"数字的整数部分须少于15位，小数部分须少于4位\":\"\"},showQuery:function(){return\"text\"==this.field.formType||\"textarea\"==this.field.formType||\"select\"==this.field.formType||\"checkbox\"==this.field.formType||\"number\"==this.field.formType||\"date\"==this.field.formType||\"datetime\"==this.field.formType},showHidden:function(){return\"oa_examine\"!==this.$route.params.type},showMaxInput:function(){return!1},showDefaultValue:function(){return\"select\"!=this.field.formType&&\"checkbox\"!=this.field.formType},showSelect:function(){return\"select\"==this.field.formType||\"checkbox\"==this.field.formType},showDatepicker:function(){return\"date\"==this.field.formType||\"datetime\"==this.field.formType},isUserStructure:function(){return\"user\"==this.field.formType||\"structure\"==this.field.formType},disabled:function(){return 2==this.field.operating||3==this.field.operating},hiddenDisabled:function(){return 1!=this.field.fieldType||1==this.field.isNull},hiddenTips:function(){return 1==this.field.isNull?\"该字段为必填字段不可设置为隐藏\":\"该字段为非必填字段，设置为隐藏字段后新建时将不显示该字段\"},isDisabledHidden:function(){return 1==this.field.label?[\"leads_id\",\"leads_name\",\"level\"].includes(this.field.fieldName):2==this.field.label?[\"customer_name\",\"level\"].includes(this.field.fieldName):3==this.field.label?[\"customer_id\",\"name\"].includes(this.field.fieldName):4==this.field.label?[\"name\",\"category_id\",\"price\",\"status\"].includes(this.field.fieldName):5==this.field.label?[\"business_name\",\"contract_id\"].includes(this.field.fieldName):6==this.field.label?[\"customer_id\",\"business_id\",\"num\",\"money\",\"order_date\"].includes(this.field.fieldName):7==this.field.label?[\"customer_id\",\"contract_id\",\"number\",\"plan_id\"].includes(this.field.fieldName):17==this.field.label?[\"customer_id\",\"contract_id\"].includes(this.field.fieldName):void 0}},watch:{field:function(){this.showSelect&&0==this.field.showSetting.length&&(this.field.showSetting=[{value:\"选1\"},{value:\"选2\"},{value:\"选3\"}])}},mounted:function(){this.showSelect&&0==this.field.showSetting.length&&(this.field.showSetting=[{value:\"选1\"},{value:\"选2\"},{value:\"选3\"}])},methods:{handleRadio:function(e,t,i){this.disabled||(\"add\"==e?this.field.showSetting.push({value:\"选\"+(this.field.showSetting.length+1)}):\"remove\"==e&&(t.value==this.field.defaultValue&&(this.field.defaultValue=\"\"),this.field.showSetting.splice(i,1)))},radioChange:function(e){this.field.defaultValue==e?this.field.defaultValue=\"\":this.field.defaultValue=e},radioInputChange:function(e){if(this.field.defaultValue){for(var t=!1,i=0;i<e.showSetting.length;i++){var a=e.showSetting;this.field.defaultValue==a.value&&(t=!0)}t||(this.field.defaultValue=\"\")}},handleCheckbox:function(e,t,i){if(!this.disabled)if(\"add\"==e)this.field.showSetting.push({value:\"选\"+(this.field.showSetting.length+1)});else if(\"remove\"==e){var a=this.field.defaultValue.indexOf(t.value);-1!=a&&this.field.defaultValue.splice(a,1),this.field.showSetting.splice(i,1)}},checkboxInputChange:function(e){if(this.field.defaultValue&&this.field.defaultValue.length){for(var t=this.field.showSetting.map(function(e){return e.value}),i=[],a=0;a<this.field.defaultValue.length;a++){var n=this.field.defaultValue[a];t.includes(n)&&i.push(n)}this.field.defaultValue.length!=i.length&&(this.field.defaultValue=i)}},inputBlur:function(e){\"mobile\"==this.field.formType&&this.field.defaultValue?Object(l.v)(this.field.defaultValue)||this.$message({message:\"输入的手机格式有误\",type:\"error\"}):\"email\"==this.field.formType&&this.field.defaultValue&&(Object(l.u)(this.field.defaultValue)||this.$message({message:\"输入的邮箱格式有误\",type:\"error\"}))},inNullChange:function(e){}}},r=(i(\"e5dI\"),i(\"KHd+\")),o=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"field-info-section\"},[i(\"div\",{staticClass:\"item-section\"},[i(\"div\",{staticClass:\"name\"},[e._v(\"\\n      标识名\\n    \")]),e._v(\" \"),i(\"el-input\",{attrs:{disabled:e.disabled},model:{value:e.field.name,callback:function(t){e.$set(e.field,\"name\",t)},expression:\"field.name\"}}),e._v(\" \"),e._m(0)],1),e._v(\" \"),i(\"div\",{staticClass:\"item-section\"},[i(\"div\",{staticClass:\"name\"},[e._v(\"\\n      提示文字\\n    \")]),e._v(\" \"),i(\"el-input\",{attrs:{rows:3,disabled:e.disabled,type:\"textarea\",resize:\"none\"},model:{value:e.field.inputTips,callback:function(t){e.$set(e.field,\"inputTips\",t)},expression:\"field.inputTips\"}}),e._v(\" \"),e._m(1)],1),e._v(\" \"),e.showSelect?i(\"div\",{staticClass:\"item-section\"},[i(\"div\",{staticClass:\"name\"},[e._v(\"\\n      选项设置\"),\"level\"==e.field.fieldName?i(\"span\",{staticClass:\"field-tips\"},[e._v(\"（若公海规则启用了“根据客户级别设置”，调整选项后，请同步调整公海规则，否则公海规则将失效）\")]):e._e()]),e._v(\" \"),\"select\"==e.field.formType?i(\"el-radio-group\",{ref:\"radioGroup\",attrs:{disabled:e.disabled},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,\"defaultValue\",t)},expression:\"field.defaultValue\"}},[i(\"draggable\",{attrs:{list:e.field.showSetting,options:{group:\"list\",forceFallback:!1,fallbackClass:\"draggingStyle\",filter:\".el-input__inner\",preventOnFilter:!1}}},e._l(e.field.showSetting,function(t,a){return i(\"div\",{key:a,staticClass:\"radio cursor-move\"},[i(\"el-radio\",{attrs:{label:t.value},nativeOn:{click:function(i){i.preventDefault(),e.radioChange(t.value)}}},[i(\"el-input\",{staticClass:\"input\",attrs:{disabled:e.disabled},on:{focus:function(t){e.radioInputChange(e.field)},blur:function(t){e.radioInputChange(e.field)}},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"item.value\"}})],1),e._v(\" \"),i(\"i\",{staticClass:\"el-icon-circle-plus handle\",on:{click:function(i){e.handleRadio(\"add\",t,a)}}}),e._v(\" \"),e.field.showSetting.length>1?i(\"i\",{staticClass:\"el-icon-remove handle\",on:{click:function(i){e.handleRadio(\"remove\",t,a)}}}):e._e()],1)}))],1):e._e(),e._v(\" \"),\"checkbox\"==e.field.formType?i(\"el-checkbox-group\",{attrs:{disabled:e.disabled},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,\"defaultValue\",t)},expression:\"field.defaultValue\"}},[i(\"draggable\",{attrs:{list:e.field.showSetting,options:{group:\"list\",forceFallback:!1,fallbackClass:\"draggingStyle\",filter:\".el-input__inner\",preventOnFilter:!1}}},e._l(e.field.showSetting,function(t,a){return i(\"div\",{key:a,staticClass:\"checkbox cursor-move\"},[i(\"el-checkbox\",{attrs:{label:t.value}}),e._v(\" \"),i(\"el-input\",{staticClass:\"input\",attrs:{disabled:e.disabled},on:{focus:function(t){e.checkboxInputChange(e.field)},blur:function(t){e.checkboxInputChange(e.field)}},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"item.value\"}}),e._v(\" \"),i(\"i\",{staticClass:\"el-icon-circle-plus handle\",on:{click:function(i){i.stopPropagation(),e.handleCheckbox(\"add\",t,a)}}}),e._v(\" \"),e.field.showSetting.length>1?i(\"i\",{staticClass:\"el-icon-remove handle\",on:{click:function(i){i.stopPropagation(),e.handleCheckbox(\"remove\",t,a)}}}):e._e()],1)}))],1):e._e()],1):e._e(),e._v(\" \"),e.showDefaultValue&&!e.isUserStructure?i(\"div\",{staticClass:\"item-section\"},[i(\"div\",{staticClass:\"name\"},[e._v(\"\\n      默认值\\n    \")]),e._v(\" \"),e.showDatepicker?e._e():i(\"el-input\",{attrs:{disabled:e.disabled},on:{blur:e.inputBlur},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,\"defaultValue\",t)},expression:\"field.defaultValue\"}}),e._v(\" \"),e.showDatepicker?i(\"el-date-picker\",{attrs:{disabled:e.disabled,type:\"date\"==e.field.formType?\"date\":\"datetime\",\"value-format\":\"date\"==e.field.formType?\"yyyy-MM-dd\":\"yyyy-MM-dd HH:mm:ss\",placeholder:\"选择日期\"},model:{value:e.field.defaultValue,callback:function(t){e.$set(e.field,\"defaultValue\",t)},expression:\"field.defaultValue\"}}):e._e(),e._v(\" \"),e.defaultTips?i(\"div\",{staticClass:\"input-tips\"},[i(\"span\",[e._v(\"*\")]),e._v(e._s(e.defaultTips))]):e._e()],1):e._e(),e._v(\" \"),e.showMaxInput?i(\"div\",{staticClass:\"item-section\"},[i(\"div\",{staticClass:\"name\"},[e._v(\"\\n      字数上限\\n    \")]),e._v(\" \"),i(\"el-input\",{attrs:{maxlength:4,disabled:e.disabled},model:{value:e.field.maxLength,callback:function(t){e.$set(e.field,\"maxLength\",t)},expression:\"field.maxLength\"}}),e._v(\" \"),e._m(2)],1):e._e(),e._v(\" \"),e.canTransform&&e.transformData&&e.transformData[e.field.formType]?i(\"div\",{staticClass:\"item-section\"},[i(\"div\",{staticClass:\"name\"},[e._v(\"\\n      转化客户字段\\n    \")]),e._v(\" \"),i(\"el-select\",{attrs:{clearable:\"\"},model:{value:e.field.relevant,callback:function(t){e.$set(e.field,\"relevant\",t)},expression:\"field.relevant\"}},e._l(e.transformData[e.field.formType],function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(\" \"),i(\"div\",{staticClass:\"item-check-section\"},[i(\"el-checkbox\",{attrs:{disabled:e.disabled},on:{change:e.inNullChange},model:{value:e.field.isNull,callback:function(t){e.$set(e.field,\"isNull\",t)},expression:\"field.isNull\"}},[e._v(\"设为必填\")])],1),e._v(\" \"),e.canUnique?i(\"div\",{staticClass:\"item-check-section\"},[i(\"el-checkbox\",{attrs:{disabled:e.disabled},model:{value:e.field.isUnique,callback:function(t){e.$set(e.field,\"isUnique\",t)},expression:\"field.isUnique\"}},[e._v(\"设为唯一\")])],1):e._e(),e._v(\" \"),e.showHidden?i(\"div\",{staticClass:\"item-check-section\"},[i(\"el-checkbox\",{attrs:{disabled:e.disabled||e.isDisabledHidden},model:{value:e.field.isHidden,callback:function(t){e.$set(e.field,\"isHidden\",t)},expression:\"field.isHidden\"}},[e._v(\"隐藏字段\")])],1):e._e(),e._v(\" \"),e.showQuery?i(\"div\",{staticClass:\"item-check-section\"},[i(\"el-checkbox\",{model:{value:e.field.isQuery,callback:function(t){e.$set(e.field,\"isQuery\",t)},expression:\"field.isQuery\"}},[e._v(\"允许查询\")])],1):e._e()])},[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"input-tips\"},[t(\"span\",[this._v(\"*\")]),this._v(\"标识名不能为空\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"input-tips\"},[t(\"span\",[this._v(\"*\")]),this._v(\"显示在标识名右侧的说明文字\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"input-tips\"},[t(\"span\",[this._v(\"*\")]),this._v(\"上限为2000字\")])}],!1,null,\"5ab20561\",null);o.options.__file=\"FieldInfo.vue\";t.default=o.exports},\"6C7d\":function(e,t,i){e.exports=i.p+\"static/img/field_mobile.f94559e.png\"},\"6KEI\":function(e,t,i){\"use strict\";var a=i(\"UJd+\");i.n(a).a},DwbV:function(e,t,i){e.exports=i.p+\"static/img/field_structure.62d0b9f.png\"},GiLK:function(e,t,i){e.exports=i.p+\"static/img/field_select.ef87a51.png\"},K7ww:function(e,t,i){e.exports=i.p+\"static/img/field_line.be1c70a.png\"},Kelw:function(e,t,i){\"use strict\";i.r(t);var a=i(\"PlSB\");i.d(t,\"MultiLineText\",function(){return a.default});var n=i(\"sJra\");i.d(t,\"SingleLineText\",function(){return n.default});var l=i(\"ZZ37\");i.d(t,\"SelectForm\",function(){return l.default});var s=i(\"1ya0\");i.d(t,\"CheckboxForm\",function(){return s.default});var r=i(\"M6+M\");i.d(t,\"FileForm\",function(){return r.default});var o=i(\"WZAs\");i.d(t,\"TableForm\",function(){return o.default})},LKRs:function(e,t,i){\"use strict\";i.r(t);var a=i(\"gDS+\"),n=i.n(a),l=i(\"FyfS\"),s=i.n(l),r=i(\"ZoMv\"),o=i(\"6iAj\"),d=i(\"4XAY\"),c=i(\"p2mV\"),u=i(\"Kelw\"),f=i(\"t2rG\"),m=i.n(f),p=i(\"Xg46\"),h=i(\"R5h8\"),v=i(\"4tar\"),_=i(\"7Qib\"),b={name:\"Handlefield\",components:{SingleLineText:u.SingleLineText,MultiLineText:u.MultiLineText,SelectForm:u.SelectForm,CheckboxForm:u.CheckboxForm,FileForm:u.FileForm,TableForm:u.TableForm,draggable:m.a,FieldInfo:v.default,PreviewFieldView:c.default},filters:{typeToComponentName:function(e){return\"text\"===e.formType||\"number\"===e.formType||\"floatnumber\"===e.formType||\"mobile\"===e.formType||\"email\"===e.formType||\"date\"===e.formType||\"datetime\"===e.formType||\"user\"===e.formType||\"structure\"===e.formType||\"contacts\"===e.formType||\"customer\"===e.formType||\"contract\"===e.formType||\"business\"===e.formType||\"single_user\"===e.formType||0==e.type?\"SingleLineText\":\"textarea\"===e.formType?\"MultiLineText\":\"select\"===e.formType?\"SelectForm\":\"checkbox\"===e.formType?\"CheckboxForm\":\"file\"===e.formType?\"FileForm\":\"form\"===e.formType?\"TableForm\":void 0}},data:function(){return{fieldList:h.default,fieldArr:[],movedItem:{},selectedIndex:-1,rejectHandle:!0,form:null,loading:!1,tablePreviewData:{types:\"\",id:\"\"},showTablePreview:!1,contentHeight:document.documentElement.clientHeight-75,transformData:null}},computed:{canTransform:function(){return\"crm_leads\"==this.$route.params.type},canUnique:function(){return\"oa_examine\"!=this.$route.params.type}},watch:{selectedIndex:{handler:function(e){this.form=e>=0?this.fieldArr[e]:null},deep:!0,immediate:!0}},mounted:function(){var e=this;window.onresize=function(){e.contentHeight=document.documentElement.clientHeight-75},this.getCustomInfo(),this.canTransform&&this.getTransformField()},methods:{getCustomInfo:function(){var e=this;this.loading=!0;var t=o.v,i={};i.label=this.$route.params.label,\"oa_examine\"===this.$route.params.type&&(t=o.w,i.categoryId=this.$route.params.id),t(i).then(function(t){for(var i=function(e){var i=t.data[e];if(\"select\"==i.formType||\"checkbox\"==i.formType){n=[];for(var a=0;a<i.setting.length;a++){var l=i.setting[a];n.push({value:l})}i.showSetting=n,\"checkbox\"==i.formType&&(i.defaultValue=i.defaultValue.filter(function(e){return-1!=i.setting.indexOf(e)}))}i.isNull=1==i.isNull,i.isUnique=1==i.isUnique,i.isHidden=1==i.isHidden},a=0;a<t.data.length;a++){var n;i(a)}e.fieldArr=t.data,t.data.length>0&&(e.selectedIndex=0,e.form=e.fieldArr[0]),e.rejectHandle=!1,e.loading=!1}).catch(function(){e.loading=!1})},handleDelete:function(e,t){var i=this;this.$confirm(\"确定删除该自定义字段吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){i.fieldArr.splice(t,1),i.$nextTick(function(){i.selectedIndex=-1})}).catch(function(){})},handleSelect:function(e,t){this.selectedIndex=t,this.selectedIndex===t&&t>=0&&(this.form=this.fieldArr[t])},handleChildSelect:function(e){this.form=e.data},handlePreview:function(){this.tablePreviewData=this.$route.params,this.showTablePreview=!0},handleSave:function(){var e=this;if(!this.rejectHandle){for(var t=Object(_.t)(this.fieldArr),i=[],a=\"select|update|union|and|or|delete|insert|trancate|char|substr|ascii|declare|exec|count|master|into|drop|execute\".split(\"|\"),l=0;l<t.length;l++){var r=t[l];if(r.isNull=1==r.isNull?1:0,r.isUnique=1==r.isUnique?1:0,r.isHidden=1==r.isHidden?1:0,r.isQuery=1==r.isQuery?1:0,\"\"!==r.name&&null!==r.name&&void 0!==r.name){if(r.name=r.name.trim(),a.includes(r.name))return void this.$message({message:\"[\"+r.name+\"]自定义字段标识名与系统字段重复，请使用其他字段！\",type:\"error\"});if(i.includes(r.name))return void this.$message({message:\"第\"+(l+1)+\"行[\"+r.name+\"]自定义字段标识名重复\",type:\"error\"});i.push(r.name)}if(!r.name)return void this.$message({type:\"error\",message:\"第\"+(l+1)+\"行自定义字段，标识名不能为空\"});if(\"select\"==r.formType||\"checkbox\"==r.formType){for(var d=[],c=0;c<r.showSetting.length;c++){var u=r.showSetting[c];u.value&&d.push(u.value)}r.options=d.join(\",\"),\"checkbox\"==r.formType&&(r.defaultValue=r.defaultValue.join(\",\"))}else if(\"mobile\"==r.formType&&r.defaultValue){if(!Object(_.v)(r.defaultValue))return void this.$message({message:\"第\"+(l+1)+\"行（\"+r.name+\"）自定义字段输入的默认值手机格式有误\",type:\"error\"})}else if(\"email\"==r.formType&&r.defaultValue&&!Object(_.u)(r.defaultValue))return void this.$message({message:\"第\"+(l+1)+\"行（\"+r.name+\"）自定义字段输入的默认值邮箱格式有误\",type:\"error\"});r.type=this.getTypeFromFormType(r.formType)}this.loading=!0;var f={};f.data=t,f.label=this.$route.params.label,\"oa_examine\"===this.$route.params.type&&(f.categoryId=this.$route.params.id);var m=!0,p=!1,h=void 0;try{for(var v,b=s()(f.data);!(m=(v=b.next()).done);m=!0){var g=v.value;for(var x in g)\"{}\"==n()(g[x])&&(g[x]=null)}}catch(e){p=!0,h=e}finally{try{!m&&b.return&&b.return()}finally{if(p)throw h}}(\"oa_examine\"===this.$route.params.type?o.x:o.t)(f).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.getCustomInfo()}).catch(function(){e.loading=!1,e.getCustomInfo()})}},getTypeFromFormType:function(e){return{text:1,textarea:2,select:3,date:4,number:5,floatnumber:6,mobile:7,file:8,checkbox:9,user:10,structure:12,datetime:13,email:14,customer:15,business:16,contacts:17,map_address:18,category:19,contract:20,receivables_plan:21,single_user:28}[e]||\"0\"},handleCancel:function(){this.$router.go(-1)},handleEnd:function(e){if(!this.rejectHandle){var t=new p.default({name:this.movedItem.name,formType:this.movedItem.formType});this.form&&\"form\"===this.form.formType&&\"form\"!==this.movedItem.formType?this.form.formValue.push(t):(this.fieldArr.push(t),this.selectedIndex=this.fieldArr.length-1)}},handleMove:function(e){this.movedItem=e},handleClick:function(e){this.movedItem=e,this.handleEnd()},handleListMove:function(e){this.selectedIndex=e.newIndex},getTitle:function(){return\"crm_leads\"==this.$route.params.type?\"线索\":\"crm_customer\"==this.$route.params.type?\"客户\":\"crm_contacts\"==this.$route.params.type?\"联系人\":\"crm_business\"==this.$route.params.type?\"商机\":\"crm_contract\"==this.$route.params.type?\"合同\":\"crm_product\"==this.$route.params.type?\"产品\":\"crm_receivables\"==this.$route.params.type?\"回款\":\"crm_visit\"==this.$route.params.type?\"客户回访\":\"\"},getTransformField:function(){var e=this;Object(d.x)({label:r.default.customer}).then(function(t){for(var i={text:[],textarea:[],select:[],checkbox:[],number:[],floatnumber:[],mobile:[],email:[],date:[],datetime:[],user:[],structure:[]},a=0;a<t.data.length;a++){var n=t.data[a],l=i[n.formType];l&&l.push({label:n.name,value:n.fieldId})}e.transformData=i}).catch(function(){})}}},g=(i(\"kT6N\"),i(\"KHd+\")),x=Object(g.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"flexbox\",{staticClass:\"main\",style:{height:e.contentHeight+\"px\"},attrs:{orient:\"vertical\",align:\"stretch\"}},[a(\"div\",{staticClass:\"title\"},[e._v(e._s(\"编辑\"+e.getTitle()+\"字段\"))]),e._v(\" \"),a(\"el-container\",{staticClass:\"wrapper\"},[a(\"el-aside\",{staticClass:\"left\"},[a(\"div\",{staticClass:\"mini-title\"},[e._v(\"字段库\")]),e._v(\" \"),a(\"ul\",[a(\"draggable\",{staticClass:\"list-wrapper\",attrs:{list:e.fieldList,options:{group:{pull:\"clone\",put:!1,name:\"list\"},forceFallback:!0,sort:!1},clone:e.handleMove},on:{end:e.handleEnd}},e._l(e.fieldList,function(t){return a(\"li\",{key:t.id,staticClass:\"field-item\",on:{click:function(i){e.handleClick(t)}}},[a(\"img\",{staticClass:\"icon\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:t.icon}}),e._v(\" \"),a(\"span\",[e._v(e._s(t.name))])])}))],1)]),e._v(\" \"),a(\"el-container\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"content\"},[a(\"el-header\",[a(\"el-button\",{staticStyle:{padding:\"8px 22px\",\"border-radius\":\"2px\"},attrs:{type:\"text\"},on:{click:e.handlePreview}},[e._v(\"预览\")]),e._v(\" \"),a(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleSave,expression:\"handleSave\"}],staticStyle:{padding:\"8px 22px\",\"border-radius\":\"2px\"},attrs:{type:\"primary\"}},[e._v(\"保存\")]),e._v(\" \"),a(\"el-button\",{staticStyle:{padding:\"8px 22px\",\"border-radius\":\"2px\"},on:{click:e.handleCancel}},[e._v(\"返回\")])],1),e._v(\" \"),a(\"el-main\",[a(\"draggable\",{attrs:{list:e.fieldArr,options:{group:\"list\",forceFallback:!0,fallbackClass:\"draggingStyle\"}},on:{end:e.handleListMove}},e._l(e.fieldArr,function(t,i){return a(e._f(\"typeToComponentName\")(t),{key:i,tag:\"component\",class:{selected:e.selectedIndex==i},attrs:{\"is-show\":e.selectedIndex==i&&(null==t.operating||0==t.operating||2==t.operating),attr:t},on:{delete:function(a){e.handleDelete(t,i)},select:e.handleChildSelect},nativeOn:{click:function(a){e.handleSelect(t,i)}}})})),e._v(\" \"),0==e.fieldArr.length?a(\"p\",{staticClass:\"no-list\"},[e._v(\"从左侧点击或拖拽来添加字段\")]):e._e()],1)],1),e._v(\" \"),a(\"el-aside\",{staticClass:\"right\",attrs:{width:\"310px\"}},[a(\"div\",{staticClass:\"mini-title\"},[e._v(\"字段属性\")]),e._v(\" \"),e.form?a(\"field-info\",{attrs:{field:e.form,\"can-transform\":e.canTransform,\"transform-data\":e.transformData,\"can-unique\":e.canUnique}}):e._e()],1)],1),e._v(\" \"),e.showTablePreview?a(\"preview-field-view\",{attrs:{types:e.tablePreviewData.type,\"types-id\":e.tablePreviewData.id,label:e.tablePreviewData.label},on:{\"hiden-view\":function(t){e.showTablePreview=!1}}}):e._e()],1)},[],!1,null,\"136313b3\",null);x.options.__file=\"HandleField.vue\";t.default=x.exports},LYvm:function(e,t,i){},\"M6+M\":function(e,t,i){\"use strict\";i.r(t);var a={name:\"FileForm\",mixins:[i(\"v4DC\").default],data:function(){return{}}},n=(i(\"gydz\"),i(\"KHd+\")),l=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"box-wrapper\"},[i(\"div\",{staticClass:\"title\"},[i(\"span\",[e._v(e._s(e.attr.isNull?\"*\":\"\"))]),e._v(e._s(e.attr.name)),e.attr.inputTips?i(\"span\",[e._v(e._s(\"（\"+e.attr.inputTips+\"）\"))]):e._e()]),e._v(\" \"),i(\"div\",{staticClass:\"box\"},[e._v(\"\\n    请选择文件\\n  \")]),e._v(\" \"),e.isShow?i(\"span\",{staticClass:\"el-icon-delete control\",on:{click:e.handleDelete}}):e._e()])},[],!1,null,\"be8de354\",null);l.options.__file=\"FileForm.vue\";t.default=l.exports},O0dc:function(e,t,i){e.exports=i.p+\"static/img/field_email.12fa1ed.png\"},\"Ov/h\":function(e,t,i){},PlSB:function(e,t,i){\"use strict\";i.r(t);var a={name:\"MultiLineText\",mixins:[i(\"v4DC\").default]},n=(i(\"Q6UT\"),i(\"KHd+\")),l=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"box-wrapper\"},[i(\"div\",{staticClass:\"title\"},[i(\"span\",[e._v(e._s(e.attr.isNull?\"*\":\"\"))]),e._v(e._s(e.attr.name)),e.attr.inputTips?i(\"span\",[e._v(e._s(\"（\"+e.attr.inputTips+\"）\"))]):e._e()]),e._v(\" \"),i(\"div\",{staticClass:\"box\"},[i(\"div\",{staticClass:\"box-content\"},[e._v(e._s(e.attr.defaultValue))]),e._v(\" \"),i(\"div\",{staticClass:\"max-tips\"},[e._v(e._s(e.attr.defaultValue.length+\"/\"+e.attr.maxLength))])]),e._v(\" \"),e.isShow?i(\"span\",{staticClass:\"el-icon-delete control\",on:{click:e.handleDelete}}):e._e()])},[],!1,null,\"6d573642\",null);l.options.__file=\"MultiLineText.vue\";t.default=l.exports},Q6UT:function(e,t,i){\"use strict\";var a=i(\"YvHj\");i.n(a).a},QCDw:function(e,t,i){},R3jH:function(e,t,i){},R5h8:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"picField\",function(){return n});var a=[{componentName:\"SingleLineText\",formType:\"text\",name:\"单行文本\",icon:i(\"K7ww\")},{componentName:\"MultiLineText\",formType:\"textarea\",name:\"多行文本\",icon:i(\"wMF8\")},{componentName:\"SelectForm\",formType:\"select\",name:\"下拉框\",icon:i(\"GiLK\")},{componentName:\"CheckboxForm\",formType:\"checkbox\",name:\"多选\",icon:i(\"z3hc\")},{componentName:\"SingleLineText\",formType:\"number\",name:\"数字\",icon:i(\"zE+D\")},{componentName:\"SingleLineText\",formType:\"floatnumber\",name:\"货币\",icon:i(\"tDqI\")},{componentName:\"SingleLineText\",formType:\"mobile\",name:\"手机\",icon:i(\"6C7d\")},{componentName:\"SingleLineText\",formType:\"email\",name:\"邮箱\",icon:i(\"O0dc\")},{componentName:\"SingleLineText\",formType:\"date\",name:\"日期\",icon:i(\"/hTO\")},{componentName:\"SingleLineText\",formType:\"datetime\",name:\"日期时间\",icon:i(\"4nTe\")},{componentName:\"SingleLineText\",formType:\"user\",name:\"人员\",icon:i(\"d3cR\")},{componentName:\"SingleLineText\",formType:\"structure\",name:\"部门\",icon:i(\"DwbV\")},{componentName:\"FileForm\",formType:\"file\",name:\"附件\",icon:i(\"+9MU\")}],n={componentName:\"FileForm\",formType:\"pic\",name:\"图片\",icon:i(\"+9MU\")};t.default=a},SWpq:function(e,t,i){\"use strict\";var a=i(\"rr4U\");i.n(a).a},\"UJd+\":function(e,t,i){},V7oC:function(e,t,i){\"use strict\";t.__esModule=!0;var a,n=i(\"SEkw\"),l=(a=n)&&a.__esModule?a:{default:a};t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),(0,l.default)(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}()},WZAs:function(e,t,i){\"use strict\";i.r(t);var a=i(\"v4DC\"),n=i(\"t2rG\"),l={name:\"TableForm\",components:{draggable:i.n(n).a},mixins:[a.default],data:function(){return{selectIndex:-1}},computed:{},mounted:function(){},methods:{selectItem:function(e,t){this.selectIndex=t,this.$emit(\"select\",{data:e,index:t})}}},s=(i(\"SWpq\"),i(\"KHd+\")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"box-wrapper\"},[i(\"div\",{staticClass:\"title\"},[i(\"span\",[e._v(e._s(e.attr.isNull?\"*\":\"\"))]),e._v(e._s(e.attr.name)),e.attr.inputTips?i(\"span\",[e._v(e._s(\"（\"+e.attr.inputTips+\"）\"))]):e._e()]),e._v(\" \"),i(\"ul\",{staticClass:\"table\"},[i(\"draggable\",{attrs:{list:e.attr.formValue,options:{name:\"list\"}}},e._l(e.attr.formValue,function(t,a){return i(\"li\",{key:a,staticClass:\"table-item\",class:{\"is-select\":e.selectIndex===a},on:{click:function(i){i.stopPropagation(),e.selectItem(t,a)}}},[i(\"div\",{staticClass:\"table-item-head\"},[e._v(e._s(t.name))]),e._v(\" \"),i(\"div\",{staticClass:\"table-item-body\"})])}))],1),e._v(\" \"),e.isShow?i(\"span\",{staticClass:\"el-icon-delete control\",on:{click:e.handleDelete}}):e._e()])},[],!1,null,\"0c1b5982\",null);r.options.__file=\"TableForm.vue\";t.default=r.exports},Xg46:function(e,t,i){\"use strict\";i.r(t);var a=i(\"iCc5\"),n=i.n(a),l=i(\"V7oC\"),s=i.n(l),r=function(){function e(t){n()(this,e),this.fieldType=0,this.fieldId=t.fieldId||\"\",this.name=t.name||\"\",this.formType=t.formType||\"\",this.isUnique=t.isUnique||!1,this.isNull=t.isNull||!1,this.isHidden=t.isHidden||!1,this.inputTips=t.inputTips||\"\",\"textarea\"===this.formType&&(this.maxLength=t.maxLength||1e3),\"checkbox\"===this.formType?this.defaultValue=t.defaultValue||[]:this.defaultValue=t.defaultValue||\"\",\"form\"===this.formType&&(this.formValue=t.formValue||[]),this.setting=t.setting||[],this.showSetting=t.showSetting||[],this.componentName=\"\",this.isDeleted=0}return s()(e,[{key:\"check\",value:function(){return\"\"===this.name?\"字段名称不能为空\":\"\"}}]),e}();t.default=r},Y7mK:function(e,t,i){\"use strict\";var a=i(\"QCDw\");i.n(a).a},YvHj:function(e,t,i){},ZZ37:function(e,t,i){\"use strict\";i.r(t);var a={name:\"SelectForm\",mixins:[i(\"v4DC\").default],data:function(){return{}},computed:{}},n=(i(\"Y7mK\"),i(\"KHd+\")),l=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"box-wrapper\"},[i(\"div\",{staticClass:\"title\"},[i(\"span\",[e._v(e._s(e.attr.isNull?\"*\":\"\"))]),e._v(e._s(e.attr.name)),e.attr.inputTips?i(\"span\",[e._v(e._s(\"（\"+e.attr.inputTips+\"）\"))]):e._e()]),e._v(\" \"),i(\"div\",{staticClass:\"box\"},[i(\"flexbox\",{staticClass:\"select-box\"},[i(\"div\",[e._v(e._s(e.attr.defaultValue?e.attr.defaultValue:\"请选择\"))]),e._v(\" \"),i(\"i\",{staticClass:\"el-icon-arrow-down el-icon--right\"})])],1),e._v(\" \"),e.isShow?i(\"span\",{staticClass:\"el-icon-delete control\",on:{click:e.handleDelete}}):e._e()])},[],!1,null,\"cb783e1c\",null);l.options.__file=\"SelectForm.vue\";t.default=l.exports},d3cR:function(e,t,i){e.exports=i.p+\"static/img/field_user.950f240.png\"},e5dI:function(e,t,i){\"use strict\";var a=i(\"lDCd\");i.n(a).a},gydz:function(e,t,i){\"use strict\";var a=i(\"Ov/h\");i.n(a).a},iCc5:function(e,t,i){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},kT6N:function(e,t,i){\"use strict\";var a=i(\"LYvm\");i.n(a).a},lDCd:function(e,t,i){},rr4U:function(e,t,i){},sJra:function(e,t,i){\"use strict\";i.r(t);var a={name:\"SingleLineText\",mixins:[i(\"v4DC\").default]},n=(i(\"xaMe\"),i(\"KHd+\")),l=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"box-wrapper\"},[i(\"div\",{staticClass:\"title\"},[i(\"span\",[e._v(e._s(e.attr.isNull?\"*\":\"\"))]),e._v(e._s(e.attr.name)),e.attr.inputTips?i(\"span\",[e._v(e._s(\"（\"+e.attr.inputTips+\"）\"))]):e._e()]),e._v(\" \"),i(\"div\",{staticClass:\"box\"},[i(\"span\",{staticClass:\"default-val\"},[e._v(e._s(\"string\"==typeof e.attr.defaultValue?e.attr.defaultValue:\"\"))])]),e._v(\" \"),e.isShow?i(\"span\",{staticClass:\"el-icon-delete control\",on:{click:e.handleDelete}}):e._e()])},[],!1,null,\"3f8abc58\",null);l.options.__file=\"SingleLineText.vue\";t.default=l.exports},tDqI:function(e,t,i){e.exports=i.p+\"static/img/field_floatnumber.76bdd14.png\"},v4DC:function(e,t,i){\"use strict\";i.r(t),t.default={data:function(){return{}},props:{attr:{required:!0},isShow:{type:Boolean,default:!0}},filters:{},methods:{handleDelete:function(){this.$emit(\"delete\")}}}},wMF8:function(e,t,i){e.exports=i.p+\"static/img/field_multi_line.f77dbd9.png\"},xaMe:function(e,t,i){\"use strict\";var a=i(\"R3jH\");i.n(a).a},z3hc:function(e,t,i){e.exports=i.p+\"static/img/field_checkbox.ed6dd76.png\"},\"zE+D\":function(e,t,i){e.exports=i.p+\"static/img/field_number.d19f8aa.png\"}}]);","extractedComments":[]}