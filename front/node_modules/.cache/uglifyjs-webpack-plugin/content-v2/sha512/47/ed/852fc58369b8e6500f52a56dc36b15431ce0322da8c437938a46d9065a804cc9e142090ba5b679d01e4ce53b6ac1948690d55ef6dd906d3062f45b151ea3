{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-53fb\"],{\"+zDE\":function(t,e,a){\"use strict\";var n=a(\"48D9\");a.n(n).a},\"1CbL\":function(t,e,a){},\"31UX\":function(t,e,a){\"use strict\";a.r(e);var n=a(\"4d7F\"),s=a.n(n),o=a(\"CMIa\"),i=a(\"ehos\"),r=a(\"7Qib\");e.default={data:function(){return{chartObj:null,chartOtherObj:null,chartColors:[\"#6CA2FF\",\"#6AC9D7\",\"#72DCA2\",\"#48E78D\",\"#FECD51\",\"#DBB375\",\"#FF7474\",\"#F59561\",\"#A3AEBC\",\"#4C84FF\",\"#0DBEB4\",\"#00DEDE\",\"#FFAA00\",\"#C7C116\",\"#F7A57C\",\"#F661AC\",\"#8652EE\"],currentPage:1,pageSizes:[15,30,45,60],pageSize:0,total:0,toolbox:{showTitle:!1,feature:{saveAsImage:{show:!0,pixelRatio:2}}}}},components:{FiltrateHandleView:o.default},props:{},computed:{},watch:{},mounted:function(){var t=this;this.debouncedResize=Object(i.debounce)(300,this.resizeFn),this.$nextTick(function(){window.addEventListener(\"resize\",t.debouncedResize)})},beforeDestroy:function(){window.removeEventListener(\"resize\",this.debouncedResize)},methods:{resizeFn:function(){this.chartObj&&this.chartObj.resize(),this.chartOtherObj&&this.chartOtherObj.resize()},handleSizeChange:function(t){this.pageData.limit=t,this.getList(this.pageData)},handleCurrentChange:function(t){this.pageData.page=t,this.getList(this.pageData)},requestExportInfo:function(t,e){return new s.a(function(a,n){t(e).then(function(t){Object(r.c)(t),a&&a(t)}).catch(function(t){n&&n(t)})})}},deactivated:function(){}}},\"48D9\":function(t,e,a){},\"77fj\":function(t,e,a){\"use strict\";var n=a(\"Btlj\");a.n(n).a},\"9kPm\":function(t,e,a){\"use strict\";a.r(e),e.default={data:function(){return{showTable:!0}},methods:{mixinSortFn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"ascending\";if(\"[object Array]\"!==Object.prototype.toString.call(t))return[];if(!e)return t;t.sort(function(t,n){if(t[e]===n[e])return 0;var s=isNaN(Number(t[e]))||isNaN(Number(n[e]))?t[e]<n[e]:Number(t[e])<Number(n[e]);return\"descending\"===a?s?1:-1:s?-1:1})}}}},Btlj:function(t,e,a){},CMIa:function(t,e,a){\"use strict\";a.r(e);var n=a(\"KTTK\"),s=a(\"ERJp\"),o=a(\"6iAj\"),i=a(\"UCfG\"),r=a(\"HHBN\"),u=a(\"ZX9L\"),l=a(\"wd/R\"),c=a.n(l),p={name:\"FiltrateHandleView\",components:{TimeTypeSelect:u.a,XhStructureCell:i.a,XhUserCell:r.a},props:{moduleType:{type:String},title:{type:String,default:\"\"},showFilterView:{default:!0,type:Boolean},showYearSelect:{default:!1,type:Boolean},showBusinessSelect:{default:!1,type:Boolean},showUserSelect:{default:!0,type:Boolean},showCustomSelect:{default:!1,type:Boolean},customDefault:\"\",customOptions:{default:function(){return[]},type:Array},showProductSelect:{default:!1,type:Boolean}},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},yearValue:\"\",timeTypeValue:{},dataSelect:1,structuresSelectValue:[],userSelectValue:[],businessOptions:[],businessStatusValue:\"\",productValue:[],productOptions:[],customValue:\"\"}},computed:{showUserStrucSelect:function(){return this.showUserSelect}},watch:{},mounted:function(){var t=this;this.showCustomSelect&&(this.customValue=this.customDefault),this.showYearSelect&&(this.yearValue=c()(new Date).year().toString()),this.$emit(\"load\"),this.showBusinessSelect?this.getBusinessStatusList(function(){t.postFiltrateValue()}):this.postFiltrateValue(),this.showProductSelect&&this.getProductCategoryIndex()},beforeDestroy:function(){},methods:{structureChange:function(t){this.structuresSelectValue=t.value||[]},userChange:function(t){this.userSelectValue=t.value||[]},customSelectChange:function(){this.$emit(\"typeChange\",this.customValue)},timeTypeChange:function(t){this.timeTypeValue=t},structuresValueChange:function(t){this.showUserSelect&&(this.userSelectValue=\"\",this.userOptions=[],this.getUserList())},getUserList:function(){var t=this,e={};e.deptId=this.structuresSelectValue,Object(n.u)(e).then(function(e){t.userOptions=e.data}).catch(function(){t.$emit(\"error\")})},getBusinessStatusList:function(t){var e=this;Object(s.v)().then(function(a){var n=a.data||[];e.businessOptions=n.filter(function(t){return 1===t.status}),e.businessOptions.length>0&&(e.businessStatusValue=e.businessOptions[0].typeId),t(!0)}).catch(function(){e.$emit(\"error\")})},getProductCategoryIndex:function(){var t=this;Object(o.L)({type:\"tree\"}).then(function(e){t.productOptions=e.data}).catch(function(){})},postFiltrateValue:function(){var t={};this.showUserStrucSelect?1==this.dataSelect&&(t.deptId=this.structuresSelectValue.length>0?this.structuresSelectValue[0].id:\"\"):t.deptId=this.structuresSelectValue.length>0?this.structuresSelectValue[0].id:\"\",this.showUserStrucSelect&&(t.isUser=2==this.dataSelect?1:0),this.showUserSelect&&2==this.dataSelect&&(t.userId=this.userSelectValue.length>0?this.userSelectValue[0].userId:\"\"),this.showBusinessSelect&&(t.typeId=this.businessStatusValue),this.showProductSelect&&(t.categoryId=this.productValue.length>0?this.productValue[this.productValue.length-1]:\"\"),this.showYearSelect?t.year=this.yearValue:\"custom\"==this.timeTypeValue.type?(t.startTime=this.timeTypeValue.startTime,t.endTime=this.timeTypeValue.endTime):t.type=this.timeTypeValue.value,this.$emit(\"change\",t)}}},d=(a(\"yl8z\"),a(\"KHd+\")),h=Object(d.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"flexbox\",{staticClass:\"filtrate-content\",attrs:{justify:\"flex-start\"}},[a(\"flexbox\",{staticClass:\"title-box\",attrs:{justify:\"flex-start\"}},[a(\"div\",{staticClass:\"icon-box\"},[a(\"span\",{staticClass:\"wk wk-my-task icon\"})]),t._v(\" \"),a(\"span\",{staticClass:\"text\"},[t._v(t._s(t.title))])]),t._v(\" \"),t.showFilterView?[t.showYearSelect?t._e():a(\"time-type-select\",{on:{change:t.timeTypeChange}}),t._v(\" \"),t.showYearSelect?a(\"el-date-picker\",{attrs:{clearable:!1,\"picker-options\":t.pickerOptions,type:\"year\",\"value-format\":\"yyyy\",placeholder:\"选择年\"},model:{value:t.yearValue,callback:function(e){t.yearValue=e},expression:\"yearValue\"}}):t._e(),t._v(\" \"),t.showUserStrucSelect?a(\"el-select\",{model:{value:t.dataSelect,callback:function(e){t.dataSelect=e},expression:\"dataSelect\"}},t._l([{label:\"按部门\",value:1},{label:\"按员工\",value:2}],function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})):t._e(),t._v(\" \"),1==t.dataSelect?a(\"xh-structure-cell\",{staticClass:\"xh-structure-cell\",attrs:{radio:\"\",placeholder:\"选择部门（默认为本部门及下属部门）\"},on:{\"value-change\":t.structureChange}}):t._e(),t._v(\" \"),2==t.dataSelect&&t.showUserSelect?a(\"xh-user-cell\",{staticClass:\"xh-user-cell\",attrs:{radio:\"\",placeholder:\"选择员工（默认为本人及下属）\\n\"},on:{\"value-change\":t.userChange}}):t._e(),t._v(\" \"),t.showBusinessSelect?a(\"el-select\",{attrs:{placeholder:\"商机组\"},model:{value:t.businessStatusValue,callback:function(e){t.businessStatusValue=e},expression:\"businessStatusValue\"}},t._l(t.businessOptions,function(t){return a(\"el-option\",{key:t.typeId,attrs:{label:t.name,value:t.typeId}})})):t._e(),t._v(\" \"),t.showProductSelect?a(\"el-cascader\",{staticStyle:{width:\"100%\"},attrs:{options:t.productOptions,\"show-all-levels\":!1,props:{children:\"children\",label:\"label\",value:\"categoryId\"},\"change-on-select\":\"\"},model:{value:t.productValue,callback:function(e){t.productValue=e},expression:\"productValue\"}}):t._e(),t._v(\" \"),t.showCustomSelect?a(\"el-select\",{on:{change:t.customSelectChange},model:{value:t.customValue,callback:function(e){t.customValue=e},expression:\"customValue\"}},t._l(t.customOptions,function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.name,value:t.value}})})):t._e(),t._v(\" \"),t._t(\"append\"),t._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},nativeOn:{click:function(e){t.postFiltrateValue()}}},[t._v(\"搜索\")]),t._v(\" \"),t._t(\"default\")]:t._e()],2)},[],!1,null,\"4dd77065\",null);h.options.__file=\"FiltrateHandleView.vue\";e.default=h.exports},JgLm:function(t,e,a){\"use strict\";a.d(e,\"s\",function(){return s}),a.d(e,\"t\",function(){return o}),a.d(e,\"u\",function(){return i}),a.d(e,\"p\",function(){return r}),a.d(e,\"l\",function(){return u}),a.d(e,\"m\",function(){return l}),a.d(e,\"n\",function(){return c}),a.d(e,\"o\",function(){return p}),a.d(e,\"d\",function(){return d}),a.d(e,\"c\",function(){return h}),a.d(e,\"e\",function(){return f}),a.d(e,\"f\",function(){return m}),a.d(e,\"g\",function(){return y}),a.d(e,\"v\",function(){return b}),a.d(e,\"w\",function(){return C}),a.d(e,\"x\",function(){return v}),a.d(e,\"a\",function(){return T}),a.d(e,\"b\",function(){return g}),a.d(e,\"h\",function(){return S}),a.d(e,\"i\",function(){return w}),a.d(e,\"q\",function(){return j}),a.d(e,\"r\",function(){return V}),a.d(e,\"k\",function(){return O}),a.d(e,\"j\",function(){return _});var n=a(\"t3Un\");function s(t){return Object(n.a)({url:\"biCustomer/totalCustomerStats\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(n.a)({url:\"biCustomer/totalCustomerTable\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function i(t){return Object(n.a)({url:\"biCustomer/totalCustomerTableExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function r(t){return Object(n.a)({url:\"biCustomer/customerRecordStats\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function u(t){return Object(n.a)({url:\"biCustomer/customerRecordInfo\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function l(t){return Object(n.a)({url:\"biCustomer/customerRecordInfoExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function c(t){return Object(n.a)({url:\"biCustomer/customerRecodCategoryStats\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function p(t){return Object(n.a)({url:\"biCustomer/customerRecodCategoryStatsExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function d(t){return Object(n.a)({url:\"biCustomer/customerConversionInfo\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function h(t){return Object(n.a)({url:\"biCustomer/customerConversionStats\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function f(t){return Object(n.a)({url:\"biCustomer/poolStats\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function m(t){return Object(n.a)({url:\"biCustomer/poolTable\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function y(t){return Object(n.a)({url:\"biCustomer/poolTableExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function b(t){return Object(n.a)({url:\"biCustomer/employeeCycle\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function C(t){return Object(n.a)({url:\"biCustomer/employeeCycleInfoExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function v(t){return Object(n.a)({url:\"biCustomer/employeeCycleInfo\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function T(t){return Object(n.a)({url:\"biCustomer/districtCycle\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function g(t){return Object(n.a)({url:\"biCustomer/districtCycleExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function S(t){return Object(n.a)({url:\"biCustomer/productCycle\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function w(t){return Object(n.a)({url:\"biCustomer/productCycleExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function j(t){return Object(n.a)({url:\"biCustomer/customerSatisfactionTable\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function V(t){return Object(n.a)({url:\"biCustomer/customerSatisfactionExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function O(t){return Object(n.a)({url:\"biCustomer/productSatisfactionTable\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function _(t){return Object(n.a)({url:\"biCustomer/productSatisfactionExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}},ZX9L:function(t,e,a){\"use strict\";var n={name:\"TimeTypeSelect\",props:{defaultType:[String,Object],width:{type:Number,default:200},options:{type:Array,default:function(){return[{label:\"今天\",value:\"today\"},{label:\"昨天\",value:\"yesterday\"},{label:\"本周\",value:\"week\"},{label:\"上周\",value:\"lastWeek\"},{label:\"本月\",value:\"month\"},{label:\"上月\",value:\"lastMonth\"},{label:\"本季度\",value:\"quarter\"},{label:\"上季度\",value:\"lastQuarter\"},{label:\"本年\",value:\"year\"},{label:\"去年\",value:\"lastYear\"}]}}},data:function(){return{selectType:{label:\"本年\",value:\"year\"},showTypePopover:!1,showCustomContent:!1,sureCustomContent:!1,startTime:\"\",endTime:\"\"}},computed:{typeShowValue:function(){return this.sureCustomContent?this.startTime||this.endTime?(this.startTime||\"\")+\"-\"+(this.endTime||\"\"):\"\":this.selectType.label}},watch:{defaultType:function(){this.selectType.value!=this.defaultType&&(this.selectType=this.getDefaultTypeValue(this.defaultType))}},mounted:function(){void 0!==this.defaultType?\"string\"==typeof this.defaultType?this.selectType=this.getDefaultTypeValue(this.defaultType):this.defaultType.label?this.selectType=this.defaultType:\"default\"==this.defaultType.type?this.selectType=this.getDefaultTypeValue(this.defaultType.value):\"custom\"==this.defaultType.type&&(this.sureCustomContent=!0,this.showCustomContent=!0,this.startTime=this.defaultType.startTime,this.endTime=this.defaultType.endTime):this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},methods:{getDefaultTypeValue:function(t){for(var e=0;e<this.options.length;e++){var a=this.options[e];if(a.value==t)return a}return{label:\"本年\",value:\"year\"}},typeSelectClick:function(t){this.showTypePopover=!1,this.sureCustomContent=!1,this.showCustomContent=!1,this.selectType=t,this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},customSureClick:function(){this.startTime&&this.endTime&&(this.sureCustomContent=!0,this.showTypePopover=!1,this.$emit(\"change\",{type:\"custom\",startTime:this.startTime,endTime:this.endTime}))}}},s=(a(\"77fj\"),a(\"KHd+\")),o=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"el-popover\",{staticClass:\"time-type-select\",attrs:{width:t.width,placement:\"bottom\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showTypePopover,callback:function(e){t.showTypePopover=e},expression:\"showTypePopover\"}},[a(\"div\",{staticClass:\"type-popper\"},[a(\"div\",{staticClass:\"type-content\"},[t._l(t.options,function(e,n){return a(\"div\",{key:n,staticClass:\"type-content-item\",class:{selected:t.selectType.value==e.value&&!t.showCustomContent},on:{click:function(a){t.typeSelectClick(e)}}},[a(\"div\",{staticClass:\"mark\"}),t._v(t._s(e.label)+\"\\n      \")])}),t._v(\" \"),a(\"div\",{staticClass:\"type-content-item\",class:{selected:t.showCustomContent},on:{click:function(e){t.showCustomContent=!0}}},[a(\"div\",{staticClass:\"mark\"}),t._v(\"自定义\\n      \")])],2),t._v(\" \"),t.showCustomContent?a(\"div\",{staticClass:\"type-content-custom\"},[a(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:\"startTime\"}}),t._v(\" \"),a(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:\"endTime\"}}),t._v(\" \"),a(\"el-button\",{on:{click:t.customSureClick}},[t._v(\"确定\")])],1):t._e()]),t._v(\" \"),a(\"el-input\",{staticClass:\"type-select\",style:{width:t.width+\"px\"},attrs:{slot:\"reference\",readonly:!0},slot:\"reference\",model:{value:t.typeShowValue,callback:function(e){t.typeShowValue=e},expression:\"typeShowValue\"}},[a(\"i\",{class:[\"el-icon-arrow-up\",{\"is-reverse\":t.showTypePopover}],attrs:{slot:\"suffix\"},slot:\"suffix\"})])],1)},[],!1,null,\"20503202\",null);o.options.__file=\"index.vue\";e.a=o.exports},kZvv:function(t,e,a){\"use strict\";a.r(e);var n=a(\"9kPm\"),s=a(\"31UX\"),o=a(\"JgLm\"),i={name:\"ProductSatisfaction\",components:{FiltrateHandleView:a(\"CMIa\").default},mixins:[s.default,n.default],data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-200,postParams:{},list:[],fieldList:[]}},computed:{},mounted:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-200}},methods:{getDataList:function(t){var e=this;this.postParams=t,this.loading=!0,Object(o.k)(t).then(function(t){var a=t.data||[];if(0==e.fieldList.length&&a.length>0){var n=a[0],s=[];for(var o in n)\"productName\"!==o&&\"visitNum\"!==o&&s.push({field:o,name:o});e.fieldList=[{field:\"productName\",name:\"产品名称\"},{field:\"visitNum\",name:\"回访次数\"}].concat(s)}e.list=a,e.loading=!1}).catch(function(){e.loading=!1})},exportClick:function(){this.requestExportInfo(o.j,this.postParams)}}},r=(a(\"+zDE\"),a(\"KHd+\")),u=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"main-container\"},[a(\"filtrate-handle-view\",{staticClass:\"filtrate-bar\",attrs:{title:\"产品满意度分析\",\"module-type\":\"contract\"},on:{load:function(e){t.loading=!0},change:t.getDataList}},[a(\"el-button\",{staticClass:\"export-button\",attrs:{type:\"primary\"},nativeOn:{click:function(e){return t.exportClick(e)}}},[t._v(\"导出\")])],1),t._v(\" \"),a(\"div\",{staticClass:\"content\"},[a(\"div\",{staticClass:\"table-content\"},[a(\"el-table\",{attrs:{data:t.list,height:t.tableHeight,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"sort-change\":function(e){var a=e.prop,n=e.order;return t.mixinSortFn(t.list,a,n)}}},t._l(t.fieldList,function(t,e){return a(\"el-table-column\",{key:e,attrs:{prop:t.field,label:t.name,sortable:\"custom\",align:\"center\",\"header-align\":\"center\",\"show-overflow-tooltip\":\"\"}})}))],1)])],1)},[],!1,null,\"b4ea91e4\",null);u.options.__file=\"ProductSatisfaction.vue\";e.default=u.exports},yl8z:function(t,e,a){\"use strict\";var n=a(\"1CbL\");a.n(n).a}}]);","extractedComments":[]}