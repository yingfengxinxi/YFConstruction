{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-63bb\"],{\"/akV\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"8OTK\"),s=i(\"7Dod\"),l=i(\"d9x6\"),o=i(\"1DpC\"),c=i(\"7Qib\"),r=i(\"dAOq\"),d=i(\"jHPx\"),u={name:\"RelativeReturnMoney\",components:{CRMAllCreate:n.default,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))}},mixins:[a.default,r.a],props:{id:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{list:[],fieldList:[],tableHeight:\"250px\",showFullDetail:!1,showFullCrmType:\"receivables\",showFullId:\"\",createCrmType:\"receivables_plan\",isCreate:!1,palnList:[],planFieldList:[],createActionInfo:{}}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.palnList=[],this.getList(),this.getPlanList()},\"rootTabs.currentName\":function(e){\"RelativeReturnMoney\"===e&&(this.getList(!1),this.getPlanList(!1))}},mounted:function(){this.planFieldList=[{prop:\"num\",width:\"200\",label:\"期数\"},{prop:\"customerName\",width:\"200\",label:\"客户名称\"},{prop:\"contractNum\",width:\"200\",label:\"合同编号\"},{prop:\"money\",width:\"200\",label:\"计划回款金额\"},{prop:\"returnDate\",width:\"200\",label:\"计划回款日期\"},{prop:\"returnType\",width:\"200\",label:\"计划回款方式\"},{prop:\"remind\",width:\"200\",label:\"提前几日提醒\"},{prop:\"remark\",width:\"200\",label:\"备注\"}],this.getPlanList(),this.fieldList=[{prop:\"receivablesNum\",width:\"200\",label:\"回款编号\"},{prop:\"contractName\",width:\"200\",label:\"合同名称\"},{prop:\"contractMoney\",width:\"200\",label:\"合同金额\"},{prop:\"receivablesMoney\",width:\"200\",label:\"回款金额\"},{prop:\"planNum\",width:\"200\",label:\"期数\"},{prop:\"ownerUserName\",width:\"200\",label:\"负责人\"},{prop:\"checkStatus\",width:\"200\",label:\"状态\"},{prop:\"returnTime\",width:\"200\",label:\"回款日期\"}],this.getList()},methods:{getPlanList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t,(0,{customer:s.M,contract:l.l}[this.crmType])(this.getParams()).then(function(t){e.loading=!1,e.palnList=t.data.list}).catch(function(){e.loading=!1})},getList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t,(0,{customer:s.L,contract:l.k}[this.crmType])(this.getParams()).then(function(t){e.loading=!1,e.list=t.data.list}).catch(function(){e.loading=!1})},getParams:function(){return\"customer\"===this.crmType?{customerId:this.id,pageType:0}:\"contract\"===this.crmType?{contractId:this.id,pageType:0}:{}},handleRowClick:function(e,t,i){\"receivablesNum\"==t.property&&(this.showFullId=e.receivablesId,this.showFullCrmType=\"receivables\",this.showFullDetail=!0)},createClick:function(e){this.createActionInfo={type:\"relative\",crmType:this.crmType,data:{}},\"money\"==e?(\"contract\"===this.crmType?(this.createActionInfo.data.customer=Object(c.t)(this.detail),this.createActionInfo.data.contract=Object(c.t)(this.detail)):\"customer\"===this.crmType&&(this.createActionInfo.data.customer=this.detail),this.createCrmType=\"receivables\",this.isCreate=!0):\"plan\"==e&&(\"contract\"===this.crmType?(this.createActionInfo.data.customer=Object(c.t)(this.detail),this.createActionInfo.data.contract=Object(c.t)(this.detail)):\"customer\"===this.crmType&&(this.createActionInfo.data.customer=this.detail),this.createCrmType=\"receivables_plan\",this.isCreate=!0)},saveSuccess:function(){\"receivables\"==this.createCrmType?(this.$bus.emit(\"crm-tab-num-update\"),this.getList()):this.getPlanList()},handleFile:function(e,t){var i=this;\"edit\"==e?(this.createActionInfo={type:\"update\",id:t.row.planId},this.createCrmType=\"receivables_plan\",this.isCreate=!0):\"delete\"==e&&this.$confirm(\"您确定要删除吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(o.g)([t.row.planId]).then(function(e){i.palnList.splice(t.$index,1),i.$message.success(\"删除成功\")}).catch(function(){})}).catch(function(){})},fieldFormatter:function(e,t){return\"checkStatus\"===t.property?this.getStatusName(e.checkStatus):\"contractMoney\"==t.property||\"receivablesMoney\"==t.property?Object(d.h)(e[t.property]||0):e[t.property]},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"receivablesNum\"===t.property?\"can-visit--underline\":\"\"},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getList(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))}}},h=(i(\"CfA6\"),i(\"KHd+\")),m=Object(h.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"rc-cont\"},[i(\"flexbox\",{staticClass:\"rc-head\",staticStyle:{\"margin-top\":\"15px\"},attrs:{direction:\"row-reverse\"}},[e.isSeas?e._e():i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(t){e.createClick(\"money\")}}},[e._v(\"新建回款\")])],1),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick}},e._l(e.fieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,formatter:e.fieldFormatter,label:t.label,\"show-overflow-tooltip\":\"\"}})})),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,\"crm-type\":e.showFullCrmType,id:e.showFullId},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{\"crm-type\":e.createCrmType,action:e.createActionInfo},on:{\"save-success\":e.saveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"0b6cfb18\",null);m.options.__file=\"RelativeReturnMoney.vue\";t.default=m.exports},\"/v8q\":function(e,t,i){\"use strict\";var a=i(\"/zwQ\");i.n(a).a},\"/zwQ\":function(e,t,i){},\"0tpr\":function(e,t,i){\"use strict\";var a=i(\"3531\");i.n(a).a},\"1bNe\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"7Dod\"),n=i(\"Ew9n\"),s=i(\"raay\"),l=i(\"eOwn\"),o=i(\"gTyn\"),c=i(\"w4ZA\"),r=i(\"f2Lb\"),d=i(\"QUqu\"),u=i(\"J7m9\"),h=i(\"/akV\"),m=i(\"3gPr\"),p=i(\"CjUg\"),f=i(\"RDgq\"),v=i(\"35zX\"),b=i(\"rcjs\"),y=i(\"fuED\"),g=i(\"tZ34\"),w=i(\"8OTK\"),x=i(\"f6dm\"),_={name:\"CustomerDetail\",components:{SlideView:n.a,Activity:l.default,ChieflyContacts:o.default,CRMDetailHead:s.default,CRMEditBaseInfo:c.default,RelativeContacts:r.default,RelativeBusiness:d.default,RelativeContract:u.default,RelativeReturnMoney:h.default,RelativeFiles:m.default,RelativeHandle:p.default,RelativeTeam:f.default,RelativeVisit:v.default,CRMAllCreate:w.default,RelativeInvoice:b.default,RelativeProject:y.default,RelativeExpense:g.default},mixins:[x.default],props:{id:[String,Number],poolId:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"customer\",headDetails:[{title:\"客户级别\",value:\"\"},{title:\"成交状态\",value:\"\"},{title:\"负责人\",value:\"\"},{title:\"更新时间\",value:\"\"}],tabCurrentName:\"Activity\",createActionInfo:null,createCRMType:\"\",isCreate:!1,showImportInfo:!0,firstContactsId:\"\",poolAuth:{}}},computed:{activityHandle:function(){var e=[{type:\"task\",label:\"创建任务\"},{type:\"contacts\",label:\"创建联系人\"},{type:\"business\",label:\"创建商机\"},{type:\"contract\",label:\"创建合同\"},{type:\"receivables\",label:\"创建回款\"}];return this.canCreateFollowRecord&&(e=[{type:\"log\",label:\"写跟进\"}].concat(e)),e},tabNames:function(){var e=[];return e.push({label:\"活动\",name:\"Activity\"}),this.crm.customer&&this.crm.customer.read&&e.push({label:\"详细资料\",name:\"CRMEditBaseInfo\"}),this.crm.contacts&&this.crm.contacts.index&&e.push({label:this.getTabName(\"联系人\",this.tabsNumber.contactCount),name:\"RelativeContacts\"}),e.push({label:this.getTabName(\"团队成员\",this.tabsNumber.memberCount),name:\"RelativeTeam\"}),this.crm.business&&this.crm.business.index&&e.push({label:this.getTabName(\"商机\",this.tabsNumber.businessCount),name:\"RelativeBusiness\"}),this.crm.contract&&this.crm.contract.index&&e.push({label:this.getTabName(\"合同\",this.tabsNumber.contractCount),name:\"RelativeContract\"}),this.crm.receivables&&this.crm.receivables.index&&e.push({label:this.getTabName(\"回款\",this.tabsNumber.receivablesCount),name:\"RelativeReturnMoney\"}),this.crm.visit&&this.crm.visit.index&&e.push({label:this.getTabName(\"回访\",this.tabsNumber.returnVisitCount),name:\"RelativeVisit\"}),this.crm.invoice&&this.crm.invoice.index&&e.push({label:this.getTabName(\"发票\",this.tabsNumber.invoiceCount),name:\"RelativeInvoice\"}),this.crm.invoice&&this.crm.invoice.index&&e.push({label:this.getTabName(\"费用\",this.tabsNumber.moneyCount),name:\"RelativeExpense\"}),e.push({label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"}),e.push({label:\"操作记录\",name:\"RelativeHandle\"}),e},isSeasDetail:function(){return this.detailData&&this.detailData.hasOwnProperty(\"isPool\")?1==this.detailData.isPool:this.isSeas},logTyps:function(){return[{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},{icon:\"customer\",color:\"#487DFF\",command:2,label:\"客户\"},{icon:\"o-task\",color:\"#D376FF\",command:11,label:\"任务\"},{icon:\"business\",color:\"#FB9323\",command:5,label:\"商机\"},{icon:\"contract\",color:\"#FD5B4A\",command:6,label:\"合同\"},{icon:\"contacts\",color:\"#27BA4A\",command:3,label:\"联系人\"},{icon:\"receivables\",color:\"#FFB940\",command:7,label:\"回款\"},{icon:\"log\",color:\"#5864FF\",command:8,label:\"日志\"},{icon:\"approve\",color:\"#9376FF\",command:9,label:\"审批\"}]}},watch:{poolId:{handler:function(e){e&&this.getCustomerPoolAuth(e)},deep:!0,immediate:!0}},mounted:function(){},methods:{getCustomerPoolAuth:function(e){var t=this;Object(a.v)({poolId:e}).then(function(e){t.poolAuth=e.data||{}}).catch(function(){})},getDetial:function(){var e=this;this.firstContactsId=\"\",this.loading=!0;var t={customerId:this.id};this.poolId&&(t.poolId=this.poolId),Object(a.O)(t).then(function(t){e.loading=!1,e.detailData=t.data||{},e.firstContactsId=e.detailData.contactsId,e.headDetails[0].value=e.detailData.level;var i=e.headDetails[1];null===e.detailData.dealStatus||\"\"===e.detailData.dealStatus||void 0===e.detailData.dealStatus?(i.showIcon=!1,i.value=\"\"):(i.showIcon=!0,1==e.detailData.dealStatus?(i.icon=\"wk wk-success deal-suc\",i.style={fontSize:\"14px\",color:\"#20b559\",marginRight:\"3px\"},i.value=\"已成交\"):(i.icon=\"wk wk-close deal-un\",i.style={fontSize:\"14px\",color:\"#f95a5a\",marginRight:\"3px\"},i.value=\"未成交\")),e.headDetails[2].title=e.isSeasDetail?\"\":\"负责人\",e.headDetails[2].value=e.detailData.ownerUserName,e.headDetails[3].value=e.detailData.updateTime}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},addChieflyContacts:function(){this.createCRMType=\"contacts\",this.createActionInfo={type:\"relative\",crmType:this.crmType,data:{customer:this.detailData}},this.isCreate=!0},detailHeadHandle:function(e){\"edit\"===e.type?(this.createCRMType=\"customer\",this.createActionInfo={type:\"update\",id:this.id,batchId:this.detailData.batchId},this.isCreate=!0):\"delete\"!==e.type&&\"exit-team\"!==e.type||this.hideView(),\"edit\"!==e.type&&\"deal_status\"!==e.type||this.getDetial(),this.$emit(\"handle\",e)}}},C=(i(\"owrk\"),i(\"KHd+\")),I=Object(C.a)(_,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?i(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[i(\"c-r-m-detail-head\",{attrs:{\"is-seas\":e.isSeasDetail,detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"pool-id\":e.poolId,\"pool-auth\":e.poolAuth,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}},[i(\"template\",{slot:\"name\"},[2==e.detailData.status?i(\"i\",{staticClass:\"wk wk-circle-password\"}):e._e(),e._v(\" \"),e.isSeasDetail?e._e():i(\"el-tooltip\",{attrs:{content:0==e.detailData.star?\"添加关注\":\"取消关注\",effect:\"dark\",placement:\"top\"}},[i(\"i\",{staticClass:\"wk wk-focus-on focus-icon\",class:{active:0!=e.detailData.star},on:{click:function(t){e.toggleStar()}}})])],1)],2),e._v(\" \"),i(\"flexbox\",{staticClass:\"d-container-bd\",attrs:{align:\"stretch\"}},[i(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,a){return i(\"el-tab-pane\",{key:a,attrs:{label:t.label,name:t.name,lazy:\"\"}},[i(t.name,{tag:\"component\",attrs:{detail:e.detailData,\"type-list\":e.logTyps,id:e.id,\"pool-id\":e.poolId,handle:e.activityHandle,\"is-seas\":e.isSeasDetail,\"crm-type\":e.crmType,\"contacts-id\":e.firstContactsId},on:{\"update:contactsId\":function(t){e.firstContactsId=t},\"on-handle\":e.detailHeadHandle}})],1)})),e._v(\" \"),i(\"transition\",{attrs:{name:\"slide-fade\"}},[i(\"el-tabs\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showImportInfo,expression:\"showImportInfo\"}],staticClass:\"d-container-bd--right\",attrs:{value:\"chiefly-contacts\",type:\"border-card\"}},[i(\"el-tab-pane\",{attrs:{label:\"重要信息\",name:\"chiefly-contacts\",lazy:\"\"}},[i(\"chiefly-contacts\",{attrs:{\"contacts-id\":e.firstContactsId,id:e.id,\"pool-id\":e.poolId,\"crm-type\":e.crmType,\"is-seas\":e.isSeasDetail},on:{add:e.addChieflyContacts}})],1)],1)],1)],1)],1):e._e()],1),e._v(\" \"),i(\"el-button\",{staticClass:\"firse-button\",on:{click:function(t){e.showImportInfo=!e.showImportInfo}}},[e._v(\"重\"),i(\"br\"),e._v(\"要\"),i(\"br\"),e._v(\"信\"),i(\"br\"),e._v(\"息\"),i(\"br\"),i(\"i\",{staticClass:\"el-icon-arrow-right el-icon--right\",class:{\"is-reverse\":!e.showImportInfo}})]),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:e.createActionInfo,\"crm-type\":e.createCRMType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"dab335e6\",null);I.options.__file=\"Detail.vue\";t.default=I.exports},3531:function(e,t,i){},\"35zX\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"8OTK\"),s=i(\"7Dod\"),l=i(\"d9x6\"),o=i(\"ERJp\"),c=i(\"AAeT\"),r=i(\"4XAY\"),d={name:\"RelativeVisit\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))},CRMAllCreate:n.default},mixins:[a.default],props:{id:[String,Number],crmType:{type:String,default:\"\"},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:\"400px\",showFullDetail:!1,isCreate:!1,detailId:\"\",createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},showRelativeView:!1,selectionList:[]}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeVisit\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{getFieldList:function(){var e=this;Object(r.A)({label:17}).then(function(t){for(var i=t.data||[],a=[],n=0;n<i.length;n++){var s=i[n];s.fieldId&&a.push({prop:s.fieldName,width:\"150\",label:s.name})}e.fieldList=a}).catch(function(){})},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0==this.fieldList.length&&this.getFieldList(),this.loading=t;var i={customer:s.N,contract:l.m,business:o.m,contacts:c.j}[this.crmType],a={pageType:0};a[this.crmType+\"Id\"]=this.id,i(a).then(function(t){e.nopermission=!1,e.loading=!1,e.list=t.data.list}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},handleRowClick:function(e,t,i){\"visitNumber\"==t.property&&(this.detailId=e.visitId,this.showFullDetail=!0)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"visitNumber\"===t.property?\"can-visit--underline\":\"\"},createClick:function(){\"customer\"==this.crmType?this.createActionInfo.data.customer=this.detail:\"contract\"==this.crmType?(this.createActionInfo.data.customer=this.detail,this.createActionInfo.data.contract=this.detail,this.createActionInfo.relativeData={contractId:this.detail.contractId}):\"business\"==this.crmType?(this.createActionInfo.data.customer=this.detail,this.createActionInfo.data.business=this.detail,this.createActionInfo.relativeData={businessId:this.detail.buseinessId}):\"contacts\"==this.crmType&&(this.createActionInfo.data.customer=this.detail,this.createActionInfo.data.contacts=this.detail,this.createActionInfo.relativeData={contactsId:this.detail.contactsId}),this.isCreate=!0},createSaveSuccess:function(){this.canRelation?this.$refs.crmrelative.refreshList():(this.$bus.emit(\"crm-tab-num-update\"),this.getDetail())},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getDetail(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))}}},u=(i(\"4Avu\"),i(\"KHd+\")),h=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:e.createClick}},[e._v(\"新建回访\")])],1),e._v(\" \"),i(\"el-table\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.fieldList.length>0,expression:\"fieldList.length > 0\"}],staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick}},e._l(e.fieldList,function(e,t){return i(\"el-table-column\",{key:t,attrs:{prop:e.prop,\"min-width\":e.width,label:e.label,\"show-overflow-tooltip\":\"\"}})})),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.detailId,\"crm-type\":\"visit\"},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:e.createActionInfo,\"crm-type\":\"visit\"},on:{\"save-success\":e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"5035fa34\",null);h.options.__file=\"RelativeVisit.vue\";t.default=h.exports},\"3WPT\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"QbLZ\"),n=i.n(a),s=i(\"VcMt\"),l={name:\"InvoiceTitleSet\",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},customerId:[String,Number],detail:Object},data:function(){return{loading:!0,form:{titleType:1},fieldList:[]}},computed:{title:function(){return this.detail?\"编辑发票抬头\":\"新建发票抬头\"},contentHeight:function(){return 2==this.form.titleType?\"190px\":\"300px\"}},watch:{visible:function(){this.visible&&(this.detail&&(this.form=n()({},this.detail)),this.getFieldList())}},mounted:function(){},methods:{getFieldList:function(){var e=this.detail&&2==this.detail.titleType;this.fieldList=[{name:\"抬头类型\",field:\"titleType\",formType:\"select\",setting:[{name:\"单位\",value:1},{name:\"个人\",value:2}]},{name:\"开票抬头\",field:\"invoiceTitle\",formType:\"text\",setting:[]},{name:\"纳税人识别号\",field:\"taxNumber\",formType:\"text\",hidden:e,setting:[]},{name:\"开户行\",field:\"depositBank\",formType:\"text\",hidden:e,setting:[]},{name:\"开户账号\",field:\"depositAccount\",formType:\"text\",hidden:e,setting:[]},{name:\"开票地址\",field:\"depositAddress\",formType:\"text\",hidden:e,setting:[]},{name:\"电话\",field:\"telephone\",formType:\"text\",setting:[]}]},handleCancel:function(){this.form={titleType:1},this.$emit(\"update:visible\",!1)},valueChange:function(){var e=2==this.form.titleType;this.fieldList[2].hidden=e,this.fieldList[3].hidden=e,this.fieldList[4].hidden=e,this.fieldList[5].hidden=e},handleConfirm:function(){var e=this,t={customerId:this.customerId};2==this.form.titleType?(t.titleType=this.form.titleType,t.invoiceTitle=this.form.invoiceTitle,t.telephone=this.form.telephone):t=n()({},t,this.form),this.detail&&(t.infoId=this.detail.infoId),this.loading=!0,(this.detail?s.m:s.h)(t).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.handleCancel(),e.$emit(\"change\")}).catch(function(){e.loading=!1})}}},o=(i(\"VEyr\"),i(\"KHd+\")),c=Object(o.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"invoice-title-set\",attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:e.title,width:\"500px\"},on:{close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\",style:{height:e.contentHeight}},[i(\"el-form\",{ref:\"form\",attrs:{model:e.form,\"label-width\":\"100px\"}},[e._l(e.fieldList,function(t,a){return[\"titleType\"==t.field?i(\"el-form-item\",{key:a,attrs:{label:t.name,prop:t.field}},[i(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{clearable:!1},on:{change:e.valueChange},model:{value:e.form[t.field],callback:function(i){e.$set(e.form,t.field,i)},expression:\"form[item.field]\"}},e._l(t.setting,function(e,t){return i(\"el-option\",{key:t,attrs:{label:e.name,value:e.value}})}))],1):i(\"el-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.hidden,expression:\"!item.hidden\"}],key:a,attrs:{label:t.name,prop:t.field}},[i(\"el-input\",{model:{value:e.form[t.field],callback:function(i){e.$set(e.form,t.field,i)},expression:\"form[item.field]\"}})],1)]})],2)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,null,null);c.options.__file=\"InvoiceTitleSet.vue\";t.default=c.exports},\"3biH\":function(e,t,i){\"use strict\";var a=i(\"/861\"),n=i(\"7qmR\"),s=i(\"Ktth\"),l=i.n(s),o=i(\"QhmF\"),c=i(\"dAOq\"),r={name:\"CheckFlow\",components:{},filters:{stepName:function(e){return\"第\"+l.a.encodeS(e)+\"级\"}},mixins:[c.a],props:{examineType:{type:String,default:\"\"},id:[String,Number],show:Boolean},data:function(){return{loading:!1,list:[]}},computed:{},watch:{show:function(e){e&&(this.list=[],this.getDetail())}},mounted:function(){},methods:{getDetail:function(){var e=this;this.id&&(this.loading=!0,(0,{crm_contract:a.c,crm_receivables:a.c,crm_invoice:a.c,oa_examine:n.f,crm_expense:a.c}[this.examineType])({recordId:this.id}).then(function(t){e.loading=!1,e.list=t.data}).catch(function(){e.loading=!1}))},close:function(){this.$emit(\"close\")}}},d=(i(\"UriR\"),i(\"KHd+\")),u=Object(d.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"},{name:\"empty\",rawName:\"v-empty\",value:e.list,expression:\"list\"}],attrs:{\"xs-empty-icon\":\"none\",\"xs-empty-text\":\"暂无记录\"}},[a(\"flexbox\",{staticClass:\"flow-head\"},[a(\"div\",{staticClass:\"flow-head-name\"},[e._v(\"审批流程\")]),e._v(\" \"),a(\"i\",{staticClass:\"el-icon-close flow-head-close\",on:{click:e.close}})]),e._v(\" \"),a(\"div\",{staticClass:\"flow-body\"},e._l(e.list,function(t,n){return a(\"flexbox\",{key:n,staticClass:\"cf-flow-item\",attrs:{align:\"stretch\",justify:\"flex-start\"}},[a(\"img\",{staticClass:\"cf-flow-item-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:e.getStatusImageIcon(t.examineStatus)}}),e._v(\" \"),a(\"div\",[a(\"flexbox\",{staticClass:\"cf-flow-item-head\"},[a(\"div\",{staticClass:\"cf-flow-item-des\"},[e._v(e._s(e._f(\"stepName\")(t.orderId)))]),e._v(\" \"),a(\"div\",[e._v(e._s(t.examineTime))])]),e._v(\" \"),a(\"flexbox\",{staticClass:\"cf-flow-item-info\"},[a(\"div\",{staticClass:\"cf-flow-item-name\"},[e._v(e._s(t.realname))]),e._v(\" \"),a(\"div\",[a(\"span\",[e._v(e._s(e.getStatusName(t.examineStatus)))]),e._v(\"了此申请\")])]),e._v(\" \"),t.remarks?a(\"div\",{staticClass:\"cf-flow-item-content\"},[e._v(e._s(t.remarks)+\"\\n          \"),a(\"div\",{staticClass:\"cf-flow-item-content-arrow\"})]):e._e()],1),e._v(\" \"),a(\"div\",{staticClass:\"cf-flow-item-line\"})])}))],1)},[],!1,null,\"181d05b6\",null);u.options.__file=\"CheckFlow.vue\";var h=u.exports,m={name:\"ExamineInfo\",components:{ExamineHandle:o.a,CheckFlow:h},filters:{detailName:function(e){return 2==e.stepType?e.userList.length+\"人或签\":3==e.stepType?e.userList.length+\"人会签\":1==e.stepType?\"负责人主管\":4==e.stepType?\"上一级审批人主管\":5==e.stepType?e.userList&&e.userList.length?e.userList[0].realname:\"\":void 0},stepName:function(e){return\"第\"+l.a.encodeS(e)+\"级\"}},mixins:[c.a],props:{examineType:{type:String,default:\"\"},id:[String,Number],recordId:[String,Number],ownerUserId:[String,Number]},data:function(){return{loading:!1,examineInfo:{},showFlowPopover:!1,examineHandleInfo:{status:1},showExamineHandle:!1}},computed:{},watch:{recordId:{handler:function(e){e&&(this.examineInfo={},this.getFlowStepList(),this.$refs.checkFlow&&this.$refs.checkFlow.getDetail())},deep:!0,immediate:!0}},mounted:function(){},methods:{getFlowStepList:function(){var e=this;this.recordId&&this.id&&(this.loading=!0,(0,{crm_contract:a.d,crm_receivables:a.d,crm_invoice:a.d,oa_examine:n.g,crm_expense:a.d}[this.examineType])({recordId:this.recordId,ownerUserId:this.ownerUserId}).then(function(t){e.loading=!1,e.examineInfo=t.data,e.$emit(\"value-change\",{config:t.data.examineType,value:[]})}).catch(function(){e.loading=!1}))},examineHandle:function(e){this.examineHandleInfo.status=e,this.showExamineHandle=!0},getContentFilters:function(e){for(var t=\"\",i=0;i<e.length;i++){var a=e[i];t=i==e.length-1?t+a.realname+\"：\"+this.getStatusName(a.checkType):t+a.realname+\"：\"+this.getStatusName(a.checkType)+\"、\"}return t},examineHandleClick:function(e){this.getFlowStepList(),this.$refs.checkFlow&&this.$refs.checkFlow.getDetail(),this.$emit(\"on-handle\",e)}}},p=(i(\"Xulf\"),Object(d.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"approval-flow\"},[a(\"flexbox\",{staticClass:\"approval-flow__hd\",attrs:{justify:\"space-between\"}},[a(\"div\",{staticClass:\"approval-flow__hd--left\"},[a(\"span\",{staticClass:\"flow-title\"},[a(\"i\",{staticClass:\"wk wk-approve\"}),e._v(\"审批流信息\\n      \")]),e._v(\" \"),a(\"el-popover\",{attrs:{width:\"300\",trigger:\"click\"},model:{value:e.showFlowPopover,callback:function(t){e.showFlowPopover=t},expression:\"showFlowPopover\"}},[a(\"check-flow\",{ref:\"checkFlow\",attrs:{show:e.showFlowPopover,id:e.recordId,\"examine-type\":e.examineType},on:{close:function(t){e.showFlowPopover=!1}}}),e._v(\" \"),a(\"el-button\",{attrs:{slot:\"reference\",type:\"text\"},slot:\"reference\"},[e._v(\"查看历史审批流程\")])],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"approval-flow__hd--right\"},[1==e.examineInfo.isCheck?a(\"el-button\",{staticClass:\"xr-btn--green\",attrs:{icon:\"wk wk-success\"},on:{click:function(t){e.examineHandle(1)}}},[e._v(\"通过\")]):e._e(),e._v(\" \"),1==e.examineInfo.isCheck?a(\"el-button\",{staticClass:\"xr-btn--red\",attrs:{icon:\"wk wk-close\"},on:{click:function(t){e.examineHandle(2)}}},[e._v(\"拒绝\")]):e._e(),e._v(\" \"),1==e.examineInfo.isRecheck?a(\"el-button\",{staticClass:\"xr-btn--primary\",attrs:{icon:\"wk wk-reset\"},on:{click:function(t){e.examineHandle(4)}}},[e._v(\"撤回\")]):e._e()],1)]),e._v(\" \"),2==e.examineInfo.examineType?a(\"flexbox\",{staticClass:\"check-items\"},e._l(e.examineInfo.steps,function(t,n){return a(\"flexbox\",{key:n,staticClass:\"check-item\"},[a(\"img\",{staticClass:\"check-item-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:e.getStatusImageIcon(t.examineStatus)}}),e._v(\" \"),a(\"div\",{staticClass:\"check-item-name\"},[e._v(e._s(t.examinUser.realname))]),e._v(\" \"),a(\"div\",{staticClass:\"check-item-status\"},[e._v(e._s(e.getStatusName(t.examineStatus)))]),e._v(\" \"),e.examineInfo.steps.length-1!=n?a(\"i\",{staticClass:\"el-icon-arrow-right check-item-arrow\"}):e._e()])})):1==e.examineInfo.examineType?a(\"flexbox\",{staticClass:\"check-items\",attrs:{wrap:\"wrap\"}},e._l(e.examineInfo.steps,function(t,n){return a(\"el-popover\",{key:n,attrs:{disabled:!t.userList||0==t.userList.length,placement:\"bottom\",trigger:\"hover\"}},[a(\"div\",{staticClass:\"popover-detail\"},e._l(t.userList,function(t,n){return a(\"flexbox\",{key:n,staticClass:\"popover-detail-item\",attrs:{align:\"stretch\"}},[a(\"img\",{staticClass:\"popover-detail-item-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:e.getStatusImageIcon(t.examineStatus)}}),e._v(\" \"),a(\"div\",[a(\"div\",{staticClass:\"popover-detail-item-time\"},[e._v(e._s(t.examineTime))]),e._v(\" \"),a(\"flexbox\",{staticClass:\"popover-detail-item-examine\"},[a(\"div\",{staticClass:\"examine-name\"},[e._v(e._s(t.realname))]),e._v(\" \"),a(\"div\",{staticClass:\"examine-info\"},[e._v(e._s(e.getStatusName(t.examineStatus))+\"此申请\")])])],1)])})),e._v(\" \"),a(\"flexbox\",{staticClass:\"check-item\",attrs:{slot:\"reference\"},slot:\"reference\"},[a(\"img\",{staticClass:\"check-item-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:e.getStatusImageIcon(t.examineStatus)}}),e._v(\" \"),a(\"div\",{staticClass:\"check-item-name\"},[e._v(e._s(e._f(\"detailName\")(t)))]),e._v(\" \"),a(\"div\",{staticClass:\"check-item-status\"},[e._v(e._s(e.getStatusName(t.examineStatus)))]),e._v(\" \"),e.examineInfo.steps.length-1!=n?a(\"i\",{staticClass:\"el-icon-arrow-right check-item-arrow\"}):e._e()])],1)})):e._e(),e._v(\" \"),a(\"examine-handle\",{attrs:{show:e.showExamineHandle,id:e.id,\"record-id\":e.recordId,\"examine-type\":e.examineType,detail:e.examineInfo,status:e.examineHandleInfo.status},on:{close:function(t){e.showExamineHandle=!1},save:e.examineHandleClick}})],1)},[],!1,null,\"b9338e5a\",null));p.options.__file=\"ExamineInfo.vue\";t.a=p.exports},\"4Avu\":function(e,t,i){\"use strict\";var a=i(\"D14G\");i.n(a).a},\"6x1Q\":function(e,t,i){},\"8/Yb\":function(e,t,i){\"use strict\";var a=i(\"Zjnr\");i.n(a).a},An8O:function(e,t,i){},BnLg:function(e,t,i){\"use strict\";var a=i(\"aFGb\");i.n(a).a},CDi7:function(e,t,i){},CfA6:function(e,t,i){\"use strict\";var a=i(\"sXXF\");i.n(a).a},D14G:function(e,t,i){},EKVc:function(e,t,i){},Ed7V:function(e,t,i){},J7m9:function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"8OTK\"),s=i(\"7Dod\"),l=i(\"ERJp\"),o=i(\"dAOq\"),c=i(\"jHPx\"),r={name:\"RelativeContract\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))},CRMAllCreate:n.default},mixins:[a.default,o.a],props:{id:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:\"400px\",showFullDetail:!1,isCreate:!1,contractId:\"\",createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}}}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeContract\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{getFieldList:function(){this.fieldList.push({prop:\"contractName\",width:\"200\",label:\"合同名称\"}),this.fieldList.push({prop:\"num\",width:\"200\",label:\"合同编号\"}),this.fieldList.push({prop:\"customerName\",width:\"200\",label:\"客户名称\"}),this.fieldList.push({prop:\"money\",width:\"200\",label:\"合同金额\"}),this.fieldList.push({prop:\"startTime\",width:\"200\",label:\"开始日期\"}),this.fieldList.push({prop:\"endTime\",width:\"200\",label:\"结束日期\"}),this.fieldList.push({prop:\"checkStatus\",width:\"200\",label:\"状态\"})},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i={customer:s.I,business:l.k}[this.crmType],a={pageType:0};a[this.crmType+\"Id\"]=this.id,i(a).then(function(t){0==e.fieldList.length&&e.getFieldList(),e.nopermission=!1,e.loading=!1,e.list=t.data.list}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},fieldFormatter:function(e,t){return\"checkStatus\"===t.property?this.getStatusName(e.checkStatus):\"money\"==t.property?Object(c.h)(e[t.property]||0):e[t.property]},handleRowClick:function(e,t,i){\"contractName\"==t.property&&(this.contractId=e.contractId,this.showFullDetail=!0)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"contractName\"===t.property?\"can-visit--underline\":\"\"},createClick:function(){\"business\"==this.crmType?(this.createActionInfo.data.customer=this.detail,this.createActionInfo.data.business=this.detail):\"customer\"==this.crmType&&(this.createActionInfo.data.customer=this.detail),this.isCreate=!0},createSaveSuccess:function(){this.$bus.emit(\"crm-tab-num-update\"),this.getDetail()},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getDetail(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))}}},d=(i(\"iO+/\"),i(\"KHd+\")),u=Object(d.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[e.isSeas?e._e():i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:e.createClick}},[e._v(\"新建合同\")])],1),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick}},e._l(e.fieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,formatter:e.fieldFormatter,label:t.label,\"show-overflow-tooltip\":\"\"}})})),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.contractId,\"crm-type\":\"contract\"},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:e.createActionInfo,\"crm-type\":\"contract\"},on:{\"save-success\":e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"6922205a\",null);u.options.__file=\"RelativeContract.vue\";t.default=u.exports},Le1A:function(e,t,i){e.exports={xrColorPrimary:\"#409eff\"}},MFLa:function(e,t,i){\"use strict\";var a=i(\"qNp7\");i.n(a).a},\"N/io\":function(e,t,i){\"use strict\";var a=i(\"VvH4\");i.n(a).a},NAlg:function(e,t,i){},PTg7:function(e,t,i){\"use strict\";var a=i(\"6x1Q\");i.n(a).a},QUqu:function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"8OTK\"),s=i(\"7Dod\"),l=i(\"AAeT\"),o=i(\"mkuN\"),c=i(\"jHPx\"),r={name:\"RelativeBusiness\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))},CRMAllCreate:n.default,CrmRelative:o.a},mixins:[a.default],props:{id:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:\"400px\",showFullDetail:!1,isCreate:!1,businessId:\"\",createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},showRelativeView:!1,selectionList:[]}},inject:[\"rootTabs\"],computed:{customerId:function(){return this.detail.customerId},canRelation:function(){return\"contacts\"==this.crmType}},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeBusiness\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{checkRelativeInfos:function(e){var t=this;if(e.data.length>0){var i={contactsId:this.id};i.businessIds=e.data.map(function(e){return e.businessId}),Object(l.l)(i).then(function(e){t.getDetail(),t.$message.success(\"操作成功\")}).catch(function(){})}},unRelevanceHandleClick:function(){var e=this;0==this.selectionList.length?this.$message.error(\"请先勾选数据\"):this.$confirm(\"确认取消关联?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){var t={contactsId:e.id};t.businessIds=e.selectionList.map(function(e){return e.businessId}),Object(l.p)(t).then(function(t){e.getDetail(),e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},getFieldList:function(){this.fieldList.push({prop:\"businessName\",width:\"200\",label:\"商机名称\"}),this.fieldList.push({prop:\"money\",width:\"200\",label:\"商机金额\"}),this.fieldList.push({prop:\"customerName\",width:\"200\",label:\"客户名称\"}),this.fieldList.push({prop:\"typeName\",width:\"200\",label:\"商机组\"}),this.fieldList.push({prop:\"statusName\",width:\"200\",label:\"商机阶段\"})},fieldFormatter:function(e,t){return\"money\"==t.property?Object(c.h)(e[t.property]||0):e[t.property]},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i={contacts:l.i,customer:s.G}[this.crmType],a={pageType:0};a[this.crmType+\"Id\"]=this.id,i(a).then(function(t){0==e.fieldList.length&&e.getFieldList(),e.nopermission=!1,e.loading=!1,e.list=t.data.list}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},handleRowClick:function(e,t,i){\"businessName\"==t.property&&(this.businessId=e.businessId,this.showFullDetail=!0)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"businessName\"===t.property?\"can-visit--underline\":\"\"},createClick:function(){\"contacts\"==this.crmType?(this.createActionInfo.data.customer=this.detail,this.createActionInfo.relativeData={contactsId:this.detail.contactsId}):\"customer\"==this.crmType&&(this.createActionInfo.data.customer=this.detail),this.isCreate=!0},createSaveSuccess:function(){this.canRelation?this.$refs.crmrelative.refreshList():(this.$bus.emit(\"crm-tab-num-update\"),this.getDetail())},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getDetail(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))}}},d=(i(\"PTg7\"),i(\"KHd+\")),u=Object(d.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[e.isSeas?e._e():i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:e.createClick}},[e._v(\"新建商机\")]),e._v(\" \"),e.canRelation?i(\"el-button\",{staticClass:\"rc-head-item\",attrs:{type:\"primary\"},nativeOn:{click:function(t){return e.unRelevanceHandleClick(t)}}},[e._v(\"解除关联\")]):e._e(),e._v(\" \"),e.canRelation?i(\"el-popover\",{staticStyle:{\"margin-right\":\"20px\"},attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:e.showRelativeView,callback:function(t){e.showRelativeView=t},expression:\"showRelativeView\"}},[i(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:e.showRelativeView,radio:!1,action:{type:\"condition\",data:{moduleType:\"customer\",customerId:e.customerId}},\"selected-data\":{business:e.list},\"crm-type\":\"business\"},on:{close:function(t){e.showRelativeView=!1},changeCheckout:e.checkRelativeInfos},model:{value:e.showRelativeView,callback:function(t){e.showRelativeView=t},expression:\"showRelativeView\"}}),e._v(\" \"),i(\"el-button\",{staticClass:\"rc-head-item\",staticStyle:{\"margin-right\":\"0\"},attrs:{slot:\"reference\",type:\"primary\"},nativeOn:{click:function(t){e.showRelativeView=!0}},slot:\"reference\"},[e._v(\"关联\")])],1):e._e()],1),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick,\"selection-change\":function(t){e.selectionList=t}}},[e.canRelation&&e.fieldList.length>0?i(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":\"\",type:\"selection\",align:\"center\",width:\"55\"}}):e._e(),e._v(\" \"),e._l(e.fieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,label:t.label,formatter:e.fieldFormatter,\"show-overflow-tooltip\":\"\"}})})],2),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.businessId,\"crm-type\":\"business\"},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:e.createActionInfo,\"crm-type\":\"business\"},on:{\"save-success\":e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"5030b9e8\",null);u.options.__file=\"RelativeBusiness.vue\";t.default=u.exports},QhmF:function(e,t,i){\"use strict\";var a=i(\"/861\"),n=i(\"7qmR\"),s={name:\"ExamineHandle\",components:{XhUserCell:i(\"8GhS\").p},props:{show:{type:Boolean,default:!1},status:{type:[String,Number],default:1},id:[String,Number],recordId:[String,Number],detail:{type:Object,default:function(){return{}}},examineType:{type:String,default:\"\"}},data:function(){return{loading:!1,showDialog:!1,handleType:1,selectUsers:[],content:\"\"}},computed:{title:function(){return 1==this.status?\"审批通过\":2==this.status?\"审批拒绝\":4==this.status?\"撤回审批\":\"\"},placeholder:function(){return 1==this.status?\"请输入审批意见（选填）\":2==this.status?\"请输入审批意见（必填）\":4==this.status?\"请输入撤回理由（必填）\":\"\"}},watch:{show:{handler:function(e){this.showDialog=e},deep:!0,immediate:!0}},mounted:function(){},methods:{submitInfo:function(){2!=this.status&&4!=this.status||this.content?2==this.status||1==this.status?this.handlePassAndReject():4==this.status&&this.handleRevoke():this.$message.error(this.placeholder)},handleRevoke:function(){var e=this;this.loading=!0,this.getRequest()({id:this.id,recordId:this.recordId,status:this.status,remarks:this.content}).then(function(t){e.loading=!1,e.$message.success(\"操作成功\"),\"crm_contract\"!=e.examineType&&\"crm_invoice\"!=e.examineType&&\"crm_receivables\"!=e.examineType&&\"crm_expense\"!=e.examineType||e.$store.dispatch(\"GetMessageNum\"),e.resetInfo(),e.$bus.emit(\"examine-handle-bus\"),e.$emit(\"save\",{type:e.status}),e.hiddenView()}).catch(function(){e.loading=!1})},getRequest:function(){return{crm_contract:a.b,crm_invoice:a.b,crm_receivables:a.b,oa_examine:n.e,crm_expense:a.b}[this.examineType]},handlePassAndReject:function(){var e=this;this.loading=!0;var t={id:this.id,recordId:this.recordId,status:this.status,remarks:this.content};if(1==this.status&&2==this.detail.examineType&&2==this.handleType){if(this.selectUsers&&0==this.selectUsers.length)return this.$message.error(\"请先选择下一审批人\"),void(this.loading=!1);t.nextUserId=this.selectUsers[0].userId}this.getRequest()(t).then(function(t){e.loading=!1,e.$message.success(\"操作成功\"),\"crm_contract\"!=e.examineType&&\"crm_invoice\"!=e.examineType&&\"crm_receivables\"!=e.examineType&&\"crm_expense\"!=e.examineType||e.$store.dispatch(\"GetMessageNum\"),e.resetInfo(),e.$bus.emit(\"examine-handle-bus\"),e.$emit(\"save\",{type:e.status}),e.hiddenView()}).catch(function(){e.loading=!1})},handleClick:function(e){\"cancel\"==e?(this.hiddenView(),this.resetInfo()):\"confirm\"==e&&this.submitInfo()},selectUserFocus:function(){this.handleType=2},selectExamineUser:function(e){this.selectUsers=e.value},hiddenView:function(){this.$emit(\"close\")},resetInfo:function(){this.handleType=1,this.selectUsers=[],this.content=\"\"}}},l=(i(\"xwuj\"),i(\"KHd+\")),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{title:e.title,\"append-to-body\":!0,\"close-on-click-modal\":!1,visible:e.showDialog,width:\"400px\"},on:{\"update:visible\":function(t){e.showDialog=t},close:e.hiddenView}},[1==e.status&&2==e.detail.examineType?i(\"div\",{staticClass:\"handle-type\"},[i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"el-radio\",{attrs:{label:1},model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[i(\"span\")]),e._v(\" \"),i(\"div\",{staticStyle:{\"font-size\":\"12px\"},nativeOn:{click:function(t){e.handleType=1}}},[e._v(\"审核结束\")])],1),e._v(\" \"),i(\"flexbox\",{staticClass:\"handle-item\",attrs:{id:\"selectUser\"}},[i(\"el-radio\",{attrs:{label:2},model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[i(\"span\")]),e._v(\" \"),i(\"xh-user-cell\",{staticClass:\"select-user\",attrs:{value:e.selectUsers,placeholder:\"选择下一审批人\"},on:{focus:e.selectUserFocus,\"value-change\":e.selectExamineUser}})],1)],1):e._e(),e._v(\" \"),1==e.status&&2==e.detail.examineType?i(\"div\",{staticClass:\"title\"},[e._v(\"意见\")]):e._e(),e._v(\" \"),i(\"el-input\",{attrs:{rows:5,maxlength:200,placeholder:e.placeholder,type:\"textarea\",resize:\"none\",\"show-word-limit\":\"\"},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}}),e._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){e.handleClick(\"cancel\")}}},[e._v(\"取 消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.handleClick(\"confirm\")}}},[e._v(\"确 定\")])],1)],1)},[],!1,null,\"64438464\",null);o.options.__file=\"ExamineHandle.vue\";t.a=o.exports},QoFe:function(e,t,i){\"use strict\";var a=i(\"iq6j\");i.n(a).a},RDgq:function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"p3/6\"),s=i(\"7Dod\"),l=i(\"ERJp\"),o=i(\"d9x6\"),c={name:\"RelativeTeam\",components:{TeamsHandle:n.default},mixins:[a.default],props:{id:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1}},data:function(){return{list:[],fieldList:[],tableHeight:\"400px\",teamsDialogShow:!1,handleType:1,editPermissionShow:!1,selectionList:[]}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeTeam\"===e&&this.getDetail(!1)}},mounted:function(){this.fieldList.push({prop:\"realname\",width:\"200\",label:\"姓名\"}),this.fieldList.push({prop:\"post\",width:\"200\",label:\"职位\"}),this.fieldList.push({prop:\"groupRole\",width:\"200\",label:\"团队角色\"}),this.fieldList.push({prop:\"power\",width:\"200\",label:\"权限\"}),this.getDetail()},methods:{getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i={customer:s.W,business:l.w,contract:o.r}[this.crmType],a={};a.id=this.id,i(a).then(function(t){e.loading=!1,e.list=t.data}).catch(function(){e.loading=!1})},handleSelectionChange:function(e){this.selectionList=e},handleClick:function(e){var t=this;\"add\"==e?this.teamsDialogShow=!0:\"exit\"==e?this.$confirm(\"确定退出团队?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){var e={customer:s.i,business:l.e,contract:o.e}[t.crmType];t.loading=!0,e({id:t.id}).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.$emit(\"on-handle\",{type:\"exit-team\"}),t.loading=!1}).catch(function(){t.loading=!1})}).catch(function(){}):0==this.selectionList.length?this.$message.error(\"请勾选需要操作的团队成员\"):\"edit\"==e?this.editPermissionShow=!0:\"remove\"==e&&this.$confirm(\"此操作将移除这些团队成员是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){var e={customer:s.T,contract:o.p,business:l.r}[t.crmType],i={ids:[parseInt(t.id)],memberIds:t.selectionList.map(function(e){return e.userId})};t.loading=!0,e(i).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.$bus.emit(\"crm-tab-num-update\"),t.getDetail()}).catch(function(){t.loading=!1})}).catch(function(){})},handleCallBack:function(e){this.$bus.emit(\"crm-tab-num-update\"),this.getDetail()},handleEditConfirm:function(){var e=this;this.loading=!0,(0,{customer:s.Y,business:l.z,contract:o.t}[this.crmType])({ids:[this.id],memberIds:this.selectionList.map(function(e){return e.userId}),power:this.handleType}).then(function(t){e.editPermissionShow=!1,e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.getDetail()}).catch(function(){e.loading=!1})},handleSelectable:function(e,t){return\"负责人权限\"!=e.power}}},r=(i(\"mhJk\"),i(\"KHd+\")),d=Object(r.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"rc-cont\"},[e.isSeas?e._e():i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"rc-head-item\",attrs:{type:\"primary\"},nativeOn:{click:function(t){e.handleClick(\"exit\")}}},[e._v(\"退出团队\")]),e._v(\" \"),i(\"el-button\",{staticClass:\"rc-head-item\",attrs:{type:\"primary\"},nativeOn:{click:function(t){e.handleClick(\"remove\")}}},[e._v(\"移除\")]),e._v(\" \"),i(\"el-button\",{staticClass:\"rc-head-item\",attrs:{type:\"primary\"},nativeOn:{click:function(t){e.handleClick(\"edit\")}}},[e._v(\"编辑\")]),e._v(\" \"),i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(t){e.handleClick(\"add\")}}},[e._v(\"团队成员\")])],1),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,stripe:\"\"},on:{\"selection-change\":e.handleSelectionChange}},[i(\"el-table-column\",{attrs:{selectable:e.handleSelectable,\"show-overflow-tooltip\":\"\",type:\"selection\",align:\"center\",width:\"55\"}}),e._v(\" \"),e._l(e.fieldList,function(e,t){return i(\"el-table-column\",{key:t,attrs:{prop:e.prop,label:e.label,\"show-overflow-tooltip\":\"\"}})})],2),e._v(\" \"),i(\"teams-handle\",{attrs:{\"crm-type\":e.crmType,\"selection-list\":[e.detail],\"dialog-visible\":e.teamsDialogShow,title:\"添加团队成员\"},on:{\"update:dialogVisible\":function(t){e.teamsDialogShow=t},handle:e.handleCallBack}}),e._v(\" \"),i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.editPermissionShow,\"close-on-click-modal\":!1,\"append-to-body\":!0,title:\"编辑权限\",width:\"400px\"},on:{\"update:visible\":function(t){e.editPermissionShow=t}}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"权限：\")]),e._v(\" \"),i(\"el-radio-group\",{model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[i(\"el-radio\",{attrs:{label:1}},[e._v(\"只读\")]),e._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[e._v(\"读写\")])],1)],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){e.editPermissionShow=!1}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},nativeOn:{click:function(t){return e.handleEditConfirm(t)}}},[e._v(\"保存\")])],1)])],1)},[],!1,null,\"288bd1aa\",null);d.options.__file=\"RelativeTeam.vue\";t.default=d.exports},\"RE/G\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"6iAj\"),s=i(\"ZoMv\"),l={name:\"RelativePrint\",components:{},mixins:[a.default],props:{id:[String,Number],crmType:{type:String,default:\"\"},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[{prop:\"createTime\",label:\"打印时间\",width:\"115px\"},{prop:\"templateName\",label:\"打印模板\",width:\"115px\"}],tableHeight:\"450px\"}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativePrint\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t,Object(n.E)({crmType:s.default.convertKeyToType(this.crmType),typeId:this.id}).then(function(t){e.nopermission=!1,e.loading=!1,e.list=t.data}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},print:function(e){var t=this.$router.resolve(\"/print/?&type=history&recordId=\"+e.recordId);window.open(t.href,\"_blank\")}}},o=(i(\"8/Yb\"),i(\"KHd+\")),c=Object(o.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[i(\"el-table\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.fieldList.length>0,expression:\"fieldList.length > 0\"}],staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,stripe:\"\"}},[e._l(e.fieldList,function(e,t){return i(\"el-table-column\",{key:t,attrs:{prop:e.prop,label:e.label,\"show-overflow-tooltip\":\"\"}})}),e._v(\" \"),i(\"el-table-column\",{attrs:{prop:\"down\",label:\"操作\",width:\"80px\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-button\",{staticClass:\"el-button--primary\",attrs:{type:\"text\"},on:{click:function(i){e.print(t.row)}}},[e._v(\"打印预览\")])]}}])})],2)],1)},[],!1,null,\"48217b06\",null);c.options.__file=\"RelativePrint.vue\";t.default=c.exports},UriR:function(e,t,i){\"use strict\";var a=i(\"CDi7\");i.n(a).a},V0hI:function(e,t,i){\"use strict\";var a=i(\"NAlg\");i.n(a).a},VEyr:function(e,t,i){\"use strict\";var a=i(\"Le1A\");i.n(a).a},VvH4:function(e,t,i){},Xulf:function(e,t,i){\"use strict\";var a=i(\"YrXA\");i.n(a).a},YrXA:function(e,t,i){},Zjnr:function(e,t,i){},aFGb:function(e,t,i){},aoxX:function(e,t,i){\"use strict\";var a=i(\"sV8O\");i.n(a).a},cnnj:function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"ERJp\"),s=i(\"d9x6\"),l=i(\"jHPx\"),o={name:\"RelativeProduct\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))}},mixins:[a.default],props:{id:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:\"400px\",showFullDetail:!1,productId:\"\",totalInfo:{money:\"0.00\",discountRate:\"0.00\"}}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeProduct\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{getFieldList:function(){this.fieldList.push({prop:\"productName\",width:\"200\",label:\"产品名称\"}),this.fieldList.push({prop:\"categoryName\",width:\"200\",label:\"产品类别\"}),this.fieldList.push({prop:\"unit\",width:\"200\",label:\"单位\"}),this.fieldList.push({prop:\"price\",width:\"200\",label:\"标准价格\"}),this.fieldList.push({prop:\"salesPrice\",width:\"200\",label:\"售价\"}),this.fieldList.push({prop:\"num\",width:\"200\",label:\"数量\"}),this.fieldList.push({prop:\"discount\",width:\"200\",label:\"折扣（%）\"}),this.fieldList.push({prop:\"subtotal\",width:\"200\",label:\"合计\"})},fieldFormatter:function(e,t){return\"price\"==t.property||\"salesPrice\"==t.property?Object(l.h)(e[t.property]||0):e[t.property]},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t,this.getRequest()(this.getParams()).then(function(t){0==e.fieldList.length&&e.getFieldList(),e.nopermission=!1,e.loading=!1,e.list=t.data.list,e.totalInfo.money=t.data.money,e.totalInfo.discountRate=t.data.discountRate}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},getRequest:function(){return\"business\"==this.crmType?n.i:\"contract\"==this.crmType?s.i:void 0},getParams:function(){return\"business\"==this.crmType?{businessId:this.id,pageType:0}:\"contract\"==this.crmType?{contractId:this.id,pageType:0}:void 0},handleRowClick:function(e,t,i){\"productName\"==t.property&&(this.productId=e.productId,this.showFullDetail=!0)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"productName\"===t.property?\"can-visit--underline\":\"\"}}},c=(i(\"/v8q\"),i(\"KHd+\")),r=Object(c.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}}),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick}},e._l(e.fieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,label:t.label,formatter:e.fieldFormatter,\"show-overflow-tooltip\":\"\"}})})),e._v(\" \"),i(\"flexbox\",{staticClass:\"handle-footer\"},[i(\"div\",{staticClass:\"discount-title\"},[e._v(\"整单折扣（%）：\"),i(\"span\",{staticClass:\"discount-title-value\"},[e._v(e._s(e.totalInfo.discountRate))])]),e._v(\" \"),i(\"div\",{staticClass:\"total-info\"},[e._v(\"已选中产品：\"),i(\"span\",{staticClass:\"info-yellow\"},[e._v(e._s(e.list.length))]),e._v(\" 种  总金额：\"),i(\"span\",{staticClass:\"info-yellow\"},[e._v(e._s(e.totalInfo.money))]),e._v(\" 元\")])]),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.productId,\"crm-type\":\"product\"},on:{\"update:visible\":function(t){e.showFullDetail=t}}})],1)},[],!1,null,\"45a45a06\",null);r.options.__file=\"RelativeProduct.vue\";t.default=r.exports},d9lM:function(e,t,i){\"use strict\";var a=i(\"Ed7V\");i.n(a).a},dVPs:function(e,t,i){},\"ev+R\":function(e,t,i){},f2Lb:function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"8OTK\"),s=i(\"7Dod\"),l=i(\"ERJp\"),o=i(\"mkuN\"),c={name:\"RelativeContacts\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))},CRMAllCreate:n.default,CrmRelative:o.a},mixins:[a.default],props:{id:[String,Number],contactsId:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:\"400px\",showFullDetail:!1,isCreate:!1,detailId:\"\",createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},showRelativeView:!1,selectionList:[]}},inject:[\"rootTabs\"],computed:{customerId:function(){return this.detail.customerId},canRelation:function(){return\"business\"==this.crmType}},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeContacts\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{checkRelativeInfos:function(e){var t=this;if(e.data.length>0){var i={businessId:this.id};i.contactsIds=e.data.map(function(e){return e.contactsId}),Object(l.o)(i).then(function(e){t.getDetail(),t.$message.success(\"操作成功\")}).catch(function(){})}},unRelevanceHandleClick:function(){var e=this;0==this.selectionList.length?this.$message.error(\"请先勾选数据\"):this.$confirm(\"确认取消关联?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){var t={businessId:e.id};t.contactsIds=e.selectionList.map(function(e){return e.contactsId}),Object(l.y)(t).then(function(t){e.getDetail(),e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},getFieldList:function(){this.fieldList.push({prop:\"name\",width:\"200\",label:\"姓名\"}),this.fieldList.push({prop:\"mobile\",width:\"200\",label:\"手机\"}),this.fieldList.push({prop:\"post\",width:\"200\",label:\"职务\"})},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i={customer:s.H,business:l.j}[this.crmType],a={pageType:0};a[this.crmType+\"Id\"]=this.id,i(a).then(function(t){0==e.fieldList.length&&e.getFieldList(),e.nopermission=!1,e.loading=!1,e.list=t.data.list}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},handleRowClick:function(e,t,i){\"name\"==t.property&&(this.detailId=e.contactsId,this.showFullDetail=!0)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"name\"===t.property?\"can-visit--underline\":\"\"},createClick:function(){\"customer\"==this.crmType?this.createActionInfo.data.customer=this.detail:\"business\"==this.crmType&&(this.createActionInfo.data.customer=this.detail,this.createActionInfo.relativeData={businessId:this.detail.businessId}),this.isCreate=!0},createSaveSuccess:function(){this.canRelation?this.$refs.crmrelative.refreshList():(this.$bus.emit(\"crm-tab-num-update\"),this.getDetail())},setChieflyContacts:function(e){var t=this,i={customer:s.R,business:l.q}[this.crmType],a={contactsId:e.row.contactsId};a[this.crmType+\"Id\"]=this.id,this.loading=!0,i(a).then(function(i){t.$message.success(\"操作成功\"),t.$emit(\"update:contactsId\",e.row.contactsId),t.loading=!1}).catch(function(e){t.loading=!1})},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getDetail(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))}}},r=(i(\"d9lM\"),i(\"KHd+\")),d=Object(r.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[e.isSeas?e._e():i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:e.createClick}},[e._v(\"新建联系人\")]),e._v(\" \"),e.canRelation?i(\"el-button\",{staticClass:\"rc-head-item\",attrs:{type:\"primary\"},nativeOn:{click:function(t){return e.unRelevanceHandleClick(t)}}},[e._v(\"解除关联\")]):e._e(),e._v(\" \"),e.canRelation?i(\"el-popover\",{staticStyle:{\"margin-right\":\"20px\"},attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:e.showRelativeView,callback:function(t){e.showRelativeView=t},expression:\"showRelativeView\"}},[i(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:e.showRelativeView,radio:!1,action:{type:\"condition\",data:{moduleType:\"customer\",customerId:e.customerId}},\"selected-data\":{contacts:e.list},\"crm-type\":\"contacts\"},on:{close:function(t){e.showRelativeView=!1},changeCheckout:e.checkRelativeInfos},model:{value:e.showRelativeView,callback:function(t){e.showRelativeView=t},expression:\"showRelativeView\"}}),e._v(\" \"),i(\"el-button\",{staticClass:\"rc-head-item\",staticStyle:{\"margin-right\":\"0\"},attrs:{slot:\"reference\",type:\"primary\"},nativeOn:{click:function(t){e.showRelativeView=!0}},slot:\"reference\"},[e._v(\"关联\")])],1):e._e()],1),e._v(\" \"),i(\"el-table\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.fieldList.length>0,expression:\"fieldList.length > 0\"}],staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick,\"selection-change\":function(t){e.selectionList=t}}},[e.canRelation?i(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":\"\",type:\"selection\",align:\"center\",width:\"55\"}}):e._e(),e._v(\" \"),e._l(e.fieldList,function(e,t){return i(\"el-table-column\",{key:t,attrs:{prop:e.prop,label:e.label,\"show-overflow-tooltip\":\"\"}})}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"操作\",width:\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"flexbox\",{attrs:{justify:\"center\"}},[e.contactsId==t.row.contactsId?i(\"span\",{staticClass:\"chief\"},[i(\"i\",{staticClass:\"wk wk-success\"}),e._v(\"首要联系人\")]):i(\"el-button\",{staticClass:\"set-chief-btn\",attrs:{type:\"text\"},nativeOn:{click:function(i){e.setChieflyContacts(t)}}},[e._v(\"设为首要联系人\")])],1)]}}])})],2),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.detailId,\"crm-type\":\"contacts\"},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:e.createActionInfo,\"crm-type\":\"contacts\"},on:{\"save-success\":e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"6e7ef1e1\",null);d.options.__file=\"RelativeContacts.vue\";t.default=d.exports},fuED:function(e,t,i){\"use strict\";i.r(t);var a=i(\"LZF0\"),n=i(\"8OTK\"),s=i(\"7Dod\"),l=i(\"mkuN\"),o={name:\"RelativeProject\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))},CRMAllCreate:n.default,CrmRelative:l.a},mixins:[a.default],props:{id:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:\"400px\",showFullDetail:!1,isCreate:!1,workId:\"\",createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},showRelativeView:!1,selectionList:[]}},inject:[\"rootTabs\"],computed:{customerId:function(){return this.detail.customerId},canRelation:function(){return!1}},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeProject\"===e&&this.getDetail(!1)}},mounted:function(){this.getDetail()},methods:{getFieldList:function(){this.fieldList.push({prop:\"name\",width:\"200\",label:\"项目名称\"}),this.fieldList.push({prop:\"description\",width:\"200\",label:\"项目描述\"}),this.fieldList.push({prop:\"isOpen\",width:\"200\",label:\"可见范围\"}),this.fieldList.push({prop:\"members\",width:\"200\",label:\"项目成员\"}),this.fieldList.push({prop:\"status\",width:\"200\",label:\"项目状态\"})},fieldFormatter:function(e,t){return e[t.property]},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i={customer:s.K}[this.crmType],a={pageType:0};a[this.crmType+\"Id\"]=this.id,i(a).then(function(t){0==e.fieldList.length&&e.getFieldList(),e.nopermission=!1,e.loading=!1,e.list=t.data.list}).catch(function(t){102==t.code&&(e.nopermission=!0),e.loading=!1})},handleRowClick:function(e,t,i){\"businessName\"==t.property&&(this.workId=e.workId,this.showFullDetail=!0)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"businessName\"===t.property?\"can-visit--underline\":\"\"},createClick:function(){\"customer\"==this.crmType&&(this.createActionInfo.data.customer=this.detail),this.isCreate=!0},createSaveSuccess:function(){this.canRelation?this.$refs.crmrelative.refreshList():(this.$bus.emit(\"crm-tab-num-update\"),this.getDetail())},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getDetail(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))}}},c=(i(\"QoFe\"),i(\"KHd+\")),r=Object(c.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:e.nopermission,expression:\"nopermission\"}],staticClass:\"rc-cont\",attrs:{\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"}},[e.isSeas?e._e():i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}}),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick,\"selection-change\":function(t){e.selectionList=t}}},[e.canRelation&&e.fieldList.length>0?i(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":\"\",type:\"selection\",align:\"center\",width:\"55\"}}):e._e(),e._v(\" \"),e._l(e.fieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,label:t.label,formatter:e.fieldFormatter,\"show-overflow-tooltip\":\"\"}})})],2),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.workId,\"crm-type\":\"business\"},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:e.createActionInfo,\"crm-type\":\"business\"},on:{\"save-success\":e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"3ab4bc75\",null);r.options.__file=\"RelativeProject.vue\";t.default=r.exports},gTyn:function(e,t,i){\"use strict\";i.r(t);var a=i(\"QbLZ\"),n=i.n(a),s=i(\"AAeT\"),l=i(\"4XAY\"),o=i(\"BzA1\"),c=i(\"hVb5\"),r=i(\"ZoMv\"),d=i(\"L2JU\"),u={name:\"ChieflyContacts\",components:{ImportInfo:o.default,ImportInfoEmpty:c.default,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))}},props:{id:[Number,String],poolId:[Number,String],contactsId:[Number,String],crmType:{required:!0,type:String,default:\"\"},isSeas:{type:Boolean,default:!1}},data:function(){return{loading:!1,detail:null,list:[],showFullDetail:!1}},computed:n()({},Object(d.b)([\"crm\"]),{canShowContacts:function(){return this.crm&&this.crm.contacts&&this.crm.contacts.read},hasInfo:function(){return this.contactsId},emptyBtnName:function(){return this.$listeners.add&&!this.isSeas?\"新建联系人\":\"\"},emptyName:function(){return{customer:\"暂无客户首要联系人\",business:\"暂无商机首要联系人\"}[this.crmType]||\"暂无数据\"}}),watch:{contactsId:function(){this.detail=null,this.getDetial()},id:function(){this.list=[],this.detail=null,this.getBaseInfo(),this.getDetial()}},created:function(){var e=this;this.canShowContacts&&this.getDetial(),this.getBaseInfo(),this.$bus.on(\"crm-detail-update\",function(t){e.getBaseInfo()})},beforeDestroy:function(){this.$bus.off(\"crm-detail-update\")},methods:{getDetial:function(){var e=this;this.hasInfo&&(this.loading=!0,Object(s.k)({contactsId:this.contactsId}).then(function(t){e.loading=!1,e.detail=t.data}).catch(function(){e.loading=!1}))},getBaseInfo:function(){var e=this;this.loading=!0;var t={types:r.default[this.crmType],id:this.id};this.poolId&&(t.poolId=this.poolId),Object(l.y)(t).then(function(t){e.list=t.data,e.loading=!1}).catch(function(){e.loading=!1})}}},h=(i(\"jSnt\"),i(\"KHd+\")),m=Object(h.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"chiefly-contacts\"},[e.detail&&e.canShowContacts?i(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"xr-avatar\",{staticClass:\"cell-hd\",attrs:{name:e.detail.name,size:40}}),e._v(\" \"),i(\"div\",{staticClass:\"cell-bd\"},[i(\"p\",{staticClass:\"cell-bd__name\"},[i(\"span\",[e._v(e._s(e.detail.name))]),e._v(\" \"),e.detail.post?i(\"span\",{staticClass:\"cell-bd__name--des\"},[e._v(e._s(e.detail.post))]):e._e()]),e._v(\" \"),i(\"p\",{staticClass:\"cell-bd__detail\"},[i(\"i\",{staticClass:\"wk wk-circle-iphone\"}),e._v(\" \"),e.detail.mobile?i(\"span\",[e._v(e._s(e.detail.mobile))]):i(\"span\",{staticClass:\"no-data\"},[e._v(\"暂无电话\")])]),e._v(\" \"),i(\"p\",{staticClass:\"cell-bd__detail\"},[i(\"i\",{staticClass:\"wk wk-circle-email\"}),e._v(\" \"),e.detail.email?i(\"span\",[e._v(e._s(e.detail.email))]):i(\"span\",{staticClass:\"no-data\"},[e._v(\"暂无邮箱\")])])]),e._v(\" \"),i(\"span\",{staticClass:\"mark\"},[i(\"i\",{staticClass:\"wk wk-s-contacts\"}),e._v(\"首要联系人\")])],1):!e.contactsId&&e.canShowContacts?i(\"import-info-empty\",e._g({staticClass:\"empty-info\",attrs:{title:e.emptyName,\"btn-name\":e.emptyBtnName}},e.$listeners)):e._e(),e._v(\" \"),e.list.length?i(\"import-info\",{attrs:{list:e.list}}):e._e(),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.contactsId,\"model-data\":{model:\"contacts\",modelId:e.contactsId},\"crm-type\":\"contacts\"},on:{\"update:visible\":function(t){e.showFullDetail=t}}})],1)},[],!1,null,\"78f7a9d4\",null);m.options.__file=\"ChieflyContacts.vue\";t.default=m.exports},hVb5:function(e,t,i){\"use strict\";i.r(t);var a={name:\"ImportInfoEmpty\",components:{},props:{title:{type:String,default:\"暂无数据\"},btnName:String},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{click:function(){this.$emit(\"add\")}}},n=(i(\"0tpr\"),i(\"KHd+\")),s=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"flexbox\",{attrs:{align:\"center\",justify:\"center\"}},[i(\"div\",{staticClass:\"empty\"},[i(\"p\",{staticClass:\"empty-title\"},[e._v(e._s(e.title))]),e._v(\" \"),e.btnName?i(\"el-button\",{staticClass:\"xr-btn--orange empty-btn\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:e.click}},[e._v(e._s(e.btnName))]):e._e()],1)])},[],!1,null,\"1da205b2\",null);s.options.__file=\"ImportInfoEmpty.vue\";t.default=s.exports},\"iO+/\":function(e,t,i){\"use strict\";var a=i(\"kSAn\");i.n(a).a},iq6j:function(e,t,i){},jSnt:function(e,t,i){\"use strict\";var a=i(\"EKVc\");i.n(a).a},kSAn:function(e,t,i){},mVxz:function(e,t,i){\"use strict\";i.r(t);var a=i(\"d9x6\"),n=i(\"Ew9n\"),s=i(\"raay\"),l=i(\"eOwn\"),o=i(\"w4ZA\"),c=i(\"CjUg\"),r=i(\"RDgq\"),d=i(\"cnnj\"),u=i(\"/akV\"),h=i(\"tZ34\"),m=i(\"3gPr\"),p=i(\"35zX\"),f=i(\"RE/G\"),v=i(\"3biH\"),b=i(\"8OTK\"),y=i(\"f6dm\"),g=i(\"jHPx\"),w=(i(\"fuED\"),{name:\"ContractDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,Activity:l.default,CRMEditBaseInfo:o.default,RelativeHandle:c.default,RelativeTeam:r.default,RelativeProduct:d.default,RelativeReturnMoney:u.default,RelativeExpense:h.default,RelativeFiles:m.default,RelativeVisit:p.default,RelativePrint:f.default,ExamineInfo:v.a,CRMAllCreate:b.default},mixins:[y.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"contract\",headDetails:[{title:\"合同编号\",value:\"\"},{title:\"客户名称\",value:\"\"},{title:\"合同金额（元）\",value:\"\"},{title:\"签约时间\",value:\"\"},{title:\"回款金额（元）\",value:\"\"},{title:\"负责人\",value:\"\"}],tabCurrentName:\"Activity\",isCreate:!1}},computed:{activityHandle:function(){var e=[{type:\"task\",label:\"创建任务\"},{type:\"receivables\",label:\"创建回款\"}];return this.canCreateFollowRecord&&(e=[{type:\"log\",label:\"写跟进\"}].concat(e)),e},tabNames:function(){var e=[];return this.crm.contract&&this.crm.contract.read&&e.push({label:\"详细资料\",name:\"CRMEditBaseInfo\"}),e.push({label:\"活动\",name:\"Activity\"}),this.crm.product&&this.crm.product.index&&e.push({label:this.getTabName(\"产品\",this.tabsNumber.productCount),name:\"RelativeProduct\"}),this.crm.receivables&&this.crm.receivables.index&&e.push({label:this.getTabName(\"回款\",this.tabsNumber.receivablesCount),name:\"RelativeReturnMoney\"}),this.crm.invoice&&this.crm.invoice.index&&e.push({label:this.getTabName(\"费用\",this.tabsNumber.moneyCount),name:\"RelativeExpense\"}),this.crm.visit&&this.crm.visit.index&&e.push({label:this.getTabName(\"回访\",this.tabsNumber.returnVisitCount),name:\"RelativeVisit\"}),e.push({label:this.getTabName(\"团队成员\",this.tabsNumber.memberCount),name:\"RelativeTeam\"}),e.push({label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"}),e.push({label:\"操作记录\",name:\"RelativeHandle\"}),this.crm.contract&&this.crm.contract.print&&e.push({label:\"打印记录\",name:\"RelativePrint\"}),e},logTyps:function(){return[{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},{icon:\"contract\",color:\"#FD5B4A\",command:6,label:\"合同\"},{icon:\"o-task\",color:\"#D376FF\",command:11,label:\"任务\"},{icon:\"receivables\",color:\"#FFB940\",command:7,label:\"回款\"},{icon:\"log\",color:\"#5864FF\",command:8,label:\"日志\"},{icon:\"approve\",color:\"#9376FF\",command:9,label:\"审批\"}]}},mounted:function(){this.crm.contract&&this.crm.contract.read&&(this.tabCurrentName=\"CRMEditBaseInfo\")},methods:{getDetial:function(){var e=this;this.loading=!0,Object(a.n)({contractId:this.id}).then(function(t){e.loading=!1,e.detailData=t.data,e.headDetails[0].value=t.data.num,e.headDetails[1].value=t.data.customerName,e.headDetails[2].value=Object(g.h)(t.data.money||0),e.headDetails[3].value=t.data.orderDate,e.headDetails[4].value=Object(g.h)(t.data.receivablesMoney||0),e.headDetails[5].value=t.data.ownerUserName}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},editSaveSuccess:function(){this.$bus.$emit(\"crm-detail-update\",this.crmType),this.$emit(\"handle\",{type:\"save-success\"}),this.detailData=null,this.getDetial()},examineHandle:function(e){1==e.type&&this.getDetial(),this.$emit(\"handle\",{type:\"examine\"})}}}),x=(i(\"V0hI\"),i(\"KHd+\")),_=Object(x.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?i(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[i(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}},[i(\"template\",{slot:\"name\"},[8==e.detailData.checkStatus?i(\"span\",{staticClass:\"is-invalid\"},[e._v(\"（已作废）\")]):e._e()])],2),e._v(\" \"),e.detailData.examineRecordId?i(\"examine-info\",{staticClass:\"examine-info\",attrs:{id:e.id,\"record-id\":e.detailData.examineRecordId,\"owner-user-id\":e.detailData.ownerUserId,\"examine-type\":\"crm_contract\"},on:{\"on-handle\":e.examineHandle}}):e._e(),e._v(\" \"),i(\"div\",{staticClass:\"d-container-bd\"},[i(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,a){return i(\"el-tab-pane\",{key:a,attrs:{label:t.label,name:t.name,lazy:\"\"}},[i(t.name,{tag:\"component\",attrs:{detail:e.detailData,\"type-list\":e.logTyps,id:e.id,handle:e.activityHandle,\"crm-type\":e.crmType},on:{\"on-handle\":e.detailHeadHandle}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"0c5e9f9d\",null);_.options.__file=\"Detail.vue\";t.default=_.exports},mhJk:function(e,t,i){\"use strict\";var a=i(\"ev+R\");i.n(a).a},owrk:function(e,t,i){\"use strict\";var a=i(\"An8O\");i.n(a).a},qNp7:function(e,t,i){},rcjs:function(e,t,i){\"use strict\";i.r(t);var a=i(\"QbLZ\"),n=i.n(a),s=i(\"LZF0\"),l=i(\"7Dod\"),o=i(\"VcMt\"),c=i(\"dAOq\"),r=i(\"jHPx\"),d=i(\"3WPT\"),u=i(\"wS25\"),h=i(\"ROSF\"),m=i(\"L2JU\"),p={name:\"RelativeInvoice\",components:{Create:h.default,InvoiceTitleSet:d.default,MarkInvoice:u.default,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))}},mixins:[s.default,c.a],props:{id:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{list:[],fieldList:[],tableHeight:\"250px\",showFullDetail:!1,showFullId:\"\",isCreate:!1,titleList:[],titleFieldList:[],titleCreateShow:!1,titleDetail:null,rowDetail:{},markShow:!1}},inject:[\"rootTabs\"],computed:n()({},Object(m.b)([\"crm\"]),{canUpdateStatus:function(){return this.crm&&this.crm.invoice&&this.crm.invoice.updateInvoiceStatus}}),watch:{id:function(e){this.list=[],this.titleList=[],this.getInvoiceList(),this.getTitleList()},\"rootTabs.currentName\":function(e){\"RelativeInvoice\"===e&&(this.getInvoiceList(!1),this.getTitleList(!1))}},mounted:function(){this.titleFieldList=[{prop:\"titleType\",width:\"120\",label:\"抬头类型\"},{prop:\"invoiceTitle\",width:\"120\",label:\"开票抬头\"},{prop:\"taxNumber\",width:\"120\",label:\"纳税人识别号\"},{prop:\"depositBank\",width:\"120\",label:\"开户行\"},{prop:\"depositAccount\",width:\"120\",label:\"开户账号\"},{prop:\"depositAddress\",width:\"120\",label:\"开票地址\"},{prop:\"telephone\",width:\"120\",label:\"电话\"},{prop:\"ownerUserName\",width:\"120\",label:\"创建人\"},{prop:\"createTime\",width:\"120\",label:\"创建时间\"}],this.getTitleList(),this.fieldList=[{prop:\"invoiceApplyNumber\",width:\"120\",label:\"发票申请编号\"},{prop:\"contractNum\",width:\"120\",label:\"合同名称\"},{prop:\"contractMoney\",width:\"120\",label:\"合同金额\"},{prop:\"invoiceMoney\",width:\"120\",label:\"开票金额（元）\"},{prop:\"invoiceDate\",width:\"120\",label:\"开票日期\"},{prop:\"realInvoiceDate\",width:\"120\",label:\"实际开票日期\"},{prop:\"invoiceType\",width:\"120\",label:\"开票类型\"},{prop:\"invoiceNumber\",width:\"120\",label:\"发票号码\"},{prop:\"logisticsNumber\",width:\"120\",label:\"物流单号\"},{prop:\"ownerUserName\",width:\"120\",label:\"负责人\"},{prop:\"checkStatus\",width:\"120\",label:\"审核状态\"}],this.getInvoiceList()},methods:{getTitleList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t,Object(l.m)({customerId:this.id,pageType:0}).then(function(t){e.loading=!1,e.titleList=t.data.list}).catch(function(){e.loading=!1})},getInvoiceList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t,Object(l.l)({customerId:this.id,pageType:0}).then(function(t){e.loading=!1,e.list=t.data.list}).catch(function(){e.loading=!1})},handleRowClick:function(e,t,i){\"invoiceApplyNumber\"==t.property&&(this.showFullId=e.invoiceId,this.showFullDetail=!0)},createClick:function(e){\"invoice\"==e?this.isCreate=!0:\"title\"==e&&(this.titleDetail=null,this.titleCreateShow=!0)},handleTitle:function(e,t){var i=this;\"edit\"==e?(this.titleDetail=t.row,this.titleCreateShow=!0):\"delete\"==e&&this.$confirm(\"您确定要删除吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(o.b)({infoId:t.row.infoId}).then(function(e){i.titleList.splice(t.$index,1),i.$message.success(\"删除成功\")}).catch(function(){})}).catch(function(){})},invoicefieldFormatter:function(e,t){return\"checkStatus\"===t.property?this.getStatusName(e.checkStatus):\"invoiceType\"==t.property?{1:\"增值税专用发票\",2:\"增值税普通发票\",3:\"国税通用机打发票\",4:\"地税通用机打发票\",5:\"收据\"}[e[t.property]]:\"contractMoney\"==t.property||\"invoiceMoney\"==t.property?Object(r.h)(e[t.property]||0):\"\"===e[t.property]||null===e[t.property]?\"--\":e[t.property]},titleFieldFormatter:function(e,t){return\"titleType\"===t.property?{1:\"单位\",2:\"个人\"}[e[t.property]]:\"\"===e[t.property]||null===e[t.property]?\"--\":e[t.property]},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"invoiceApplyNumber\"===t.property?\"can-visit--underline\":\"\"},detailHandle:function(e){var t=this;\"delete\"===e.type&&(this.getInvoiceList(),this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}))},markReceivables:function(e){this.rowDetail=e.row,this.markShow=!0}}},f=(i(\"BnLg\"),i(\"KHd+\")),v=Object(f.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"rc-cont\"},[e.isSeas?e._e():i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(t){e.createClick(\"title\")}}},[e._v(\"新建发票抬头\")])],1),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.titleList,height:e.tableHeight,stripe:\"\"}},[e._l(e.titleFieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width,formatter:e.titleFieldFormatter,\"show-overflow-tooltip\":\"\"}})}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"操作\",width:\"100\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"flexbox\",{attrs:{justify:\"center\"}},[i(\"el-button\",{attrs:{type:\"text\"},nativeOn:{click:function(i){e.handleTitle(\"edit\",t)}}},[e._v(\"编辑\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"text\"},nativeOn:{click:function(i){e.handleTitle(\"delete\",t)}}},[e._v(\"删除\")])],1)]}}])})],2),e._v(\" \"),i(\"flexbox\",{staticClass:\"rc-head\",staticStyle:{\"margin-top\":\"15px\"},attrs:{direction:\"row-reverse\"}},[e.isSeas?e._e():i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(t){e.createClick(\"invoice\")}}},[e._v(\"新建发票\")])],1),e._v(\" \"),i(\"el-table\",{staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\"},on:{\"row-click\":e.handleRowClick}},[e._l(e.fieldList,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,formatter:e.invoicefieldFormatter,label:t.label,width:t.width,\"show-overflow-tooltip\":\"\"}})}),e._v(\" \"),e.canUpdateStatus?i(\"el-table-column\",{attrs:{resizable:!1,label:\"操作\",fixed:\"right\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-button\",{attrs:{disabled:1==t.row.invoiceStatus,type:1==t.row.invoiceStatus?\"\":\"primary\",plain:\"\"},nativeOn:{click:function(i){e.markReceivables(t)}}},[e._v(e._s(1==t.row.invoiceStatus?\"已开票\":\"标记为开票\"))])]}}])}):e._e()],2),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.showFullId,\"crm-type\":\"invoice\"},on:{\"update:visible\":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(\" \"),e.isCreate?i(\"create\",{attrs:{detail:{customerName:e.detail.customerName,customerId:e.detail.customerId,contactsName:e.detail.contactsName,contactsMobile:e.detail.contactsMobile,contactsAddress:e.detail.contactsAddress}},on:{\"save-success\":e.getInvoiceList,close:function(t){e.isCreate=!1}}}):e._e(),e._v(\" \"),i(\"invoice-title-set\",{attrs:{visible:e.titleCreateShow,\"customer-id\":e.id,detail:e.titleDetail},on:{\"update:visible\":function(t){e.titleCreateShow=t},change:e.getTitleList}}),e._v(\" \"),i(\"mark-invoice\",{attrs:{visible:e.markShow,detail:e.rowDetail},on:{\"update:visible\":function(t){e.markShow=t},change:e.getInvoiceList}})],1)},[],!1,null,\"d2c64548\",null);v.options.__file=\"RelativeInvoice.vue\";t.default=v.exports},sV8O:function(e,t,i){},sXXF:function(e,t,i){},tMlD:function(e,t,i){\"use strict\";i.r(t);var a=i(\"Y4Le\"),n=i(\"Ew9n\"),s=i(\"raay\"),l=i(\"w4ZA\"),o=i(\"3gPr\"),c=i(\"CjUg\"),r=i(\"8OTK\"),d=i(\"6V3D\"),u=i(\"h59h\"),h=i(\"f6dm\"),m=i(\"jHPx\"),p={name:\"ProductDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,DetailImg:d.default,CRMEditBaseInfo:l.default,RelativeFiles:o.default,RelativeHandle:c.default,CRMAllCreate:r.default,Sections:u.default},mixins:[h.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"product\",headDetails:[{title:\"产品类别\",value:\"\"},{title:\"产品单位\",value:\"\"},{title:\"产品价格\",value:\"\"},{title:\"产品编码\",value:\"\"}],tabCurrentName:\"CRMEditBaseInfo\",isCreate:!1}},computed:{tabNames:function(){return[{label:\"详细资料\",name:\"CRMEditBaseInfo\"},{label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"},{label:\"操作记录\",name:\"RelativeHandle\"}]},mainFileList:function(){return this.detailData&&this.detailData.mainFileList?this.detailData.mainFileList:[]},detailFileList:function(){return this.detailData&&this.detailData.detailFileList?this.detailData.detailFileList:[]}},mounted:function(){},methods:{getDetial:function(){var e=this;this.loading=!0,Object(a.i)({productId:this.id}).then(function(t){e.loading=!1,e.detailData=t.data,e.headDetails[0].value=t.data.categoryName,e.headDetails[1].value=t.data.unit,e.headDetails[2].value=Object(m.h)(t.data.price||0),e.headDetails[3].value=t.data.num}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},previewImage:function(e,t){this.$bus.emit(\"preview-image-bus\",{index:t,data:e})}}},f=(i(\"MFLa\"),i(\"KHd+\")),v=Object(f.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}}),e._v(\" \"),a(\"flexbox\",{staticClass:\"d-container-bd\",attrs:{align:\"stretch\"}},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,n){return a(\"el-tab-pane\",{key:n,attrs:{label:t.label,name:t.name,lazy:\"\"}},[\"CRMEditBaseInfo\"===t.name?a(t.name,{tag:\"c-r-m-edit-base-info\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType}},[a(\"sections\",{staticClass:\"b-cells\",attrs:{title:\"图片信息\",\"content-height\":\"auto\"}},[a(\"div\",{staticClass:\"image\"},[e.mainFileList.length>0?a(\"div\",{staticClass:\"image-info\"},[a(\"div\",{staticClass:\"image-info__label\"},[e._v(\"产品图片\")]),e._v(\" \"),a(\"div\",{staticClass:\"image-info__list\"},e._l(e.mainFileList,function(t,n){return a(\"img\",{directives:[{name:\"src\",rawName:\"v-src\",value:t.url,expression:\"item.url\"}],key:n,staticClass:\"main-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"'},on:{click:function(t){e.previewImage(e.mainFileList,n)}}})}))]):e._e(),e._v(\" \"),e.detailFileList.length>0?a(\"div\",{staticClass:\"image-info\"},[a(\"div\",{staticClass:\"image-info__label\"},[e._v(\"产品详情图片\")]),e._v(\" \"),a(\"div\",{staticClass:\"image-info__list\"},e._l(e.detailFileList,function(t,n){return a(\"img\",{directives:[{name:\"src\",rawName:\"v-src\",value:t.url,expression:\"item.url\"}],key:n,staticClass:\"detial-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"'},on:{click:function(t){e.previewImage(e.detailFileList,n)}}})}))]):e._e(),e._v(\" \"),0==e.detailFileList.length&&0==e.mainFileList.length?a(\"div\",{staticClass:\"no-img\"},[e._v(\"暂无图片\")]):e._e()])])],1):a(t.name,{tag:\"component\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?a(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId,editDetail:e.detailData},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"70394aae\",null);v.options.__file=\"Detail.vue\";t.default=v.exports},tZ34:function(e,t,i){\"use strict\";i.r(t);var a=i(\"X5SI\"),n=i(\"ehos\"),s={name:\"RelativeExpense\",components:{CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-28d7\")]).then(i.bind(null,\"3z7q\"))},ExpenseCreate:i(\"Bbos\").default},props:{id:[String,Number],crmType:{type:String,default:\"\"}},data:function(){return{loading:!1,list:[],fieldList:[],tableHeight:\"400px\",searchType:{\"expense-examines\":\"examineId\",customer:\"customerId\",business:\"businessId\",contract:\"contractId\"},rowID:-1,showDview:!1,createShow:!1}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.list=[],this.getDetail()},\"rootTabs.currentName\":function(e){\"RelativeExpense\"===e&&this.getDetail(!1)}},mounted:function(){var e=this;this.fieldList.push({prop:\"expenseNum\",width:\"200\",label:\"费用编号\",align:\"center\"}),this.fieldList.push({prop:\"expenseType\",width:\"100\",label:\"费用类型\",align:\"center\"}),this.fieldList.push({prop:\"money\",width:\"100\",label:\"费用金额\",align:\"center\"}),this.fieldList.push({prop:\"expenseTime\",width:\"200\",label:\"费用日期\",align:\"center\"}),this.fieldList.push({prop:\"hasInvoice\",width:\"150\",label:\"是否有发票\",align:\"center\"}),this.getDetail(),this.debouncedGetDetail=Object(n.debounce)(300,function(){e.$bus.emit(\"crm-tab-num-update\"),e.getDetail()})},methods:{createClick:function(){this.createShow=!0},getDetail:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i={};i[this.searchType[this.crmType]]=this.id,Object(a.a)(i).then(function(t){e.loading=!1,e.list=t.data.list||[]}).catch(function(){e.loading=!1})},handleRowClick:function(e,t,i){\"expenseNum\"==t.property&&(this.rowID=e.expenseId,this.showDview=!0)},detailHandle:function(e){this.getDetail(),this.$emit(\"handle\",e)},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"expenseNum\"===t.property?\"can-visit--underline\":\"\"}}},l=(i(\"aoxX\"),i(\"KHd+\")),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"rc-cont\"},[i(\"flexbox\",{staticClass:\"rc-head\",attrs:{direction:\"row-reverse\"}},[i(\"el-button\",{staticClass:\"xr-btn--orange rc-head-item\",attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:e.createClick}},[e._v(\"新建费用\")])],1),e._v(\" \"),i(\"el-table\",{staticClass:\"file-table\",staticStyle:{width:\"100%\",border:\"1px solid #E6E6E6\"},attrs:{data:e.list,height:e.tableHeight,stripe:\"\",\"cell-class-name\":e.cellClassName},on:{\"row-click\":e.handleRowClick}},e._l(e.fieldList,function(e,t){return i(\"el-table-column\",{key:t,attrs:{prop:e.prop,label:e.label,align:e.align,\"show-overflow-tooltip\":\"\"}})})),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showDview,id:e.rowID,\"crm-type\":\"expense\"},on:{\"update:visible\":function(t){e.showDview=t},handle:e.detailHandle}}),e._v(\" \"),e.createShow?i(\"expense-create\",{attrs:{action:{type:\"examine\",id:e.id}},on:{close:function(t){e.createShow=!1},\"save-success\":e.detailHandle}}):e._e()],1)},[],!1,null,\"2a3c63e3\",null);o.options.__file=\"RelativeExpense.vue\";t.default=o.exports},wS25:function(e,t,i){\"use strict\";i.r(t);var a=i(\"QbLZ\"),n=i.n(a),s=i(\"VcMt\"),l={name:\"MarkInvoice\",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},detail:Object,reset:{type:Boolean,default:!1}},data:function(){return{loading:!0,form:{invoiceNumber:\"\",logisticsNumber:\"\",realInvoiceDate:\"\"}}},computed:{title:function(){return this.reset?\"重置开票信息\":\"标记为已开票\"}},watch:{visible:function(){this.reset&&(this.form={invoiceNumber:this.detail.invoiceNumber,logisticsNumber:this.detail.logisticsNumber,realInvoiceDate:this.detail.realInvoiceDate})}},mounted:function(){},methods:{handleCancel:function(){this.form={invoiceNumber:\"\",logisticsNumber:\"\",realInvoiceDate:\"\"},this.$emit(\"update:visible\",!1)},handleConfirm:function(){var e=this;if(!(this.invoiceNumber<=0)){var t=n()({},this.form);t.invoiceId=this.detail.invoiceId,this.loading=!0,(this.reset?s.i:s.j)(t).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.detail.invoiceStatus=1,e.handleCancel(),e.$emit(\"change\")}).catch(function(){e.loading=!1})}}}},o=(i(\"N/io\"),i(\"KHd+\")),c=Object(o.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:e.title,width:\"400px\"},on:{close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"el-form\",{ref:\"form\",attrs:{model:e.form,\"label-width\":\"100px\"}},[i(\"el-form-item\",{attrs:{label:\"发票号码\"}},[i(\"el-input\",{model:{value:e.form.invoiceNumber,callback:function(t){e.$set(e.form,\"invoiceNumber\",t)},expression:\"form.invoiceNumber\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"实际开票日期\"}},[i(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{\"value-format\":\"yyyy-MM-dd\",type:\"date\",placeholder:\"选择日期\"},model:{value:e.form.realInvoiceDate,callback:function(t){e.$set(e.form,\"realInvoiceDate\",t)},expression:\"form.realInvoiceDate\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"物流单号\"}},[i(\"el-input\",{model:{value:e.form.logisticsNumber,callback:function(t){e.$set(e.form,\"logisticsNumber\",t)},expression:\"form.logisticsNumber\"}})],1)],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"7370e784\",null);c.options.__file=\"MarkInvoice.vue\";t.default=c.exports},xwuj:function(e,t,i){\"use strict\";var a=i(\"dVPs\");i.n(a).a}}]);","extractedComments":[]}