{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-24c6\",\"chunk-620e\",\"chunk-28d7\",\"chunk-66e8\",\"chunk-3997\",\"chunk-36d0\",\"chunk-fcbe\"],{\"/407\":function(t,e,i){\"use strict\";i.r(e);var n={name:\"RelatedBusinessCell\",props:{type:{type:String,default:\"\"},cellIndex:Number,data:Object,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!0}},data:function(){return{}},computed:{typeName:function(){return\"customer\"==this.type?\"客户\":\"contacts\"==this.type?\"联系人\":\"business\"==this.type?\"商机\":\"contract\"==this.type?\"合同\":\"\"},name:function(){return this.data.name||this.data.businessName||this.data.customerName||this.data.number}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{footClick:function(){this.$emit(\"unbind\",this.type,this.cellIndex,this.data)},bodyClick:function(){this.$emit(\"detail\",this.type,this.cellIndex,this.data)}}},s=(i(\"/hyb\"),i(\"KHd+\")),a=Object(s.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"flexbox\",{staticClass:\"cell\"},[i(\"div\",{staticClass:\"cell-head\"},[i(\"i\",{class:t._f(\"wkIconPre\")(t.type)}),t._v(\" \"),i(\"span\",[t._v(\"\\n      \"+t._s(\"相关\"+t.typeName+\"-\")+\"\\n    \")])]),t._v(\" \"),i(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":t.cursorPointer},on:{click:t.bodyClick}},[t._v(\"\\n    \"+t._s(t.name)+\"\\n  \")]),t._v(\" \"),i(\"div\",{staticClass:\"cell-foot\"},[t.showFoot?i(\"a\",{staticClass:\"cancel-btn\",on:{click:t.footClick}},[t._v(\"取消关联\")]):t._e()])])},[],!1,null,\"061d0168\",null);a.options.__file=\"index.vue\";e.default=a.exports},\"/hyb\":function(t,e,i){\"use strict\";var n=i(\"KOLf\");i.n(n).a},\"08m3\":function(t,e,i){},\"1F+2\":function(t,e,i){},\"1Wof\":function(t,e,i){},\"1Xy/\":function(t,e,i){\"use strict\";var n=i(\"3dm0\");i.n(n).a},\"2MCj\":function(t,e,i){\"use strict\";var n=i(\"1F+2\");i.n(n).a},\"3dm0\":function(t,e,i){},\"3z7q\":function(t,e,i){\"use strict\";i.r(e);var n=i(\"7Qib\"),s=i(\"3ojK\"),a=i(\"1bNe\"),o=i(\"gwiD\"),r=i(\"vV2+\"),l=i(\"mVxz\"),c=i(\"tMlD\"),u=i(\"ALhW\"),d=i(\"slnp\"),p=i(\"pKm3\"),m=i(\"GEWF\"),h=i(\"U63j\"),f=i(\"0dur\"),v=i(\"uSKd\"),y=i(\"f462\"),g=i(\"AWvD\"),w={name:\"CRMFullScreenDetail\",components:{LeadsDetail:s.default,CustomerDetail:a.default,ContactsDetail:o.default,BusinessDetail:r.default,ContractDetail:l.default,ProductDetail:c.default,ReceivablesDetail:u.default,ExamineDetail:d.default,TaskDetail:p.default,LogDetail:m.default,NoticeDetail:h.default,VisitDetail:f.default,InvoiceDetail:v.default,ExpenseDetail:y.default,ExpenseExamineDetail:g.default},props:{id:[String,Number],crmType:{type:String,default:\"\"},visible:{type:Boolean,default:!1}},data:function(){return{showDetail:!1}},computed:{tabName:function(){return\"leads\"==this.crmType?\"LeadsDetail\":\"customer\"==this.crmType?\"CustomerDetail\":\"contacts\"==this.crmType?\"ContactsDetail\":\"business\"==this.crmType?\"BusinessDetail\":\"contract\"==this.crmType?\"ContractDetail\":\"product\"==this.crmType?\"ProductDetail\":\"receivables\"==this.crmType?\"ReceivablesDetail\":\"examine\"==this.crmType?\"ExamineDetail\":\"task\"==this.crmType?\"TaskDetail\":\"log\"==this.crmType?\"LogDetail\":\"announcement\"==this.crmType?\"NoticeDetail\":\"visit\"==this.crmType?\"VisitDetail\":\"invoice\"==this.crmType?\"InvoiceDetail\":\"expense\"==this.crmType?\"ExpenseDetail\":\"expense-examines\"==this.crmType?\"ExpenseExamineDetail\":\"\"}},watch:{visible:function(t){this.showDetail=t,t&&(document.body.appendChild(this.$el),this.$el.addEventListener(\"click\",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(n.q)())},showDetail:function(t){var e=this;t||setTimeout(function(){e.$emit(\"update:visible\",!1)},350)}},mounted:function(){this.visible&&(document.body.appendChild(this.$el),this.$el.addEventListener(\"click\",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(n.q)())},beforeDestroy:function(){this.$el&&this.$el.parentNode&&(this.$el.parentNode.removeChild(this.$el),this.$el.removeEventListener(\"click\",this.handleDocumentClick,!1))},methods:{hiddenView:function(){this.showDetail=!1},handleDocumentClick:function(t){this.$el==t.target&&(this.showDetail=!1)},detailHandle:function(t){\"alloc\"!==t.type&&\"get\"!==t.type&&\"transfer\"!==t.type&&\"transform\"!==t.type&&\"delete\"!==t.type&&\"put_seas\"!==t.type||(this.showDetail=!1),this.$emit(\"handle\",t)}}},b=(i(\"F+K4\"),i(\"KHd+\")),_=Object(b.a)(w,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.visible,expression:\"visible\"}],staticClass:\"full-container\"},[t.id&&t.showDetail?i(t.tabName,{tag:\"component\",staticClass:\"d-view\",attrs:{\"crm-type\":t.crmType,id:t.id},on:{handle:t.detailHandle,\"hide-view\":t.hiddenView}}):t._e()],1)},[],!1,null,\"6a746c2c\",null);_.options.__file=\"CRMFullScreenDetail.vue\";e.default=_.exports},\"4lzj\":function(t,e,i){},ANtS:function(t,e,i){\"use strict\";var n=i(\"fRE+\");i.n(n).a},Bd1s:function(t,e,i){\"use strict\";var n=i(\"08m3\");i.n(n).a},BsgX:function(t,e,i){\"use strict\";i.r(e);var n={name:\"ReportMenu\",components:{},mixins:[i(\"Z+Ht\").a],props:{list:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{itemClick:function(t){this.$emit(\"select\",t)}}},s=(i(\"2MCj\"),i(\"KHd+\")),a=Object(s.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"span\",{staticClass:\"report-menu\"},t._l(t.list,function(e,n){return i(\"span\",{key:n,staticClass:\"report-menu-btn\",on:{click:function(i){t.itemClick(e)}}},[i(\"i\",{staticClass:\"report-menu-btn__icon\",class:t.getXrIcon(e.type),style:{color:t.getXrIconColor(e.type)}}),t._v(\" \"),i(\"span\",{staticClass:\"report-menu-btn__name\"},[t._v(t._s(e.name))])])}))},[],!1,null,\"37799401\",null);a.options.__file=\"ReportMenu.vue\";e.default=a.exports},Cbuk:function(t,e,i){},EBQf:function(t,e,i){\"use strict\";var n=i(\"QbLZ\"),s=i.n(n),a=i(\"mkuN\"),o=i(\"/407\"),r=i(\"L2JU\"),l={name:\"RelatedBusiness\",components:{CrmRelative:a.a,RelatedBusinessCell:o.default},props:{marginLeft:{type:String,default:\"20px\"},allData:{type:Object,default:function(){return{contacts:[],customer:[],business:[],contract:[]}}},showFoot:{type:Boolean,default:!1},showAdd:{type:Boolean,default:!0}},data:function(){return{showTypes:[\"customer\",\"contacts\",\"business\",\"contract\"],showPopover:!1,relevanceAll:{customerIds:[],contractIds:[],contactsIds:[],businessIds:[]},relatedListData:{},showRelative:!1}},computed:s()({},Object(r.b)([\"crm\"]),{showCRMPermission:function(){return this.crm}}),watch:{allData:function(){this.relatedListData=this.allData}},mounted:function(){this.relatedListData=this.allData},methods:{crmrelativeClose:function(){this.showPopover=!1},checkInfos:function(t){var e=this;this.showPopover=!1,this.relatedListData=t.data;var i=function(i){var n=t.data[i];e.relevanceAll[i+\"Ids\"]=n.map(function(t){return t[i+\"Id\"]})};for(var n in t.data)i(n);this.$emit(\"checkInfos\",this.relevanceAll,t.data)},delRelevance:function(t,e,i){this.$emit(\"unbind\",t,i,e)},checkRelatedDetail:function(t,e){e.key=e[t+\"Id\"]||e.id,this.$emit(\"checkRelatedDetail\",t,e)}}},c=(i(\"PdhK\"),i(\"KHd+\")),u=Object(c.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"related-business\",style:{\"margin-left\":t.marginLeft}},[t.showAdd?i(\"el-popover\",{attrs:{placement:\"right-end\",width:\"800\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:\"showPopover\"}},[t.showRelative?i(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:t.showPopover,radio:!1,\"selected-data\":t.relatedListData,\"show-types\":t.showTypes},on:{close:t.crmrelativeClose,changeCheckout:t.checkInfos}}):t._e(),t._v(\" \"),t.showCRMPermission?i(\"span\",{staticClass:\"add-btn\",attrs:{slot:\"reference\"},on:{click:function(e){t.showRelative=!0}},slot:\"reference\"},[i(\"i\",{staticClass:\"wk wk-l-plus\"}),t._v(\" \"),i(\"span\",{staticClass:\"label\"},[t._v(\"关联业务\")])]):t._e()],1):t._e(),t._v(\" \"),t._l(t.relatedListData,function(e,n){return i(\"div\",{key:n,staticStyle:{\"margin-top\":\"10px\"}},t._l(e,function(e,s){return i(\"related-business-cell\",{key:s,attrs:{data:e,\"cell-index\":s,type:n,\"show-foot\":t.showFoot},on:{unbind:t.delRelevance,detail:function(i){t.checkRelatedDetail(n,e)}}})}))})],2)},[],!1,null,\"2724a194\",null);u.options.__file=\"RelatedBusiness.vue\";e.a=u.exports},\"F+K4\":function(t,e,i){\"use strict\";var n=i(\"1Wof\");i.n(n).a},FoeY:function(t,e,i){\"use strict\";i.d(e,\"d\",function(){return s}),i.d(e,\"a\",function(){return a}),i.d(e,\"b\",function(){return o}),i.d(e,\"e\",function(){return r}),i.d(e,\"c\",function(){return l});var n=i(\"t3Un\");function s(t){return Object(n.a)({url:\"oaAnnouncement/queryList\",method:\"post\",data:t})}function a(t){var e=t.announcementId?\"setAnnouncement\":\"addAnnouncement\";return Object(n.a)({url:\"oaAnnouncement/\"+e,method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(n.a)({url:\"oaAnnouncement/delete/\"+t,method:\"post\"})}function r(t){return Object(n.a)({url:\"oaAnnouncement/queryById/\"+t,method:\"post\"})}function l(t){return Object(n.a)({url:\"oaAnnouncement/readAnnouncement\",method:\"post\",data:t})}},GEWF:function(t,e,i){\"use strict\";i.r(e);var n=i(\"QbLZ\"),s=i.n(n),a=i(\"VmBU\"),o=i(\"Ir+r\"),r=i(\"Ew9n\"),l=i(\"MdnP\"),c=i(\"hwzM\"),u=i(\"/407\"),d=i(\"BsgX\"),p=i(\"KmSi\"),m=i(\"dPzk\"),h=i(\"z7oh\"),f=i(\"L2JU\"),v=i(\"jHPx\"),y={name:\"LogDetail\",components:{SlideView:r.a,PictureListView:l.a,FileCell:c.default,RelatedBusinessCell:u.default,ReportMenu:d.default,ReportList:p.default,ReplyComment:m.a,CommentList:h.a,CRMFullScreenDetail:function(){return i.e(\"chunk-66e8\").then(i.bind(null,\"3z7q\"))}},props:{id:[String,Number],noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,detail:null,relatedID:\"\",relatedCRMType:\"\",showRelatedDetail:!1,reportList:[{type:\"customer\",key:\"customerCount\",info:\"今日新增客户\",name:\"今日新增客户 0\"},{type:\"business\",key:\"businessCount\",info:\"今日新增商机\",name:\"今日新增商机 0\"},{type:\"contract\",key:\"contractCount\",info:\"今日新增合同\",name:\"今日新增合同 0\"},{type:\"receivables\",key:\"receivablesMoney\",info:\"今日新增回款\",name:\"今日新增回款 0\"},{type:\"record\",key:\"recordCount\",info:\"今日新增跟进记录\",name:\"今日新增跟进记录 0\"}],reportListShow:!1,fieldReportList:null,reportData:{title:\"\",placeholder:\"\",crmType:\"\",request:null,recordRequest:a.g,params:null,paging:!0,sortable:!1},commentLoading:!1,replyList:[]}},computed:s()({},Object(f.b)([\"userInfo\"]),{relatedListData:function(){for(var t={},e=[\"contacts\",\"customer\",\"business\",\"contract\"],i=0;i<e.length;i++){var n=e[i],s=this.detail[n+\"List\"]||[];s.length>0&&(t[n]=s)}return t}}),watch:{id:function(){this.viewAfterEnter()}},mounted:function(){},beforeDestroy:function(){},methods:{viewAfterEnter:function(){this.detail=null,this.getDetail(),this.getCommentList()},getDetail:function(){var t=this;this.loading=!0,Object(a.h)({logId:this.id}).then(function(e){if(t.detail=e.data,t.detail.getBulletin){var i=t.detail.bulletin||{};t.reportList=t.reportList.map(function(t){return\"receivablesMoney\"==t.key&&(i.receivablesMoney=Object(v.h)(Math.floor(i.receivablesMoney||0))),t.name=t.info+\" \"+i[t.key],t})}t.loading=!1}).catch(function(){t.loading=!1,t.hideView()})},checkRelatedDetail:function(t,e){this.relatedID=e[t+\"Id\"],this.relatedCRMType=t,this.showRelatedDetail=!0},hideView:function(){this.$emit(\"close\"),this.$emit(\"hide-view\")},reportSelect:function(t,e){e=this.detail,t.type&&(this.reportData.title=\"销售简报-\"+t.info,this.reportData.placeholder={customer:\"请输入客户名称\",business:\"请输入商机名称\",contract:\"请输入合同名称\",receivables:\"请输入回款编号\",record:\"\"}[t.type],this.reportData.crmType=t.type,this.reportData.params=e?{logId:e.logId}:{today:1},this.reportData.params.type={customer:1,business:2,contract:3,receivables:4,record:5}[t.type],\"record\"==t.type?(this.fieldReportList=[{label:\"模块\",prop:\"crmType\",width:300},{label:\"新增跟进记录数\",prop:\"count\"}],this.reportData.request=a.i,this.reportData.paging=!1,this.reportData.sortable=!1):(this.fieldReportList=this.getReportFieldList(t.type),this.reportData.request=a.g,this.reportData.paging=!0,this.reportData.sortable=\"custom\"),this.reportListShow=!0)},getReportFieldList:function(t){return{customer:[{label:\"客户名称\",prop:\"customerName\"},{label:\"成交状态\",prop:\"dealStatus\"},{label:\"最后跟进时间\",prop:\"lastTime\"},{label:\"创建时间\",prop:\"createTime\"},{label:\"负责人\",prop:\"ownerUserName\"}],business:[{label:\"商机名称\",prop:\"businessName\"},{label:\"商机阶段\",prop:\"statusName\"},{label:\"最后跟进时间\",prop:\"lastTime\"},{label:\"创建时间\",prop:\"createTime\"},{label:\"负责人\",prop:\"ownerUserName\"}],contract:[{label:\"合同名称\",prop:\"contractName\"},{label:\"合同状态\",prop:\"checkStatus\"},{label:\"创建时间\",prop:\"createTime\"},{label:\"公司签约人\",prop:\"companyUserName\"}],receivables:[{label:\"回款编号\",prop:\"number\"},{label:\"回款时间\",prop:\"returnTime\"},{label:\"负责人\",prop:\"ownerUserName\"}]}[t]},getCommentList:function(){var t=this;Object(o.b)({typeId:this.id,type:2}).then(function(e){var i=e.data||[];t.replyList=i}).catch(function(){})},closeOtherReply:function(t){!t&&this.$refs.comment_list&&this.$refs.comment_list.closeReply()},deleteComment:function(t){this.replyList.splice(t,1)},handleReply:function(t){var e=this;this.commentLoading=!0,Object(o.c)({type:2,content:t,typeId:this.id}).then(function(t){t.data.user={userId:e.userInfo.userId,realname:e.userInfo.realname,img:e.userInfo.img},t.data.childCommentList=[],e.$refs.f_reply.commentsTextarea=\"\",e.replyList.push(t.data),e.commentLoading=!1}).catch(function(){e.commentLoading=!1})}}},g=(i(\"REO3\"),i(\"KHd+\")),w=Object(g.a)(y,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"slide-view\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"d-view\",attrs:{\"no-listener-class\":t.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:t.viewAfterEnter,close:t.hideView}},[t.detail?i(\"div\",{staticClass:\"main\",attrs:{direction:\"column\",align:\"stretch\"}},[i(\"flexbox\",{staticClass:\"detail-header\"},[i(\"div\",{staticClass:\"header-icon\"},[i(\"i\",{staticClass:\"wk wk-log\"})]),t._v(\" \"),i(\"div\",{staticClass:\"header-name\"},[t._v(\"日志\")])]),t._v(\" \"),i(\"div\",{staticClass:\"main__bd\"},[i(\"div\",{staticClass:\"main__bd--info\"},[i(\"div\",{staticClass:\"content\"},[t.detail.content?i(\"div\",{staticClass:\"content-box\"},[i(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n              今日工作内容：\\n            \")]),t._v(\" \"),i(\"div\",{staticClass:\"content-text\"},[t._v(t._s(t.detail.content))])]):t._e(),t._v(\" \"),t.detail.tomorrow?i(\"div\",{staticClass:\"content-box\"},[i(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n              明日工作的内容：\\n            \")]),t._v(\" \"),i(\"div\",{staticClass:\"content-text\"},[t._v(t._s(t.detail.tomorrow))])]):t._e(),t._v(\" \"),t.detail.question?i(\"div\",{staticClass:\"content-box\"},[i(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n              遇到的问题：\\n            \")]),t._v(\" \"),i(\"div\",{staticClass:\"content-text\"},[t._v(t._s(t.detail.question))])]):t._e()]),t._v(\" \"),0!==t.detail.img.length?i(\"picture-list-view\",{attrs:{list:t.detail.img}}):t._e(),t._v(\" \"),t.detail.sendUserList&&t.detail.sendUserList.length?i(\"flexbox\",{staticClass:\"send-list\"},[i(\"span\",{staticClass:\"send-list__label\"},[t._v(\"发送给：\")]),t._v(\" \"),t._l(t.detail.sendUserList,function(t,e){return i(\"span\",{key:e,staticClass:\"send-list__user\"},[i(\"xr-avatar\",{attrs:{name:t.realname,size:32,src:t.img,id:t.userId,disabled:!1,trigger:\"hover\"}})],1)})],2):t._e(),t._v(\" \"),t.detail.file.length?i(\"div\",{staticClass:\"section\"},[i(\"div\",{staticClass:\"section__hd\"},[i(\"i\",{staticClass:\"wukong wukong-file\"}),t._v(\" \"),i(\"span\",[t._v(\"附件\")]),t._v(\" \"),i(\"span\",[t._v(\"(\"+t._s(t.detail.file.length)+\")\")])]),t._v(\" \"),i(\"div\",{staticClass:\"section__bd\"},t._l(t.detail.file,function(e,n){return i(\"file-cell\",{key:n,attrs:{data:e,list:t.detail.file,\"cell-index\":n}})}))]):t._e(),t._v(\" \"),Object.keys(t.relatedListData).length>0?i(\"div\",{staticClass:\"section\"},[i(\"div\",{staticClass:\"section__hd\"},[i(\"i\",{staticClass:\"wukong wukong-relevance\"}),t._v(\" \"),i(\"span\",[t._v(\"相关信息\")])]),t._v(\" \"),i(\"div\",{staticClass:\"section__bd\"},t._l(t.relatedListData,function(e,n){return i(\"div\",{key:n},t._l(e,function(e,s){return i(\"related-business-cell\",{key:s,attrs:{data:e,\"cell-index\":s,type:n,\"show-foot\":!1},nativeOn:{click:function(i){t.checkRelatedDetail(n,e)}}})}))}))]):t._e(),t._v(\" \"),t.detail.getBulletin?i(\"div\",{staticClass:\"section\"},[i(\"div\",{staticClass:\"section__hd\"},[i(\"i\",{staticClass:\"wk wk-briefing\"}),t._v(\" \"),i(\"span\",[t._v(\"销售简报\")])]),t._v(\" \"),i(\"div\",{staticClass:\"section__bd\"},[i(\"report-menu\",{attrs:{list:t.reportList},on:{select:t.reportSelect}})],1)]):t._e()],1),t._v(\" \"),i(\"el-tabs\",{staticClass:\"commont\",attrs:{value:\"commont\",type:\"border-card\"}},[i(\"el-tab-pane\",{attrs:{label:\"回复\",name:\"commont\"}},[i(\"reply-comment\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.commentLoading,expression:\"commentLoading\"}],ref:\"f_reply\",on:{toggle:t.closeOtherReply,reply:t.handleReply}}),t._v(\" \"),t.replyList.length>0?i(\"comment-list\",{ref:\"comment_list\",attrs:{id:t.id,list:t.replyList,type:\"2\"},on:{delete:t.deleteComment,\"close-other-reply\":function(e){t.$refs.f_reply.toggleFocus(!0)}}}):t._e()],1)],1)],1)],1):t._e(),t._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:t.showRelatedDetail,\"crm-type\":t.relatedCRMType,id:t.relatedID},on:{\"update:visible\":function(e){t.showRelatedDetail=e}}}),t._v(\" \"),i(\"report-list\",{attrs:{show:t.reportListShow,title:t.reportData.title,placeholder:t.reportData.placeholder,\"crm-type\":t.reportData.crmType,request:t.reportData.request,params:t.reportData.params,\"record-request\":t.reportData.recordRequest,\"field-list\":t.fieldReportList,paging:t.reportData.paging,sortable:t.reportData.sortable},on:{\"update:show\":function(e){t.reportListShow=e}}})],1)},[],!1,null,\"6037d098\",null);w.options.__file=\"LogDetail.vue\";e.default=w.exports},HtQe:function(t,e,i){\"use strict\";var n=i(\"OM3V\");i.n(n).a},IJOA:function(t,e,i){\"use strict\";var n=i(\"ujp9\");i.n(n).a},\"Ir+r\":function(t,e,i){\"use strict\";i.d(e,\"c\",function(){return s}),i.d(e,\"a\",function(){return a}),i.d(e,\"b\",function(){return o});var n=i(\"t3Un\");function s(t){return Object(n.a)({url:\"workTaskComment/setComment\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function a(t){return Object(n.a)({url:\"workTaskComment/deleteComment\",method:\"post\",data:t})}function o(t){return Object(n.a)({url:\"workTaskComment/queryCommentList\",method:\"post\",data:t})}},KOLf:function(t,e,i){},KmSi:function(t,e,i){\"use strict\";i.r(e);var n=i(\"QbLZ\"),s=i.n(n),a=i(\"4XAY\"),o=i(\"ZoMv\"),r=i(\"yPq4\"),l=i(\"qDfk\"),c=i(\"L2JU\"),u=i(\"4peS\"),d=i.n(u),p=i(\"dAOq\"),m={name:\"ReportList\",components:{CRMAllDetail:r.default,RecordList:l.default},filters:{dealIcon:function(t){return 1==t?\"wk wk-success deal-suc\":\"wk wk-close deal-un\"},dealName:function(t){return 1==t?\"已成交\":\"未成交\"}},mixins:[p.a],props:{show:{type:Boolean,default:!1},title:String,placeholder:{type:String,default:\"请输入搜索内容\"},crmType:String,fieldList:Array,recordRequest:Function,request:Function,params:Object,paging:{type:Boolean,default:!0},sortable:{type:[Boolean,String],default:!1}},data:function(){return{inputContent:\"\",loading:!1,tableHeight:this.getTableHeight(),list:[],showFieldList:[],sortData:{},currentPage:1,pageSize:d.a.get(\"crmPageSizes\")||15,pageSizes:[15,30,60,100],total:0,rowID:\"\",rowType:\"\",showDview:!1,recordParams:{},recordShow:!1}},computed:s()({},Object(c.b)([\"crm\"]),{showExamineStatus:function(){return\"contract\"==this.crmType&&\"receivables\"==this.crmType},showFillColumn:function(){return!this.fieldList||!this.fieldList.length}}),watch:{show:function(t){t&&this.initInfo()}},mounted:function(){this.$el.addEventListener(\"click\",this.handleDocumentClick,!1)},destroyed:function(){this.$el&&this.$el.removeEventListener(\"click\",this.handleDocumentClick,!1)},methods:{getTableHeight:function(){var t=document.documentElement.clientHeight;return t-.2*t-200},initInfo:function(){var t=this;this.inputContent=\"\",this.showFieldList=[],this.sortData={},this.$nextTick(function(){t.$refs.crmTable.clearSort()}),this.list=[],this.currentPage=1,window.onresize=function(){t.tableHeight=t.getTableHeight()},this.fieldList?(this.showFieldList=this.fieldList,this.getList()):this.getFieldList()},searchInput:function(){this.currentPage=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e={};this.paging&&(e={page:this.currentPage,limit:this.pageSize}),this.placeholder&&(e.search=this.inputContent),this.sortData.order&&(e.sortField=this.sortData.prop,e.order=\"ascending\"==this.sortData.order?2:1),this.request(s()({},e,this.params)).then(function(e){t.paging?(t.list=e.data.list,t.total=e.data.totalRow):t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},getFieldList:function(){var t=this;if(0==this.showFieldList.length){this.loading=!0;var e=\"business_status\"==this.crmType?\"business\":this.crmType,i={label:o.default[e]};Object(a.A)(i).then(function(e){for(var i=0;i<e.data.length;i++){var n=e.data[i],s=0;s=n.width?n.width:n.name&&n.name.length<=6?15*n.name.length+45:140,t.showFieldList.push({prop:n.fieldName,label:n.name,width:s})}t.getList()}).catch(function(){t.loading=!1})}else this.getList()},fieldFormatter:function(t,e){return this.fieldList&&this.fieldList.length&&\"crmType\"==e.property?o.default.convertTypeToName(t[e.property]):\"\"===t[e.property]||null===t[e.property]?\"--\":t[e.property]},sortChange:function(t,e,i){this.sortData=t,this.getList()},handleSizeChange:function(t){d.a.set(\"crmPageSizes\",t),this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},handleRowClick:function(t,e,i){\"leads\"===this.crmType?\"leadsName\"===e.property?(this.rowID=t.leadsId,this.showDview=!0):this.showDview=!1:\"customer\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):this.showDview=!1:\"contacts\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"name\"===e.property?(this.rowID=t.contactsId,this.rowType=\"contacts\",this.showDview=!0):this.showDview=!1:\"business\"===this.crmType||\"business_status\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===e.property?(this.rowID=t.businessId,this.rowType=\"business\",this.showDview=!0):this.showDview=!1:\"contract\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===e.property?(this.rowID=t.businessId,this.rowType=\"business\",this.showDview=!0):\"contactsName\"===e.property?(this.rowID=t.contactsId,this.rowType=\"contacts\",this.showDview=!0):\"num\"===e.property||\"name\"===e.property?(this.rowID=t.contractId,this.rowType=\"contract\",this.showDview=!0):this.showDview=!1:\"product\"===this.crmType?\"name\"===e.property?(this.rowID=t.productId,this.showDview=!0):this.showDview=!1:\"receivables\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"contractNum\"===e.property?(this.rowID=t.contractId,this.rowType=\"contract\",this.showDview=!0):\"number\"===e.property?(this.rowID=t.receivablesId,this.rowType=\"receivables\",this.showDview=!0):this.showDview=!1:\"record\"===this.crmType&&(\"count\"===e.property&&t.count?(this.rowType=\"crm_\"+o.default.convertTypeToKey(t.crmType),this.recordParams=s()({crmType:t.crmType,queryType:0},this.params),this.recordShow=!0):this.recordShow=!1)},handleHandle:function(t){\"alloc\"!==t.type&&\"get\"!==t.type&&\"transfer\"!==t.type&&\"transform\"!==t.type&&\"delete\"!==t.type&&\"put_seas\"!==t.type||(this.showDview=!1),\"edit\"!==t.type&&this.getList()},cellClassName:function(t){var e=t.row,i=t.column;t.rowIndex,t.columnIndex;return this.crmType&&(\"customerName\"===i.property||\"businessName\"===i.property||\"name\"===i.property||\"contactsName\"===i.property||\"num\"===i.property||\"contractNum\"===i.property||\"number\"===i.property||\"record\"===this.crmType&&\"count\"===i.property&&e[i.property])?\"can-visit--underline\":\"\"},hideView:function(){this.$emit(\"update:show\",!1),this.$emit(\"hide\")},handleDocumentClick:function(t){var e=!0,i=document.getElementsByClassName(\"el-table__row\");if(i&&e)for(var n=0;n<i.length;n++){if(i[n].contains(t.target)){e=!1;break}}document.getElementById(\"slide\")&&document.getElementById(\"slide\").contains(t.target)&&(e=!1),e&&(this.showDview=!1)}}},h=(i(\"hr1e\"),i(\"KHd+\")),f=Object(h.a)(m,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{attrs:{visible:t.show,\"append-to-body\":!0,\"close-on-click-modal\":!1,top:\"10vh\",width:\"80%\",\"custom-class\":\"no-padding-dialog\"},on:{close:t.hideView}},[i(\"div\",{staticClass:\"header\",attrs:{slot:\"title\"},on:{click:function(e){t.showDview=!1}},slot:\"title\"},[i(\"span\",{staticClass:\"title\"},[t._v(t._s(t.title))]),t._v(\" \"),t.placeholder?i(\"el-input\",{staticClass:\"search-input\",attrs:{placeholder:t.placeholder},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.searchInput(e):null}},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:\"inputContent\"}},[i(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},nativeOn:{click:function(e){return t.searchInput(e)}},slot:\"append\"})],1):t._e()],1),t._v(\" \"),i(\"div\",{staticClass:\"container\"},[i(\"div\",{staticClass:\"content\"},[i(\"div\",{staticClass:\"list-body\"},[i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],ref:\"crmTable\",staticStyle:{width:\"100%\"},attrs:{id:\"crm-table\",data:t.list,height:t.tableHeight,\"cell-class-name\":t.cellClassName,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"row-click\":t.handleRowClick,\"sort-change\":t.sortChange}},[t._l(t.showFieldList,function(e,n){return i(\"el-table-column\",{key:n,attrs:{sortable:\"poolDay\"!=e.prop&&\"custom\",fixed:0==n,prop:e.prop,label:e.label,width:e.width,\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(n){return[\"dealStatus\"==e.prop?[i(\"i\",{class:t._f(\"dealIcon\")(n.row[e.prop])}),t._v(\" \"),i(\"span\",[t._v(t._s(t._f(\"dealName\")(n.row[e.prop])))])]:\"status\"==e.prop?[2==n.row.status?i(\"i\",{staticClass:\"wk wk-circle-password customer-lock\"}):t._e()]:\"checkStatus\"==e.prop?[i(\"span\",{staticClass:\"status-mark\",style:{backgroundColor:t.getStatusColor(n.row.checkStatus)}}),t._v(\" \"),i(\"span\",[t._v(t._s(t.getStatusName(n.row.checkStatus)))])]:[t._v(t._s(t.fieldFormatter(n.row,n.column)))]]}}])})}),t._v(\" \"),t.showFillColumn?i(\"el-table-column\"):t._e()],2),t._v(\" \"),t.paging?i(\"div\",{staticClass:\"p-contianer\"},[i(\"el-pagination\",{staticClass:\"p-bar\",attrs:{\"current-page\":t.currentPage,\"page-sizes\":t.pageSizes,\"page-size\":t.pageSize,total:t.total,background:\"\",layout:\"prev, pager, next, sizes, total, jumper\"},on:{\"update:pageSize\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1):t._e()],1)]),t._v(\" \"),i(\"c-r-m-all-detail\",{staticClass:\"d-view\",attrs:{visible:t.showDview,\"crm-type\":t.rowType,id:t.rowID},on:{\"update:visible\":function(e){t.showDview=e},handle:t.handleHandle}}),t._v(\" \"),t.recordShow?i(\"record-list\",{attrs:{\"crm-type\":t.rowType,request:t.recordRequest,params:t.recordParams},on:{handle:t.getList,hide:function(e){t.recordShow=!1}}}):t._e()],1)])},[],!1,null,\"a44b35be\",null);f.options.__file=\"index.vue\";e.default=f.exports},MdnP:function(t,e,i){\"use strict\";var n={name:\"PictureListView\",props:{list:{type:Array,required:!0}},methods:{imgZoom:function(t,e){this.$bus.emit(\"preview-image-bus\",{index:e,data:t.map(function(t,e,i){return{url:t.filePath||t.url,name:t.name}})})}}},s=(i(\"IJOA\"),i(\"KHd+\")),a=Object(s.a)(n,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"picture-list-view\"},t._l(t.list,function(e,s){return n(\"div\",{key:s,staticClass:\"img-list-item\",on:{click:function(e){t.imgZoom(t.list,s)}}},[n(\"img\",{directives:[{name:\"src\",rawName:\"v-src\",value:e.filePath||e.url,expression:\"imgItem.filePath || imgItem.url\"}],key:e.filePath||e.url,attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"'}})])}))},[],!1,null,\"29b203af\",null);a.options.__file=\"PictureListView.vue\";e.a=a.exports},OM3V:function(t,e,i){},OdVz:function(t,e,i){\"use strict\";var n=i(\"VlxE\");i.n(n).a},PdhK:function(t,e,i){\"use strict\";var n=i(\"Cbuk\");i.n(n).a},REO3:function(t,e,i){\"use strict\";var n=i(\"cOW0\");i.n(n).a},U63j:function(t,e,i){\"use strict\";i.r(e);var n=i(\"QbLZ\"),s=i.n(n),a=i(\"FoeY\"),o=i(\"Ew9n\"),r=i(\"jM2j\"),l=i(\"L2JU\"),c={name:\"NoticeDetail\",components:{SlideView:o.a,NewDialog:r.default},props:{id:[String,Number],noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,detail:null,announcementAddShow:!1}},computed:s()({},Object(l.b)([\"allAuth\"]),{permissionUpdate:function(){return this.allAuth&&this.allAuth.manage&&this.allAuth.manage.notice&&this.allAuth.manage.notice.update},permissionDelete:function(){return this.allAuth&&this.allAuth.manage&&this.allAuth.manage.notice&&this.allAuth.manage.notice.delete},moreTypes:function(){var t=[];return this.permissionUpdate&&t.push({type:\"edit\",name:\"编辑\",icon:\"edit\"}),this.permissionDelete&&t.push({type:\"delete\",name:\"删除\",icon:\"delete\"}),t}}),watch:{id:function(t){this.detail=null,this.getDetail()}},mounted:function(){this.getDetail()},beforeDestroy:function(){},methods:{getDetail:function(){var t=this;this.loading=!0,Object(a.e)(this.id).then(function(e){t.detail=e.data,t.loading=!1}).catch(function(){t.loading=!1,t.hideView()})},handleTypeDrop:function(t){\"delete\"==t?this.deleteDetail():this.announcementAddShow=!0},deleteDetail:function(){var t=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(a.b)(t.id).then(function(e){t.$emit(\"delete\"),t.$message({type:\"success\",message:\"删除成功!\"}),t.hideView()}).catch(function(){})}).catch(function(){t.$message({type:\"info\",message:\"已取消删除\"})})},hideView:function(){this.$emit(\"close\"),this.$emit(\"hide-view\")}}},u=(i(\"1Xy/\"),i(\"KHd+\")),d=Object(u.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"slide-view\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"d-view\",attrs:{\"no-listener-class\":t.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{close:t.hideView}},[t.detail?i(\"div\",{staticClass:\"main\",attrs:{direction:\"column\",align:\"stretch\"}},[i(\"flexbox\",{staticClass:\"detail-header\"},[i(\"div\",{staticClass:\"header-icon\"},[i(\"i\",{staticClass:\"wk wk-log\"})]),t._v(\" \"),i(\"div\",{staticClass:\"header-name\"},[t._v(\"公告\")]),t._v(\" \"),t.moreTypes.length>0?i(\"el-dropdown\",{attrs:{trigger:\"click\"},on:{command:t.handleTypeDrop}},[i(\"el-button\",{attrs:{icon:\"el-icon-more\"}}),t._v(\" \"),i(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},t._l(t.moreTypes,function(e,n){return i(\"el-dropdown-item\",{key:n,attrs:{icon:t._f(\"wkIconPre\")(e.icon),command:e.type}},[t._v(t._s(e.name))])}))],1):t._e()],1),t._v(\" \"),i(\"div\",{staticClass:\"detail-title\"},[t._v(t._s(t.detail.title))]),t._v(\" \"),i(\"div\",{staticClass:\"detail-time\"},[t._v(t._s(t.detail.updateTime))]),t._v(\" \"),i(\"div\",{staticClass:\"main__bd\"},[t._v(t._s(t.detail.content))])],1):t._e(),t._v(\" \"),t.announcementAddShow?i(\"new-dialog\",{attrs:{action:{type:\"update\",id:t.id,data:t.detail}},on:{onSubmit:t.getDetail,close:function(e){t.announcementAddShow=!1}}}):t._e()],1)},[],!1,null,\"f2b96c32\",null);d.options.__file=\"NoticeDetail.vue\";e.default=d.exports},VlxE:function(t,e,i){},VmBU:function(t,e,i){\"use strict\";i.d(e,\"e\",function(){return s}),i.d(e,\"a\",function(){return a}),i.d(e,\"c\",function(){return o}),i.d(e,\"b\",function(){return r}),i.d(e,\"j\",function(){return l}),i.d(e,\"h\",function(){return c}),i.d(e,\"f\",function(){return u}),i.d(e,\"g\",function(){return d}),i.d(e,\"i\",function(){return p}),i.d(e,\"d\",function(){return m}),i.d(e,\"m\",function(){return h}),i.d(e,\"l\",function(){return f}),i.d(e,\"k\",function(){return v}),i.d(e,\"n\",function(){return y});var n=i(\"t3Un\");function s(t){return Object(n.a)({url:\"oaLog/queryList\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}function a(t){return Object(n.a)({url:\"oaLog/addOrUpdate\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}function o(t){return Object(n.a)({url:\"oaLog/addOrUpdate\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}function r(t){return Object(n.a)({url:\"oaLog/deleteById\",method:\"post\",data:t})}function l(t){return Object(n.a)({url:\"oaLog/readLog\",method:\"post\",data:t})}function c(t){return Object(n.a)({url:\"oaLog/queryById\",method:\"post\",data:t})}function u(t){return Object(n.a)({url:\"oaLog/queryLogBulletin\",method:\"post\",data:t})}function d(t){return Object(n.a)({url:\"oaLog/queryLogBulletinByType\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function p(t){return Object(n.a)({url:\"oaLog/queryLogRecordCount\",method:\"post\",data:t})}function m(t){return Object(n.a)({url:\"oaLog/getLogWelcomeSpeech\",method:\"post\",data:t})}function h(t){return Object(n.a)({url:\"oaLog/export\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},responseType:\"blob\"})}function f(t){return Object(n.a)({url:\"oaLog/queryCompleteStats\",method:\"post\",data:t})}function v(t){return Object(n.a)({url:\"oaLog/queryCompleteOaLogList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function y(t){return Object(n.a)({url:\"oaLog/queryIncompleteOaLogList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}},ZZgR:function(t,e,i){},cOW0:function(t,e,i){},cZgO:function(t,e,i){\"use strict\";var n=i(\"ZZgR\");i.n(n).a},d5Rn:function(t,e,i){},dPzk:function(t,e,i){\"use strict\";var n=i(\"Xjjk\"),s=i.n(n),a={name:\"ReplyComment\",components:{Emoji:i(\"u+Mw\").a},data:function(){return{commentLoading:!1,blurIndex:0,commentsTextarea:\"\",showEmoji:!1,showNoFocus:!1}},methods:{blurFun:function(t){this.blurIndex=t.target.selectionEnd},selectEmoji:function(t){if(this.commentsTextarea&&this.commentsTextarea.length+t.length<=2e3||!this.commentsTextarea){var e=this.commentsTextarea.split(\"\");e.splice(this.blurIndex,0,t),this.commentsTextarea=e.join(\"\"),this.showEmoji=!1}},commentSubmit:function(){this.commentsTextarea?this.$emit(\"reply\",s()(this.commentsTextarea)):this.$message.error(\"回复内容不能为空\")},closeComment:function(){this.showEmoji=!1,this.$emit(\"close\"),this.toggleFocus()},toggleFocus:function(t){this.showNoFocus=\"boolean\"==typeof t?t:!this.showNoFocus,this.$emit(\"toggle\",this.showNoFocus)}}},o=(i(\"szeO\"),i(\"KHd+\")),r=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.commentLoading,expression:\"commentLoading\"}],staticClass:\"reply-comment\"},[t.showNoFocus?i(\"div\",{staticClass:\"no-focus\",on:{click:function(e){t.toggleFocus()}}},[t._v(\"\\n    请输入回复内容\\n  \")]):[i(\"el-input\",{attrs:{rows:3,maxlength:2e3,\"show-word-limit\":\"\",type:\"textarea\",placeholder:\"请输入回复内容\"},on:{blur:t.blurFun},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:\"commentsTextarea\"}}),t._v(\" \"),i(\"div\",{staticClass:\"btn-group\"},[i(\"el-popover\",{attrs:{placement:\"top\",width:\"400\",trigger:\"click\"},model:{value:t.showEmoji,callback:function(e){t.showEmoji=e},expression:\"showEmoji\"}},[i(\"emoji\",{on:{select:t.selectEmoji}}),t._v(\" \"),i(\"i\",{staticClass:\"wk wk-expression smiling-img\",attrs:{slot:\"reference\"},slot:\"reference\"})],1),t._v(\" \"),i(\"div\",{staticClass:\"btn-box\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.commentSubmit}},[t._v(\"回复\")]),t._v(\" \"),i(\"el-button\",{on:{click:t.closeComment}},[t._v(\"取消\")])],1)],1)]],2)},[],!1,null,\"cdcf716e\",null);r.options.__file=\"ReplyComment.vue\";e.a=r.exports},\"fRE+\":function(t,e,i){},hr1e:function(t,e,i){\"use strict\";var n=i(\"4lzj\");i.n(n).a},hwzM:function(t,e,i){\"use strict\";i.r(e);var n=i(\"7Qib\"),s=i(\"KTTK\"),a={name:\"FileCell\",filters:{getFileSize:function(t){return Object(n.h)(t)}},props:{cellIndex:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1},module_id:[String,Number]},data:function(){return{}},computed:{fileIcon:function(){var t=this.data.name?this.data.name.split(\".\"):[],e=\"\";return e=t.length>0?t[t.length-1]:\"\",Object(n.n)(e)},previewShow:function(){return this.list}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){Object(n.d)({path:this.data.filePath||this.data.url,name:this.data.name})},previewClick:function(){Object(n.a)(this.data.name)?Object(n.G)(this.data.filePath||this.data.url,this.data.name):this.$bus.emit(\"preview-image-bus\",{index:this.cellIndex||0,data:this.list.map(function(t){return{url:t.filePath||t.url,name:t.name}})})},deleteClick:function(){var t=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.g)({id:t.data.fileId}).then(function(e){t.$message.success(\"操作成功\"),t.$emit(\"delete\",t.cellIndex,t.data)}).catch(function(){})}).catch(function(){t.$message({type:\"info\",message:\"已取消删除\"})})}}},o=(i(\"Bd1s\"),i(\"KHd+\")),r=Object(o.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"flexbox\",{staticClass:\"cell\"},[n(\"img\",{staticClass:\"cell-head\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:t.fileIcon,alt:\"\"}}),t._v(\" \"),n(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":t.cursorPointer}},[n(\"span\",[t._v(t._s(t.data.name.length>20?t.data.name.substring(0,20)+\"...\":t.data.name))])]),t._v(\" \"),n(\"div\",{staticClass:\"size\"},[t._v(\"\\n    (\"+t._s(t._f(\"getFileSize\")(t.data.size))+\")\\n  \")]),t._v(\" \"),n(\"div\",{staticClass:\"cell-foot\"},[t.previewShow?n(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:t.previewClick}},[t._v(\"预览\")]):t._e(),t._v(\" \"),n(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:t.downloadClick}},[t._v(\"下载\")]),t._v(\" \"),t.showDelete?n(\"span\",{staticClass:\"xr-text-btn delete\",on:{click:t.deleteClick}},[t._v(\"删除\")]):t._e()])])},[],!1,null,\"4a3d86b8\",null);r.options.__file=\"index.vue\";e.default=r.exports},jM2j:function(t,e,i){\"use strict\";i.r(e);var n=i(\"ViDN\"),s=i(\"8GhS\"),a=i(\"FoeY\"),o=i(\"7Qib\"),r={components:{CreateView:n.a,XhStrucUserCell:s.m},props:{action:{type:Object,default:function(){return{type:\"save\"}}}},data:function(){var t=this,e=function(e,i,n){\"startTime\"==e.field&&!t.formData.startTime&&t.formData.endTime||\"endTime\"==e.field&&!t.formData.endTime&&t.formData.startTime?n(new Error(\"请完善时间\")):t.formData.startTime&&t.formData.endTime&&Object(o.k)(t.formData.startTime)>=Object(o.k)(t.formData.endTime)&&n(new Error(\"开始时间必须小于结束时间\")),n()};return{formList:[{label:\"公告标题\",field:\"title\"},{label:\"通知范围\",field:\"dep\",type:\"plus\"},{label:\"公告正文\",field:\"content\",type:\"textarea\"}],formData:{dep:{staff:[],dep:[]}},rules:{title:[{required:!0,message:\"公告标题不能为空\",trigger:\"blur\"},{max:50,message:\"公告标题长度最多为50个字符\",trigger:\"blur\"}],content:[{required:!0,message:\"公告正文不能为空\",trigger:\"blur\"}],startTime:[{required:!0,message:\"不能为空\",trigger:\"blur\"},{validator:e,trigger:\"blur\"}],endTime:[{required:!0,message:\"不能为空\",trigger:\"blur\"},{validator:e,trigger:\"blur\"}]},loading:!1}},computed:{title:function(){return\"save\"==this.action.type?\"新建公告\":\"编辑公告\"}},created:function(){var t=this;\"update\"==this.action.type&&Object(a.e)(this.action.id).then(function(e){t.formData={title:e.data.title,content:e.data.content,dep:{staff:e.data.ownerUserList,dep:e.data.deptList}}})},methods:{onSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0;var i={title:t.formData.title,content:t.formData.content,deptIds:t.formData.dep.dep.map(function(t){return t.id}).join(\",\"),ownerUserIds:t.formData.dep.staff.map(function(t){return t.userId}).join(\",\")};\"update\"==t.action.type&&(i.announcementId=t.action.id),Object(a.a)(i).then(function(e){t.$message.success(t.title+\"成功\"),t.$emit(\"onSubmit\"),t.close(),t.loading=!1}).catch(function(){t.$message.error(t.title+\"失败\"),t.loading=!1})})},close:function(){this.$emit(\"close\")},strcUserChange:function(t){this.$set(this.formData,\"dep\",{staff:t.value.users,dep:t.value.strucs})},deleteuser:function(t){this.formData.dep.staff.splice(t,1)},deleteDepuser:function(t){this.formData.dep.dep.splice(t,1)}}},l=(i(\"cZgO\"),i(\"KHd+\")),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"create-view\",{attrs:{\"body-style\":{height:\"100%\"}}},[i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"details-box\"},[i(\"div\",{staticClass:\"header\",attrs:{slot:\"header\"},slot:\"header\"},[i(\"span\",{staticClass:\"text\"},[t._v(t._s(t.title))]),t._v(\" \"),i(\"i\",{staticClass:\"el-icon-close rt\",on:{click:t.close}})]),t._v(\" \"),i(\"div\",{staticClass:\"content\"},[i(\"el-form\",{ref:\"form\",attrs:{model:t.formData,rules:t.rules}},t._l(t.formList,function(e,n){return i(\"el-form-item\",{key:n,class:\"el-form-item\"+e.field,attrs:{label:e.label,prop:e.field}},[\"date\"==e.type?[i(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择日期\"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:\"formData[item.field]\"}})]:\"textarea\"==e.type?[i(\"el-input\",{attrs:{autosize:{minRows:15},maxlength:2e3,\"show-word-limit\":\"\",type:\"textarea\",placeholder:\"请输入内容\"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:\"formData[item.field]\"}})]:\"plus\"==e.type?[i(\"xh-struc-user-cell\",{staticStyle:{width:\"100%\"},attrs:{value:null,users:t.formData[e.field].staff,strucs:t.formData[e.field].dep},on:{\"value-change\":t.strcUserChange}})]:i(\"el-input\",{model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:\"formData[item.field]\"}})],2)}))],1),t._v(\" \"),i(\"div\",{staticClass:\"btn-box\"},[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.onSubmit}},[t._v(\"提交\")]),t._v(\" \"),i(\"el-button\",{on:{click:t.close}},[t._v(\"取消\")])],1)])])},[],!1,null,\"6d1389f4\",null);c.options.__file=\"NewDialog.vue\";e.default=c.exports},qDfk:function(t,e,i){\"use strict\";i.r(e);var n=i(\"QbLZ\"),s=i.n(n),a=i(\"O8VQ\"),o=i(\"Ew9n\"),r=i(\"ZoMv\"),l={name:\"RecordList\",components:{LogCell:a.default,SlideView:o.a,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-36d0\")]).then(i.bind(null,\"3z7q\"))}},filters:{crmIconClass:function(t){return\"wk wk-\"+r.default.convertTypeToKey(t)},crmName:function(t){return r.default.convertTypeToName(t)}},props:{crmType:String,request:Function,params:Object,listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,page:1,noMore:!1,list:[],scrollKey:Date.now(),showFullDetail:!1,relationID:\"\",relationCrmType:\"\"}},computed:{crmIcon:function(){var t=this.crmType.replace(\"crm_\",\"\");return i(\"p3hS\")(\"./\"+t+\".png\")},scrollDisabled:function(){return this.loading||this.noMore}},watch:{params:function(){this.refreshList()}},mounted:function(){},methods:{refreshList:function(){this.page=1,this.list=[],this.noMore=!1,this.scrollKey=Date.now()},getList:function(){var t=this;this.loading=!0,this.request(s()({page:this.page,limit:15},this.params)).then(function(e){t.page++,t.list=t.list.concat(e.data.list),t.noMore=e.data.lastPage,t.loading=!1}).catch(function(){t.noMore=!0,t.loading=!1})},checkRelationDetail:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.relationID=e,this.relationCrmType=i?r.default.convertTypeToKey(t):t,this.showFullDetail=!0},hideView:function(){this.$emit(\"hide\")}}},c=(i(\"ANtS\"),i(\"KHd+\")),u=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"slide-view\",{staticClass:\"d-view\",attrs:{\"listener-ids\":t.listenerIDs,\"no-listener-ids\":t.noListenerIDs,\"no-listener-class\":t.noListenerClass,\"body-style\":{padding:0,height:\"100%\"}},on:{close:t.hideView}},[n(\"flexbox\",{staticClass:\"t-section\"},[n(\"img\",{staticClass:\"t-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:t.crmIcon}}),t._v(\" \"),n(\"div\",{staticClass:\"t-name\"},[t._v(\"跟进记录\")])]),t._v(\" \"),n(\"div\",{staticClass:\"t-content\"},[n(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.getList,expression:\"getList\"}],key:t.scrollKey,attrs:{\"infinite-scroll-disabled\":\"scrollDisabled\",\"infinite-scroll-distance\":\"100\"}},t._l(t.list,function(e,i){return n(\"log-cell\",{key:i,attrs:{item:e,index:i,\"can-delete\":!1},on:{\"crm-detail\":t.checkRelationDetail}},[n(\"div\",{staticClass:\"relate-cell\",on:{click:function(i){t.checkRelationDetail(e.activityType,e.activityTypeId,!0)}}},[n(\"i\",{staticClass:\"relate-cell-icon\",class:t._f(\"crmIconClass\")(e.activityType)}),t._v(\" \"),n(\"span\",{staticClass:\"relate-cell-type\"},[t._v(t._s(t._f(\"crmName\")(e.activityType))+\"-\")]),t._v(\" \"),n(\"span\",{staticClass:\"relate-cell-name\"},[t._v(t._s(e.crmTypeName))])])])})),t._v(\" \"),t.loading?n(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"加载中...\")]):t._e(),t._v(\" \"),t.noMore?n(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"没有更多了\")]):t._e()]),t._v(\" \"),n(\"c-r-m-full-screen-detail\",{attrs:{visible:t.showFullDetail,\"crm-type\":t.relationCrmType,id:t.relationID},on:{\"update:visible\":function(e){t.showFullDetail=e}}})],1)},[],!1,null,\"ec661820\",null);u.options.__file=\"RecordList.vue\";e.default=u.exports},szeO:function(t,e,i){\"use strict\";var n=i(\"d5Rn\");i.n(n).a},\"u+Mw\":function(t,e,i){\"use strict\";var n=i(\"GQeE\"),s=i.n(n),a=i(\"sCIN\"),o={name:\"Emoji\",data:function(){return{emojiData:a.a,pannels:[\"表情\",\"自然\",\"物品\",\"地点\",\"符号\"],activeIndex:0}},computed:{emojis:function(){var t=this;return this.pannels.map(function(e){return s()(t.emojiData[e])})}},created:function(){},methods:{changeActive:function(t){this.activeIndex=t},getPureName:function(t){return t.replace(/:/g,\"\")},selectItem:function(t){this.$emit(\"select\",t)}}},r=(i(\"HtQe\"),i(\"KHd+\")),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"emoji\"},[i(\"ul\",{staticClass:\"emoji-controller\"},t._l(t.pannels,function(e,n){return i(\"li\",{key:n,class:{active:n===t.activeIndex},on:{click:function(e){t.changeActive(n)}}},[t._v(\"\\n      \"+t._s(e)+\"\\n    \")])})),t._v(\" \"),i(\"ul\",{staticClass:\"emoji-container\"},t._l(t.emojis,function(e,n){return n===t.activeIndex?i(\"li\",{key:n,staticStyle:{padding:\"0\"}},[t._v(\"\\n      \"+t._s(e)+\"--\"+t._s(n)+\"\\n      \"),t._l(e,function(e,n){return i(\"a\",{key:n,attrs:{href:\"javascript:;\"},on:{click:function(i){t.selectItem(e)}}},[i(\"span\",{staticClass:\"emoji-item\",class:\"sprite-\"+t.getPureName(e),attrs:{title:e}})])})],2):t._e()}))])},[],!1,null,\"36243ed9\",null);l.options.__file=\"Emoji.vue\";e.a=l.exports},ujp9:function(t,e,i){},z7oh:function(t,e,i){\"use strict\";var n=i(\"QbLZ\"),s=i.n(n),a=i(\"dPzk\"),o=i(\"Ir+r\"),r=i(\"L2JU\"),l=i(\"Xjjk\"),c=i.n(l),u={name:\"CommentList\",components:{ReplyComment:a.a},props:{list:{type:Array,required:!0},id:{type:[String,Number],required:!0},type:[String,Number]},data:function(){return{replyIndex:null,commentLoading:!1}},computed:s()({},Object(r.b)([\"userInfo\"])),methods:{handleToReply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t+(null!==e?\"-\"+e:\"\");this.$emit(\"close-other-reply\"),i!==this.replyIndex&&(this.replyIndex=i)},closeReply:function(){this.replyIndex=null},handleReply:function(t){var e=this,i={type:this.type,content:c()(t),typeId:this.id},n=null,s=this.replyIndex.split(\"-\"),a=this.list[s[0]];s[1]&&(n=a.childCommentList[s[1]]),a&&(i.mainId=a.commentId,i.pid=a.userId),n&&(i.pid=n.userId),this.commentLoading=!0,Object(o.c)(i).then(function(t){t.data.user={userId:e.userInfo.id,realname:e.userInfo.realname,img:e.userInfo.img},t.data.replyUser=n?n.user:a.user,e.list[s[0]].childCommentList.push(t.data),e.replyIndex=null,e.commentLoading=!1}).catch(function(){e.commentLoading=!1})},handleToDelete:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(o.a)({commentId:t.commentId}).then(function(t){i.$message({type:\"success\",message:\"删除成功!\"}),n>=0?i.list[e].childCommentList.splice(n,1):i.$emit(\"delete\",e)})}).catch(function(){i.$message({type:\"info\",message:\"已取消删除\"})})}}},d=(i(\"OdVz\"),i(\"KHd+\")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"comment-list\"},t._l(t.list,function(e,n){return i(\"div\",{key:n,staticClass:\"comment-list-item\"},[i(\"div\",{staticClass:\"parent-reply reply\"},[i(\"div\",{staticClass:\"user-info\"},[i(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:e.user.realname,id:e.user.userId,size:34,src:e.user.img,disabled:!1}}),t._v(\" \"),i(\"div\",{staticClass:\"user-info__bd\"},[i(\"div\",{staticClass:\"user\"},[t._v(t._s(e.user.realname))]),t._v(\" \"),i(\"div\",{staticClass:\"time\"},[t._v(\"\\n            \"+t._s(e.createTime)+\"\\n          \")])]),t._v(\" \"),i(\"div\",{staticClass:\"control\"},[i(\"span\",{staticClass:\"reply-btn\",on:{click:function(e){t.handleToReply(n)}}},[i(\"i\",{staticClass:\"wk wk-reply\"}),t._v(\" \"),i(\"span\",[t._v(\"回复\")])]),t._v(\" \"),i(\"span\",{staticClass:\"delete-btn\",on:{click:function(i){t.handleToDelete(e,n)}}},[i(\"i\",{staticClass:\"wk wk-s-delete\"}),t._v(\" \"),i(\"span\",[t._v(\"删除\")])])])],1),t._v(\" \"),i(\"div\",{staticClass:\"content\",domProps:{innerHTML:t._s(t.emoji(e.content))}}),t._v(\" \"),t.replyIndex===String(n)?i(\"reply-comment\",{on:{reply:t.handleReply,close:function(e){t.replyIndex=null}}}):t._e()],1),t._v(\" \"),e.childCommentList&&e.childCommentList.length>0?t._l(e.childCommentList,function(e,s){return i(\"div\",{key:s},[i(\"div\",{staticClass:\"child-reply reply\"},[i(\"div\",{staticClass:\"user-info\"},[i(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:e.user.realname,id:e.user.userId,size:34,src:e.user.img,disabled:!1}}),t._v(\" \"),i(\"div\",{staticClass:\"user-info__bd\"},[i(\"div\",{staticClass:\"user\"},[t._v(\"\\n                \"+t._s(e.user.realname)+\"\\n              \")]),t._v(\" \"),i(\"div\",{staticClass:\"time\"},[t._v(\"\\n                \"+t._s(e.createTime)+\"\\n              \")])]),t._v(\" \"),i(\"div\",{staticClass:\"control\"},[i(\"span\",{staticClass:\"reply-btn\",on:{click:function(e){t.handleToReply(n,s)}}},[i(\"i\",{staticClass:\"wk wk-reply\"}),t._v(\" \"),i(\"span\",[t._v(\"回复\")])]),t._v(\" \"),i(\"span\",{staticClass:\"delete-btn\",on:{click:function(i){t.handleToDelete(e,n,s)}}},[i(\"i\",{staticClass:\"wk wk-s-delete\"}),t._v(\" \"),i(\"span\",[t._v(\"删除\")])])])],1),t._v(\" \"),i(\"div\",{staticClass:\"child-content\"},[i(\"span\",[t._v(\"\\n              回复 @\"+t._s(e.replyUser.realname)+\"：\\n            \")]),t._v(\" \"),i(\"span\",{staticClass:\"content\",domProps:{innerHTML:t._s(t.emoji(e.content))}})]),t._v(\" \"),t.replyIndex===n+\"-\"+s?i(\"reply-comment\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.commentLoading,expression:\"commentLoading\"}],on:{reply:t.handleReply,close:function(e){t.replyIndex=null}}}):t._e()],1)])}):t._e()],2)}))},[],!1,null,\"714ff9da\",null);p.options.__file=\"CommentList.vue\";e.a=p.exports}}]);","extractedComments":[]}