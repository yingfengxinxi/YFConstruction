{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-99e4\"],{\"2f65\":function(t,e,n){},\"39TU\":function(t,e,n){\"use strict\";n.r(e);var a=n(\"QbLZ\"),c=n.n(a),i=n(\"hSIE\"),o=n(\"LWkM\"),r=n(\"9GgJ\"),s=n(\"rRnC\"),l=n(\"t2rG\"),u=n.n(l),d=n(\"L2JU\"),p={name:\"Corver\",components:{XrHeader:r.a,AddProject:s.default,Draggable:u.a},props:{},data:function(){return{loading:!0,isCreate:!1,list:[],defaultCorverUrl:\"https://www.72crm.com/api/uploads/project-cover-1.jpg\",tabName:\"all\",tabList:[{label:\"全部项目\",name:\"all\",list:[]},{label:\"我关注的\",name:\"star\",list:[]}],editId:null}},computed:c()({},Object(d.b)([\"project\"]),{permissonProject:function(){return this.project&&this.project.projectManage&&this.project.projectManage.save}}),watch:{},created:function(){var t=this;this.getList(),this.$bus.on(\"add-project\",function(){t.getList()})},mounted:function(){},beforeDestroy:function(){this.$bus.off(\"add-project\")},methods:{tabChange:function(t,e){},getList:function(){var t=this;this.loading=!0,Object(i.b)().then(function(e){t.loading=!1,t.list=e.data||[];var n=t.tabList[0];n.list=e.data||[],n.label=\"全部项目（\"+n.list.length+\"）\";var a=t.tabList[1];a.list=t.list.filter(function(t){return 1==t.collect}),a.label=\"我关注的（\"+a.list.length+\"）\"}).catch(function(){t.loading=!1})},collectClick:function(t){var e=this;Object(o.n)(t.workId).then(function(t){e.getList()}).catch(function(){})},moveItem:function(t){if(t){if(t.oldIndex==t.newIndex)return;Object(o.x)({workIds:this.tabList[0].list.map(function(t){return t.workId})}).then(function(t){}).catch(function(){})}},enterDetail:function(t){this.$router.push({path:this.$route.fullPath+\"/\"+t.workId})},createProjectClick:function(){this.editId=null,this.isCreate=!0},editProjectClick:function(t){this.editId=t.workId,this.isCreate=!0},createSuccess:function(){this.getList()},createClose:function(){this.isCreate=!1}}},h=(n(\"TYbp\"),n(\"KHd+\")),f=Object(h.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"corver\"},[n(\"xr-header\",{attrs:{\"icon-class\":\"wk wk-project\",\"icon-color\":\"#4AB8B8\",label:\"项目\"}}),t._v(\" \"),n(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"content\"},[n(\"el-tabs\",{on:{\"tab-click\":t.tabChange},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:\"tabName\"}},t._l(t.tabList,function(e,a){return n(\"el-tab-pane\",{key:a,attrs:{label:e.label,name:e.name}},[n(\"draggable\",{staticClass:\"cover-content\",attrs:{options:{forceFallback:!1,disabled:\"star\"==t.tabName}},on:{end:t.moveItem},model:{value:e.list,callback:function(n){t.$set(e,\"list\",n)},expression:\"item.list\"}},[t._l(e.list,function(e,a){return n(\"div\",{key:a,staticClass:\"cover-content-item\",on:{click:function(n){t.enterDetail(e)}}},[n(\"div\",{directives:[{name:\"src\",rawName:\"v-src:background-image\",value:e.coverUrl||t.defaultCorverUrl,expression:\"childItem.coverUrl || defaultCorverUrl\",arg:\"background-image\"}],staticClass:\"cover-content-item__content\"},[n(\"div\",{staticClass:\"handle-bar\"},[n(\"div\",{staticClass:\"title text-one-line\",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(\" \"),e.authList&&e.authList.project&&e.authList.project.setWork?n(\"i\",{staticClass:\"wk wk-circle-edit\",on:{click:function(n){n.stopPropagation(),t.editProjectClick(e)}}}):t._e(),t._v(\" \"),n(\"i\",{staticClass:\"wk wk-focus-on\",class:{\"is-collect\":1==e.collect},on:{click:function(n){n.stopPropagation(),t.collectClick(e)}}})]),t._v(\" \"),n(\"div\",{staticClass:\"cover-content-item__content-shadow\"})])])}),t._v(\" \"),t.permissonProject?n(\"div\",{staticClass:\"cover-content-item content-cross\",on:{click:t.createProjectClick}},[n(\"div\",{staticClass:\"content-cross__content\"},[n(\"flexbox\",{attrs:{justify:\"center\",align:\"center\",orient:\"vertical\"}},[n(\"i\",{staticClass:\"wk wk-l-plus\"}),t._v(\" \"),n(\"div\",[t._v(\"创建新项目\")])])],1)]):t._e()],2)],1)}))],1),t._v(\" \"),t.isCreate?n(\"add-project\",{attrs:{id:t.editId},on:{\"save-success\":t.createSuccess,close:t.createClose}}):t._e()],1)},[],!1,null,\"7435bc25\",null);f.options.__file=\"Corver.vue\";e.default=f.exports},\"7mY3\":function(t,e,n){\"use strict\";var a=n(\"2f65\");n.n(a).a},\"9GgJ\":function(t,e,n){\"use strict\";var a={name:\"XrHeader\",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},searchIconType:{type:String,default:\"text\"},placeholder:{type:String,default:\"请输入内容\"},ftTop:{type:String,default:\"15px\"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:\"\"}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit(\"update:content\",this.search)},searchClick:function(){this.$emit(\"search\",this.search)}}},c=(n(\"7mY3\"),n(\"KHd+\")),i=Object(c.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"flexbox\",{staticClass:\"xr-header\"},[t.iconClass?n(\"div\",{staticClass:\"xr-header__icon\",style:{backgroundColor:t.iconColor}},[n(\"i\",{class:t.iconClass})]):t._e(),t._v(\" \"),n(\"div\",{staticClass:\"xr-header__label\"},[t.$slots.label?t._t(\"label\"):[t._v(t._s(t.label))]],2),t._v(\" \"),t.showSearch?n(\"el-input\",t._b({staticClass:\"xr-header__search\",class:{\"is-text\":\"text\"===t.searchIconType},style:{\"margin-top\":t.ftTop},attrs:{placeholder:t.placeholder},on:{input:t.inputChange},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.searchClick(e):null}},model:{value:t.search,callback:function(e){t.search=e},expression:\"search\"}},\"el-input\",t.inputAttr,!1),[\"text\"===t.searchIconType?n(\"el-button\",{attrs:{slot:\"append\",type:\"primary\"},nativeOn:{click:function(e){return t.searchClick(e)}},slot:\"append\"},[t._v(\"搜索\")]):n(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},nativeOn:{click:function(e){return t.searchClick(e)}},slot:\"append\"})],1):t._e(),t._v(\" \"),n(\"div\",{staticClass:\"xr-header__ft\",style:{top:t.ftTop}},[t._t(\"ft\")],2)],1)},[],!1,null,\"acb6d756\",null);i.options.__file=\"index.vue\";e.a=i.exports},Cp2m:function(t,e,n){},TYbp:function(t,e,n){\"use strict\";var a=n(\"Cp2m\");n.n(a).a},hSIE:function(t,e,n){\"use strict\";n.d(e,\"d\",function(){return c}),n.d(e,\"f\",function(){return i}),n.d(e,\"b\",function(){return o}),n.d(e,\"c\",function(){return r}),n.d(e,\"e\",function(){return s}),n.d(e,\"a\",function(){return l});var a=n(\"t3Un\");function c(t){return Object(a.a)({url:\"workTask/myTask\",method:\"post\",data:t})}function i(t){return Object(a.a)({url:\"workTask/updateTop\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(a.a)({url:\"work/work/queryWorkNameList\",method:\"post\",data:t})}function r(t){return Object(a.a)({url:\"workTask/archiveByTaskId/\"+t,method:\"post\"})}function s(t){return Object(a.a)({url:\"work/work/activation/\"+t,method:\"post\"})}function l(t){return Object(a.a)({url:\"workTask/workBenchTaskExport\",method:\"post\",data:t,responseType:\"blob\"})}}}]);","extractedComments":[]}