{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-3a31\",\"chunk-9dc6\",\"chunk-6b71\",\"chunk-ae32\"],{\"+cqn\":function(t,e,i){\"use strict\";var s=i(\"OKZ7\");i.n(s).a},\"+lNB\":function(t,e,i){\"use strict\";i.r(e);var s=i(\"8GhS\"),n=i(\"7Dod\"),a=i(\"AAeT\"),o=i(\"ERJp\"),l=i(\"d9x6\"),c=i(\"c2Co\"),r=i(\"Y4Le\"),u=i(\"1DpC\"),d=i(\"VcMt\"),h={name:\"TransferHandle\",components:{XhUserCell:s.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],removeType:1,handleType:1,addsTypes:[]}},computed:{showRemoveType:function(){return\"leads\"!=this.crmType&&\"contacts\"!=this.crmType&&\"receivables\"!=this.crmType&&\"product\"!=this.crmType&&\"invoice\"!=this.crmType}},watch:{dialogVisible:{handler:function(t){this.visible=t,t||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.removeType=1,this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;0===this.usersList.length?this.$message.error(\"请选择变更负责人\"):(this.loading=!0,this.getRequest()(this.getParams()).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.handleCancel(),\"customer\"!=t.crmType&&\"contract\"!=t.crmType&&\"leads\"!=t.crmType||t.$store.dispatch(\"GetMessageNum\"),t.$emit(\"handle\",{type:\"transfer\"})}).catch(function(){t.loading=!1}))},getRequest:function(){return\"leads\"===this.crmType?c.m:\"customer\"===this.crmType?n.X:\"contacts\"===this.crmType?a.o:\"business\"===this.crmType?o.x:\"contract\"===this.crmType?l.s:\"receivables\"===this.crmType?u.k:\"product\"===this.crmType?r.m:\"invoice\"===this.crmType?d.k:void 0},getParams:function(){var t=this,e={ownerUserId:this.usersList[0].userId};return this.showRemoveType&&(e.transferType=this.removeType),2===this.removeType&&(e.power=this.handleType),e.ids=this.selectionList.map(function(e){return parseInt(e[t.crmType+\"Id\"])}),\"customer\"===this.crmType&&(e.changeType=this.addsTypes.map(function(t){return parseInt(t)})),e}}},p=(i(\"+cqn\"),i(\"KHd+\")),f=Object(p.a)(h,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量转移\",width:\"450px\"},on:{\"update:visible\":function(e){t.visible=e},close:t.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"变更负责人为：\")]),t._v(\" \"),i(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:t.usersList},on:{\"value-change\":t.userChage}})],1),t._v(\" \"),t.showRemoveType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"将原负责人：\")]),t._v(\" \"),i(\"el-radio-group\",{model:{value:t.removeType,callback:function(e){t.removeType=e},expression:\"removeType\"}},[i(\"el-radio\",{attrs:{label:1}},[t._v(\"移出\")]),t._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[t._v(\"转为团队成员\")])],1)],1):t._e(),t._v(\" \"),2==t.removeType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"权限：\")]),t._v(\" \"),i(\"el-radio-group\",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:\"handleType\"}},[i(\"el-radio\",{attrs:{label:1}},[t._v(\"只读\")]),t._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[t._v(\"读写\")])],1)],1):t._e(),t._v(\" \"),\"customer\"===t.crmType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"同时变更负责人至：\")]),t._v(\" \"),i(\"el-checkbox-group\",{model:{value:t.addsTypes,callback:function(e){t.addsTypes=e},expression:\"addsTypes\"}},[i(\"el-checkbox\",{attrs:{label:\"1\"}},[t._v(\"联系人\")]),t._v(\" \"),i(\"el-checkbox\",{attrs:{label:\"2\"}},[t._v(\"商机\")]),t._v(\" \"),i(\"el-checkbox\",{attrs:{label:\"3\"}},[t._v(\"合同\")])],1)],1):t._e()],1),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"730da104\",null);f.options.__file=\"TransferHandle.vue\";e.default=f.exports},\"+xXq\":function(t,e,i){t.exports=i.p+\"static/img/check_revoke.0500d70.png\"},\"/407\":function(t,e,i){\"use strict\";i.r(e);var s={name:\"RelatedBusinessCell\",props:{type:{type:String,default:\"\"},cellIndex:Number,data:Object,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!0}},data:function(){return{}},computed:{typeName:function(){return\"customer\"==this.type?\"客户\":\"contacts\"==this.type?\"联系人\":\"business\"==this.type?\"商机\":\"contract\"==this.type?\"合同\":\"\"},name:function(){return this.data.name||this.data.businessName||this.data.customerName||this.data.number}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{footClick:function(){this.$emit(\"unbind\",this.type,this.cellIndex,this.data)},bodyClick:function(){this.$emit(\"detail\",this.type,this.cellIndex,this.data)}}},n=(i(\"/hyb\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"flexbox\",{staticClass:\"cell\"},[i(\"div\",{staticClass:\"cell-head\"},[i(\"i\",{class:t._f(\"wkIconPre\")(t.type)}),t._v(\" \"),i(\"span\",[t._v(\"\\n      \"+t._s(\"相关\"+t.typeName+\"-\")+\"\\n    \")])]),t._v(\" \"),i(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":t.cursorPointer},on:{click:t.bodyClick}},[t._v(\"\\n    \"+t._s(t.name)+\"\\n  \")]),t._v(\" \"),i(\"div\",{staticClass:\"cell-foot\"},[t.showFoot?i(\"a\",{staticClass:\"cancel-btn\",on:{click:t.footClick}},[t._v(\"取消关联\")]):t._e()])])},[],!1,null,\"061d0168\",null);a.options.__file=\"index.vue\";e.default=a.exports},\"/G0b\":function(t,e,i){\"use strict\";i.r(e);var s=i(\"KTTK\"),n=i(\"6iAj\"),a=i(\"4XAY\"),o=i(\"7Dod\"),l=i(\"7Qib\"),c=i(\"mkuN\"),r=i(\"zMq1\"),u=i(\"ye9D\"),d=i(\"NYF1\"),h=i(\"YIeP\"),p=i(\"ZoMv\"),f={name:\"LogEditDialog\",components:{CrmRelative:c.a,AddImageList:r.a,AddFileList:u.a,AddRelateList:d.a,CommonWords:h.a},props:{visible:{type:Boolean,required:!0,default:!1},data:Object},data:function(){return{loading:!1,crmType:\"\",content:\"\",imgFiles:[],businessAction:{},files:[],showBusinessPopover:!1,business:[],contacts:[],selectContactsId:\"\",followTypes:[],followType:\"\",nextTime:\"\",showRelativeType:\"\",batchId:\"\"}},computed:{autosize:function(){return{minRows:4,maxRows:8}},id:function(){return this.data?this.data.activityTypeId:\"\"},showBusiness:function(){return\"customer\"==this.crmType},showContacts:function(){return this.showBusiness}},watch:{visible:{handler:function(t){if(t){var e=p.default.convertTypeToKey(this.data.activityType);this.crmType!=e&&(this.crmType=e),this.handleDetailInfo(Object(l.t)(this.data))}},immediate:!0,deep:!0},id:{handler:function(){this.businessAction={type:\"condition\",data:{moduleType:this.crmType,customerId:this.id}}},immediate:!0}},created:function(){},beforeDestroy:function(){},methods:{handleDetailInfo:function(t){var e=this;this.showContacts&&this.getContactsList(),0==this.followTypes.length&&this.getLogTypeList(),this.content=t.content,this.imgFiles=t.img||[];var i=t.file||[];this.files=i.map(function(t){return t.icon=e.getFileTypeIcon(t.name),t});var s=t.businessList||[];this.business=s.map(function(t){return{businessName:t.name,businessId:t.id}}),this.selectContactsId=t.contactsList&&t.contactsList.length?t.contactsList[0].id:\"\",this.followType=t.category,this.nextTime=t.nextTime,this.batchId=t.batchId},getFileTypeIcon:function(t){if(!t)return\"\";var e=t?t.split(\".\"):[],i=\"\";return i=e.length>0?e[e.length-1]:\"\",Object(l.n)(i)},getLogTypeList:function(){var t=this;Object(n.s)().then(function(e){t.followTypes=e.data.map(function(t){return{value:t,label:t}})}).catch(function(){})},getContactsList:function(){var t=this;Object(o.H)({customerId:this.id}).then(function(e){t.contacts=e.data.list}).catch(function(){})},getDefalutFollowType:function(){this.followTypes&&this.followTypes.length>0?this.followType=this.followTypes[0].value:this.followType=\"\"},resetInfo:function(){this.nextTime=\"\",this.content=\"\",this.imgFiles=[],this.files=[],this.business=[],this.selectContactsId=this.contactsId||\"\",this.showRelativeType=\"\",this.batchId=\"\",this.getDefalutFollowType()},commonWordsSelect:function(t){var e=this;this.content?this.$confirm(\"您选中的常用语将覆盖当前填写内容?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\",customClass:\"is-particulars\"}).then(function(){e.content=t}).catch(function(){}):this.content=t},checkRelativeInfos:function(t){\"business\"==this.showRelativeType&&(this.business=t.data)},barClick:function(t){this.showRelativeType=t,\"business\"==t?this.showBusinessPopover=!0:\"file\"==t?this.$refs.fileInput.click():\"img\"==t&&this.$refs.imgInput.click()},uploadFile:function(t){var e=t.target.files;if(e.length){for(var i=0;i<e.length;i++){if(-1==e[i].type.indexOf(\"image\")&&\"img\"==this.showRelativeType)return void this.$message.error(\"请上传正确的文件类型\")}for(var s=\"image/*\"==t.target.accept?\"img\":\"file\",n=0;n<e.length;n++){var a=e[n];this.uploadFileRequest(a,s)}t.target.value=\"\"}},uploadFileRequest:function(t,e,i){var s=this;this.$wkUploadFile.upload({file:t,params:{type:e,batchId:this.batchId}}).then(function(n){var a=n.res.data||{};a.size=Object(l.h)(t.size),\"img\"==e?s.imgFiles.push(a):(a.icon=Object(l.o)(t),s.files.push(a)),i&&i()}).catch(function(){})},deleteImage:function(t,e){this.deleteImgOrFile(\"image\",t,e)},deleteFile:function(t,e){this.deleteImgOrFile(\"file\",t,e)},deleteImgOrFile:function(t,e,i){var n=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.g)({id:e.fileId}).then(function(e){\"image\"==t?n.imgFiles.splice(i,1):n.files.splice(i,1),n.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteAllFile:function(t){var e=this;this.batchId&&this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.i)({batchId:e.batchId,type:t}).then(function(i){2==t?e.imgFiles=[]:e.files=[],e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteRelate:function(t,e){this.business.splice(e,1)},inputFocus:function(){var t=this;this.$nextTick(function(){t.$refs.textarea.focus(),t.$emit(\"focus\")})},handleConfirm:function(){var t=this;if(this.content){var e={};e.activityId=this.data.activityId,e.activityType=this.data.activityType,e.activityTypeId=this.id,e.content=this.content,e.category=this.followType;var i=this.business.map(function(t){return t.businessId||t.id});e.batchId=this.batchId,e.businessIds=i.join(\",\"),e.contactsIds=this.contactsId,e.nextTime=this.nextTime||\"\",e.isEvent=0,this.loading=!0,Object(a.e)(e).then(function(e){t.loading=!1,t.$message.success(\"编辑成功\"),t.$emit(\"save\",e.data),t.handleCancel()}).catch(function(){t.loading=!1})}else this.$message.error(\"请输入跟进内容\")},handleCancel:function(){this.$emit(\"update:visible\",!1)}}},m=(i(\"B2DG\"),i(\"KHd+\")),v=Object(m.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"编辑跟进记录\",width:\"700px\",\"custom-class\":\"no-padding-dialog\"},on:{close:t.handleCancel}},[i(\"div\",{staticClass:\"mix-content\"},[i(\"div\",{staticClass:\"mix-content__body\"},[i(\"div\",{staticClass:\"mix-content-select\"},[t.showContacts?i(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择联系人\"},model:{value:t.selectContactsId,callback:function(e){t.selectContactsId=e},expression:\"selectContactsId\"}},t._l(t.contacts,function(t){return i(\"el-option\",{key:t.contactsId,attrs:{label:t.name,value:t.contactsId}})})):t._e(),t._v(\" \"),i(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择跟进方式\"},model:{value:t.followType,callback:function(e){t.followType=e},expression:\"followType\"}},t._l(t.followTypes,function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(\" \"),i(\"el-date-picker\",{attrs:{editable:!1,type:\"datetime\",placeholder:\"选择下次联系时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:t.nextTime,callback:function(e){t.nextTime=e},expression:\"nextTime\"}}),t._v(\" \"),i(\"common-words\",{on:{select:t.commonWordsSelect}})],1),t._v(\" \"),i(\"div\",{staticClass:\"i-cont\"},[i(\"el-input\",{ref:\"textarea\",attrs:{autosize:t.autosize,maxlength:800,type:\"textarea\",clearable:\"\",resize:\"none\",placeholder:\"请输入内容\"},on:{focus:t.inputFocus},model:{value:t.content,callback:function(e){t.content=e},expression:\"content\"}})],1),t._v(\" \"),t.imgFiles.length>0?i(\"add-image-list\",{attrs:{data:t.imgFiles},on:{delete:t.deleteImage,\"delete-all\":function(e){t.deleteAllFile(2)},upload:t.uploadFile}}):t._e(),t._v(\" \"),t.files.length>0?i(\"add-file-list\",{attrs:{data:t.files},on:{delete:t.deleteFile,\"delete-all\":function(e){t.deleteAllFile(1)}}}):t._e(),t._v(\" \"),t.business.length>0?i(\"add-relate-list\",{attrs:{data:t.business,type:\"business\"},on:{delete:t.deleteRelate}}):t._e()],1),t._v(\" \"),i(\"div\",{staticClass:\"bar-cont\"},[i(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-picture\"},on:{click:function(e){t.barClick(\"img\")}}},[t._v(\"图片\")]),t._v(\" \"),i(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-file\"},on:{click:function(e){t.barClick(\"file\")}}},[t._v(\"附件\")]),t._v(\" \"),t.showBusiness?i(\"el-popover\",{attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showBusinessPopover,callback:function(e){t.showBusinessPopover=e},expression:\"showBusinessPopover\"}},[i(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:t.showBusinessPopover,radio:!1,action:t.businessAction,\"selected-data\":{business:t.business},\"crm-type\":\"business\"},on:{close:function(e){t.showBusinessPopover=!1},changeCheckout:t.checkRelativeInfos}}),t._v(\" \"),i(\"el-button\",{staticClass:\"handle-button\",staticStyle:{\"margin-left\":\"10px\"},attrs:{slot:\"reference\",type:\"text\",icon:\"wk wk-associate\"},on:{click:function(e){t.barClick(\"business\")}},slot:\"reference\"},[t._v(\"关联商机\")])],1):t._e()],1),t._v(\" \"),i(\"input\",{ref:\"fileInput\",staticClass:\"file-input\",attrs:{accept:\"*.*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}}),t._v(\" \"),i(\"input\",{ref:\"imgInput\",staticClass:\"file-input\",attrs:{accept:\"image/*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}})]),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"确定\")])],1)])},[],!1,null,\"60b478b5\",null);v.options.__file=\"LogEditDialog.vue\";e.default=v.exports},\"/hyb\":function(t,e,i){\"use strict\";var s=i(\"KOLf\");i.n(s).a},\"08m3\":function(t,e,i){},\"0Dkb\":function(t,e,i){t.exports=i.p+\"static/img/todo.b7ec535.png\"},\"1CbL\":function(t,e,i){},\"31UX\":function(t,e,i){\"use strict\";i.r(e);var s=i(\"4d7F\"),n=i.n(s),a=i(\"CMIa\"),o=i(\"ehos\"),l=i(\"7Qib\");e.default={data:function(){return{chartObj:null,chartOtherObj:null,chartColors:[\"#6CA2FF\",\"#6AC9D7\",\"#72DCA2\",\"#48E78D\",\"#FECD51\",\"#DBB375\",\"#FF7474\",\"#F59561\",\"#A3AEBC\",\"#4C84FF\",\"#0DBEB4\",\"#00DEDE\",\"#FFAA00\",\"#C7C116\",\"#F7A57C\",\"#F661AC\",\"#8652EE\"],currentPage:1,pageSizes:[15,30,45,60],pageSize:0,total:0,toolbox:{showTitle:!1,feature:{saveAsImage:{show:!0,pixelRatio:2}}}}},components:{FiltrateHandleView:a.default},props:{},computed:{},watch:{},mounted:function(){var t=this;this.debouncedResize=Object(o.debounce)(300,this.resizeFn),this.$nextTick(function(){window.addEventListener(\"resize\",t.debouncedResize)})},beforeDestroy:function(){window.removeEventListener(\"resize\",this.debouncedResize)},methods:{resizeFn:function(){this.chartObj&&this.chartObj.resize(),this.chartOtherObj&&this.chartOtherObj.resize()},handleSizeChange:function(t){this.pageData.limit=t,this.getList(this.pageData)},handleCurrentChange:function(t){this.pageData.page=t,this.getList(this.pageData)},requestExportInfo:function(t,e){return new n.a(function(i,s){t(e).then(function(t){Object(l.c)(t),i&&i(t)}).catch(function(t){s&&s(t)})})}},deactivated:function(){}}},\"3Qrg\":function(t,e,i){\"use strict\";var s=i(\"XFCB\");i.n(s).a},\"4lzj\":function(t,e,i){},\"5XBl\":function(t,e,i){t.exports=i.p+\"static/img/board.e62f270.png\"},\"5pSV\":function(t,e,i){\"use strict\";var s=i(\"Rq8O\");i.n(s).a},\"6o/o\":function(t,e,i){},\"6pZM\":function(t,e,i){t.exports=i.p+\"static/img/check_wait.81cfb8e.png\"},\"77fj\":function(t,e,i){\"use strict\";var s=i(\"Btlj\");i.n(s).a},\"8uxz\":function(t,e,i){\"use strict\";i.d(e,\"a\",function(){return n}),i.d(e,\"b\",function(){return a}),i.d(e,\"c\",function(){return o});var s=i(\"t3Un\");function n(t){return Object(s.a)({url:\"biFunnel/addBusinessAnalyze\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function a(t){return Object(s.a)({url:\"biFunnel/sellFunnelList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(s.a)({url:\"biFunnel/win\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}},\"9Y/r\":function(t,e,i){\"use strict\";var s=i(\"6o/o\");i.n(s).a},\"9cPJ\":function(t,e,i){t.exports=i.p+\"static/img/visit.ffb589c.png\"},ANtS:function(t,e,i){\"use strict\";var s=i(\"fRE+\");i.n(s).a},AVjW:function(t,e,i){\"use strict\";var s=i(\"gIBH\");i.n(s).a},B2DG:function(t,e,i){\"use strict\";var s=i(\"lebS\");i.n(s).a},Bd1s:function(t,e,i){\"use strict\";var s=i(\"08m3\");i.n(s).a},Btlj:function(t,e,i){},BzA1:function(t,e,i){\"use strict\";i.r(e);var s=i(\"a/5N\"),n={name:\"ImportInfo\",components:{},props:{list:Array},data:function(){return{}},computed:{showList:function(){return this.list.filter(function(t){return\"file\"!==t.formType})}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{getValueContent:function(t){if(\"map_address\"===t.formType)return t.value?t.value.detailAddress:\"\";if(\"structure\"===t.formType||\"user\"===t.formType||\"checkbox\"===t.formType){if(Object(s.a)(t.value)){var e={structure:\"name\",user:\"realname\",checkbox:\"\"}[t.formType];return t.value.map(function(t){return e?t[e]:t}).join(\"，\")}return\"\"}if(\"single_user\"===t.formType)return Object(s.c)(t.value)&&t.value.realname?t.value.realname:\"\";if(\"customer\"===t.formType||\"business\"===t.formType||\"contract\"===t.formType||\"contacts\"===t.formType||\"category\"===t.formType||\"statusName\"===t.formType||\"typeName\"===t.formType){var i={customer:\"customerName\",business:\"businessName\",contract:\"contractNum\",contacts:\"contactsName\",category:\"categoryName\",statusName:\"statusName\",typeName:\"typeName\"}[t.formType];return Object(s.a)(t.value)?t.value.length>0?t.value[0][i]:\"\":t.value?t.value[i]:\"\"}return t.value}}},a=(i(\"AVjW\"),i(\"KHd+\")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"content\"},[i(\"div\",{staticClass:\"content-title\"},[t._v(\"基本信息\")]),t._v(\" \"),t._l(t.showList,function(e,s){return i(\"p\",{key:s,staticClass:\"detail-cell\"},[i(\"span\",{staticClass:\"detail-cell__label\"},[t._v(\"\\n      \"+t._s(e.name)+\"\\n    \")]),i(\"br\"),t._v(\" \"),i(\"span\",{staticClass:\"detail-cell__value\"},[t._v(\"\\n      \"+t._s(t.getValueContent(e))+\"\\n    \")])])})],2)},[],!1,null,\"74c3ac7c\",null);o.options.__file=\"ImportInfo.vue\";e.default=o.exports},C3Po:function(t,e,i){\"use strict\";i.r(e);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"8GhS\"),o=i(\"zsVz\"),l={name:\"TaskQuickAdd\",components:{XhUserCell:a.p},props:{params:Object},data:function(){return{sendLoading:!1,isUnfold:!1,sendContent:\"\",sendStopTime:\"\",mainUser:[]}},computed:{createMainUser:function(){return this.mainUser&&this.mainUser.length?this.mainUser[0]:null}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{inputFocus:function(){var t=this;this.$emit(\"focus\"),this.isUnfold=!0,this.$nextTick(function(){t.$refs.input.focus()})},selectMainUser:function(t){this.mainUser=t.value},send:function(){var t=this;if(this.sendContent.length){this.sendLoading=!0;var e={name:this.sendContent,stopTime:this.sendStopTime,mainUserId:this.createMainUser?this.createMainUser.userId:\"\"};this.params&&(e=n()({},e,this.params)),Object(o.e)(e).then(function(e){t.sendLoading=!1,t.$message.success(\"新建成功\"),t.resetSendData(),t.$emit(\"send\")}).catch(function(){t.sendLoading=!1})}else this.$message.error(\"请填写任务标题\")},resetSendData:function(){this.sendContent=\"\",this.sendStopTime=\"\",this.mainUser=[],this.isUnfold=!1},addClose:function(){this.isUnfold=!1}}},c=(i(\"5pSV\"),i(\"KHd+\")),r=Object(c.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.sendLoading,expression:\"sendLoading\"}],staticClass:\"task-quick-add\",class:[\"add\",{unfold:t.isUnfold,\"is-close\":!t.isUnfold}]},[t.isUnfold?i(\"i\",{staticClass:\"wk wk-close\",on:{click:t.addClose}}):t._e(),t._v(\" \"),i(\"el-input\",{ref:\"input\",staticClass:\"input\",attrs:{maxlength:100,\"prefix-icon\":t.isUnfold?\"\":\"el-icon-plus\",placeholder:\"添加任务\"},on:{focus:t.inputFocus},model:{value:t.sendContent,callback:function(e){t.sendContent=e},expression:\"sendContent\"}}),t._v(\" \"),i(\"flexbox\",{staticClass:\"add-info\"},[i(\"el-date-picker\",{ref:\"endTime\",class:{\"no-time-top\":!t.sendStopTime},attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"\"},model:{value:t.sendStopTime,callback:function(e){t.sendStopTime=e},expression:\"sendStopTime\"}}),t._v(\" \"),i(\"xh-user-cell\",{attrs:{value:t.mainUser,radio:\"\",placement:\"top\"},on:{\"value-change\":t.selectMainUser}},[i(\"div\",{staticClass:\"select-user\",attrs:{slot:\"reference\"},slot:\"reference\"},[t.createMainUser?i(\"xr-avatar\",{attrs:{name:t.createMainUser.realname,size:24,src:t.createMainUser.img}}):i(\"i\",{staticClass:\"wk wk-persons add-info--person\"})],1)])],1),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.send,expression:\"send\"}],staticClass:\"send-btn\",attrs:{icon:\"wk wk-top\",type:\"primary\"}},[t._v(\"发布\")])],1)},[],!1,null,\"38430333\",null);r.options.__file=\"TaskQuickAdd.vue\";e.default=r.exports},CMIa:function(t,e,i){\"use strict\";i.r(e);var s=i(\"KTTK\"),n=i(\"ERJp\"),a=i(\"6iAj\"),o=i(\"UCfG\"),l=i(\"HHBN\"),c=i(\"ZX9L\"),r=i(\"wd/R\"),u=i.n(r),d={name:\"FiltrateHandleView\",components:{TimeTypeSelect:c.a,XhStructureCell:o.a,XhUserCell:l.a},props:{moduleType:{type:String},title:{type:String,default:\"\"},showFilterView:{default:!0,type:Boolean},showYearSelect:{default:!1,type:Boolean},showBusinessSelect:{default:!1,type:Boolean},showUserSelect:{default:!0,type:Boolean},showCustomSelect:{default:!1,type:Boolean},customDefault:\"\",customOptions:{default:function(){return[]},type:Array},showProductSelect:{default:!1,type:Boolean}},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},yearValue:\"\",timeTypeValue:{},dataSelect:1,structuresSelectValue:[],userSelectValue:[],businessOptions:[],businessStatusValue:\"\",productValue:[],productOptions:[],customValue:\"\"}},computed:{showUserStrucSelect:function(){return this.showUserSelect}},watch:{},mounted:function(){var t=this;this.showCustomSelect&&(this.customValue=this.customDefault),this.showYearSelect&&(this.yearValue=u()(new Date).year().toString()),this.$emit(\"load\"),this.showBusinessSelect?this.getBusinessStatusList(function(){t.postFiltrateValue()}):this.postFiltrateValue(),this.showProductSelect&&this.getProductCategoryIndex()},beforeDestroy:function(){},methods:{structureChange:function(t){this.structuresSelectValue=t.value||[]},userChange:function(t){this.userSelectValue=t.value||[]},customSelectChange:function(){this.$emit(\"typeChange\",this.customValue)},timeTypeChange:function(t){this.timeTypeValue=t},structuresValueChange:function(t){this.showUserSelect&&(this.userSelectValue=\"\",this.userOptions=[],this.getUserList())},getUserList:function(){var t=this,e={};e.deptId=this.structuresSelectValue,Object(s.u)(e).then(function(e){t.userOptions=e.data}).catch(function(){t.$emit(\"error\")})},getBusinessStatusList:function(t){var e=this;Object(n.v)().then(function(i){var s=i.data||[];e.businessOptions=s.filter(function(t){return 1===t.status}),e.businessOptions.length>0&&(e.businessStatusValue=e.businessOptions[0].typeId),t(!0)}).catch(function(){e.$emit(\"error\")})},getProductCategoryIndex:function(){var t=this;Object(a.L)({type:\"tree\"}).then(function(e){t.productOptions=e.data}).catch(function(){})},postFiltrateValue:function(){var t={};this.showUserStrucSelect?1==this.dataSelect&&(t.deptId=this.structuresSelectValue.length>0?this.structuresSelectValue[0].id:\"\"):t.deptId=this.structuresSelectValue.length>0?this.structuresSelectValue[0].id:\"\",this.showUserStrucSelect&&(t.isUser=2==this.dataSelect?1:0),this.showUserSelect&&2==this.dataSelect&&(t.userId=this.userSelectValue.length>0?this.userSelectValue[0].userId:\"\"),this.showBusinessSelect&&(t.typeId=this.businessStatusValue),this.showProductSelect&&(t.categoryId=this.productValue.length>0?this.productValue[this.productValue.length-1]:\"\"),this.showYearSelect?t.year=this.yearValue:\"custom\"==this.timeTypeValue.type?(t.startTime=this.timeTypeValue.startTime,t.endTime=this.timeTypeValue.endTime):t.type=this.timeTypeValue.value,this.$emit(\"change\",t)}}},h=(i(\"yl8z\"),i(\"KHd+\")),p=Object(h.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"flexbox\",{staticClass:\"filtrate-content\",attrs:{justify:\"flex-start\"}},[i(\"flexbox\",{staticClass:\"title-box\",attrs:{justify:\"flex-start\"}},[i(\"div\",{staticClass:\"icon-box\"},[i(\"span\",{staticClass:\"wk wk-my-task icon\"})]),t._v(\" \"),i(\"span\",{staticClass:\"text\"},[t._v(t._s(t.title))])]),t._v(\" \"),t.showFilterView?[t.showYearSelect?t._e():i(\"time-type-select\",{on:{change:t.timeTypeChange}}),t._v(\" \"),t.showYearSelect?i(\"el-date-picker\",{attrs:{clearable:!1,\"picker-options\":t.pickerOptions,type:\"year\",\"value-format\":\"yyyy\",placeholder:\"选择年\"},model:{value:t.yearValue,callback:function(e){t.yearValue=e},expression:\"yearValue\"}}):t._e(),t._v(\" \"),t.showUserStrucSelect?i(\"el-select\",{model:{value:t.dataSelect,callback:function(e){t.dataSelect=e},expression:\"dataSelect\"}},t._l([{label:\"按部门\",value:1},{label:\"按员工\",value:2}],function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})):t._e(),t._v(\" \"),1==t.dataSelect?i(\"xh-structure-cell\",{staticClass:\"xh-structure-cell\",attrs:{radio:\"\",placeholder:\"选择部门（默认为本部门及下属部门）\"},on:{\"value-change\":t.structureChange}}):t._e(),t._v(\" \"),2==t.dataSelect&&t.showUserSelect?i(\"xh-user-cell\",{staticClass:\"xh-user-cell\",attrs:{radio:\"\",placeholder:\"选择员工（默认为本人及下属）\\n\"},on:{\"value-change\":t.userChange}}):t._e(),t._v(\" \"),t.showBusinessSelect?i(\"el-select\",{attrs:{placeholder:\"商机组\"},model:{value:t.businessStatusValue,callback:function(e){t.businessStatusValue=e},expression:\"businessStatusValue\"}},t._l(t.businessOptions,function(t){return i(\"el-option\",{key:t.typeId,attrs:{label:t.name,value:t.typeId}})})):t._e(),t._v(\" \"),t.showProductSelect?i(\"el-cascader\",{staticStyle:{width:\"100%\"},attrs:{options:t.productOptions,\"show-all-levels\":!1,props:{children:\"children\",label:\"label\",value:\"categoryId\"},\"change-on-select\":\"\"},model:{value:t.productValue,callback:function(e){t.productValue=e},expression:\"productValue\"}}):t._e(),t._v(\" \"),t.showCustomSelect?i(\"el-select\",{on:{change:t.customSelectChange},model:{value:t.customValue,callback:function(e){t.customValue=e},expression:\"customValue\"}},t._l(t.customOptions,function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.name,value:t.value}})})):t._e(),t._v(\" \"),t._t(\"append\"),t._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},nativeOn:{click:function(e){t.postFiltrateValue()}}},[t._v(\"搜索\")]),t._v(\" \"),t._t(\"default\")]:t._e()],2)},[],!1,null,\"4dd77065\",null);p.options.__file=\"FiltrateHandleView.vue\";e.default=p.exports},\"E/pc\":function(t,e,i){\"use strict\";var s=i(\"fpBj\");i.n(s).a},\"I+NK\":function(t,e,i){\"use strict\";var s=i(\"PWYh\");i.n(s).a},JAjk:function(t,e,i){t.exports=i.p+\"static/img/contacts.83d4b7f.png\"},JCWM:function(t,e,i){\"use strict\";i.r(e);var s=i(\"7Dod\"),n=i(\"XJYT\"),a={name:\"PutPoolHandle\",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},id:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{selectId:\"\",list:[]}},computed:{},watch:{list:{handler:function(){this.selectId=this.list&&this.list.length>0?this.list[0].poolId:\"\"},immediate:!0},visible:function(t){t&&0===this.list.length&&this.getList()}},mounted:function(){},methods:{getList:function(){var t=this,e=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(s.u)().then(function(i){t.list=i.data||[],e&&e.close()}).catch(function(){e&&e.close()})},handleCancel:function(){this.$emit(\"update:visible\",!1)},handleConfirm:function(){var t=this;if(this.selectId){var e=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(s.F)({ids:this.selectionList.map(function(t){return t.customerId}),poolId:this.selectId}).then(function(i){t.$message({type:\"success\",message:\"操作成功\"}),e.close(),t.$emit(\"handle\",{type:\"put_seas\"}),t.handleCancel()}).catch(function(){e.close()})}}}},o=(i(\"jUvl\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"放入公海\",width:\"450px\"},on:{close:t.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"公海：\")]),t._v(\" \"),i(\"el-select\",{model:{value:t.selectId,callback:function(e){t.selectId=e},expression:\"selectId\"}},t._l(t.list,function(t){return i(\"el-option\",{key:t.poolId,attrs:{label:t.poolName,value:t.poolId}})}))],1)],1),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"7b1cec81\",null);l.options.__file=\"PutPoolHandle.vue\";e.default=l.exports},K4QM:function(t,e,i){t.exports=i.p+\"static/img/leads_not.d26c261.png\"},KOLf:function(t,e,i){},Klv4:function(t,e,i){\"use strict\";var s=i(\"lrb+\");i.n(s).a},KmSi:function(t,e,i){\"use strict\";i.r(e);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"4XAY\"),o=i(\"ZoMv\"),l=i(\"yPq4\"),c=i(\"qDfk\"),r=i(\"L2JU\"),u=i(\"4peS\"),d=i.n(u),h=i(\"dAOq\"),p={name:\"ReportList\",components:{CRMAllDetail:l.default,RecordList:c.default},filters:{dealIcon:function(t){return 1==t?\"wk wk-success deal-suc\":\"wk wk-close deal-un\"},dealName:function(t){return 1==t?\"已成交\":\"未成交\"}},mixins:[h.a],props:{show:{type:Boolean,default:!1},title:String,placeholder:{type:String,default:\"请输入搜索内容\"},crmType:String,fieldList:Array,recordRequest:Function,request:Function,params:Object,paging:{type:Boolean,default:!0},sortable:{type:[Boolean,String],default:!1}},data:function(){return{inputContent:\"\",loading:!1,tableHeight:this.getTableHeight(),list:[],showFieldList:[],sortData:{},currentPage:1,pageSize:d.a.get(\"crmPageSizes\")||15,pageSizes:[15,30,60,100],total:0,rowID:\"\",rowType:\"\",showDview:!1,recordParams:{},recordShow:!1}},computed:n()({},Object(r.b)([\"crm\"]),{showExamineStatus:function(){return\"contract\"==this.crmType&&\"receivables\"==this.crmType},showFillColumn:function(){return!this.fieldList||!this.fieldList.length}}),watch:{show:function(t){t&&this.initInfo()}},mounted:function(){this.$el.addEventListener(\"click\",this.handleDocumentClick,!1)},destroyed:function(){this.$el&&this.$el.removeEventListener(\"click\",this.handleDocumentClick,!1)},methods:{getTableHeight:function(){var t=document.documentElement.clientHeight;return t-.2*t-200},initInfo:function(){var t=this;this.inputContent=\"\",this.showFieldList=[],this.sortData={},this.$nextTick(function(){t.$refs.crmTable.clearSort()}),this.list=[],this.currentPage=1,window.onresize=function(){t.tableHeight=t.getTableHeight()},this.fieldList?(this.showFieldList=this.fieldList,this.getList()):this.getFieldList()},searchInput:function(){this.currentPage=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e={};this.paging&&(e={page:this.currentPage,limit:this.pageSize}),this.placeholder&&(e.search=this.inputContent),this.sortData.order&&(e.sortField=this.sortData.prop,e.order=\"ascending\"==this.sortData.order?2:1),this.request(n()({},e,this.params)).then(function(e){t.paging?(t.list=e.data.list,t.total=e.data.totalRow):t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},getFieldList:function(){var t=this;if(0==this.showFieldList.length){this.loading=!0;var e=\"business_status\"==this.crmType?\"business\":this.crmType,i={label:o.default[e]};Object(a.A)(i).then(function(e){for(var i=0;i<e.data.length;i++){var s=e.data[i],n=0;n=s.width?s.width:s.name&&s.name.length<=6?15*s.name.length+45:140,t.showFieldList.push({prop:s.fieldName,label:s.name,width:n})}t.getList()}).catch(function(){t.loading=!1})}else this.getList()},fieldFormatter:function(t,e){return this.fieldList&&this.fieldList.length&&\"crmType\"==e.property?o.default.convertTypeToName(t[e.property]):\"\"===t[e.property]||null===t[e.property]?\"--\":t[e.property]},sortChange:function(t,e,i){this.sortData=t,this.getList()},handleSizeChange:function(t){d.a.set(\"crmPageSizes\",t),this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},handleRowClick:function(t,e,i){\"leads\"===this.crmType?\"leadsName\"===e.property?(this.rowID=t.leadsId,this.showDview=!0):this.showDview=!1:\"customer\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):this.showDview=!1:\"contacts\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"name\"===e.property?(this.rowID=t.contactsId,this.rowType=\"contacts\",this.showDview=!0):this.showDview=!1:\"business\"===this.crmType||\"business_status\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===e.property?(this.rowID=t.businessId,this.rowType=\"business\",this.showDview=!0):this.showDview=!1:\"contract\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===e.property?(this.rowID=t.businessId,this.rowType=\"business\",this.showDview=!0):\"contactsName\"===e.property?(this.rowID=t.contactsId,this.rowType=\"contacts\",this.showDview=!0):\"num\"===e.property||\"name\"===e.property?(this.rowID=t.contractId,this.rowType=\"contract\",this.showDview=!0):this.showDview=!1:\"product\"===this.crmType?\"name\"===e.property?(this.rowID=t.productId,this.showDview=!0):this.showDview=!1:\"receivables\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"contractNum\"===e.property?(this.rowID=t.contractId,this.rowType=\"contract\",this.showDview=!0):\"number\"===e.property?(this.rowID=t.receivablesId,this.rowType=\"receivables\",this.showDview=!0):this.showDview=!1:\"record\"===this.crmType&&(\"count\"===e.property&&t.count?(this.rowType=\"crm_\"+o.default.convertTypeToKey(t.crmType),this.recordParams=n()({crmType:t.crmType,queryType:0},this.params),this.recordShow=!0):this.recordShow=!1)},handleHandle:function(t){\"alloc\"!==t.type&&\"get\"!==t.type&&\"transfer\"!==t.type&&\"transform\"!==t.type&&\"delete\"!==t.type&&\"put_seas\"!==t.type||(this.showDview=!1),\"edit\"!==t.type&&this.getList()},cellClassName:function(t){var e=t.row,i=t.column;t.rowIndex,t.columnIndex;return this.crmType&&(\"customerName\"===i.property||\"businessName\"===i.property||\"name\"===i.property||\"contactsName\"===i.property||\"num\"===i.property||\"contractNum\"===i.property||\"number\"===i.property||\"record\"===this.crmType&&\"count\"===i.property&&e[i.property])?\"can-visit--underline\":\"\"},hideView:function(){this.$emit(\"update:show\",!1),this.$emit(\"hide\")},handleDocumentClick:function(t){var e=!0,i=document.getElementsByClassName(\"el-table__row\");if(i&&e)for(var s=0;s<i.length;s++){if(i[s].contains(t.target)){e=!1;break}}document.getElementById(\"slide\")&&document.getElementById(\"slide\").contains(t.target)&&(e=!1),e&&(this.showDview=!1)}}},f=(i(\"hr1e\"),i(\"KHd+\")),m=Object(f.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{attrs:{visible:t.show,\"append-to-body\":!0,\"close-on-click-modal\":!1,top:\"10vh\",width:\"80%\",\"custom-class\":\"no-padding-dialog\"},on:{close:t.hideView}},[i(\"div\",{staticClass:\"header\",attrs:{slot:\"title\"},on:{click:function(e){t.showDview=!1}},slot:\"title\"},[i(\"span\",{staticClass:\"title\"},[t._v(t._s(t.title))]),t._v(\" \"),t.placeholder?i(\"el-input\",{staticClass:\"search-input\",attrs:{placeholder:t.placeholder},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.searchInput(e):null}},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:\"inputContent\"}},[i(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},nativeOn:{click:function(e){return t.searchInput(e)}},slot:\"append\"})],1):t._e()],1),t._v(\" \"),i(\"div\",{staticClass:\"container\"},[i(\"div\",{staticClass:\"content\"},[i(\"div\",{staticClass:\"list-body\"},[i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],ref:\"crmTable\",staticStyle:{width:\"100%\"},attrs:{id:\"crm-table\",data:t.list,height:t.tableHeight,\"cell-class-name\":t.cellClassName,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"row-click\":t.handleRowClick,\"sort-change\":t.sortChange}},[t._l(t.showFieldList,function(e,s){return i(\"el-table-column\",{key:s,attrs:{sortable:\"poolDay\"!=e.prop&&\"custom\",fixed:0==s,prop:e.prop,label:e.label,width:e.width,\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(s){return[\"dealStatus\"==e.prop?[i(\"i\",{class:t._f(\"dealIcon\")(s.row[e.prop])}),t._v(\" \"),i(\"span\",[t._v(t._s(t._f(\"dealName\")(s.row[e.prop])))])]:\"status\"==e.prop?[2==s.row.status?i(\"i\",{staticClass:\"wk wk-circle-password customer-lock\"}):t._e()]:\"checkStatus\"==e.prop?[i(\"span\",{staticClass:\"status-mark\",style:{backgroundColor:t.getStatusColor(s.row.checkStatus)}}),t._v(\" \"),i(\"span\",[t._v(t._s(t.getStatusName(s.row.checkStatus)))])]:[t._v(t._s(t.fieldFormatter(s.row,s.column)))]]}}])})}),t._v(\" \"),t.showFillColumn?i(\"el-table-column\"):t._e()],2),t._v(\" \"),t.paging?i(\"div\",{staticClass:\"p-contianer\"},[i(\"el-pagination\",{staticClass:\"p-bar\",attrs:{\"current-page\":t.currentPage,\"page-sizes\":t.pageSizes,\"page-size\":t.pageSize,total:t.total,background:\"\",layout:\"prev, pager, next, sizes, total, jumper\"},on:{\"update:pageSize\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1):t._e()],1)]),t._v(\" \"),i(\"c-r-m-all-detail\",{staticClass:\"d-view\",attrs:{visible:t.showDview,\"crm-type\":t.rowType,id:t.rowID},on:{\"update:visible\":function(e){t.showDview=e},handle:t.handleHandle}}),t._v(\" \"),t.recordShow?i(\"record-list\",{attrs:{\"crm-type\":t.rowType,request:t.recordRequest,params:t.recordParams},on:{handle:t.getList,hide:function(e){t.recordShow=!1}}}):t._e()],1)])},[],!1,null,\"a44b35be\",null);m.options.__file=\"index.vue\";e.default=m.exports},\"L+lS\":function(t,e,i){t.exports=i.p+\"static/img/nearby_not.016fa6f.png\"},\"La+m\":function(t,e,i){},M2MT:function(t,e,i){\"use strict\";var s=i(\"Qa12\");i.n(s).a},NYF1:function(t,e,i){\"use strict\";var s={name:\"AddRelateList\",components:{},props:{data:Array,type:{type:[String,Number],require:!0},label:String},data:function(){return{}},computed:{typeName:function(){return this.label?this.label:{customer:\"客户\",contacts:\"联系人\",business:\"商机\",contract:\"合同\"}[this.type]}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{getItemName:function(t){return t[{customer:\"customerName\",contacts:\"name\",business:\"businessName\",contract:\"name\"}[this.type]]||t.name},deleteItem:function(t,e){this.$emit(\"delete\",t,e,this.type)}}},n=(i(\"s357\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"section\",{staticClass:\"c-cont\"},[i(\"flexbox\",{staticClass:\"c-header\"},[i(\"i\",{class:[\"wk\",\"wk-\"+t.type]}),t._v(\" \"),i(\"div\",{staticClass:\"c-name\"},[t._v(t._s(t.typeName))])]),t._v(\" \"),i(\"div\",{staticClass:\"c-body\"},[i(\"flexbox\",{attrs:{wrap:\"wrap\"}},t._l(t.data,function(e,s){return i(\"flexbox\",{key:s,staticClass:\"c-item\"},[i(\"div\",{staticClass:\"c-item-name\"},[t._v(t._s(t.getItemName(e)))]),t._v(\" \"),i(\"div\",{staticClass:\"c-item-close\",on:{click:function(i){t.deleteItem(e,s)}}},[t._v(\"×\")])])}))],1)],1)},[],!1,null,\"60fd2091\",null);a.options.__file=\"AddRelateList.vue\";e.a=a.exports},Nbko:function(t,e,i){\"use strict\";var s=i(\"La+m\");i.n(s).a},O8VQ:function(t,e,i){\"use strict\";i.r(e);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"4XAY\"),o=i(\"Vm8M\"),l=i(\"7Qib\"),c=i(\"Z+Ht\"),r=i(\"vvxI\"),u=i(\"L2JU\"),d={name:\"LogCell\",components:{MapView:o.a},filters:{getFileSize:function(t){return Object(l.h)(t)}},mixins:[c.a,r.default],props:{item:{type:Object,default:function(){return{}}},section:[String,Number],index:[String,Number],canDelete:{type:Boolean,default:!0}},data:function(){return{showMapView:!1,mapViewInfo:{}}},computed:n()({},Object(u.b)([\"crm\"]),{hasEditAuth:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.update},hasDeleteAuth:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.delete},activityIcon:function(){return this.getXrIcon(this.getActivityType(this.item.activityType))},activityIconColor:function(){return this.getXrIconColor(this.getActivityType(this.item.activityType))}}),mounted:function(){},methods:{previewImg:function(t,e){this.$bus.emit(\"preview-image-bus\",{index:e,data:t})},downloadFile:function(t){Object(l.d)({path:t.url,name:t.name})},handleCommand:function(t){var e=this;\"delete\"==t?this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){(4==e.item.type?a.d:a.b)({activityId:e.item.activityId}).then(function(t){e.$emit(\"delete\",e.item,e.index,e.section),e.$store.dispatch(\"GetMessageNum\"),e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){}):\"edit\"==t&&this.$emit(\"edit\",this.item,this.index,this.section)},checkRelationDetail:function(t,e){this.$emit(\"crm-detail\",t,e)},checkMapView:function(t){t.address&&(this.mapViewInfo={title:t.address,lat:t.lat,lng:t.lng},this.showMapView=!0)}}},h=(i(\"3Qrg\"),i(\"KHd+\")),p=Object(h.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"fl-c\"},[i(\"flexbox\",{staticClass:\"fl-h\"},[i(\"xr-avatar\",{staticClass:\"fl-h-img\",attrs:{name:t.item.realname,id:t.item.createUserId,size:30,src:t.item.userImg,disabled:!1}}),t._v(\" \"),i(\"div\",{staticClass:\"fl-h-b\"},[i(\"div\",{staticClass:\"fl-h-name\"},[t._v(t._s(t.item.realname))]),t._v(\" \"),i(\"div\",{staticClass:\"fl-h-time\"},[t._v(t._s(t.item.createTime))])]),t._v(\" \"),t.item.category?i(\"div\",{staticClass:\"follow\"},[i(\"span\",{staticClass:\"follow-info\"},[t._v(t._s(t.item.category))])]):t._e(),t._v(\" \"),i(\"span\",{staticClass:\"log-mark\",style:{right:t.canDelete?\"40px\":\"15px\"}},[i(\"i\",{class:t.activityIcon,style:{color:t.activityIconColor}}),t._v(\" \"),i(\"span\",{staticClass:\"log-mark__label\"},[t._v(t._s(t.getActivityTypeName(t.item.activityType)+\"-\"+t.getRecordLogTypeName(t.item.type)))])]),t._v(\" \"),t.canDelete&&(t.hasDeleteAuth||t.hasEditAuth)?i(\"el-dropdown\",{staticClass:\"more-drop\",attrs:{trigger:\"click\"},on:{command:t.handleCommand}},[i(\"i\",{staticClass:\"el-icon-arrow-down el-icon-more\"}),t._v(\" \"),i(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[t.hasEditAuth?i(\"el-dropdown-item\",{attrs:{command:\"edit\"}},[t._v(\"编辑\")]):t._e(),t._v(\" \"),t.hasDeleteAuth?i(\"el-dropdown-item\",{attrs:{command:\"delete\"}},[t._v(\"删除\")]):t._e()],1)],1):t._e()],1),t._v(\" \"),i(\"div\",{staticClass:\"fl-b\"},[i(\"div\",{staticClass:\"fl-b-content\"},[t._v(t._s(t.item.content))]),t._v(\" \"),t.item.img&&t.item.img.length>0?i(\"flexbox\",{staticClass:\"fl-b-images\",attrs:{wrap:\"wrap\"}},t._l(t.item.img,function(e,s){return i(\"div\",{directives:[{name:\"src\",rawName:\"v-src:background-image\",value:e.url,expression:\"file.url\",arg:\"background-image\"}],key:e.url,staticClass:\"fl-b-img-item\",on:{click:function(e){t.previewImg(t.item.img,s)}}})})):t._e(),t._v(\" \"),t.item.file&&t.item.file.length>0?i(\"div\",t._l(t.item.file,function(e,s){return i(\"flexbox\",{key:s,staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"cell-hd first-show\"},[i(\"i\",{staticClass:\"wk wk-file\"})]),t._v(\" \"),i(\"div\",{staticClass:\"cell-hd first-show\"},[t._v(\"\\n          附件：\\n        \")]),t._v(\" \"),i(\"div\",{staticClass:\"cell-bd text-one-line\"},[t._v(\"\\n          \"+t._s(e.name)+\"\\n        \")]),t._v(\" \"),i(\"div\",{staticClass:\"cell-ft\"},[i(\"span\",{staticClass:\"des\"},[t._v(\"（\"+t._s(t._f(\"getFileSize\")(e.size))+\"）\")]),t._v(\" \"),i(\"a\",{on:{click:function(e){t.previewImg(t.item.file,s)}}},[t._v(\"预览\")]),t._v(\" \"),i(\"a\",{on:{click:function(i){t.downloadFile(e)}}},[t._v(\"下载\")])])])})):t._e(),t._v(\" \"),t.item.contactsList&&t.item.contactsList.length>0?i(\"div\",[i(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"cell-hd\"},[i(\"i\",{staticClass:\"wk wk-contacts\"})]),t._v(\" \"),i(\"div\",{staticClass:\"cell-bd\"},[t._v(\"\\n          相关联系人：\\n        \")]),t._v(\" \"),t._l(t.item.contactsList,function(e,s){return i(\"div\",{key:s,staticClass:\"cell-ft__item text-one-line\"},[i(\"a\",{on:{click:function(i){t.checkRelationDetail(\"contacts\",e.id)}}},[t._v(t._s(e.name))])])})],2)],1):t._e(),t._v(\" \"),t.item.businessList&&t.item.businessList.length>0?i(\"div\",[i(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"cell-hd\"},[i(\"i\",{staticClass:\"wk wk-business\"})]),t._v(\" \"),i(\"div\",{staticClass:\"cell-bd\"},[t._v(\"\\n          相关商机：\\n        \")]),t._v(\" \"),i(\"div\",{staticClass:\"cell-ft\"},t._l(t.item.businessList,function(e,s){return i(\"div\",{key:s,staticClass:\"cell-ft__item text-one-line\"},[i(\"a\",{on:{click:function(i){t.checkRelationDetail(\"business\",e.id)}}},[t._v(t._s(e.name))])])}))])],1):t._e(),t._v(\" \"),t.item.nextTime?i(\"div\",{staticClass:\"cell-top\"},[i(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"cell-hd\"},[i(\"i\",{staticClass:\"wk wk-time\"})]),t._v(\" \"),i(\"div\",{staticClass:\"cell-bd text-one-line\"},[t._v(\"\\n          下次联系时间：\"+t._s(t.item.nextTime)+\"\\n        \")])])],1):t._e(),t._v(\" \"),t.item.address?i(\"div\",{staticClass:\"cell-top\"},[i(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"cell-hd is-address\"},[i(\"i\",{staticClass:\"wk wk-location\"})]),t._v(\" \"),i(\"div\",{staticClass:\"cell-bd text-one-line can-visit--underline\",on:{click:function(e){t.checkMapView(t.item)}}},[t._v(t._s(t.item.address))])])],1):t._e()],1),t._v(\" \"),t.showMapView?i(\"map-view\",{attrs:{title:t.mapViewInfo.title,lat:t.mapViewInfo.lat,lng:t.mapViewInfo.lng},on:{hidden:function(e){t.showMapView=!1}}}):t._e(),t._v(\" \"),t._t(\"default\")],2)},[],!1,null,\"99f77bf4\",null);p.options.__file=\"LogCell.vue\";e.default=p.exports},OKZ7:function(t,e,i){},PWYh:function(t,e,i){},QSP8:function(t,e,i){\"use strict\";var s=i(\"WWx0\");i.n(s).a},Qa12:function(t,e,i){},R1k5:function(t,e,i){t.exports=i.p+\"static/img/invoice.d717c31.png\"},Rq8O:function(t,e,i){},ShYU:function(t,e,i){t.exports=i.p+\"static/img/marketing.0612591.png\"},TDiV:function(t,e,i){},U4MQ:function(t,e,i){t.exports=i.p+\"static/img/contract.65548f9.png\"},Vm8M:function(t,e,i){\"use strict\";var s=i(\"7Qib\"),n={name:\"MapView\",components:{},props:{title:{type:String,default:\"\"},lat:{type:[String,Number],default:0},lng:{type:[String,Number],default:0}},data:function(){return{}},computed:{},mounted:function(){var t=this;this.$el.style.zIndex=Object(s.q)(),document.body.appendChild(this.$el),Object(s.l)().then(function(){var e=new BMap.Map(\"choicemap\",{enableMapClick:!1}),i=new BMap.Point(parseFloat(t.lng),parseFloat(t.lat));e.centerAndZoom(i,18),e.enableScrollWheelZoom();var s=new BMap.Marker(i);e.addOverlay(s);var n=new BMap.InfoWindow(t.title);s.addEventListener(\"click\",function(){e.openInfoWindow(n,i)})})},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{hiddenView:function(){this.$emit(\"hidden\")}}},a=(i(\"I+NK\"),i(\"KHd+\")),o=Object(a.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"map-view\"},[e(\"div\",{attrs:{id:\"choicemap\"}}),this._v(\" \"),e(\"i\",{staticClass:\"el-icon-close map-close\",on:{click:this.hiddenView}})])},[],!1,null,\"33a9f6bf\",null);o.options.__file=\"MapView.vue\";e.a=o.exports},WGjG:function(t,e,i){\"use strict\";i.r(e);var s=i(\"8GhS\"),n=i(\"7Dod\"),a={name:\"AllocHandle\",components:{XhUserCell:s.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},poolId:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,visible:!1,usersList:[]}},computed:{},watch:{dialogVisible:{handler:function(t){this.visible=t,t||(this.usersList=[])},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;if(0===this.usersList.length)this.$message.error(\"请选择负责人\");else{var e={userId:this.usersList[0].userId,poolId:this.poolId};e.ids=this.selectionList.map(function(e){return e[t.crmType+\"Id\"]}),this.loading=!0,Object(n.d)(e).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.$emit(\"handle\",{type:\"alloc\"}),t.handleCancel()}).catch(function(){t.loading=!1})}}}},o=(i(\"Klv4\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量分配\",width:\"400px\"},on:{\"update:visible\":function(e){t.visible=e},close:t.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[t._v(\"请选择：\")]),t._v(\" \"),i(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:t.usersList},on:{\"value-change\":t.userChage}})],1)],1),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"c3449ef0\",null);l.options.__file=\"AllocHandle.vue\";e.default=l.exports},WWx0:function(t,e,i){},XFCB:function(t,e,i){},YIeP:function(t,e,i){\"use strict\";var s=i(\"4XAY\"),n=i(\"XJYT\"),a=i(\"t2rG\"),o={name:\"Set\",components:{draggable:i.n(a).a},props:{visible:{type:Boolean,required:!0,default:!1},list:Array},data:function(){return{setList:[],isDrag:!1}},computed:{},watch:{list:{handler:function(){this.initInfo()},immediate:!0},visible:function(t){t&&this.initInfo()}},created:function(){},beforeDestroy:function(){},methods:{initInfo:function(){this.setList=this.list.map(function(t){return{value:t}}),0==this.setList.length&&(this.setList=[{value:\"\"}])},close:function(){this.$emit(\"update:visible\",!1)},addClick:function(){this.setList.push({value:\"\"})},deleteClick:function(t){this.setList.splice(t,1)},sureClick:function(){for(var t=this,e=[],i=0;i<this.setList.length;i++){var a=this.setList[i];a.value&&e.push(a.value)}if(0!=e.length){var o=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"常用语管理\"]')});Object(s.G)(e).then(function(i){o.close(),t.$emit(\"update\",e),t.close()}).catch(function(){o.close()})}else this.$message.error(\"请输入常用语\")},dragEnter:function(){this.isDrag=!0},dragLeave:function(){this.isDrag=!1}}},l=(i(\"nD2f\"),i(\"KHd+\")),c=Object(l.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"常用语管理\",width:\"600px\"},on:{close:t.close}},[i(\"div\",{staticClass:\"set\"},[i(\"draggable\",{attrs:{options:{group:\"list\",forceFallback:!1,fallbackClass:\"draggingStyle\",filter:\".el-input__inner\",preventOnFilter:!1}},model:{value:t.setList,callback:function(e){t.setList=e},expression:\"setList\"}},t._l(t.setList,function(e,s){return i(\"flexbox\",{key:s,staticClass:\"set-item\",class:{\"is-drag\":t.isDrag}},[i(\"el-input\",{attrs:{maxlength:100},model:{value:e.value,callback:function(i){t.$set(e,\"value\",i)},expression:\"item.value\"}},[i(\"div\",{staticClass:\"drag-handle\",attrs:{slot:\"suffix\"},on:{mouseenter:t.dragEnter,mouseleave:t.dragLeave},slot:\"suffix\"},[t._v(\"⋮⋮\")])]),t._v(\" \"),i(\"i\",{staticClass:\"el-icon-remove\",on:{click:function(e){t.deleteClick(s)}}})],1)})),t._v(\" \"),i(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-circle-plus\"},on:{click:t.addClick}},[t._v(\"添加常用语\")])],1),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.sureClick,expression:\"sureClick\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"1a59f706\",null);c.options.__file=\"Set.vue\";var r={name:\"CommonWords\",components:{Set:c.exports},props:{},data:function(){return{loading:!1,showPopover:!1,setShow:!1,list:[]}},computed:{},watch:{showPopover:function(t){t&&0==this.list.length&&this.getCommonWords()}},mounted:function(){},beforeDestroy:function(){},methods:{selectScene:function(t,e){this.$emit(\"select\",t),this.showPopover=!1},setClick:function(){this.setShow=!0},getCommonWords:function(){var t=this;this.loading=!0,Object(s.F)().then(function(e){t.loading=!1,t.list=e.data||[]}).catch(function(){t.loading=!1})},udpateCommonWords:function(t){this.list=t}}},u=(i(\"q0fG\"),Object(l.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-popover\",{attrs:{placement:\"bottom\",width:\"320\",trigger:\"click\",\"popper-class\":\"no-padding-popover\"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:\"showPopover\"}},[i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"common-words\"},[i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:t.list&&0==t.list.length,expression:\"list && list.length == 0\"}],staticClass:\"word\",attrs:{\"xs-empty-icon\":\"none\"}},t._l(t.list,function(e,s){return i(\"div\",{key:s,staticClass:\"word-item\",on:{click:function(i){t.selectScene(e,s)}}},[t._v(\"\\n        \"+t._s(e)+\"\\n      \")])})),t._v(\" \"),i(\"div\",{staticClass:\"handle-interval\"},[i(\"flexbox\",{staticClass:\"handle-button\",nativeOn:{click:function(e){return t.setClick(e)}}},[i(\"i\",{staticClass:\"wk wk-manage handle-button-icon\"}),t._v(\" \"),i(\"div\",{staticClass:\"handle-button-name\"},[t._v(\"管理\")])])],1)]),t._v(\" \"),i(\"el-button\",{staticClass:\"word-button\",attrs:{slot:\"reference\"},slot:\"reference\"},[t._v(\"常用语\")]),t._v(\" \"),i(\"set\",{attrs:{visible:t.setShow,list:t.list},on:{\"update:visible\":function(e){t.setShow=e},update:t.udpateCommonWords}})],1)},[],!1,null,\"6ddd3652\",null));u.options.__file=\"index.vue\";e.a=u.exports},\"Z+Ht\":function(t,e,i){\"use strict\";e.a={methods:{getXrIcon:function(t){return{leads:\"wk wk-leads\",customer:\"wk wk-customer\",contacts:\"wk wk-contacts\",product:\"wk wk-product\",business:\"wk wk-business\",contract:\"wk wk-contract\",receivables:\"wk wk-receivables\",invoice:\"wk wk-invoice\",log:\"wk wk-log\",examine:\"wk wk-approve\",task:\"wk wk-o-task\",record:\"wk wk-record\"}[t]},getXrIconColor:function(t){return{leads:\"#704afd\",customer:\"#487DFF\",contacts:\"#27BA4A\",product:\"#26d4da\",business:\"#FB9323\",contract:\"#FD5B4A\",receivables:\"#FFB940\",invoice:\"#1cbaf5\",log:\"#5864FF\",approve:\"#9376FF\",task:\"#D376FF\",record:\"#19B5F6\"}[t]}}}},\"Z/5k\":function(t,e,i){\"use strict\";var s=i(\"u2Af\");i.n(s).a},ZX9L:function(t,e,i){\"use strict\";var s={name:\"TimeTypeSelect\",props:{defaultType:[String,Object],width:{type:Number,default:200},options:{type:Array,default:function(){return[{label:\"今天\",value:\"today\"},{label:\"昨天\",value:\"yesterday\"},{label:\"本周\",value:\"week\"},{label:\"上周\",value:\"lastWeek\"},{label:\"本月\",value:\"month\"},{label:\"上月\",value:\"lastMonth\"},{label:\"本季度\",value:\"quarter\"},{label:\"上季度\",value:\"lastQuarter\"},{label:\"本年\",value:\"year\"},{label:\"去年\",value:\"lastYear\"}]}}},data:function(){return{selectType:{label:\"本年\",value:\"year\"},showTypePopover:!1,showCustomContent:!1,sureCustomContent:!1,startTime:\"\",endTime:\"\"}},computed:{typeShowValue:function(){return this.sureCustomContent?this.startTime||this.endTime?(this.startTime||\"\")+\"-\"+(this.endTime||\"\"):\"\":this.selectType.label}},watch:{defaultType:function(){this.selectType.value!=this.defaultType&&(this.selectType=this.getDefaultTypeValue(this.defaultType))}},mounted:function(){void 0!==this.defaultType?\"string\"==typeof this.defaultType?this.selectType=this.getDefaultTypeValue(this.defaultType):this.defaultType.label?this.selectType=this.defaultType:\"default\"==this.defaultType.type?this.selectType=this.getDefaultTypeValue(this.defaultType.value):\"custom\"==this.defaultType.type&&(this.sureCustomContent=!0,this.showCustomContent=!0,this.startTime=this.defaultType.startTime,this.endTime=this.defaultType.endTime):this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},methods:{getDefaultTypeValue:function(t){for(var e=0;e<this.options.length;e++){var i=this.options[e];if(i.value==t)return i}return{label:\"本年\",value:\"year\"}},typeSelectClick:function(t){this.showTypePopover=!1,this.sureCustomContent=!1,this.showCustomContent=!1,this.selectType=t,this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},customSureClick:function(){this.startTime&&this.endTime&&(this.sureCustomContent=!0,this.showTypePopover=!1,this.$emit(\"change\",{type:\"custom\",startTime:this.startTime,endTime:this.endTime}))}}},n=(i(\"77fj\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-popover\",{staticClass:\"time-type-select\",attrs:{width:t.width,placement:\"bottom\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showTypePopover,callback:function(e){t.showTypePopover=e},expression:\"showTypePopover\"}},[i(\"div\",{staticClass:\"type-popper\"},[i(\"div\",{staticClass:\"type-content\"},[t._l(t.options,function(e,s){return i(\"div\",{key:s,staticClass:\"type-content-item\",class:{selected:t.selectType.value==e.value&&!t.showCustomContent},on:{click:function(i){t.typeSelectClick(e)}}},[i(\"div\",{staticClass:\"mark\"}),t._v(t._s(e.label)+\"\\n      \")])}),t._v(\" \"),i(\"div\",{staticClass:\"type-content-item\",class:{selected:t.showCustomContent},on:{click:function(e){t.showCustomContent=!0}}},[i(\"div\",{staticClass:\"mark\"}),t._v(\"自定义\\n      \")])],2),t._v(\" \"),t.showCustomContent?i(\"div\",{staticClass:\"type-content-custom\"},[i(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:\"startTime\"}}),t._v(\" \"),i(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:\"endTime\"}}),t._v(\" \"),i(\"el-button\",{on:{click:t.customSureClick}},[t._v(\"确定\")])],1):t._e()]),t._v(\" \"),i(\"el-input\",{staticClass:\"type-select\",style:{width:t.width+\"px\"},attrs:{slot:\"reference\",readonly:!0},slot:\"reference\",model:{value:t.typeShowValue,callback:function(e){t.typeShowValue=e},expression:\"typeShowValue\"}},[i(\"i\",{class:[\"el-icon-arrow-up\",{\"is-reverse\":t.showTypePopover}],attrs:{slot:\"suffix\"},slot:\"suffix\"})])],1)},[],!1,null,\"20503202\",null);a.options.__file=\"index.vue\";e.a=a.exports},ZxH2:function(t,e,i){\"use strict\";i.r(e);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"8uxz\"),o=i(\"KmSi\"),l=i(\"31UX\"),c=i(\"MT78\"),r={name:\"BusinessWinStatistics\",components:{ReportList:o.default},mixins:[l.default],data:function(){return{loading:!1,axisOption:null,list:[],postParams:{},axisList:[],fieldList:[],reportListShow:!1,fieldReportList:[{prop:\"businessName\",label:\"商机名称\"},{prop:\"customerName\",label:\"客户名称\"},{prop:\"typeName\",label:\"商机状态组\"},{prop:\"statusName\",label:\"商机阶段\"},{prop:\"money\",label:\"商机金额\"},{prop:\"dealDate\",label:\"预计成交日期\"},{prop:\"ownerUserName\",label:\"负责人\"},{prop:\"createTime\",label:\"创建时间\"}],reportData:{title:\"\",placeholder:\"\",request:null,params:null}}},computed:{},mounted:function(){this.initAxis()},methods:{searchClick:function(t){this.postParams=t,this.getDataList()},getDataList:function(){var t=this;this.loading=!0,Object(a.c)(this.postParams).then(function(e){t.loading=!1,t.axisList=e.data||[];for(var i=[{name:\"日期\",field:\"name\"}],s=[],n=[],a=[],o=[],l={name:\"转化率\"},c=0;c<t.axisList.length;c++){var r=t.axisList[c];s.push(r.businessEnd),n.push(r.businessNum),a.push(r.proportion),o.push(r.type),i.push({name:r.type,field:\"type\"+c}),l[\"type\"+c]=r.proportion+\"%\"}t.fieldList=i,t.list=[l],t.axisOption.xAxis[0].data=o,t.axisOption.series[0].data=a,t.axisOption.series[1].data=n,t.axisOption.series[2].data=s,t.chartObj.setOption(t.axisOption,!0)}).catch(function(){t.loading=!1})},cellClassName:function(t){var e=t.row,i=t.column;t.rowIndex,t.columnIndex;return\"name\"!=i.property&&e[i.property].replace(\"%\",\"\")>0?\"can-visit--underline\":\"\"},handleRowClick:function(t,e,i){if(\"name\"!=e.property&&t[e.property].replace(\"%\",\"\")>0){this.reportData.title=e.label+\"详情\",this.reportData.request=a.b;var s=n()({},this.postParams);s.type=e.label,this.reportData.params=s,this.reportListShow=!0}},initAxis:function(){var t=c.b(document.getElementById(\"axismain\")),e={color:[\"#6ca2ff\",\"#6ac9d7\",\"#ff7474\"],toolbox:this.toolbox,tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},legend:{data:[\"赢单转化率\",\"商机总数\",\"赢单商机数\"],bottom:\"0px\",itemWidth:14},grid:{top:\"40px\",left:\"40px\",right:\"40px\",bottom:\"40px\",containLabel:!0,borderColor:\"#fff\"},xAxis:[{type:\"category\",data:[],axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:\"#333\"},axisLine:{lineStyle:{color:\"#333\"}},splitLine:{show:!1}}],yAxis:[{type:\"value\",name:\"赢单转化率\",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:\"#333\",formatter:\"{value}%\"},axisLine:{lineStyle:{color:\"#333\"}},splitLine:{show:!1}},{type:\"value\",name:\"商机数\",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:\"#333\",formatter:\"{value}个\"},axisLine:{lineStyle:{color:\"#333\"}},splitLine:{show:!1}}],series:[{name:\"赢单转化率\",type:\"line\",yAxisIndex:0,data:[]},{name:\"商机总数\",type:\"bar\",yAxisIndex:1,barWidth:15,data:[]},{name:\"赢单商机数\",type:\"bar\",yAxisIndex:1,barWidth:15,data:[]}]};t.setOption(e,!0),t.on(\"click\",function(t){}),this.axisOption=e,this.chartObj=t}}},u=(i(\"M2MT\"),i(\"KHd+\")),d=Object(u.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"main-container\"},[i(\"filtrate-handle-view\",{staticClass:\"filtrate-bar\",attrs:{title:\"商机转换率分析\",\"module-type\":\"business\"},on:{load:function(e){t.loading=!0},change:t.searchClick}}),t._v(\" \"),i(\"div\",{staticClass:\"content\"},[t._m(0),t._v(\" \"),i(\"div\",{staticClass:\"table-content\"},[i(\"el-table\",{attrs:{data:t.list,\"cell-class-name\":t.cellClassName,height:\"150\",stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"row-click\":t.handleRowClick}},t._l(t.fieldList,function(t,e){return i(\"el-table-column\",{key:e,attrs:{prop:t.field,label:t.name,align:\"center\",\"header-align\":\"center\",\"show-overflow-tooltip\":\"\"}})}))],1)]),t._v(\" \"),i(\"report-list\",{attrs:{show:t.reportListShow,title:t.reportData.title,placeholder:t.reportData.placeholder,request:t.reportData.request,params:t.reportData.params,\"field-list\":t.fieldReportList},on:{\"update:show\":function(e){t.reportListShow=e}}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"axis-content\"},[e(\"div\",{attrs:{id:\"axismain\"}})])}],!1,null,\"7739a1dc\",null);d.options.__file=\"BusinessWinStatistics.vue\";e.default=d.exports},aKrz:function(t,e,i){t.exports=i.p+\"static/img/expense-examines.29e9174.png\"},bok9:function(t,e,i){t.exports=i.p+\"static/img/receivables.29e9174.png\"},cBfe:function(t,e,i){},cLla:function(t,e,i){t.exports=i.p+\"static/img/customer_not.7d40ec4.png\"},dAOq:function(t,e,i){\"use strict\";e.a={methods:{getStatusColor:function(t){return 0==t?\"#ffc539\":1==t?\"#20b559\":2==t?\"#f95a5a\":3==t?\"#398dff\":4==t?\"#999\":5==t?\"#d9d9d9\":6==t?\"#2362FB\":8==t?\"#bfbfbf\":void 0},getStatusName:function(t){return 0==t?\"待审核\":1==t?\"通过\":2==t?\"拒绝\":3==t?\"审核中\":4==t?\"撤回\":5==t?\"未提交\":6==t?\"创建\":8==t?\"已作废\":\"\"},getStatusIcon:function(t){return 0==t?\"wk wk-time\":1==t?\"wk wk-success\":2==t?\"wk wk-close\":3==t?\"wk wk-time\":4==t?\"wk wk-reset\":5==t?\"wk wk-time\":6==t?\"wk wk-l-plus\":8==t?\"wk wk-invalid\":\"\"},getXhStatusList:function(){return[{label:\"待审核\",value:0},{label:\"通过\",value:1},{label:\"拒绝\",value:2},{label:\"审核中\",value:3},{label:\"撤回\",value:4}]},getStatusImageIcon:function(t){return 0==t||3==t||5==t?i(\"6pZM\"):1==t?i(\"y4JV\"):2==t?i(\"migV\"):4==t?i(\"+xXq\"):6==t?i(\"wu/m\"):\"\"}}}},dTTw:function(t,e,i){t.exports=i.p+\"static/img/business.66d7980.png\"},eOwn:function(t,e,i){\"use strict\";i.r(e);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"7Dod\"),o=i(\"6iAj\"),l=i(\"4XAY\"),c=i(\"giPm\"),r=i(\"O8VQ\"),u=i(\"/G0b\"),d=i(\"8OTK\"),h=i(\"C3Po\"),p=i(\"ZoMv\"),f=i(\"7Qib\"),m=i(\"Z+Ht\"),v=i(\"vvxI\"),g=i(\"ZX9L\"),y=i(\"ehos\"),b=i(\"L2JU\"),w={name:\"Activity\",components:{LogAdd:c.default,LogCell:r.default,CRMAllCreate:d.default,TaskQuickAdd:h.default,TimeTypeSelect:g.a,LogEditDialog:u.default,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-63bb\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-24c6\")]).then(i.bind(null,\"3z7q\"))}},mixins:[m.a,v.default],props:{handle:{type:Array,default:function(){return[]}},id:[String,Number],contactsId:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},typeList:{type:Array,default:function(){return[]}},detail:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,filterValue:{},timeOptions:[{label:\"全部\",value:\"\"},{label:\"最近7天\",value:\"7\"},{label:\"最近30天\",value:\"30\"},{label:\"最近60天\",value:\"60\"}],contacts:[],followTypes:[],handleType:\"\",activityType:{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},list:[],noMore:!1,page:1,isCRMCreate:!1,createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},createCRMType:\"\",isTaskCreate:!1,showFullDetail:!1,relationID:\"\",relationCrmType:\"\",scrollKey:Date.now(),logEditData:null,logEditPosition:{seciton:0,index:0},logEditDialogVisible:!1}},computed:n()({},Object(b.b)([\"crm\"]),{canCreateFollowRecord:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.save},showRelate:function(){return\"customer\"==this.crmType},scrollDisabled:function(){return this.loading||this.noMore},taskParams:function(){var t={};return t[this.crmType+\"Ids\"]=this.id,t}}),watch:{id:function(){this.initInfo(),this.refreshLogList()}},created:function(){this.debouncedRefreshLogList=Object(y.debounce)(300,this.refreshLogList),this.initInfo()},methods:{getLogTypeList:function(){var t=this;Object(o.s)().then(function(e){t.followTypes=e.data.map(function(t){return{value:t,label:t}})}).catch(function(){})},getContactsList:function(){var t=this;Object(a.H)({customerId:this.id}).then(function(e){t.contacts=e.data.list}).catch(function(){})},sendLog:function(t){var e=this;if(t.content){var i={};i.activityType=p.default[this.crmType],i.activityTypeId=t.id,i.content=t.content,i.category=t.followType;var s=t.business.map(function(t){return t.businessId});i.batchId=t.batchId,i.businessIds=s.join(\",\"),i.contactsIds=t.contactsId,i.nextTime=t.nextTime||\"\",i.isEvent=0,this.sendLoading=!0,Object(l.a)(i).then(function(t){e.sendLoading=!1,e.$message.success(\"发布成功\"),e.$refs.logAdd&&e.$refs.logAdd.resetInfo(),e.refreshLogList()}).catch(function(){e.sendLoading=!1})}else this.$message.error(\"请输入跟进内容\")},handleClick:function(t){var e=this;if(this.handleType==t?this.handleType=\"\":this.handleType=t,\"log\"==t)this.isTaskCreate=!1,this.$nextTick(function(){e.$refs.logAdd&&(e.$refs.logAdd.isUnfold=e.handleType==t)});else if(\"task\"==t)this.isTaskCreate=!0,this.$nextTick(function(){e.$refs.taskAdd.inputFocus()});else{this.isTaskCreate=!1;var i={type:\"relative\",crmType:this.crmType,data:{}};\"contacts\"==this.crmType?(i.data.customer=Object(f.t)(this.detail),\"business\"==t&&(i.relativeData={contactsId:this.detail.contactsId})):\"customer\"==this.crmType?i.data.customer=Object(f.t)(this.detail):\"business\"==this.crmType?(i.data.customer=Object(f.t)(this.detail),i.data.business=Object(f.t)(this.detail),\"contacts\"==t&&(i.relativeData={businessId:this.detail.businessId})):\"contract\"==this.crmType&&(i.data.customer=Object(f.t)(this.detail),i.data.contract=Object(f.t)(this.detail)),this.createActionInfo=i,this.createCRMType=t,this.isCRMCreate=!0}},initInfo:function(){var t=this;this.$nextTick(function(){t.$refs.logAdd&&t.$refs.logAdd.resetInfo(),t.$refs.taskAdd&&t.$refs.taskAdd.resetSendData()}),this.filterValue={search:\"\",timeLine:{label:\"全部\",value:\"\"}},this.getLogTypeList(),this.showRelate&&this.getContactsList()},refreshLogList:function(){this.page=1,this.noMore=!1,this.list=[],this.scrollKey=Date.now()},handleSelectClick:function(t){this.activityType=t,this.refreshLogList()},timeTypeChange:function(t){this.filterValue.timeLine=t,this.refreshLogList()},getLogList:function(){var t=this;this.loading=!0;var e={page:this.page,crmType:p.default[this.crmType],activityType:this.activityType.command,activityTypeId:this.id};this.filterValue.search&&(e.search=this.filterValue.search),this.filterValue.timeLine.type&&(\"custom\"===this.filterValue.timeLine.type?(e.startDate=this.filterValue.timeLine.startTime.replace(/\\./g,\"-\"),e.endDate=this.filterValue.timeLine.endTime.replace(/\\./g,\"-\")):e.intervalDay=this.filterValue.timeLine.value||\"\"),Object(l.c)(e).then(function(e){if(t.loading=!1,!t.noMore)if(t.page++,t.list.length){var i=t.list[t.list.length-1];e.data.time&&e.data.list.length&&i.time!=e.data.time&&t.list.push(e.data)}else e.data.time&&e.data.list.length&&t.list.push(e.data);t.noMore=e.data.lastPage}).catch(function(){t.noMore=!0,t.loading=!1})},createCRMSuccess:function(){this.handleType=\"\",this.refreshLogList()},createCRMClose:function(){this.isCRMCreate=!1,this.handleType=\"\"},checkCRMDetail:function(t,e){this.relationID=e,this.relationCrmType=t,this.showFullDetail=!0},getActivityIcon:function(t){return this.getXrIcon(this.getActivityType(t))},getActivityTypeColor:function(t){return this.getXrIconColor(this.getActivityType(t))},logCellDelete:function(t,e,i){this.list[i].list.splice(e,1),0==this.list[i].list.length&&this.list.splice(i,1),this.scrollKey=Date.now()},logCellEdit:function(t,e,i){this.logEditData=t,this.logEditPosition={seciton:i,index:e},this.logEditDialogVisible=!0},logEditSave:function(t){this.logEditPosition.seciton>=0&&this.logEditPosition.index>=0&&this.list[this.logEditPosition.seciton].list.splice(this.logEditPosition.index,1,t)}}},_=(i(\"QSP8\"),i(\"KHd+\")),C=Object(_.a)(w,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.getLogList,expression:\"getLogList\"}],key:t.scrollKey,staticClass:\"main\",attrs:{\"infinite-scroll-distance\":\"100\",\"infinite-scroll-disabled\":\"scrollDisabled\"}},[i(\"div\",[!t.isSeas&&t.handle&&t.handle.length?i(\"div\",{staticClass:\"main-handle\"},t._l(t.handle,function(e,s){return i(\"el-button\",{key:s,class:{\"is-select\":t.handleType===e.type},attrs:{type:\"primary\",icon:\"wk wk-add\"},on:{click:function(i){t.handleClick(e.type)}}},[t._v(\"\\n        \"+t._s(e.label)+\"\\n      \")])})):t._e(),t._v(\" \"),!t.isSeas&&t.handle&&t.handle.length?[!t.isTaskCreate&&t.canCreateFollowRecord?i(\"log-add\",{ref:\"logAdd\",staticClass:\"log-add\",attrs:{id:t.id,\"show-business\":t.showRelate,\"show-contacts\":t.showRelate,contacts:t.contacts,\"contacts-id\":t.contactsId,\"follow-types\":t.followTypes,\"crm-type\":t.crmType},on:{send:t.sendLog,focus:function(e){t.handleType=\"log\"},close:function(e){t.handleClick(t.handleType)}}}):i(\"task-quick-add\",{ref:\"taskAdd\",staticClass:\"task-quick-add\",attrs:{params:t.taskParams},on:{focus:function(e){t.handleType=\"task\"},send:t.refreshLogList}})]:t._e(),t._v(\" \"),i(\"div\",{staticClass:\"log\",class:{\"is-top\":t.handle&&0==t.handle.length}},[i(\"flexbox\",{staticClass:\"log__header\",attrs:{justify:\"flex-end\"}},[i(\"el-input\",{attrs:{placeholder:\"关键字搜索\",\"prefix-icon\":\"el-icon-search\"},on:{input:t.debouncedRefreshLogList},model:{value:t.filterValue.search,callback:function(e){t.$set(t.filterValue,\"search\",e)},expression:\"filterValue.search\"}}),t._v(\" \"),i(\"time-type-select\",{attrs:{width:190,options:t.timeOptions,\"default-type\":t.filterValue.timeLine},on:{change:t.timeTypeChange}}),t._v(\" \"),t.typeList.length>1?i(\"el-dropdown\",{attrs:{trigger:\"click\"},on:{command:t.handleSelectClick}},[i(\"span\",{staticClass:\"el-dropdown-link\"},[i(\"i\",{class:[\"wk\",\"dropdown-icon\",\"wk-\"+t.activityType.icon],style:{backgroundColor:t.activityType.color}}),t._v(t._s(t.activityType.label)),i(\"i\",{staticClass:\"el-icon-arrow-down el-icon--right\"})]),t._v(\" \"),i(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},t._l(t.typeList,function(e,s){return i(\"el-dropdown-item\",{key:s,attrs:{command:e}},[i(\"i\",{class:[\"wk\",\"dropdown-icon\",\"wk-\"+e.icon],style:{backgroundColor:e.color}}),t._v(t._s(e.label))])}))],1):t._e()],1),t._v(\" \"),t._l(t.list,function(e,s){return i(\"div\",{key:s,staticClass:\"log-section\"},[i(\"div\",{staticClass:\"log-section__title\"},[i(\"span\",{staticClass:\"section-title\"},[i(\"span\",{staticClass:\"section-title__time\"},[t._v(t._s(e.time))])])]),t._v(\" \"),t._l(e.list,function(n,a){return[1==n.type?i(\"div\",{key:a,staticClass:\"log-cell\",class:{\"only-one\":1==e.list.length}},[i(\"log-cell\",{attrs:{item:n,section:s,index:a,\"can-delete\":!t.isSeas},on:{\"crm-detail\":t.checkCRMDetail,delete:t.logCellDelete,edit:t.logCellEdit}}),t._v(\" \"),i(\"i\",{staticClass:\"wk wk-message log-cell__mark\"})],1):i(\"div\",{key:a,staticClass:\"log-cell activity-cell\",class:{\"only-one\":1==e.list.length}},[2==n.type?i(\"div\",{staticClass:\"activity-cell\"},[i(\"span\",{staticClass:\"activity-cell__label\"},[t._v(t._s(n.createTime)+\" \"+t._s(n.realname)+\"创建了\"+t._s(t.getActivityTypeName(n.activityType))+\"：\")]),i(\"span\",{staticClass:\"activity-cell__content\",on:{click:function(e){t.checkCRMDetail(t.getActivityType(n.activityType),n.activityTypeId)}}},[t._v(t._s(n.activityTypeName||\"查看详情\"))])]):3==n.type?i(\"div\",{staticClass:\"activity-cell\"},[i(\"span\",{staticClass:\"activity-cell__label\"},[t._v(t._s(n.createTime)+\" \"+t._s(n.realname)+\"将商机：\")]),t._v(\" \"),i(\"span\",{staticClass:\"activity-cell__content\",on:{click:function(e){t.checkCRMDetail(\"business\",n.activityTypeId)}}},[t._v(t._s(n.activityTypeName))]),t._v(\" \"),i(\"span\",[t._v(t._s(\" 阶段变为 \"+n.content))])]):4==n.type?i(\"log-cell\",{attrs:{item:n,section:s,index:a,\"can-delete\":\"\"},on:{\"crm-detail\":t.checkCRMDetail,delete:t.logCellDelete}}):t._e(),t._v(\" \"),i(\"i\",{staticClass:\"log-cell__mark\",class:t.getActivityIcon(n.activityType),staticStyle:{\"background-color\":\"#FB9323\"},style:{backgroundColor:t.getActivityTypeColor(n.activityType)}})],1)]})],2)}),t._v(\" \"),t.loading?i(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"加载中...\")]):t._e(),t._v(\" \"),t.noMore?i(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"没有更多了\")]):t._e()],2)],2),t._v(\" \"),t.isCRMCreate?i(\"c-r-m-all-create\",{attrs:{\"crm-type\":t.createCRMType,action:t.createActionInfo},on:{\"save-success\":t.createCRMSuccess,close:t.createCRMClose}}):t._e(),t._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:t.showFullDetail,\"crm-type\":t.relationCrmType,id:t.relationID},on:{\"update:visible\":function(e){t.showFullDetail=e}}}),t._v(\" \"),i(\"log-edit-dialog\",{attrs:{visible:t.logEditDialogVisible,data:t.logEditData},on:{\"update:visible\":function(e){t.logEditDialogVisible=e},save:t.logEditSave}})],1)},[],!1,null,\"7955f64b\",null);C.options.__file=\"index.vue\";e.default=C.exports},ep8U:function(t,e,i){},\"fRE+\":function(t,e,i){},fpBj:function(t,e,i){},gIBH:function(t,e,i){},gesf:function(t,e,i){},giPm:function(t,e,i){\"use strict\";i.r(e);var s=i(\"KTTK\"),n=i(\"mkuN\"),a=i(\"zMq1\"),o=i(\"ye9D\"),l=i(\"NYF1\"),c=i(\"YIeP\"),r=i(\"7Qib\");var u={methods:{dispatch:function(t,e,i){for(var s=this.$parent||this.$root,n=s.$options.componentName;s&&(!n||n!==t);)(s=s.$parent)&&(n=s.$options.componentName);s&&s.$emit.apply(s,[e].concat(i))},broadcast:function(t,e,i){(function t(e,i,s){this.$children.forEach(function(n){n.$options.componentName===e?n.$emit.apply(n,[i].concat(s)):t.apply(n,[e,i].concat([s]))})}).call(this,t,e,i)}}},d={name:\"LogAdd\",components:{CrmRelative:n.a,AddImageList:a.a,AddFileList:o.a,AddRelateList:l.a,CommonWords:c.a},mixins:[u],props:{showBusiness:{type:Boolean,default:!1},showContacts:{type:Boolean,default:!1},contacts:Array,contactsId:[String,Number],followTypes:Array,id:[String,Number],crmType:{type:String,default:\"\"}},data:function(){return{isUnfold:!1,content:\"\",imgFiles:[],businessAction:{},files:[],showBusinessPopover:!1,business:[],selectContactsId:\"\",followType:\"\",nextTime:\"\",showRelativeType:\"\",batchId:Object(r.r)()}},computed:{autosize:function(){return this.isUnfold?{minRows:3,maxRows:6}:{minRows:1,maxRows:1}}},watch:{followTypes:function(){this.getDefalutFollowType()},content:function(t){var e=!!(t&&t.length>0);this.dispatch(\"SlideView\",\"setEditClose\",[e])},contactsId:function(){this.selectContactsId=this.contactsId||\"\"},id:{handler:function(){this.businessAction={type:\"condition\",data:{moduleType:this.crmType,customerId:this.id}}},immediate:!0}},created:function(){this.selectContactsId=this.contactsId||\"\",this.getDefalutFollowType()},beforeDestroy:function(){},methods:{getDefalutFollowType:function(){this.followTypes&&this.followTypes.length>0?this.followType=this.followTypes[0].value:this.followType=\"\"},resetInfo:function(){this.nextTime=\"\",this.isUnfold=!1,this.content=\"\",this.dispatch(\"SlideView\",\"setEditClose\",[!1]),this.imgFiles=[],this.files=[],this.business=[],this.selectContactsId=this.contactsId||\"\",this.showRelativeType=\"\",this.batchId=Object(r.r)(),this.getDefalutFollowType()},commonWordsSelect:function(t){var e=this;this.content?this.$confirm(\"您选中的常用语将覆盖当前填写内容?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\",customClass:\"is-particulars\"}).then(function(){e.content=t}).catch(function(){}):this.content=t},checkRelativeInfos:function(t){\"business\"==this.showRelativeType&&(this.business=t.data)},barClick:function(t){this.showRelativeType=t,\"business\"==t?this.showBusinessPopover=!0:\"file\"==t?this.$refs.fileInput.click():\"img\"==t&&this.$refs.imgInput.click()},uploadFile:function(t){var e=t.target.files;if(e.length){for(var i=0;i<e.length;i++){if(-1==e[i].type.indexOf(\"image\")&&\"img\"==this.showRelativeType)return void this.$message.error(\"请上传正确的文件类型\")}for(var s=\"image/*\"==t.target.accept?\"img\":\"file\",n=0;n<e.length;n++){var a=e[n];this.uploadFileRequest(a,s)}t.target.value=\"\"}},uploadFileRequest:function(t,e,i){var s=this;this.$wkUploadFile.upload({file:t,params:{type:e,batchId:this.batchId}}).then(function(n){var a=n.res.data||{};a.size=Object(r.h)(t.size),\"img\"==e?s.imgFiles.push(a):(a.icon=Object(r.o)(t),s.files.push(a)),i&&i()}).catch(function(){})},deleteImage:function(t,e){this.deleteImgOrFile(\"image\",t,e)},deleteFile:function(t,e){this.deleteImgOrFile(\"file\",t,e)},deleteImgOrFile:function(t,e,i){var n=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.g)({id:e.fileId}).then(function(e){\"image\"==t?n.imgFiles.splice(i,1):n.files.splice(i,1),n.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteAllFile:function(t){var e=this;this.batchId&&this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.i)({batchId:e.batchId,type:t}).then(function(i){2==t?e.imgFiles=[]:e.files=[],e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteRelate:function(t,e){this.business.splice(e,1)},inputFocus:function(){var t=this;this.isUnfold=!0,this.$nextTick(function(){t.$refs.textarea.focus(),t.$emit(\"focus\")})},sendClick:function(){this.$emit(\"send\",{id:this.id,content:this.content,files:this.files,images:this.imgFiles,business:this.business,contactsId:this.selectContactsId,batchId:this.batchId,followType:this.followType,nextTime:this.nextTime})},close:function(){this.isUnfold=!1,this.$emit(\"close\")}}},h=(i(\"Nbko\"),i(\"KHd+\")),p=Object(h.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{class:[\"mix-content\",{unfold:!t.isUnfold}]},[t.isUnfold?i(\"i\",{staticClass:\"wk wk-close\",on:{click:t.close}}):t._e(),t._v(\" \"),t.isUnfold?i(\"div\",{staticClass:\"mix-content-select\"},[t.showContacts?i(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择联系人\"},model:{value:t.selectContactsId,callback:function(e){t.selectContactsId=e},expression:\"selectContactsId\"}},t._l(t.contacts,function(t){return i(\"el-option\",{key:t.contactsId,attrs:{label:t.name,value:t.contactsId}})})):t._e(),t._v(\" \"),i(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择跟进方式\"},model:{value:t.followType,callback:function(e){t.followType=e},expression:\"followType\"}},t._l(t.followTypes,function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(\" \"),i(\"el-date-picker\",{attrs:{editable:!1,type:\"datetime\",placeholder:\"选择下次联系时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:t.nextTime,callback:function(e){t.nextTime=e},expression:\"nextTime\"}}),t._v(\" \"),i(\"common-words\",{on:{select:t.commonWordsSelect}})],1):t._e(),t._v(\" \"),i(\"div\",{class:[\"i-cont\",{unfold:!t.isUnfold}]},[t.isUnfold?t._e():i(\"i\",{staticClass:\"wk wk-write\"}),t._v(\" \"),i(\"el-input\",{ref:\"textarea\",attrs:{autosize:t.autosize,maxlength:800,type:\"textarea\",clearable:\"\",resize:\"none\",placeholder:\"请输入内容\"},on:{focus:t.inputFocus},model:{value:t.content,callback:function(e){t.content=e},expression:\"content\"}})],1),t._v(\" \"),t.imgFiles.length>0&&t.isUnfold?i(\"add-image-list\",{attrs:{data:t.imgFiles},on:{delete:t.deleteImage,\"delete-all\":function(e){t.deleteAllFile(2)},upload:t.uploadFile}}):t._e(),t._v(\" \"),t.files.length>0&&t.isUnfold?i(\"add-file-list\",{attrs:{data:t.files},on:{delete:t.deleteFile,\"delete-all\":function(e){t.deleteAllFile(1)}}}):t._e(),t._v(\" \"),t.business.length>0&&t.isUnfold?i(\"add-relate-list\",{attrs:{data:t.business,type:\"business\"},on:{delete:t.deleteRelate}}):t._e(),t._v(\" \"),t.isUnfold?i(\"div\",{staticClass:\"bar-cont\"},[i(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-picture\"},on:{click:function(e){t.barClick(\"img\")}}},[t._v(\"图片\")]),t._v(\" \"),i(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-file\"},on:{click:function(e){t.barClick(\"file\")}}},[t._v(\"附件\")]),t._v(\" \"),t.showBusiness?i(\"el-popover\",{attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showBusinessPopover,callback:function(e){t.showBusinessPopover=e},expression:\"showBusinessPopover\"}},[i(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:t.showBusinessPopover,radio:!1,action:t.businessAction,\"selected-data\":{business:t.business},\"crm-type\":\"business\"},on:{close:function(e){t.showBusinessPopover=!1},changeCheckout:t.checkRelativeInfos}}),t._v(\" \"),i(\"el-button\",{staticClass:\"handle-button\",staticStyle:{\"margin-left\":\"10px\"},attrs:{slot:\"reference\",type:\"text\",icon:\"wk wk-associate\"},on:{click:function(e){t.barClick(\"business\")}},slot:\"reference\"},[t._v(\"关联商机\")])],1):t._e(),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.sendClick,expression:\"sendClick\"}],staticClass:\"send-btn\",attrs:{type:\"primary\"}},[t._v(\"发布\")])],1):t._e(),t._v(\" \"),i(\"input\",{ref:\"fileInput\",staticClass:\"file-input\",attrs:{accept:\"*.*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}}),t._v(\" \"),i(\"input\",{ref:\"imgInput\",staticClass:\"file-input\",attrs:{accept:\"image/*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}})],1)},[],!1,null,\"670c00a3\",null);p.options.__file=\"LogAdd.vue\";e.default=p.exports},\"goM+\":function(t,e,i){t.exports=i.p+\"static/img/seas_not.68f3f48.png\"},hr1e:function(t,e,i){\"use strict\";var s=i(\"4lzj\");i.n(s).a},hwzM:function(t,e,i){\"use strict\";i.r(e);var s=i(\"7Qib\"),n=i(\"KTTK\"),a={name:\"FileCell\",filters:{getFileSize:function(t){return Object(s.h)(t)}},props:{cellIndex:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1},module_id:[String,Number]},data:function(){return{}},computed:{fileIcon:function(){var t=this.data.name?this.data.name.split(\".\"):[],e=\"\";return e=t.length>0?t[t.length-1]:\"\",Object(s.n)(e)},previewShow:function(){return this.list}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){Object(s.d)({path:this.data.filePath||this.data.url,name:this.data.name})},previewClick:function(){Object(s.a)(this.data.name)?Object(s.G)(this.data.filePath||this.data.url,this.data.name):this.$bus.emit(\"preview-image-bus\",{index:this.cellIndex||0,data:this.list.map(function(t){return{url:t.filePath||t.url,name:t.name}})})},deleteClick:function(){var t=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(n.g)({id:t.data.fileId}).then(function(e){t.$message.success(\"操作成功\"),t.$emit(\"delete\",t.cellIndex,t.data)}).catch(function(){})}).catch(function(){t.$message({type:\"info\",message:\"已取消删除\"})})}}},o=(i(\"Bd1s\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"flexbox\",{staticClass:\"cell\"},[s(\"img\",{staticClass:\"cell-head\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:t.fileIcon,alt:\"\"}}),t._v(\" \"),s(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":t.cursorPointer}},[s(\"span\",[t._v(t._s(t.data.name.length>20?t.data.name.substring(0,20)+\"...\":t.data.name))])]),t._v(\" \"),s(\"div\",{staticClass:\"size\"},[t._v(\"\\n    (\"+t._s(t._f(\"getFileSize\")(t.data.size))+\")\\n  \")]),t._v(\" \"),s(\"div\",{staticClass:\"cell-foot\"},[t.previewShow?s(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:t.previewClick}},[t._v(\"预览\")]):t._e(),t._v(\" \"),s(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:t.downloadClick}},[t._v(\"下载\")]),t._v(\" \"),t.showDelete?s(\"span\",{staticClass:\"xr-text-btn delete\",on:{click:t.deleteClick}},[t._v(\"删除\")]):t._e()])])},[],!1,null,\"4a3d86b8\",null);l.options.__file=\"index.vue\";e.default=l.exports},jUvl:function(t,e,i){\"use strict\";var s=i(\"gesf\");i.n(s).a},keIY:function(t,e,i){t.exports=i.p+\"static/img/leads.2c5bddd.png\"},lebS:function(t,e,i){},\"lrb+\":function(t,e,i){},migV:function(t,e,i){t.exports=i.p+\"static/img/check_fail.f446ba8.png\"},nD2f:function(t,e,i){\"use strict\";var s=i(\"tjFw\");i.n(s).a},nslc:function(t,e,i){\"use strict\";i.r(e);var s=i(\"7Dod\"),n={name:\"DealStatusHandle\",components:{},mixins:[],props:{value:Number,visible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,status:1,options:[{label:\"已成交\",value:1},{label:\"未成交\",value:0}]}},computed:{},watch:{value:{handler:function(t){void 0!==t&&(this.status=0==t?1:0)},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.status=1,this.$emit(\"update:visible\",!1)},handleConfirm:function(){var t=this,e=this.selectionList.map(function(e){return e[t.crmType+\"Id\"]}).join(\",\"),i={dealStatus:this.status};i.ids=e,this.loading=!0,Object(s.b)(i).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.$emit(\"handle\",{type:\"deal_status\"}),t.handleCancel()}).catch(function(){t.loading=!1})}}},a=(i(\"E/pc\"),i(\"KHd+\")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"客户成交状态\",width:\"400px\"},on:{close:t.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[t._v(\"成交状态：\")]),t._v(\" \"),i(\"el-select\",{staticClass:\"handle-item-content\",model:{value:t.status,callback:function(e){t.status=e},expression:\"status\"}},t._l(t.options,function(t){return i(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"5fb62a3b\",null);o.options.__file=\"DealStatusHandle.vue\";e.default=o.exports},\"p3/6\":function(t,e,i){\"use strict\";i.r(e);var s=i(\"8GhS\"),n=i(\"7Dod\"),a=i(\"d9x6\"),o=i(\"ERJp\"),l={name:\"TeamsHandle\",components:{XhUserCell:s.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},title:{type:String,default:\"\"},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],handleType:1,addsTypes:[]}},computed:{},watch:{dialogVisible:{handler:function(t){this.visible=t,t||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;if(0===this.usersList.length)this.$message.error(\"请选择团队成员\");else{var e={ids:this.selectionList.map(function(e){return e[t.crmType+\"Id\"]}),memberIds:this.usersList.map(function(t){return t.userId})};\"customer\"===this.crmType&&\"添加团队成员\"==this.title&&(e.changeType=this.addsTypes.map(function(t){return parseInt(t)}));var i=void 0;\"添加团队成员\"==this.title?(e.power=this.handleType,i={customer:n.U,contract:a.q,business:o.s}[this.crmType]):i={customer:n.T,contract:a.p,business:o.r}[this.crmType],this.loading=!0,i(e).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.handleCancel(),t.$emit(\"handle\",{type:\"添加团队成员\"==t.title?\"add_user\":\"delete_user\"})}).catch(function(){t.loading=!1})}}}},c=(i(\"xmeh\"),i(\"KHd+\")),r=Object(c.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{title:t.title,visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,width:\"400px\"},on:{\"update:visible\":function(e){t.visible=e},close:t.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[t._v(\"选择团队成员：\")]),t._v(\" \"),i(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{radio:!1,value:t.usersList,placeholder:\"点击选择（多选）\"},on:{\"value-change\":t.userChage}}),t._v(\" \"),\"添加团队成员\"!=t.title?i(\"div\",{staticClass:\"tips\"},[t._v(\"此操作不可移除数据负责人\")]):t._e()],1),t._v(\" \"),\"添加团队成员\"==t.title?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"权限：\")]),t._v(\" \"),i(\"el-radio-group\",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:\"handleType\"}},[i(\"el-radio\",{attrs:{label:1}},[t._v(\"只读\")]),t._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[t._v(\"读写\")])],1)],1):t._e(),t._v(\" \"),\"添加团队成员\"==t.title&&\"customer\"===t.crmType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"同时添加至：\")]),t._v(\" \"),i(\"el-checkbox-group\",{model:{value:t.addsTypes,callback:function(e){t.addsTypes=e},expression:\"addsTypes\"}},[i(\"el-checkbox\",{attrs:{label:\"2\"}},[t._v(\"商机\")]),t._v(\" \"),i(\"el-checkbox\",{attrs:{label:\"3\"}},[t._v(\"合同\")])],1)],1):t._e()],1),t._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"3390e593\",null);r.options.__file=\"TeamsHandle.vue\";e.default=r.exports},p3hS:function(t,e,i){var s={\"./board.png\":\"5XBl\",\"./business.png\":\"dTTw\",\"./contacts.png\":\"JAjk\",\"./contract.png\":\"U4MQ\",\"./customer.png\":\"wfwE\",\"./customer_not.png\":\"cLla\",\"./expense-examines.png\":\"aKrz\",\"./expense.png\":\"ugew\",\"./invoice.png\":\"R1k5\",\"./leads.png\":\"keIY\",\"./leads_not.png\":\"K4QM\",\"./marketing.png\":\"ShYU\",\"./nearby.png\":\"t4Dm\",\"./nearby_not.png\":\"L+lS\",\"./product.png\":\"wbJn\",\"./receivables.png\":\"bok9\",\"./seas.png\":\"riSQ\",\"./seas_not.png\":\"goM+\",\"./todo.png\":\"0Dkb\",\"./visit.png\":\"9cPJ\"};function n(t){var e=a(t);return i(e)}function a(t){var e=s[t];if(!(e+1)){var i=new Error(\"Cannot find module '\"+t+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}return e}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=\"p3hS\"},q0fG:function(t,e,i){\"use strict\";var s=i(\"ep8U\");i.n(s).a},qDfk:function(t,e,i){\"use strict\";i.r(e);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"O8VQ\"),o=i(\"Ew9n\"),l=i(\"ZoMv\"),c={name:\"RecordList\",components:{LogCell:a.default,SlideView:o.a,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-620e\"),i.e(\"chunk-36d0\")]).then(i.bind(null,\"3z7q\"))}},filters:{crmIconClass:function(t){return\"wk wk-\"+l.default.convertTypeToKey(t)},crmName:function(t){return l.default.convertTypeToName(t)}},props:{crmType:String,request:Function,params:Object,listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,page:1,noMore:!1,list:[],scrollKey:Date.now(),showFullDetail:!1,relationID:\"\",relationCrmType:\"\"}},computed:{crmIcon:function(){var t=this.crmType.replace(\"crm_\",\"\");return i(\"p3hS\")(\"./\"+t+\".png\")},scrollDisabled:function(){return this.loading||this.noMore}},watch:{params:function(){this.refreshList()}},mounted:function(){},methods:{refreshList:function(){this.page=1,this.list=[],this.noMore=!1,this.scrollKey=Date.now()},getList:function(){var t=this;this.loading=!0,this.request(n()({page:this.page,limit:15},this.params)).then(function(e){t.page++,t.list=t.list.concat(e.data.list),t.noMore=e.data.lastPage,t.loading=!1}).catch(function(){t.noMore=!0,t.loading=!1})},checkRelationDetail:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.relationID=e,this.relationCrmType=i?l.default.convertTypeToKey(t):t,this.showFullDetail=!0},hideView:function(){this.$emit(\"hide\")}}},r=(i(\"ANtS\"),i(\"KHd+\")),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"slide-view\",{staticClass:\"d-view\",attrs:{\"listener-ids\":t.listenerIDs,\"no-listener-ids\":t.noListenerIDs,\"no-listener-class\":t.noListenerClass,\"body-style\":{padding:0,height:\"100%\"}},on:{close:t.hideView}},[s(\"flexbox\",{staticClass:\"t-section\"},[s(\"img\",{staticClass:\"t-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:t.crmIcon}}),t._v(\" \"),s(\"div\",{staticClass:\"t-name\"},[t._v(\"跟进记录\")])]),t._v(\" \"),s(\"div\",{staticClass:\"t-content\"},[s(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.getList,expression:\"getList\"}],key:t.scrollKey,attrs:{\"infinite-scroll-disabled\":\"scrollDisabled\",\"infinite-scroll-distance\":\"100\"}},t._l(t.list,function(e,i){return s(\"log-cell\",{key:i,attrs:{item:e,index:i,\"can-delete\":!1},on:{\"crm-detail\":t.checkRelationDetail}},[s(\"div\",{staticClass:\"relate-cell\",on:{click:function(i){t.checkRelationDetail(e.activityType,e.activityTypeId,!0)}}},[s(\"i\",{staticClass:\"relate-cell-icon\",class:t._f(\"crmIconClass\")(e.activityType)}),t._v(\" \"),s(\"span\",{staticClass:\"relate-cell-type\"},[t._v(t._s(t._f(\"crmName\")(e.activityType))+\"-\")]),t._v(\" \"),s(\"span\",{staticClass:\"relate-cell-name\"},[t._v(t._s(e.crmTypeName))])])])})),t._v(\" \"),t.loading?s(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"加载中...\")]):t._e(),t._v(\" \"),t.noMore?s(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"没有更多了\")]):t._e()]),t._v(\" \"),s(\"c-r-m-full-screen-detail\",{attrs:{visible:t.showFullDetail,\"crm-type\":t.relationCrmType,id:t.relationID},on:{\"update:visible\":function(e){t.showFullDetail=e}}})],1)},[],!1,null,\"ec661820\",null);u.options.__file=\"RecordList.vue\";e.default=u.exports},riSQ:function(t,e,i){t.exports=i.p+\"static/img/seas.83becad.png\"},s357:function(t,e,i){\"use strict\";var s=i(\"TDiV\");i.n(s).a},t4Dm:function(t,e,i){t.exports=i.p+\"static/img/nearby.2d86e3c.png\"},tjFw:function(t,e,i){},u2Af:function(t,e,i){},ugew:function(t,e,i){t.exports=i.p+\"static/img/expense.29e9174.png\"},vvxI:function(t,e,i){\"use strict\";i.r(e),e.default={filters:{},methods:{getActivityType:function(t){return{1:\"leads\",2:\"customer\",3:\"contacts\",4:\"product\",5:\"business\",6:\"contract\",7:\"receivables\",8:\"log\",9:\"examine\",11:\"task\"}[t]},getActivityTypeName:function(t){return{1:\"线索\",2:\"客户\",3:\"联系人\",4:\"产品\",5:\"商机\",6:\"合同\",7:\"回款\",8:\"日志\",9:\"审批\",10:\"日程\",11:\"任务\",12:\"发邮件\"}[t]},getRecordLogTypeName:function(t){return t?{1:\"跟进记录\",2:\"创建记录\",3:\"商机阶段变更\",4:\"外勤签到\"}[t]:\"跟进记录\"}}}},wbJn:function(t,e,i){t.exports=i.p+\"static/img/product.663b457.png\"},wfwE:function(t,e,i){t.exports=i.p+\"static/img/customer.6f13c37.png\"},\"wu/m\":function(t,e,i){t.exports=i.p+\"static/img/check_create.09736ed.png\"},xmeh:function(t,e,i){\"use strict\";var s=i(\"cBfe\");i.n(s).a},y4JV:function(t,e,i){t.exports=i.p+\"static/img/check_suc.e52db27.png\"},ye9D:function(t,e,i){\"use strict\";var s={name:\"AddFileList\",components:{},props:{data:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{deleteItem:function(t,e){this.$emit(\"delete\",t,e)},deleteAll:function(){this.$emit(\"delete-all\")}}},n=(i(\"9Y/r\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"section\",{staticClass:\"file-cont\"},[s(\"flexbox\",{staticClass:\"f-header\"},[s(\"i\",{staticClass:\"wk wk-file\"}),t._v(\" \"),s(\"div\",{staticClass:\"f-name\"},[t._v(\"附件\")])]),t._v(\" \"),s(\"div\",{staticClass:\"f-body\"},t._l(t.data,function(e,n){return s(\"flexbox\",{key:n,staticClass:\"f-item\"},[s(\"img\",{staticClass:\"f-img\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:e.icon}}),t._v(\" \"),s(\"div\",{staticClass:\"f-name\"},[t._v(t._s(e.name)),s(\"span\",{staticClass:\"f-size\"},[t._v(t._s(\"（\"+e.size+\"）\"))])]),t._v(\" \"),s(\"div\",{staticClass:\"close-button\",on:{click:function(i){t.deleteItem(e,n)}}},[t._v(\"×\")])])})),t._v(\" \"),s(\"el-button\",{attrs:{type:\"text\"},on:{click:t.deleteAll}},[t._v(\"全部删除\")])],1)},[],!1,null,\"72a25ee2\",null);a.options.__file=\"AddFileList.vue\";e.a=a.exports},yl8z:function(t,e,i){\"use strict\";var s=i(\"1CbL\");i.n(s).a},zMq1:function(t,e,i){\"use strict\";var s={name:\"AddImageList\",components:{},props:{data:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{mouseImgOver:function(t,e){t.showDelete=!0,this.$set(this.data,e,t)},mouseImgLeave:function(t,e){t.showDelete=!1,this.$set(this.data,e,t)},deleteItem:function(t,e){this.$emit(\"delete\",t,e)},deleteAll:function(){this.$emit(\"delete-all\")},uploadFile:function(t){this.$emit(\"upload\",t)}}},n=(i(\"Z/5k\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"section\",{staticClass:\"img-cont\"},[i(\"flexbox\",{attrs:{wrap:\"wrap\"}},[t._l(t.data,function(e,s){return i(\"div\",{directives:[{name:\"src\",rawName:\"v-src:background-image\",value:e.url||e.filePath,expression:\"item.url || item.filePath\",arg:\"background-image\"}],key:s,staticClass:\"img-item\",on:{mouseover:function(i){t.mouseImgOver(e,s)},mouseleave:function(i){t.mouseImgLeave(e,s)}}},[e.showDelete?i(\"div\",{staticClass:\"img-delete\",on:{click:function(i){t.deleteItem(e,s)}}},[t._v(\"×\")]):t._e()])}),t._v(\" \"),i(\"div\",{staticClass:\"img-item-add\"},[i(\"input\",{staticClass:\"img-item-iput\",attrs:{type:\"file\",accept:\"image/*\",multiple:\"\"},on:{change:t.uploadFile}})])],2),t._v(\" \"),i(\"el-button\",{attrs:{type:\"text\"},on:{click:t.deleteAll}},[t._v(\"全部删除\")])],1)},[],!1,null,\"605cd0e7\",null);a.options.__file=\"AddImageList.vue\";e.a=a.exports},zsVz:function(t,e,i){\"use strict\";i.d(e,\"g\",function(){return n}),i.d(e,\"e\",function(){return a}),i.d(e,\"a\",function(){return o}),i.d(e,\"b\",function(){return l}),i.d(e,\"d\",function(){return c}),i.d(e,\"c\",function(){return r}),i.d(e,\"f\",function(){return u}),i.d(e,\"h\",function(){return d});var s=i(\"t3Un\");function n(t){return Object(s.a)({url:\"oaTask/queryTaskList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function a(t){return Object(s.a)({url:\"workTask/saveWorkTask\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(s.a)({url:\"workTask/queryTaskInfo/\"+t.taskId,method:\"post\"})}function l(t){return Object(s.a)({url:\"workTask/queryTrashTaskInfo\",method:\"post\",data:t})}function c(t){return Object(s.a)({url:\"workTaskLog/queryTaskLog/\"+t.taskId,method:\"post\"})}function r(t){return Object(s.a)({url:\"workTaskRelation/saveWorkTaskRelation\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function u(t){return Object(s.a)({url:\"oaTask/deleteWorkTaskLabel\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function d(t){return Object(s.a)({url:\"oaTask/oaTaskExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}}}]);","extractedComments":[]}