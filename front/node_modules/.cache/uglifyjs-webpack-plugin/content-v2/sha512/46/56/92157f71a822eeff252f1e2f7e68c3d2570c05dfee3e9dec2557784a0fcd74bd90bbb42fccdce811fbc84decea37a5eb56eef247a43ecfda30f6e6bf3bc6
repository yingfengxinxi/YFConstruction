{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-5241\"],{\"6Hyi\":function(e,t,r){\"use strict\";r.r(t),t.default={props:{},data:function(){return{focusKey:null}},methods:{checkFromItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.focusKey=null,!e)return!1;if(this.clearError(),!this.rules.hasOwnProperty(e))return!0;for(var r=this.rules[e],s=0;s<r.length;s++){var n=r[s];if(n.hasOwnProperty(\"required\")&&n.required&&!t)return this.setError(e,n.msg),!1;if(n.hasOwnProperty(\"reg\")&&n.reg)if(n.required){if(!n.reg.test(t))return this.setError(e,n.msg),!1}else if(t&&!n.reg.test(t))return this.setError(e,n.msg),!1;if(n.validator&&!n.validator())return this.setError(e,n.msg),!1}return!0},setError:function(e,t){var r=this;setTimeout(function(){r.validateRes[e]=!1,r.errorInfo=t},200)}}}},\"89D7\":function(e,t,r){e.exports=r.p+\"static/img/error.cef8c5c.png\"},AI4B:function(e,t,r){e.exports=r.p+\"static/img/tit_img.12b3a0d.png\"},HFLO:function(e,t,r){},fevw:function(e,t,r){\"use strict\";r.r(t);var s=r(\"fe1z\"),n=r(\"XJYT\"),i=r(\"6Hyi\"),o=r(\"ehos\"),a={name:\"LoginByPwd\",mixins:[i.default],data:function(){return{redirect:void 0,rememberMe:!0,form:{username:\"\",password:\"\"},errorInfo:null,validateRes:{username:!0,password:!0},rules:{username:[{required:!0,msg:\"用户名不能为空\"}],password:[{required:!0,msg:\"密码不能为空\"},{reg:/^(?=.*[a-zA-Z])(?=.*\\d).{6,20}$/,msg:\"密码由6-20位字母、数字组成\"}]},tenantId:\"\"}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.username.focus()})},created:function(){this.getInit(),this.debouncedHandleLogin=Object(o.debounce)(300,this.handleLogin);var e=localStorage.getItem(\"account\");JSON.parse(e);e?this.form={username:e,password:\"\"}:this.$route.query.username&&(this.form={username:this.$route.query.username,password:this.$route.query.password||\"\"})},methods:{handleLogin:function(){var e=this;if(this.checkForm()){this.rememberMe?localStorage.setItem(\"account\",this.form.username):localStorage.removeItem(\"account\");var t=n.Loading.service({target:document.querySelector(\".login-main-content\")});this.$store.dispatch(\"Login\",this.form).then(function(t){e.$router.push({path:e.redirect||\"/\"})}).catch(function(){t.close()})}},checkForm:function(){this.clearError();for(var e=[\"username\",\"password\"],t=0;t<e.length;t++){if(!this.checkFromItem(e[t],this.form[e[t]]||null))return!1}return!0},getInit:function(){var e=this;Object(s.d)().then(function(t){0==t.data&&e.$router.push(\"/welcome\")}).catch(function(){})},clearError:function(){this.errorInfo=null,this.validateRes={username:!0,password:!0}}}},c=(r(\"hrmu\"),r(\"KHd+\")),u=Object(c.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"login-by-pwd\"},[s(\"el-form\",{staticClass:\"login-from\"},[s(\"el-form-item\",[s(\"el-input\",{ref:\"username\",staticClass:\"aa\",class:{error:!e.validateRes.username},attrs:{placeholder:\"请输入用户名\",autofocus:\"\",type:\"text\"},on:{focus:function(t){e.focusKey=\"username\"},blur:function(t){e.checkFromItem(\"username\",e.form.username)}},nativeOn:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.debouncedHandleLogin(t):null}},model:{value:e.form.username,callback:function(t){e.$set(e.form,\"username\",\"string\"==typeof t?t.trim():t)},expression:\"form.username\"}})],1),e._v(\" \"),s(\"el-form-item\",[s(\"el-input\",{ref:\"password\",staticClass:\"aa\",class:{error:!e.validateRes.password},attrs:{maxlength:20,placeholder:\"请输入密码\",type:\"password\"},on:{focus:function(t){e.focusKey=\"password\"},blur:e.checkForm},nativeOn:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.debouncedHandleLogin(t):null}},model:{value:e.form.password,callback:function(t){e.$set(e.form,\"password\",\"string\"==typeof t?t.trim():t)},expression:\"form.password\"}})],1)],1),e._v(\" \"),s(\"div\",{staticClass:\"cell login-action\"},[e._m(0),e._v(\" \"),s(\"div\",{staticClass:\"cell-box\"},[s(\"el-checkbox\",{model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:\"rememberMe\"}},[e._v(\"\\n        记住账号\\n      \")])],1)]),e._v(\" \"),s(\"div\",{staticClass:\"error-info\",class:{ok:!Boolean(e.errorInfo)}},[e.errorInfo?s(\"div\",{staticClass:\"box\"},[s(\"img\",{staticClass:\"icon\",attrs:{onerror:'this.src=\"'+r(\"Tww3\")+'\"',src:r(\"89D7\"),alt:\"\"}}),e._v(\" \"),s(\"span\",[e._v(e._s(e.errorInfo))])]):e._e()]),e._v(\" \"),s(\"div\",{staticClass:\"control\"},[s(\"div\",{staticClass:\"btn\",on:{click:e.debouncedHandleLogin}},[e._v(\"\\n      登 录\\n    \")])])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"tips_msg\"},[t(\"a\",{attrs:{href:\"../njv/\",target:\"_blank\"}},[this._v(\"数据大屏\")])])}],!1,null,\"2a0db3f2\",null);u.options.__file=\"LoginByPwd.vue\";t.default=u.exports},hrmu:function(e,t,r){\"use strict\";var s=r(\"HFLO\");r.n(s).a},neCk:function(e,t,r){},ntYl:function(e,t,r){\"use strict\";r.r(t);var s={name:\"Login\",components:{LoginByPwd:r(\"fevw\").default},data:function(){return{activeCom:\"LoginByPwd\",titleMap:{LoginByPwd:\"欢迎登录\"}}},watch:{},created:function(){},methods:{}},n=(r(\"rZNb\"),r(\"KHd+\")),i=Object(n.a)(s,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"login-wrapper\"},[t(\"div\",{staticClass:\"top-nav\"}),this._v(\" \"),t(\"div\",{staticClass:\"container\"},[t(\"div\",{staticClass:\"left\"}),this._v(\" \"),t(\"div\",{staticClass:\"right\"},[t(\"div\",{staticClass:\"login-main-content\"},[t(\"img\",{staticClass:\"tit_img\",attrs:{onerror:'this.src=\"'+r(\"Tww3\")+'\"',src:r(\"AI4B\")}}),this._v(\" \"),t(\"div\",{staticClass:\"tips_msg\"},[this._v(\"你好，欢迎登录\")]),this._v(\" \"),t(this.activeCom,{tag:\"component\"})],1)])])])},[],!1,null,\"0c66139c\",null);i.options.__file=\"index.vue\";t.default=i.exports},rZNb:function(e,t,r){\"use strict\";var s=r(\"neCk\");r.n(s).a}}]);","extractedComments":[]}