{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-4165\"],{\"20Z4\":function(e,t,a){\"use strict\";a.r(t);var s=a(\"QbLZ\"),n=a.n(s),r=a(\"lBvh\"),o={name:\"AddressBookIndex\",components:{XhStructureCell:a(\"UCfG\").a},data:function(){return{bookType:\"\",initStrucValue:[],listData:[],tableMap:[{label:\"手机\",key:\"mobile\"},{label:\"部门\",key:\"deptName\"},{label:\"岗位\",key:\"post\"}],tableHeight:0,specialRowArr:[],currentPage:1,pageSizes:[15,30,60],pageSize:10,total:0,loading:!1,params:null}},created:function(){var e=this;this.bookType=this.$route.params.type,this.params=this.getDefaultParams(this.bookType),this.getList(),this.$nextTick(function(){e.tableHeight=document.getElementsByClassName(\"container-hook\")[0].clientHeight-94})},beforeRouteUpdate:function(e,t,a){this.bookType=e.params.type,this.params=this.getDefaultParams(this.bookType),this.initStrucValue=[],this.listData=[],this.getList(),a()},methods:{getList:function(){var e=this;this.loading=!0,Object(r.a)(this.params).then(function(t){e.loading=!1,e.total=t.data.totalRow,e.listData=t.data.list||[]}).catch(function(){e.loading=!1})},getDefaultParams:function(e){var t={page:1,limit:15,deptId:\"\",search:\"\",initial:1};return\"attention\"==this.bookType&&(t.status=1),t},formatList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.specialRowArr=[],this.listData=[],0===e.length)return[];var t=[],a={deptId:\"\",deptName:\"\",mobile:\"\",postName:\"\",realname:\"\"};t.push(n()({},a,{initial:e[0].initial})),this.specialRowArr.push(0),t.push(e[0]);for(var s=1;s<e.length;s++){var r=e[s];r.initial===t[t.length-1].initial?t.push(r):(this.specialRowArr.push(t.length),t.push(n()({},a,{initial:r.initial})),t.push(r))}this.listData=t},getRowClass:function(e){return this.specialRowArr.includes(e.rowIndex)?\"special-row\":\"\"},sortTableList:function(e){\"ascending\"===e.order?this.params.initial=1:\"descending\"===e.order&&(this.params.initial=2),this.getList()},toggleStar:function(e,t){var a=this;this.loading=!0,Object(r.b)({userId:this.listData[e].userId}).then(function(){a.loading=!1,a.listData[e].status=0===t?1:0,a.$set(a.listData,e,a.listData[e])}).catch(function(){a.loading=!1})},handleSizeChange:function(e){this.params.limit=e,this.getList()},handleCurrentChange:function(e){this.params.page=e,this.getList()},structureChange:function(e){this.initStrucValue=e.value,this.params.page=1,this.params.deptId=e.value.length?e.value[0].id:\"\",this.getList()}}},i=(a(\"bX44\"),a(\"KHd+\")),l=Object(i.a)(o,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"address-book-index\"},[s(\"div\",{staticClass:\"header\"},[s(\"flexbox\",{staticClass:\"title\"},[s(\"img\",{staticClass:\"pic\",attrs:{onerror:'this.src=\"'+a(\"Tww3\")+'\"',src:a(\"r9DG\"),alt:\"\"}}),e._v(\" \"),s(\"span\",{staticClass:\"text\"},[e._v(\"通讯录\")])]),e._v(\" \"),s(\"el-input\",{attrs:{placeholder:\"请输入员工姓名/手机号\"},model:{value:e.params.search,callback:function(t){e.$set(e.params,\"search\",t)},expression:\"params.search\"}},[s(\"el-button\",{attrs:{slot:\"append\",type:\"primary\"},on:{click:e.getList},slot:\"append\"},[e._v(\"\\n        搜索\\n      \")])],1)],1),e._v(\" \"),s(\"div\",{staticClass:\"container container-hook\"},[s(\"flexbox\",{staticClass:\"filter\"},[s(\"span\",{staticClass:\"filter__label\"},[e._v(\"选择部门\")]),e._v(\" \"),s(\"xh-structure-cell\",{staticClass:\"xh-structure-cell\",attrs:{value:e.initStrucValue,radio:\"\"},on:{\"value-change\":e.structureChange}})],1),e._v(\" \"),s(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"n-table--border\",attrs:{data:e.listData,height:e.tableHeight,stripe:\"\",border:\"\"},on:{\"sort-change\":e.sortTableList}},[s(\"el-table-column\",{attrs:{label:\"字母\",align:\"center\",prop:\"initial\",width:\"90\"}}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"name\",label:\"关注\",align:\"center\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[s(\"span\",{staticClass:\"wk wk-focus-on focus-icon\",class:{active:1===t.row.status},on:{click:function(a){e.toggleStar(t.$index,t.row.status)}}})]}}])}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"realname\",label:\"姓名\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[s(\"flexbox\",{staticClass:\"user-box\"},[s(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:t.row.realname,id:t.row.userId,size:30,src:t.row.img}}),e._v(\" \"),s(\"span\",[e._v(e._s(t.row.realname))])],1)]}}])}),e._v(\" \"),e._l(e.tableMap,function(e,t){return s(\"el-table-column\",{key:t,attrs:{prop:e.key,label:e.label}})})],2),e._v(\" \"),s(\"div\",{staticClass:\"p-contianer\"},[s(\"el-pagination\",{staticClass:\"p-bar\",attrs:{\"current-page\":e.currentPage,\"page-sizes\":e.pageSizes,\"page-size\":e.pageSize,\"pager-count\":5,total:e.total,background:\"\",layout:\"prev, pager, next, sizes, total, jumper\"},on:{\"update:pageSize\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)],1)])},[],!1,null,\"90e38224\",null);l.options.__file=\"index.vue\";t.default=l.exports},bX44:function(e,t,a){\"use strict\";var s=a(\"tNJH\");a.n(s).a},lBvh:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return n}),a.d(t,\"b\",function(){return r});var s=a(\"t3Un\");function n(e){return Object(s.a)({url:\"adminUser/queryListName\",method:\"post\",data:e,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function r(e){return Object(s.a)({url:\"adminUser/attention\",method:\"post\",data:e})}},r9DG:function(e,t,a){e.exports=a.p+\"static/img/address_logo.6f13c37.png\"},tNJH:function(e,t){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/sass-loader/lib/loader.js):\\nError: Node Sass does not yet support your current environment: Windows 64-bit with Unsupported runtime (93)\\nFor more information on which environments are supported please see:\\nhttps://github.com/sass/node-sass/releases/tag/v4.14.1\\n    at module.exports (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\binding.js:13:13)\\n    at Object.<anonymous> (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\index.js:14:35)\\n    at Module._compile (node:internal/modules/cjs/loader:1198:14)\\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)\\n    at Module.load (node:internal/modules/cjs/loader:1076:32)\\n    at Function.Module._load (node:internal/modules/cjs/loader:911:12)\\n    at Module.require (node:internal/modules/cjs/loader:1100:19)\\n    at require (node:internal/modules/cjs/helpers:119:18)\\n    at Object.sassLoader (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js:24:22)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\webpack\\\\lib\\\\NormalModule.js:286:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:367:11\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:233:18\\n    at runSyncOrAsync (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:143:3)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:232:2)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:221:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:236:3\\n    at context.callback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:111:13)\\n    at processResources (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\processResources.js:58:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\loader.js:76:38\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:252:13\\n    at wrapper (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:272:20)\\n    at iteratorCallback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:502:17)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:328:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:249:17\\n    at rewritePaths (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\rewritePaths.js:60:3)\")}}]);","extractedComments":[]}