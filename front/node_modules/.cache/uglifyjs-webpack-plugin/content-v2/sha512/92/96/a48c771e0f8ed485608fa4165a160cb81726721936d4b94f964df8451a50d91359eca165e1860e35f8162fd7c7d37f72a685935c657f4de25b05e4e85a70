{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-6b71\"],{\"+cqn\":function(e,t,s){\"use strict\";var i=s(\"OKZ7\");s.n(i).a},\"+lNB\":function(e,t,s){\"use strict\";s.r(t);var i=s(\"8GhS\"),n=s(\"7Dod\"),a=s(\"AAeT\"),l=s(\"ERJp\"),o=s(\"d9x6\"),c=s(\"c2Co\"),r=s(\"Y4Le\"),d=s(\"1DpC\"),u=s(\"VcMt\"),p={name:\"TransferHandle\",components:{XhUserCell:i.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],removeType:1,handleType:1,addsTypes:[]}},computed:{showRemoveType:function(){return\"leads\"!=this.crmType&&\"contacts\"!=this.crmType&&\"receivables\"!=this.crmType&&\"product\"!=this.crmType&&\"invoice\"!=this.crmType}},watch:{dialogVisible:{handler:function(e){this.visible=e,e||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.removeType=1,this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(e){this.usersList=e.value},handleConfirm:function(){var e=this;0===this.usersList.length?this.$message.error(\"请选择变更负责人\"):(this.loading=!0,this.getRequest()(this.getParams()).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.handleCancel(),\"customer\"!=e.crmType&&\"contract\"!=e.crmType&&\"leads\"!=e.crmType||e.$store.dispatch(\"GetMessageNum\"),e.$emit(\"handle\",{type:\"transfer\"})}).catch(function(){e.loading=!1}))},getRequest:function(){return\"leads\"===this.crmType?c.m:\"customer\"===this.crmType?n.X:\"contacts\"===this.crmType?a.o:\"business\"===this.crmType?l.x:\"contract\"===this.crmType?o.s:\"receivables\"===this.crmType?d.k:\"product\"===this.crmType?r.m:\"invoice\"===this.crmType?u.k:void 0},getParams:function(){var e=this,t={ownerUserId:this.usersList[0].userId};return this.showRemoveType&&(t.transferType=this.removeType),2===this.removeType&&(t.power=this.handleType),t.ids=this.selectionList.map(function(t){return parseInt(t[e.crmType+\"Id\"])}),\"customer\"===this.crmType&&(t.changeType=this.addsTypes.map(function(e){return parseInt(e)})),t}}},h=(s(\"+cqn\"),s(\"KHd+\")),m=Object(h.a)(p,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量转移\",width:\"450px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"变更负责人为：\")]),e._v(\" \"),s(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:e.usersList},on:{\"value-change\":e.userChage}})],1),e._v(\" \"),e.showRemoveType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"将原负责人：\")]),e._v(\" \"),s(\"el-radio-group\",{model:{value:e.removeType,callback:function(t){e.removeType=t},expression:\"removeType\"}},[s(\"el-radio\",{attrs:{label:1}},[e._v(\"移出\")]),e._v(\" \"),s(\"el-radio\",{attrs:{label:2}},[e._v(\"转为团队成员\")])],1)],1):e._e(),e._v(\" \"),2==e.removeType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"权限：\")]),e._v(\" \"),s(\"el-radio-group\",{model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[s(\"el-radio\",{attrs:{label:1}},[e._v(\"只读\")]),e._v(\" \"),s(\"el-radio\",{attrs:{label:2}},[e._v(\"读写\")])],1)],1):e._e(),e._v(\" \"),\"customer\"===e.crmType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"同时变更负责人至：\")]),e._v(\" \"),s(\"el-checkbox-group\",{model:{value:e.addsTypes,callback:function(t){e.addsTypes=t},expression:\"addsTypes\"}},[s(\"el-checkbox\",{attrs:{label:\"1\"}},[e._v(\"联系人\")]),e._v(\" \"),s(\"el-checkbox\",{attrs:{label:\"2\"}},[e._v(\"商机\")]),e._v(\" \"),s(\"el-checkbox\",{attrs:{label:\"3\"}},[e._v(\"合同\")])],1)],1):e._e()],1),e._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"730da104\",null);m.options.__file=\"TransferHandle.vue\";t.default=m.exports},\"0Dkb\":function(e,t,s){e.exports=s.p+\"static/img/todo.b7ec535.png\"},\"5XBl\":function(e,t,s){e.exports=s.p+\"static/img/board.e62f270.png\"},\"9cPJ\":function(e,t,s){e.exports=s.p+\"static/img/visit.ffb589c.png\"},\"E/pc\":function(e,t,s){\"use strict\";var i=s(\"fpBj\");s.n(i).a},JAjk:function(e,t,s){e.exports=s.p+\"static/img/contacts.83d4b7f.png\"},JCWM:function(e,t,s){\"use strict\";s.r(t);var i=s(\"7Dod\"),n=s(\"XJYT\"),a={name:\"PutPoolHandle\",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},id:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{selectId:\"\",list:[]}},computed:{},watch:{list:{handler:function(){this.selectId=this.list&&this.list.length>0?this.list[0].poolId:\"\"},immediate:!0},visible:function(e){e&&0===this.list.length&&this.getList()}},mounted:function(){},methods:{getList:function(){var e=this,t=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(i.u)().then(function(s){e.list=s.data||[],t&&t.close()}).catch(function(){t&&t.close()})},handleCancel:function(){this.$emit(\"update:visible\",!1)},handleConfirm:function(){var e=this;if(this.selectId){var t=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(i.F)({ids:this.selectionList.map(function(e){return e.customerId}),poolId:this.selectId}).then(function(s){e.$message({type:\"success\",message:\"操作成功\"}),t.close(),e.$emit(\"handle\",{type:\"put_seas\"}),e.handleCancel()}).catch(function(){t.close()})}}}},l=(s(\"jUvl\"),s(\"KHd+\")),o=Object(l.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"el-dialog\",{attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"放入公海\",width:\"450px\"},on:{close:e.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"公海：\")]),e._v(\" \"),s(\"el-select\",{model:{value:e.selectId,callback:function(t){e.selectId=t},expression:\"selectId\"}},e._l(e.list,function(e){return s(\"el-option\",{key:e.poolId,attrs:{label:e.poolName,value:e.poolId}})}))],1)],1),e._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"7b1cec81\",null);o.options.__file=\"PutPoolHandle.vue\";t.default=o.exports},K4QM:function(e,t,s){e.exports=s.p+\"static/img/leads_not.d26c261.png\"},Klv4:function(e,t,s){\"use strict\";var i=s(\"lrb+\");s.n(i).a},\"L+lS\":function(e,t,s){e.exports=s.p+\"static/img/nearby_not.016fa6f.png\"},OKZ7:function(e,t,s){},R1k5:function(e,t,s){e.exports=s.p+\"static/img/invoice.d717c31.png\"},ShYU:function(e,t,s){e.exports=s.p+\"static/img/marketing.0612591.png\"},U4MQ:function(e,t,s){e.exports=s.p+\"static/img/contract.65548f9.png\"},WGjG:function(e,t,s){\"use strict\";s.r(t);var i=s(\"8GhS\"),n=s(\"7Dod\"),a={name:\"AllocHandle\",components:{XhUserCell:i.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},poolId:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,visible:!1,usersList:[]}},computed:{},watch:{dialogVisible:{handler:function(e){this.visible=e,e||(this.usersList=[])},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(e){this.usersList=e.value},handleConfirm:function(){var e=this;if(0===this.usersList.length)this.$message.error(\"请选择负责人\");else{var t={userId:this.usersList[0].userId,poolId:this.poolId};t.ids=this.selectionList.map(function(t){return t[e.crmType+\"Id\"]}),this.loading=!0,Object(n.d)(t).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.$emit(\"handle\",{type:\"alloc\"}),e.handleCancel()}).catch(function(){e.loading=!1})}}}},l=(s(\"Klv4\"),s(\"KHd+\")),o=Object(l.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量分配\",width:\"400px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[e._v(\"请选择：\")]),e._v(\" \"),s(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:e.usersList},on:{\"value-change\":e.userChage}})],1)],1),e._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"c3449ef0\",null);o.options.__file=\"AllocHandle.vue\";t.default=o.exports},aKrz:function(e,t,s){e.exports=s.p+\"static/img/expense-examines.29e9174.png\"},bok9:function(e,t,s){e.exports=s.p+\"static/img/receivables.29e9174.png\"},cBfe:function(e,t,s){},cLla:function(e,t,s){e.exports=s.p+\"static/img/customer_not.7d40ec4.png\"},dTTw:function(e,t,s){e.exports=s.p+\"static/img/business.66d7980.png\"},fpBj:function(e,t,s){},gesf:function(e,t,s){},\"goM+\":function(e,t,s){e.exports=s.p+\"static/img/seas_not.68f3f48.png\"},jUvl:function(e,t,s){\"use strict\";var i=s(\"gesf\");s.n(i).a},keIY:function(e,t,s){e.exports=s.p+\"static/img/leads.2c5bddd.png\"},\"lrb+\":function(e,t,s){},nslc:function(e,t,s){\"use strict\";s.r(t);var i=s(\"7Dod\"),n={name:\"DealStatusHandle\",components:{},mixins:[],props:{value:Number,visible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,status:1,options:[{label:\"已成交\",value:1},{label:\"未成交\",value:0}]}},computed:{},watch:{value:{handler:function(e){void 0!==e&&(this.status=0==e?1:0)},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.status=1,this.$emit(\"update:visible\",!1)},handleConfirm:function(){var e=this,t=this.selectionList.map(function(t){return t[e.crmType+\"Id\"]}).join(\",\"),s={dealStatus:this.status};s.ids=t,this.loading=!0,Object(i.b)(s).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.$emit(\"handle\",{type:\"deal_status\"}),e.handleCancel()}).catch(function(){e.loading=!1})}}},a=(s(\"E/pc\"),s(\"KHd+\")),l=Object(a.a)(n,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"客户成交状态\",width:\"400px\"},on:{close:e.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[e._v(\"成交状态：\")]),e._v(\" \"),s(\"el-select\",{staticClass:\"handle-item-content\",model:{value:e.status,callback:function(t){e.status=t},expression:\"status\"}},e._l(e.options,function(e){return s(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"5fb62a3b\",null);l.options.__file=\"DealStatusHandle.vue\";t.default=l.exports},\"p3/6\":function(e,t,s){\"use strict\";s.r(t);var i=s(\"8GhS\"),n=s(\"7Dod\"),a=s(\"d9x6\"),l=s(\"ERJp\"),o={name:\"TeamsHandle\",components:{XhUserCell:i.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},title:{type:String,default:\"\"},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],handleType:1,addsTypes:[]}},computed:{},watch:{dialogVisible:{handler:function(e){this.visible=e,e||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(e){this.usersList=e.value},handleConfirm:function(){var e=this;if(0===this.usersList.length)this.$message.error(\"请选择团队成员\");else{var t={ids:this.selectionList.map(function(t){return t[e.crmType+\"Id\"]}),memberIds:this.usersList.map(function(e){return e.userId})};\"customer\"===this.crmType&&\"添加团队成员\"==this.title&&(t.changeType=this.addsTypes.map(function(e){return parseInt(e)}));var s=void 0;\"添加团队成员\"==this.title?(t.power=this.handleType,s={customer:n.U,contract:a.q,business:l.s}[this.crmType]):s={customer:n.T,contract:a.p,business:l.r}[this.crmType],this.loading=!0,s(t).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.handleCancel(),e.$emit(\"handle\",{type:\"添加团队成员\"==e.title?\"add_user\":\"delete_user\"})}).catch(function(){e.loading=!1})}}}},c=(s(\"xmeh\"),s(\"KHd+\")),r=Object(c.a)(o,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{title:e.title,visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,width:\"400px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[e._v(\"选择团队成员：\")]),e._v(\" \"),s(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{radio:!1,value:e.usersList,placeholder:\"点击选择（多选）\"},on:{\"value-change\":e.userChage}}),e._v(\" \"),\"添加团队成员\"!=e.title?s(\"div\",{staticClass:\"tips\"},[e._v(\"此操作不可移除数据负责人\")]):e._e()],1),e._v(\" \"),\"添加团队成员\"==e.title?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"权限：\")]),e._v(\" \"),s(\"el-radio-group\",{model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[s(\"el-radio\",{attrs:{label:1}},[e._v(\"只读\")]),e._v(\" \"),s(\"el-radio\",{attrs:{label:2}},[e._v(\"读写\")])],1)],1):e._e(),e._v(\" \"),\"添加团队成员\"==e.title&&\"customer\"===e.crmType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"同时添加至：\")]),e._v(\" \"),s(\"el-checkbox-group\",{model:{value:e.addsTypes,callback:function(t){e.addsTypes=t},expression:\"addsTypes\"}},[s(\"el-checkbox\",{attrs:{label:\"2\"}},[e._v(\"商机\")]),e._v(\" \"),s(\"el-checkbox\",{attrs:{label:\"3\"}},[e._v(\"合同\")])],1)],1):e._e()],1),e._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"3390e593\",null);r.options.__file=\"TeamsHandle.vue\";t.default=r.exports},p3hS:function(e,t,s){var i={\"./board.png\":\"5XBl\",\"./business.png\":\"dTTw\",\"./contacts.png\":\"JAjk\",\"./contract.png\":\"U4MQ\",\"./customer.png\":\"wfwE\",\"./customer_not.png\":\"cLla\",\"./expense-examines.png\":\"aKrz\",\"./expense.png\":\"ugew\",\"./invoice.png\":\"R1k5\",\"./leads.png\":\"keIY\",\"./leads_not.png\":\"K4QM\",\"./marketing.png\":\"ShYU\",\"./nearby.png\":\"t4Dm\",\"./nearby_not.png\":\"L+lS\",\"./product.png\":\"wbJn\",\"./receivables.png\":\"bok9\",\"./seas.png\":\"riSQ\",\"./seas_not.png\":\"goM+\",\"./todo.png\":\"0Dkb\",\"./visit.png\":\"9cPJ\"};function n(e){var t=a(e);return s(t)}function a(e){var t=i[e];if(!(t+1)){var s=new Error(\"Cannot find module '\"+e+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}return t}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id=\"p3hS\"},riSQ:function(e,t,s){e.exports=s.p+\"static/img/seas.83becad.png\"},t4Dm:function(e,t,s){e.exports=s.p+\"static/img/nearby.2d86e3c.png\"},ugew:function(e,t,s){e.exports=s.p+\"static/img/expense.29e9174.png\"},wbJn:function(e,t,s){e.exports=s.p+\"static/img/product.663b457.png\"},wfwE:function(e,t,s){e.exports=s.p+\"static/img/customer.6f13c37.png\"},xmeh:function(e,t,s){\"use strict\";var i=s(\"cBfe\");s.n(i).a}}]);","extractedComments":[]}