{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-47e2\",\"chunk-b4af\"],{\"1Wof\":function(e,t){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/sass-loader/lib/loader.js):\\nError: Node Sass does not yet support your current environment: Windows 64-bit with Unsupported runtime (93)\\nFor more information on which environments are supported please see:\\nhttps://github.com/sass/node-sass/releases/tag/v4.14.1\\n    at module.exports (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\binding.js:13:13)\\n    at Object.<anonymous> (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\index.js:14:35)\\n    at Module._compile (node:internal/modules/cjs/loader:1198:14)\\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)\\n    at Module.load (node:internal/modules/cjs/loader:1076:32)\\n    at Function.Module._load (node:internal/modules/cjs/loader:911:12)\\n    at Module.require (node:internal/modules/cjs/loader:1100:19)\\n    at require (node:internal/modules/cjs/helpers:119:18)\\n    at Object.sassLoader (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js:24:22)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\webpack\\\\lib\\\\NormalModule.js:286:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:367:11\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:233:18\\n    at runSyncOrAsync (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:143:3)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:232:2)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:221:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:236:3\\n    at context.callback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:111:13)\\n    at processResources (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\processResources.js:58:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\loader.js:76:38\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:252:13\\n    at wrapper (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:272:20)\\n    at iteratorCallback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:502:17)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:328:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:249:17\\n    at rewritePaths (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\rewritePaths.js:60:3)\")},\"3z7q\":function(e,t,o){\"use strict\";o.r(t);var n=o(\"7Qib\"),r=o(\"3ojK\"),s=o(\"1bNe\"),a=o(\"gwiD\"),d=o(\"vV2+\"),l=o(\"mVxz\"),i=o(\"tMlD\"),c=o(\"ALhW\"),u=o(\"slnp\"),m=o(\"pKm3\"),f=o(\"GEWF\"),h=o(\"U63j\"),p=o(\"0dur\"),b=o(\"uSKd\"),g=o(\"f462\"),j=o(\"AWvD\"),D={name:\"CRMFullScreenDetail\",components:{LeadsDetail:r.default,CustomerDetail:s.default,ContactsDetail:a.default,BusinessDetail:d.default,ContractDetail:l.default,ProductDetail:i.default,ReceivablesDetail:c.default,ExamineDetail:u.default,TaskDetail:m.default,LogDetail:f.default,NoticeDetail:h.default,VisitDetail:p.default,InvoiceDetail:b.default,ExpenseDetail:g.default,ExpenseExamineDetail:j.default},props:{id:[String,Number],crmType:{type:String,default:\"\"},visible:{type:Boolean,default:!1}},data:function(){return{showDetail:!1}},computed:{tabName:function(){return\"leads\"==this.crmType?\"LeadsDetail\":\"customer\"==this.crmType?\"CustomerDetail\":\"contacts\"==this.crmType?\"ContactsDetail\":\"business\"==this.crmType?\"BusinessDetail\":\"contract\"==this.crmType?\"ContractDetail\":\"product\"==this.crmType?\"ProductDetail\":\"receivables\"==this.crmType?\"ReceivablesDetail\":\"examine\"==this.crmType?\"ExamineDetail\":\"task\"==this.crmType?\"TaskDetail\":\"log\"==this.crmType?\"LogDetail\":\"announcement\"==this.crmType?\"NoticeDetail\":\"visit\"==this.crmType?\"VisitDetail\":\"invoice\"==this.crmType?\"InvoiceDetail\":\"expense\"==this.crmType?\"ExpenseDetail\":\"expense-examines\"==this.crmType?\"ExpenseExamineDetail\":\"\"}},watch:{visible:function(e){this.showDetail=e,e&&(document.body.appendChild(this.$el),this.$el.addEventListener(\"click\",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(n.q)())},showDetail:function(e){var t=this;e||setTimeout(function(){t.$emit(\"update:visible\",!1)},350)}},mounted:function(){this.visible&&(document.body.appendChild(this.$el),this.$el.addEventListener(\"click\",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(n.q)())},beforeDestroy:function(){this.$el&&this.$el.parentNode&&(this.$el.parentNode.removeChild(this.$el),this.$el.removeEventListener(\"click\",this.handleDocumentClick,!1))},methods:{hiddenView:function(){this.showDetail=!1},handleDocumentClick:function(e){this.$el==e.target&&(this.showDetail=!1)},detailHandle:function(e){\"alloc\"!==e.type&&\"get\"!==e.type&&\"transfer\"!==e.type&&\"transform\"!==e.type&&\"delete\"!==e.type&&\"put_seas\"!==e.type||(this.showDetail=!1),this.$emit(\"handle\",e)}}},_=(o(\"F+K4\"),o(\"KHd+\")),w=Object(_.a)(D,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"full-container\"},[e.id&&e.showDetail?o(e.tabName,{tag:\"component\",staticClass:\"d-view\",attrs:{\"crm-type\":e.crmType,id:e.id},on:{handle:e.detailHandle,\"hide-view\":e.hiddenView}}):e._e()],1)},[],!1,null,\"6a746c2c\",null);w.options.__file=\"CRMFullScreenDetail.vue\";t.default=w.exports},\"F+K4\":function(e,t,o){\"use strict\";var n=o(\"1Wof\");o.n(n).a},FoeY:function(e,t,o){\"use strict\";o.d(t,\"d\",function(){return r}),o.d(t,\"a\",function(){return s}),o.d(t,\"b\",function(){return a}),o.d(t,\"e\",function(){return d}),o.d(t,\"c\",function(){return l});var n=o(\"t3Un\");function r(e){return Object(n.a)({url:\"oaAnnouncement/queryList\",method:\"post\",data:e})}function s(e){var t=e.announcementId?\"setAnnouncement\":\"addAnnouncement\";return Object(n.a)({url:\"oaAnnouncement/\"+t,method:\"post\",data:e,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function a(e){return Object(n.a)({url:\"oaAnnouncement/delete/\"+e,method:\"post\"})}function d(e){return Object(n.a)({url:\"oaAnnouncement/queryById/\"+e,method:\"post\"})}function l(e){return Object(n.a)({url:\"oaAnnouncement/readAnnouncement\",method:\"post\",data:e})}},ZZgR:function(e,t){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/sass-loader/lib/loader.js):\\nError: Node Sass does not yet support your current environment: Windows 64-bit with Unsupported runtime (93)\\nFor more information on which environments are supported please see:\\nhttps://github.com/sass/node-sass/releases/tag/v4.14.1\\n    at module.exports (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\binding.js:13:13)\\n    at Object.<anonymous> (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\index.js:14:35)\\n    at Module._compile (node:internal/modules/cjs/loader:1198:14)\\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)\\n    at Module.load (node:internal/modules/cjs/loader:1076:32)\\n    at Function.Module._load (node:internal/modules/cjs/loader:911:12)\\n    at Module.require (node:internal/modules/cjs/loader:1100:19)\\n    at require (node:internal/modules/cjs/helpers:119:18)\\n    at Object.sassLoader (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js:24:22)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\webpack\\\\lib\\\\NormalModule.js:286:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:367:11\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:233:18\\n    at runSyncOrAsync (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:143:3)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:232:2)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:221:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:236:3\\n    at context.callback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:111:13)\\n    at processResources (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\processResources.js:58:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\loader.js:76:38\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:252:13\\n    at wrapper (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:272:20)\\n    at iteratorCallback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:502:17)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:328:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:249:17\\n    at rewritePaths (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\rewritePaths.js:60:3)\")},cZgO:function(e,t,o){\"use strict\";var n=o(\"ZZgR\");o.n(n).a},jM2j:function(e,t,o){\"use strict\";o.r(t);var n=o(\"ViDN\"),r=o(\"8GhS\"),s=o(\"FoeY\"),a=o(\"7Qib\"),d={components:{CreateView:n.a,XhStrucUserCell:r.m},props:{action:{type:Object,default:function(){return{type:\"save\"}}}},data:function(){var e=this,t=function(t,o,n){\"startTime\"==t.field&&!e.formData.startTime&&e.formData.endTime||\"endTime\"==t.field&&!e.formData.endTime&&e.formData.startTime?n(new Error(\"请完善时间\")):e.formData.startTime&&e.formData.endTime&&Object(a.k)(e.formData.startTime)>=Object(a.k)(e.formData.endTime)&&n(new Error(\"开始时间必须小于结束时间\")),n()};return{formList:[{label:\"公告标题\",field:\"title\"},{label:\"通知范围\",field:\"dep\",type:\"plus\"},{label:\"公告正文\",field:\"content\",type:\"textarea\"}],formData:{dep:{staff:[],dep:[]}},rules:{title:[{required:!0,message:\"公告标题不能为空\",trigger:\"blur\"},{max:50,message:\"公告标题长度最多为50个字符\",trigger:\"blur\"}],content:[{required:!0,message:\"公告正文不能为空\",trigger:\"blur\"}],startTime:[{required:!0,message:\"不能为空\",trigger:\"blur\"},{validator:t,trigger:\"blur\"}],endTime:[{required:!0,message:\"不能为空\",trigger:\"blur\"},{validator:t,trigger:\"blur\"}]},loading:!1}},computed:{title:function(){return\"save\"==this.action.type?\"新建公告\":\"编辑公告\"}},created:function(){var e=this;\"update\"==this.action.type&&Object(s.e)(this.action.id).then(function(t){e.formData={title:t.data.title,content:t.data.content,dep:{staff:t.data.ownerUserList,dep:t.data.deptList}}})},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var o={title:e.formData.title,content:e.formData.content,deptIds:e.formData.dep.dep.map(function(e){return e.id}).join(\",\"),ownerUserIds:e.formData.dep.staff.map(function(e){return e.userId}).join(\",\")};\"update\"==e.action.type&&(o.announcementId=e.action.id),Object(s.a)(o).then(function(t){e.$message.success(e.title+\"成功\"),e.$emit(\"onSubmit\"),e.close(),e.loading=!1}).catch(function(){e.$message.error(e.title+\"失败\"),e.loading=!1})})},close:function(){this.$emit(\"close\")},strcUserChange:function(e){this.$set(this.formData,\"dep\",{staff:e.value.users,dep:e.value.strucs})},deleteuser:function(e){this.formData.dep.staff.splice(e,1)},deleteDepuser:function(e){this.formData.dep.dep.splice(e,1)}}},l=(o(\"cZgO\"),o(\"KHd+\")),i=Object(l.a)(d,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"create-view\",{attrs:{\"body-style\":{height:\"100%\"}}},[o(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"details-box\"},[o(\"div\",{staticClass:\"header\",attrs:{slot:\"header\"},slot:\"header\"},[o(\"span\",{staticClass:\"text\"},[e._v(e._s(e.title))]),e._v(\" \"),o(\"i\",{staticClass:\"el-icon-close rt\",on:{click:e.close}})]),e._v(\" \"),o(\"div\",{staticClass:\"content\"},[o(\"el-form\",{ref:\"form\",attrs:{model:e.formData,rules:e.rules}},e._l(e.formList,function(t,n){return o(\"el-form-item\",{key:n,class:\"el-form-item\"+t.field,attrs:{label:t.label,prop:t.field}},[\"date\"==t.type?[o(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择日期\"},model:{value:e.formData[t.field],callback:function(o){e.$set(e.formData,t.field,o)},expression:\"formData[item.field]\"}})]:\"textarea\"==t.type?[o(\"el-input\",{attrs:{autosize:{minRows:15},maxlength:2e3,\"show-word-limit\":\"\",type:\"textarea\",placeholder:\"请输入内容\"},model:{value:e.formData[t.field],callback:function(o){e.$set(e.formData,t.field,o)},expression:\"formData[item.field]\"}})]:\"plus\"==t.type?[o(\"xh-struc-user-cell\",{staticStyle:{width:\"100%\"},attrs:{value:null,users:e.formData[t.field].staff,strucs:e.formData[t.field].dep},on:{\"value-change\":e.strcUserChange}})]:o(\"el-input\",{model:{value:e.formData[t.field],callback:function(o){e.$set(e.formData,t.field,o)},expression:\"formData[item.field]\"}})],2)}))],1),e._v(\" \"),o(\"div\",{staticClass:\"btn-box\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.onSubmit}},[e._v(\"提交\")]),e._v(\" \"),o(\"el-button\",{on:{click:e.close}},[e._v(\"取消\")])],1)])])},[],!1,null,\"6d1389f4\",null);i.options.__file=\"NewDialog.vue\";t.default=i.exports}}]);","extractedComments":[]}