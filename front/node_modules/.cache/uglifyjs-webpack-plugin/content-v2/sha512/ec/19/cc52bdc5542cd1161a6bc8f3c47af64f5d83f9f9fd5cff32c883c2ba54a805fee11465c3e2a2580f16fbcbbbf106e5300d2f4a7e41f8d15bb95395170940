{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-0ff2\",\"chunk-6b71\",\"chunk-ae32\"],{\"+cqn\":function(e,t,i){\"use strict\";var s=i(\"OKZ7\");i.n(s).a},\"+lNB\":function(e,t,i){\"use strict\";i.r(t);var s=i(\"8GhS\"),n=i(\"7Dod\"),a=i(\"AAeT\"),o=i(\"ERJp\"),l=i(\"d9x6\"),c=i(\"c2Co\"),r=i(\"Y4Le\"),u=i(\"1DpC\"),d=i(\"VcMt\"),p={name:\"TransferHandle\",components:{XhUserCell:s.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],removeType:1,handleType:1,addsTypes:[]}},computed:{showRemoveType:function(){return\"leads\"!=this.crmType&&\"contacts\"!=this.crmType&&\"receivables\"!=this.crmType&&\"product\"!=this.crmType&&\"invoice\"!=this.crmType}},watch:{dialogVisible:{handler:function(e){this.visible=e,e||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.removeType=1,this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(e){this.usersList=e.value},handleConfirm:function(){var e=this;0===this.usersList.length?this.$message.error(\"请选择变更负责人\"):(this.loading=!0,this.getRequest()(this.getParams()).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.handleCancel(),\"customer\"!=e.crmType&&\"contract\"!=e.crmType&&\"leads\"!=e.crmType||e.$store.dispatch(\"GetMessageNum\"),e.$emit(\"handle\",{type:\"transfer\"})}).catch(function(){e.loading=!1}))},getRequest:function(){return\"leads\"===this.crmType?c.m:\"customer\"===this.crmType?n.X:\"contacts\"===this.crmType?a.o:\"business\"===this.crmType?o.x:\"contract\"===this.crmType?l.s:\"receivables\"===this.crmType?u.k:\"product\"===this.crmType?r.m:\"invoice\"===this.crmType?d.k:void 0},getParams:function(){var e=this,t={ownerUserId:this.usersList[0].userId};return this.showRemoveType&&(t.transferType=this.removeType),2===this.removeType&&(t.power=this.handleType),t.ids=this.selectionList.map(function(t){return parseInt(t[e.crmType+\"Id\"])}),\"customer\"===this.crmType&&(t.changeType=this.addsTypes.map(function(e){return parseInt(e)})),t}}},h=(i(\"+cqn\"),i(\"KHd+\")),m=Object(h.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量转移\",width:\"450px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"变更负责人为：\")]),e._v(\" \"),i(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:e.usersList},on:{\"value-change\":e.userChage}})],1),e._v(\" \"),e.showRemoveType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"将原负责人：\")]),e._v(\" \"),i(\"el-radio-group\",{model:{value:e.removeType,callback:function(t){e.removeType=t},expression:\"removeType\"}},[i(\"el-radio\",{attrs:{label:1}},[e._v(\"移出\")]),e._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[e._v(\"转为团队成员\")])],1)],1):e._e(),e._v(\" \"),2==e.removeType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"权限：\")]),e._v(\" \"),i(\"el-radio-group\",{model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[i(\"el-radio\",{attrs:{label:1}},[e._v(\"只读\")]),e._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[e._v(\"读写\")])],1)],1):e._e(),e._v(\" \"),\"customer\"===e.crmType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"同时变更负责人至：\")]),e._v(\" \"),i(\"el-checkbox-group\",{model:{value:e.addsTypes,callback:function(t){e.addsTypes=t},expression:\"addsTypes\"}},[i(\"el-checkbox\",{attrs:{label:\"1\"}},[e._v(\"联系人\")]),e._v(\" \"),i(\"el-checkbox\",{attrs:{label:\"2\"}},[e._v(\"商机\")]),e._v(\" \"),i(\"el-checkbox\",{attrs:{label:\"3\"}},[e._v(\"合同\")])],1)],1):e._e()],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"730da104\",null);m.options.__file=\"TransferHandle.vue\";t.default=m.exports},\"+xXq\":function(e,t,i){e.exports=i.p+\"static/img/check_revoke.0500d70.png\"},\"/407\":function(e,t,i){\"use strict\";i.r(t);var s={name:\"RelatedBusinessCell\",props:{type:{type:String,default:\"\"},cellIndex:Number,data:Object,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!0}},data:function(){return{}},computed:{typeName:function(){return\"customer\"==this.type?\"客户\":\"contacts\"==this.type?\"联系人\":\"business\"==this.type?\"商机\":\"contract\"==this.type?\"合同\":\"\"},name:function(){return this.data.name||this.data.businessName||this.data.customerName||this.data.number}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{footClick:function(){this.$emit(\"unbind\",this.type,this.cellIndex,this.data)},bodyClick:function(){this.$emit(\"detail\",this.type,this.cellIndex,this.data)}}},n=(i(\"/hyb\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"flexbox\",{staticClass:\"cell\"},[i(\"div\",{staticClass:\"cell-head\"},[i(\"i\",{class:e._f(\"wkIconPre\")(e.type)}),e._v(\" \"),i(\"span\",[e._v(\"\\n      \"+e._s(\"相关\"+e.typeName+\"-\")+\"\\n    \")])]),e._v(\" \"),i(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":e.cursorPointer},on:{click:e.bodyClick}},[e._v(\"\\n    \"+e._s(e.name)+\"\\n  \")]),e._v(\" \"),i(\"div\",{staticClass:\"cell-foot\"},[e.showFoot?i(\"a\",{staticClass:\"cancel-btn\",on:{click:e.footClick}},[e._v(\"取消关联\")]):e._e()])])},[],!1,null,\"061d0168\",null);a.options.__file=\"index.vue\";t.default=a.exports},\"/B/c\":function(e,t,i){\"use strict\";var s=i(\"MTF5\");i.n(s).a},\"/hyb\":function(e,t,i){\"use strict\";var s=i(\"KOLf\");i.n(s).a},\"08m3\":function(e,t,i){},\"0Dkb\":function(e,t,i){e.exports=i.p+\"static/img/todo.b7ec535.png\"},\"5XBl\":function(e,t,i){e.exports=i.p+\"static/img/board.e62f270.png\"},\"5pSV\":function(e,t,i){\"use strict\";var s=i(\"Rq8O\");i.n(s).a},\"6pZM\":function(e,t,i){e.exports=i.p+\"static/img/check_wait.81cfb8e.png\"},\"6r2N\":function(e,t,i){\"use strict\";i.r(t);var s=i(\"ZoMv\"),n=i(\"4XAY\"),a=i(\"c2Co\"),o=i(\"7Dod\"),l=i(\"Ra/C\"),c=i(\"Vvln\"),r=i(\"TAVA\"),u=i(\"j4Q1\"),d=i(\"yPq4\"),p=i(\"J4Uw\"),h={name:\"CRMMessage\",components:{FilterForm:r.default,FilterContent:u.default,CRMAllDetail:d.default},filters:{dealIcon:function(e){return 1==e?\"wk wk-success deal-suc\":\"wk wk-close deal-un\"},dealName:function(e){return 1==e?\"已成交\":\"未成交\"}},mixins:[c.default],props:{crmType:{type:String,default:\"\"},infoType:{type:String,default:\"\"},infoTitle:{type:String,default:\"\"},infoTips:{type:String,default:\"\"},iconData:Object,show:Boolean,model:Number},data:function(){return{optionsType:0,isSubType:1,showFilter:!1,filterFieldList:[],filterObj:{form:[]},selectionList:[],rowID:\"\",rowType:\"\",showDview:!1}},computed:{showFollow:function(){return\"followLeads\"==this.infoType||\"followCustomer\"==this.infoType},selectionButtonList:function(){var e=this.showFollow?[{name:\"已跟进\",type:\"follow\",icon:\"wk wk-edit\"}]:[];return e.push({name:\"标记已处理\",type:\"mark-deal\",icon:\"wk wk-tag\"}),e},showFilterView:function(){return\"receivables_plan\"!=this.crmType},showCheckStatus:function(){return\"contract\"==this.crmType||\"receivables\"==this.crmType},showPoolDay:function(){return\"customer\"==this.crmType},showSubType:function(){return\"todayCustomer\"==this.infoType||\"todayBusiness\"==this.infoType||\"todayLeads\"==this.infoType||\"putInPoolRemind\"==this.infoType||\"returnVisitRemind\"==this.infoType},options:function(){return\"todayCustomer\"==this.infoType||\"todayBusiness\"==this.infoType||\"todayLeads\"==this.infoType?[{name:\"今日需联系\",value:1},{name:\"已逾期\",value:2},{name:\"已联系\",value:3}]:\"followLeads\"==this.infoType||\"followCustomer\"==this.infoType?[{name:\"待跟进\",value:1},{name:\"已跟进\",value:2}]:\"checkContract\"==this.infoType||\"checkReceivables\"==this.infoType||\"checkInvoice\"==this.infoType||\"checkExpenses\"==this.infoType?[{name:\"待审核\",value:1},{name:\"已审核\",value:2}]:\"remindReceivablesPlan\"==this.infoType?[{name:\"待回款\",value:1},{name:\"已回款\",value:2},{name:\"已逾期\",value:3}]:\"endContract\"==this.infoType?[{name:\"即将到期\",value:1},{name:\"已到期\",value:2}]:[]},canMark:function(){return!this.options.length||(this.showSubType&&this.showOptions?1==this.optionsType&&1==this.isSubType:this.showSubType?1==this.isSubType:!!this.showOptions&&1==this.optionsType)}},watch:{show:function(){this.showOptions&&this.options.length>0&&(this.optionsType=this.options[0].value),this.initTableHead()}},mounted:function(){this.showOptions&&this.options.length>0&&(this.optionsType=this.options[0].value),this.initTableHead()},methods:{initTableHead:function(){this.show&&(this.currentPage=1,0==this.fieldList.length?this.getFieldList():(this.getList(!1),this.$store.dispatch(\"GetMessageNum\")))},refreshList:function(){this.currentPage=1,this.fieldList.length>0?this.getList():this.getFieldList()},handleSelectionChange:function(e){this.selectionList=e},selectionBarClick:function(e){var t=this;if(\"follow\"==e)this.$confirm(\"您确定此操作吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){(0,{followLeads:a.k,followCustomer:o.S}[t.infoType])(t.selectionList.map(function(e){return e[t.crmType+\"Id\"]})).then(function(e){t.$message.success(\"操作成功\"),t.refreshList(),t.$emit(\"on-handle\",{type:\"follow\",value:t.selectionList.length,infoType:t.infoType})}).catch(function(){})}).catch(function(){});else if(\"mark-deal\"==e){var i={model:this.model};i.list=this.selectionList.map(function(e){var i={},s=\"receivables_plan\"===t.crmType?\"planId\":t.crmType+\"Id\";return i.typeId=e[s],\"putInPoolRemind\"==t.infoType&&(i.poolIds=e.poolIds),i}),Object(l.o)(i).then(function(e){t.$message.success(\"操作成功\"),t.getList(),t.$parent.refreshNum()}).catch(function(){})}},getFilterFieldInfo:function(){var e=this;\"invoice\"==this.crmType?(this.filterFieldList=p.invoiceFilterFields,this.showFilter=!0):Object(n.E)({label:s.default[this.crmType]}).then(function(t){e.filterFieldList=t.data||[],e.showFilter=!0}).catch(function(){})},handleFilter:function(e){this.filterObj=e,this.showFilter=!1,this.updateTableHeight(),this.refreshList()},handleDeleteField:function(e){this.filterObj=e.obj,this.updateTableHeight(),this.refreshList()},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return\"name\"===t.property&&\"contract\"!=this.crmType||\"number\"===t.property||\"leadsName\"===t.property||\"customerName\"===t.property||\"businessName\"===t.property||\"contactsName\"===t.property||\"num\"===t.property||\"visitNumber\"===t.property||\"invoiceApplyNumber\"===t.property?\"can-visit--underline\":\"\"},allMarkReadClick:function(){var e=this;Object(l.a)({model:this.model}).then(function(t){e.$message.success(\"操作成功\"),e.$parent.refreshNum(),e.getList()}).catch(function(){})},selectionDisabled:function(){return this.canMark}}},m=(i(\"/B/c\"),i(\"KHd+\")),f=Object(m.a)(h,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"ec-container\"},[i(\"div\",{staticClass:\"title\"},[i(\"i\",{class:[\"title-icon\",e.iconData.iconClass],style:{backgroundColor:e.iconData.color}}),e._v(e._s(e.infoTitle)+\"\\n    \"),e.infoTips?i(\"el-tooltip\",{attrs:{content:e.infoTips,effect:\"dark\",placement:\"top\"}},[i(\"i\",{staticClass:\"wk wk-help wk-help-tips\"})]):e._e()],1),e._v(\" \"),i(\"div\",{staticClass:\"option-bar\"},[0==e.selectionList.length?i(\"div\",[e.showOptions?i(\"el-select\",{on:{change:e.refreshList},model:{value:e.optionsType,callback:function(t){e.optionsType=t},expression:\"optionsType\"}},e._l(e.options,function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.name,value:e.value}})})):e._e(),e._v(\" \"),e.showSubType?i(\"el-select\",{staticStyle:{width:\"120px\"},style:{\"margin-left\":e.showOptions?\"10px\":0},on:{change:e.refreshList},model:{value:e.isSubType,callback:function(t){e.isSubType=t},expression:\"isSubType\"}},e._l([{name:\"我的\",value:1},{name:\"我下属的\",value:2}],function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.name,value:e.value}})})):e._e(),e._v(\" \"),e.showFilterView?i(\"el-button\",{staticClass:\"filter-button el-button--margin \",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"wk wk-screening\"},on:{click:e.getFilterFieldInfo}},[e._v(\"高级筛选\")]):e._e(),e._v(\" \"),i(\"filter-form\",{attrs:{\"field-list\":e.filterFieldList,\"dialog-visible\":e.showFilter,obj:e.filterObj,\"crm-type\":e.crmType,\"save-scene\":!1},on:{\"update:dialogVisible\":function(t){e.showFilter=t},filter:e.handleFilter}}),e._v(\" \"),i(\"el-button\",{staticClass:\"el-button--margin \",staticStyle:{\"margin-left\":\"10px\"},attrs:{disabled:!e.canMark,icon:\"wk wk-tag\",type:\"primary\",plain:\"\"},on:{click:e.allMarkReadClick}},[e._v(\"全部标记已处理\")])],1):i(\"flexbox\",{staticClass:\"selection-bar\"},[i(\"div\",{staticClass:\"selected—title\"},[e._v(\"已选中\"),i(\"span\",{staticClass:\"selected—count\"},[e._v(e._s(e.selectionList.length))]),e._v(\"项\")]),e._v(\" \"),i(\"flexbox\",{staticClass:\"selection-items-box\"},e._l(e.selectionButtonList,function(t,s){return i(\"el-button\",{key:s,attrs:{icon:t.icon,type:\"primary\"},nativeOn:{click:function(i){e.selectionBarClick(t.type)}}},[e._v(e._s(t.name))])}))],1)],1),e._v(\" \"),e.filterObj.form&&e.filterObj.form.length>0?i(\"filter-content\",{attrs:{obj:e.filterObj},on:{delete:e.handleDeleteField}}):e._e(),e._v(\" \"),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"n-table--border\",staticStyle:{width:\"100%\"},attrs:{id:\"crm-table\",data:e.list,height:e.tableHeight,\"cell-class-name\":e.cellClassName,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"row-click\":e.handleRowClick,\"selection-change\":e.handleSelectionChange}},[i(\"el-table-column\",{attrs:{selectable:e.selectionDisabled,\"show-overflow-tooltip\":\"\",type:\"selection\",align:\"center\",width:\"55\"}}),e._v(\" \"),e._l(e.fieldList,function(t,s){return i(\"el-table-column\",{key:s,attrs:{prop:t.prop,label:t.label,width:t.width,\"show-overflow-tooltip\":\"\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[\"dealStatus\"==t.prop?[i(\"i\",{class:e._f(\"dealIcon\")(s.row[t.prop])}),e._v(\" \"),i(\"span\",[e._v(e._s(e._f(\"dealName\")(s.row[t.prop])))])]:\"status\"==t.prop&&\"customer\"===e.crmType?[2==s.row.status?i(\"i\",{staticClass:\"wk wk-circle-password customer-lock\"}):e._e()]:\"checkStatus\"==t.prop?[i(\"span\",{staticClass:\"status-mark\",style:e.getStatusStyle(s.row.checkStatus)}),e._v(\" \"),i(\"span\",[e._v(e._s(e.getStatusName(s.row.checkStatus)))])]:[e._v(\"\\n          \"+e._s(e.fieldFormatter(s.row,s.column))+\"\\n        \")]]}}])})}),e._v(\" \"),i(\"el-table-column\",{attrs:{resizable:!1}})],2),e._v(\" \"),i(\"div\",{staticClass:\"p-contianer\"},[i(\"el-pagination\",{staticClass:\"p-bar\",attrs:{\"current-page\":e.currentPage,\"page-sizes\":e.pageSizes,\"page-size\":e.pageSize,total:e.total,background:\"\",layout:\"prev, pager, next, sizes, total, jumper\"},on:{\"update:pageSize\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1),e._v(\" \"),i(\"c-r-m-all-detail\",{attrs:{visible:e.showDview,\"crm-type\":e.rowType,id:e.rowID},on:{\"update:visible\":function(t){e.showDview=t},handle:e.getList}})],1)},[],!1,null,\"29ee7165\",null);f.options.__file=\"CRMMessage.vue\";t.default=f.exports},\"77fj\":function(e,t,i){\"use strict\";var s=i(\"Btlj\");i.n(s).a},\"9cPJ\":function(e,t,i){e.exports=i.p+\"static/img/visit.ffb589c.png\"},AVjW:function(e,t,i){\"use strict\";var s=i(\"gIBH\");i.n(s).a},Bd1s:function(e,t,i){\"use strict\";var s=i(\"08m3\");i.n(s).a},Btlj:function(e,t,i){},BzA1:function(e,t,i){\"use strict\";i.r(t);var s=i(\"a/5N\"),n={name:\"ImportInfo\",components:{},props:{list:Array},data:function(){return{}},computed:{showList:function(){return this.list.filter(function(e){return\"file\"!==e.formType})}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{getValueContent:function(e){if(\"map_address\"===e.formType)return e.value?e.value.detailAddress:\"\";if(\"structure\"===e.formType||\"user\"===e.formType||\"checkbox\"===e.formType){if(Object(s.a)(e.value)){var t={structure:\"name\",user:\"realname\",checkbox:\"\"}[e.formType];return e.value.map(function(e){return t?e[t]:e}).join(\"，\")}return\"\"}if(\"single_user\"===e.formType)return Object(s.c)(e.value)&&e.value.realname?e.value.realname:\"\";if(\"customer\"===e.formType||\"business\"===e.formType||\"contract\"===e.formType||\"contacts\"===e.formType||\"category\"===e.formType||\"statusName\"===e.formType||\"typeName\"===e.formType){var i={customer:\"customerName\",business:\"businessName\",contract:\"contractNum\",contacts:\"contactsName\",category:\"categoryName\",statusName:\"statusName\",typeName:\"typeName\"}[e.formType];return Object(s.a)(e.value)?e.value.length>0?e.value[0][i]:\"\":e.value?e.value[i]:\"\"}return e.value}}},a=(i(\"AVjW\"),i(\"KHd+\")),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"content\"},[i(\"div\",{staticClass:\"content-title\"},[e._v(\"基本信息\")]),e._v(\" \"),e._l(e.showList,function(t,s){return i(\"p\",{key:s,staticClass:\"detail-cell\"},[i(\"span\",{staticClass:\"detail-cell__label\"},[e._v(\"\\n      \"+e._s(t.name)+\"\\n    \")]),i(\"br\"),e._v(\" \"),i(\"span\",{staticClass:\"detail-cell__value\"},[e._v(\"\\n      \"+e._s(e.getValueContent(t))+\"\\n    \")])])})],2)},[],!1,null,\"74c3ac7c\",null);o.options.__file=\"ImportInfo.vue\";t.default=o.exports},C3Po:function(e,t,i){\"use strict\";i.r(t);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"8GhS\"),o=i(\"zsVz\"),l={name:\"TaskQuickAdd\",components:{XhUserCell:a.p},props:{params:Object},data:function(){return{sendLoading:!1,isUnfold:!1,sendContent:\"\",sendStopTime:\"\",mainUser:[]}},computed:{createMainUser:function(){return this.mainUser&&this.mainUser.length?this.mainUser[0]:null}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{inputFocus:function(){var e=this;this.$emit(\"focus\"),this.isUnfold=!0,this.$nextTick(function(){e.$refs.input.focus()})},selectMainUser:function(e){this.mainUser=e.value},send:function(){var e=this;if(this.sendContent.length){this.sendLoading=!0;var t={name:this.sendContent,stopTime:this.sendStopTime,mainUserId:this.createMainUser?this.createMainUser.userId:\"\"};this.params&&(t=n()({},t,this.params)),Object(o.e)(t).then(function(t){e.sendLoading=!1,e.$message.success(\"新建成功\"),e.resetSendData(),e.$emit(\"send\")}).catch(function(){e.sendLoading=!1})}else this.$message.error(\"请填写任务标题\")},resetSendData:function(){this.sendContent=\"\",this.sendStopTime=\"\",this.mainUser=[],this.isUnfold=!1},addClose:function(){this.isUnfold=!1}}},c=(i(\"5pSV\"),i(\"KHd+\")),r=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.sendLoading,expression:\"sendLoading\"}],staticClass:\"task-quick-add\",class:[\"add\",{unfold:e.isUnfold,\"is-close\":!e.isUnfold}]},[e.isUnfold?i(\"i\",{staticClass:\"wk wk-close\",on:{click:e.addClose}}):e._e(),e._v(\" \"),i(\"el-input\",{ref:\"input\",staticClass:\"input\",attrs:{maxlength:100,\"prefix-icon\":e.isUnfold?\"\":\"el-icon-plus\",placeholder:\"添加任务\"},on:{focus:e.inputFocus},model:{value:e.sendContent,callback:function(t){e.sendContent=t},expression:\"sendContent\"}}),e._v(\" \"),i(\"flexbox\",{staticClass:\"add-info\"},[i(\"el-date-picker\",{ref:\"endTime\",class:{\"no-time-top\":!e.sendStopTime},attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"\"},model:{value:e.sendStopTime,callback:function(t){e.sendStopTime=t},expression:\"sendStopTime\"}}),e._v(\" \"),i(\"xh-user-cell\",{attrs:{value:e.mainUser,radio:\"\",placement:\"top\"},on:{\"value-change\":e.selectMainUser}},[i(\"div\",{staticClass:\"select-user\",attrs:{slot:\"reference\"},slot:\"reference\"},[e.createMainUser?i(\"xr-avatar\",{attrs:{name:e.createMainUser.realname,size:24,src:e.createMainUser.img}}):i(\"i\",{staticClass:\"wk wk-persons add-info--person\"})],1)])],1),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.send,expression:\"send\"}],staticClass:\"send-btn\",attrs:{icon:\"wk wk-top\",type:\"primary\"}},[e._v(\"发布\")])],1)},[],!1,null,\"38430333\",null);r.options.__file=\"TaskQuickAdd.vue\";t.default=r.exports},\"E/pc\":function(e,t,i){\"use strict\";var s=i(\"fpBj\");i.n(s).a},FD7p:function(e,t,i){},\"G+h+\":function(e,t,i){\"use strict\";var s=i(\"M+GZ\");i.n(s).a},\"I+NK\":function(e,t,i){\"use strict\";var s=i(\"PWYh\");i.n(s).a},J4Uw:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"invoiceHeaderFields\",function(){return s}),i.d(t,\"invoiceFilterFields\",function(){return n});var s=[{label:\"发票申请编号\",width:\"120px\",prop:\"invoiceApplyNumber\"},{label:\"客户名称\",width:\"120px\",prop:\"customerName\"},{label:\"合同编号\",width:\"120px\",prop:\"contractNum\"},{label:\"合同金额\",width:\"90px\",prop:\"contractMoney\"},{label:\"开票金额（元）\",width:\"120px\",prop:\"invoiceMoney\"},{label:\"开票日期\",width:\"120px\",prop:\"invoiceDate\"},{label:\"实际开票日期\",width:\"120px\",prop:\"realInvoiceDate\"},{label:\"开票类型\",width:\"120px\",prop:\"invoiceType\"},{label:\"发票号码\",width:\"90px\",prop:\"invoiceNumber\"},{label:\"物流单号\",width:\"90px\",prop:\"logisticsNumber\"},{label:\"负责人\",width:\"90px\",prop:\"ownerUserName\"},{label:\"审核状态\",width:\"90px\",prop:\"checkStatus\"}],n=[{formType:\"text\",fieldName:\"invoiceNumber\",name:\"发票号码\"},{formType:\"date\",fieldName:\"realInvoiceDate\",name:\"实际开票日期\"},{formType:\"text\",fieldName:\"customerName\",name:\"客户姓名\"},{formType:\"text\",fieldName:\"logisticsNumber\",name:\"物流单号\"},{formType:\"checkStatus\",fieldName:\"invoiceStatus\",name:\"开票状态\",setting:[{name:\"未开票\",value:0},{name:\"已开票\",value:1}]},{formType:\"checkStatus\",fieldName:\"checkStatus\",name:\"审核状态\",setting:[{name:\"待审核\",value:0},{name:\"通过\",value:1},{name:\"拒绝\",value:2},{name:\"审核中\",value:3},{name:\"撤回\",value:4}]},{formType:\"user\",fieldName:\"ownerUserId\",name:\"负责人\"}]},JAjk:function(e,t,i){e.exports=i.p+\"static/img/contacts.83d4b7f.png\"},JCWM:function(e,t,i){\"use strict\";i.r(t);var s=i(\"7Dod\"),n=i(\"XJYT\"),a={name:\"PutPoolHandle\",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},id:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{selectId:\"\",list:[]}},computed:{},watch:{list:{handler:function(){this.selectId=this.list&&this.list.length>0?this.list[0].poolId:\"\"},immediate:!0},visible:function(e){e&&0===this.list.length&&this.getList()}},mounted:function(){},methods:{getList:function(){var e=this,t=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(s.u)().then(function(i){e.list=i.data||[],t&&t.close()}).catch(function(){t&&t.close()})},handleCancel:function(){this.$emit(\"update:visible\",!1)},handleConfirm:function(){var e=this;if(this.selectId){var t=n.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(s.F)({ids:this.selectionList.map(function(e){return e.customerId}),poolId:this.selectId}).then(function(i){e.$message({type:\"success\",message:\"操作成功\"}),t.close(),e.$emit(\"handle\",{type:\"put_seas\"}),e.handleCancel()}).catch(function(){t.close()})}}}},o=(i(\"jUvl\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"放入公海\",width:\"450px\"},on:{close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"公海：\")]),e._v(\" \"),i(\"el-select\",{model:{value:e.selectId,callback:function(t){e.selectId=t},expression:\"selectId\"}},e._l(e.list,function(e){return i(\"el-option\",{key:e.poolId,attrs:{label:e.poolName,value:e.poolId}})}))],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"7b1cec81\",null);l.options.__file=\"PutPoolHandle.vue\";t.default=l.exports},K4QM:function(e,t,i){e.exports=i.p+\"static/img/leads_not.d26c261.png\"},KOLf:function(e,t,i){},Klv4:function(e,t,i){\"use strict\";var s=i(\"lrb+\");i.n(s).a},\"L+lS\":function(e,t,i){e.exports=i.p+\"static/img/nearby_not.016fa6f.png\"},\"La+m\":function(e,t,i){},\"M+GZ\":function(e,t,i){},MTF5:function(e,t,i){},Nbko:function(e,t,i){\"use strict\";var s=i(\"La+m\");i.n(s).a},OKZ7:function(e,t,i){},PWYh:function(e,t,i){},QSP8:function(e,t,i){\"use strict\";var s=i(\"WWx0\");i.n(s).a},R1k5:function(e,t,i){e.exports=i.p+\"static/img/invoice.d717c31.png\"},Rq8O:function(e,t,i){},ShYU:function(e,t,i){e.exports=i.p+\"static/img/marketing.0612591.png\"},TAVA:function(e,t,i){\"use strict\";i.r(t);var s=i(\"EJiy\"),n=i.n(s),a=i(\"7Qib\"),o=i(\"8GhS\"),l=i(\"Woz+\"),c={name:\"Index\",components:{XhUserCell:o.p,XhProuctCate:o.j,VDistpicker:l.a,XhStructureCell:o.n},props:{dialogVisible:{type:Boolean,required:!0,default:!1},fieldList:{type:Array,required:!0,default:function(){return[]}},obj:{type:Object,required:!0,default:function(){return{}}},crmType:{type:String,default:\"\"},saveScene:{type:Boolean,default:!0}},data:function(){return{form:[],visible:!1,showErrors:!1,saveChecked:!1,saveDefault:!1,saveName:null}},computed:{infoParams:function(){return this.crmType?{m:\"crm\",c:this.crmType,a:\"index\"}:{}}},watch:{dialogVisible:{handler:function(e){e&&(this.form=Object(a.t)(this.obj.form),0==this.form.length&&this.form.push({fieldName:\"\",name:\"\",formType:\"\",condition:\"contains\",type:3,value:\"\",typeOption:[],statusOption:[],typeId:\"\",statusId:\"\",address:{state:\"\",city:\"\",area:\"\"}}),this.saveChecked=!1,this.saveDefault=!1,this.saveName=null),this.visible=this.dialogVisible},deep:!0,immediate:!0},form:function(){this.$nextTick(function(){var e=document.getElementById(\"filter-container\");e.scrollTop=e.scrollHeight})}},methods:{selectProvince:function(e,t){t.address.state=e.value},selectCity:function(e,t){t.address.city=e.value},selectArea:function(e,t){t.address.area=e.value},typeOptionsChange:function(e){if(e.typeId){var t=e.typeOption.find(function(t){return t.typeId===e.typeId});e.statusOption=t.statusList||[]}else e.statusOption=[];e.statusId=\"\"},arrayValueChange:function(e){e.value.length>0?(e.item.value=e.value,e.item.valueContent=e.valueContent):e.item.value=[]},selectChange:function(e,t){this.calConditionOptions(t.formType,t).forEach(function(i){i.value===e&&(t.type=i.type)})},showCalCondition:function(e){return\"date\"!=e&&\"datetime\"!=e&&\"business_type\"!=e&&\"category\"!=e&&\"map_address\"!=e},calConditionOptions:function(e,t){return\"checkStatus\"==e||\"dealStatus\"==e?[{value:\"is\",label:\"等于\",disabled:!1,type:1},{value:\"isNot\",label:\"不等于\",disabled:!1,type:2}]:\"user\"==e||\"structure\"==e?[{value:\"contains\",label:\"包含\",disabled:!1,type:3},{value:\"notContains\",label:\"不包含\",disabled:!1,type:4}]:\"select\"==e?[{value:\"in\",label:\"等于\",disabled:!1,type:1},{value:\"isNot\",label:\"不等于\",disabled:!1,type:2}]:\"checkbox\"==e?[{value:\"is\",label:\"等于\",disabled:!1,type:1},{value:\"contains\",label:\"包含\",disabled:!1,type:3}]:\"module\"==e||\"text\"==e||\"textarea\"==e?[{value:\"is\",label:\"等于\",disabled:!1,type:1},{value:\"isNot\",label:\"不等于\",disabled:!1,type:2},{value:\"contains\",label:\"包含\",disabled:!1,type:3},{value:\"notContains\",label:\"不包含\",disabled:!1,type:4}]:\"floatnumber\"==e||\"number\"==e?[{value:\"is\",label:\"等于\",disabled:!1,type:1},{value:\"isNot\",label:\"不等于\",disabled:!1,type:2},{value:\"contains\",label:\"包含\",disabled:!1,type:3},{value:\"notContains\",label:\"不包含\",disabled:!1,type:4},{value:\"isNull\",label:\"为空\",disabled:!1,type:5},{value:\"isNotNull\",label:\"不为空\",disabled:!1,type:6},{value:\"gt\",label:\"大于\",disabled:!1,type:7},{value:\"egt\",label:\"大于等于\",disabled:!1,type:8},{value:\"lt\",label:\"小于\",disabled:!1,type:9},{value:\"elt\",label:\"小于等于\",disabled:!1,type:10}]:\"category\"==e?[{value:\"is\",label:\"等于\",disabled:!1,type:1},{value:\"isnot\",label:\"不等于\",disabled:!1,type:2},{value:\"contains\",label:\"包含\",disabled:!1,type:3},{value:\"not_contain\",label:\"不包含\",disabled:!1,type:4}]:[{value:\"is\",label:\"等于\",disabled:!1,type:1},{value:\"isNot\",label:\"不等于\",disabled:!1,type:2},{value:\"contains\",label:\"包含\",disabled:!1,type:3},{value:\"notContains\",label:\"不包含\",disabled:!1,type:4},{value:\"startWith\",label:\"开始于\",disabled:!1,type:8},{value:\"endWith\",label:\"结束于\",disabled:!1,type:10},{value:\"isNull\",label:\"为空\",disabled:!1,type:5},{value:\"isNotNull\",label:\"不为空\",disabled:!1,type:6},{value:\"gt\",label:\"大于\",disabled:!1,type:7},{value:\"egt\",label:\"大于等于\",disabled:!1,type:8},{value:\"lt\",label:\"小于\",disabled:!1,type:9},{value:\"elt\",label:\"小于等于\",disabled:!1,type:10}]},fieldFocus:function(){this.$el.click()},fieldChange:function(e){var t=this.fieldList.find(function(t){return t.fieldName===e.fieldName});t&&(e.formType=t.formType,e.name=t.name,\"business_type\"==e.formType?(e.typeOption=t.setting,e.statusOption=[],e.typeId=\"\",e.statusId=\"\",e.value=\"\"):\"checkStatus\"==e.formType||\"dealStatus\"==e.formType?(e.setting=t.setting||[],e.value=\"\"):\"map_address\"==e.formType?e.address={state:\"\",city:\"\",area:\"\"}:\"date\"===e.formType||\"datetime\"===e.formType||\"user\"===e.formType||\"structure\"===e.formType||\"category\"===e.formType?e.value=[]:\"select\"==e.formType||\"checkbox\"===e.formType?(e.setting=t.setting||[],e.value=[]):e.value=\"\",\"checkbox\"==e.formType||\"checkStatus\"==e.formType||\"dealStatus\"==e.formType?(e.type=1,e.condition=\"is\"):\"user\"==e.formType||\"structure\"==e.formType?(e.condition=\"contains\",e.type=3):\"select\"==e.formType?(e.condition=\"in\",e.type=1):(e.condition=\"is\",e.type=1)),this.getError()},handleCancel:function(){this.$emit(\"update:dialogVisible\",!1)},getError:function(){this.showErrors=!1;for(var e=[],t=0;t<this.form.length;t++){var i=this.form[t];if(e.includes(i.fieldName)){this.showErrors=!0;break}e.push(i.fieldName)}},handleConfirm:function(){var e=this;if(this.showErrors)this.$message.error(\"筛选条件中有重复项！\");else if(!this.saveChecked||this.saveName&&\"\"!==this.saveName){for(var t=0;t<this.form.length;t++){var i=this.form[t];if(!i.fieldName||\"\"===i.fieldName)return void this.$message.error(\"筛选的字段名称不能为空！\");if(\"business_type\"==i.formType){if(!i.typeId&&!i.statusId)return void this.$message.error(\"筛选内容不能为空！\")}else if(\"map_address\"==i.formType){if(!i.address.state&&!i.address.city&&!i.address.area)return void this.$message.error(\"筛选内容不能为空！\")}else if(\"date\"==i.formType||\"datetime\"==i.formType||\"user\"==i.formType||\"structure\"==i.formType||\"category\"==i.formType||\"checkbox\"==i.formType){if((!i.value||0===i.value.length)&&\"isNull\"!=i.condition&&\"isNotNull\"!=i.condition)return void this.$message.error(\"筛选内容不能为空！\")}else if((\"\"===i.value||void 0===i.value||null===i.value)&&\"isNull\"!=i.condition&&\"isNotNull\"!=i.condition)return void this.$message.error(\"筛选内容不能为空\")}var s=[];this.form.forEach(function(t){if(\"datetime\"==t.formType||\"date\"==t.formType)s.push({formType:t.formType,name:t.fieldName,type:\"date\"==t.formType?11:12,values:t.value});else if(\"business_type\"==t.formType)s.push({formType:t.formType,name:t.statusId?\"statusId\":\"typeId\",type:1,values:t.statusId?[t.typeId,t.statusId]:[t.typeId]});else if(\"user\"==t.formType)s.push({type:t.type,values:[t.value[0].userId],formType:t.formType,name:t.fieldName});else if(\"structure\"==t.formType)s.push({type:t.type,values:[t.value[0].id],formType:t.formType,name:t.fieldName});else if(\"checkbox\"==t.formType)s.push({type:t.type,values:t.value,formType:t.formType,name:t.fieldName});else if(\"category\"==t.formType)s.push({type:1,values:[t.value[t.value.length-1]],formType:t.formType,name:t.fieldName});else if(\"select\"==t.formType){var i=t.value;\"string\"!=e.getSettingValueType(t.setting)&&(i=[t.value]),s.push({type:t.type,values:i,formType:t.formType,name:t.fieldName})}else if(\"map_address\"==t.formType){var n=\"\";for(var a in t.address)t.address[a]&&(n+=t.address[a]+\",\");s.push({values:[n],type:1,formType:t.formType,name:t.fieldName})}else s.push({type:t.type,values:[t.value],formType:t.formType,name:t.fieldName})});var n={obj:s,form:this.form,saveChecked:this.saveChecked,saveDefault:this.saveDefault,saveName:this.saveName};this.$emit(\"filter\",n)}else this.$message.error(\"场景名称不能为空！\")},handleAdd:function(){this.form.push({fieldName:\"\",condition:\"contains\",value:\"\",type:\"\",formType:\"\",setting:[],typeOption:[],statusOption:[],typeId:\"\",statusId:\"\"})},handleDelete:function(e){var t=this;this.$confirm(\"您确定要删除这一条数据吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.form.splice(e,1),t.getError()}).catch(function(){})},getSettingValueType:function(e){if(e&&e.length>0){var t=e[0];return void 0===t?\"undefined\":n()(t)}return[]}}},r=(i(\"Uan0\"),i(\"KHd+\")),u=Object(r.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{attrs:{visible:e.visible,\"close-on-click-modal\":!1,title:\"高级筛选\",width:\"900px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[i(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},[e._v(\"筛选条件\")]),e._v(\" \"),i(\"el-form\",{staticClass:\"filter-container\",attrs:{id:\"filter-container\"}},[i(\"el-form-item\",[e._l(e.form,function(t,s){return[i(\"el-row\",{key:s},[i(\"el-col\",{attrs:{span:8}},[i(\"el-select\",{attrs:{placeholder:\"请选择要筛选的字段名\"},on:{change:function(i){e.fieldChange(t)},focus:e.fieldFocus},model:{value:t.fieldName,callback:function(i){e.$set(t,\"fieldName\",i)},expression:\"formItem.fieldName\"}},e._l(e.fieldList,function(e){return i(\"el-option\",{key:e.fieldName,attrs:{label:e.name,value:e.fieldName}})}))],1),e._v(\" \"),e.showCalCondition(t.formType)?i(\"el-col\",{attrs:{span:1}},[e._v(\" \")]):e._e(),e._v(\" \"),e.showCalCondition(t.formType)?i(\"el-col\",{attrs:{span:4}},[i(\"el-select\",{attrs:{placeholder:\"请选择范围\"},on:{change:function(i){e.selectChange(i,t)}},model:{value:t.condition,callback:function(i){e.$set(t,\"condition\",i)},expression:\"formItem.condition\"}},e._l(e.calConditionOptions(t.formType,t),function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(\" \"),\"business_type\"==t.formType?i(\"el-col\",{attrs:{span:1}},[e._v(\" \")]):e._e(),e._v(\" \"),\"business_type\"==t.formType?i(\"el-col\",{attrs:{span:4}},[i(\"el-select\",{on:{change:function(i){e.typeOptionsChange(t)}},model:{value:t.typeId,callback:function(i){e.$set(t,\"typeId\",i)},expression:\"formItem.typeId\"}},e._l(t.typeOption,function(e){return i(\"el-option\",{key:e.typeId,attrs:{label:e.name,value:e.typeId}})}))],1):e._e(),e._v(\" \"),i(\"el-col\",{attrs:{span:1}},[e._v(\" \")]),e._v(\" \"),i(\"el-col\",{attrs:{span:\"datetime\"===t.formType||\"date\"===t.formType||\"map_address\"===t.formType?13:8}},[\"checkStatus\"===t.formType||\"dealStatus\"===t.formType||\"select\"===t.formType&&\"string\"!=e.getSettingValueType(t.setting)?i(\"el-select\",{attrs:{placeholder:\"请选择筛选条件\"},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"formItem.value\"}},e._l(t.setting,function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.name,value:e.value}})})):\"select\"===t.formType?i(\"el-select\",{attrs:{multiple:\"\",placeholder:\"请选择筛选条件\"},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"formItem.value\"}},e._l(t.setting,function(e){return i(\"el-option\",{key:e,attrs:{label:e,value:e}})})):\"checkbox\"===t.formType?i(\"el-select\",{attrs:{multiple:\"\",placeholder:\"请选择筛选条件\"},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"formItem.value\"}},e._l(t.setting,function(e){return i(\"el-option\",{key:e,attrs:{label:e,value:e}})})):\"date\"===t.formType||\"datetime\"===t.formType?i(\"el-date-picker\",{staticStyle:{padding:\"0px 10px\"},attrs:{\"value-format\":\"date\"===t.formType?\"yyyy-MM-dd\":\"yyyy-MM-dd HH:mm:ss\",type:\"date\"===t.formType?\"daterange\":\"datetimerange\",\"range-separator\":\"-\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"formItem.value\"}}):\"business_type\"===t.formType?i(\"el-select\",{model:{value:t.statusId,callback:function(i){e.$set(t,\"statusId\",i)},expression:\"formItem.statusId\"}},e._l(t.statusOption,function(e){return i(\"el-option\",{key:e.statusId,attrs:{label:e.name,value:e.statusId}})})):\"user\"===t.formType?i(\"xh-user-cell\",{attrs:{item:t,\"info-params\":e.infoParams,value:t.value},on:{\"value-change\":e.arrayValueChange}}):\"structure\"===t.formType?i(\"xh-structure-cell\",{attrs:{item:t,value:t.value},on:{\"value-change\":e.arrayValueChange}}):\"category\"===t.formType?i(\"xh-prouct-cate\",{attrs:{item:t,value:t.value},on:{\"value-change\":e.arrayValueChange}}):\"map_address\"===t.formType?i(\"v-distpicker\",{attrs:{province:t.address.state,city:t.address.city,area:t.address.area},on:{province:function(i){e.selectProvince(i,t)},city:function(i){e.selectCity(i,t)},area:function(i){e.selectArea(i,t)}}}):i(\"el-input\",{attrs:{placeholder:\"请输入筛选条件\"},model:{value:t.value,callback:function(i){e.$set(t,\"value\",i)},expression:\"formItem.value\"}})],1),e._v(\" \"),i(\"el-col\",{staticClass:\"delete\",attrs:{span:1}},[i(\"i\",{staticClass:\"el-icon-error delete-btn\",on:{click:function(t){e.handleDelete(s)}}})])],1)]})],2)],1),e._v(\" \"),i(\"p\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showErrors,expression:\"showErrors\"}],staticClass:\"el-icon-warning warning-info\"},[i(\"span\",{staticClass:\"desc\"},[e._v(\"筛选条件中有重复项！\")])]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"text\"},on:{click:e.handleAdd}},[e._v(\"+ 添加筛选条件\")]),e._v(\" \"),e.saveScene?i(\"div\",{staticClass:\"save\"},[i(\"el-checkbox\",{model:{value:e.saveChecked,callback:function(t){e.saveChecked=t},expression:\"saveChecked\"}},[e._v(\"保存为场景\")]),e._v(\" \"),i(\"el-input\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.saveChecked,expression:\"saveChecked\"}],staticClass:\"name\",attrs:{maxlength:10,placeholder:\"请输入场景名称，最多10个字符\"},model:{value:e.saveName,callback:function(t){e.saveName=\"string\"==typeof t?t.trim():t},expression:\"saveName\"}}),e._v(\" \"),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.saveChecked,expression:\"saveChecked\"}],staticClass:\"save-setting\"},[i(\"el-checkbox\",{model:{value:e.saveDefault,callback:function(t){e.saveDefault=t},expression:\"saveDefault\"}},[e._v(\"设置为默认\")])],1)],1):e._e(),e._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:e.handleCancel}},[e._v(\"取 消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.handleConfirm}},[e._v(\"确 定\")])],1)],1)},[],!1,null,\"17304d98\",null);u.options.__file=\"index.vue\";t.default=u.exports},U4MQ:function(e,t,i){e.exports=i.p+\"static/img/contract.65548f9.png\"},Uan0:function(e,t,i){\"use strict\";var s=i(\"i6id\");i.n(s).a},Vm8M:function(e,t,i){\"use strict\";var s=i(\"7Qib\"),n={name:\"MapView\",components:{},props:{title:{type:String,default:\"\"},lat:{type:[String,Number],default:0},lng:{type:[String,Number],default:0}},data:function(){return{}},computed:{},mounted:function(){var e=this;this.$el.style.zIndex=Object(s.q)(),document.body.appendChild(this.$el),Object(s.l)().then(function(){var t=new BMap.Map(\"choicemap\",{enableMapClick:!1}),i=new BMap.Point(parseFloat(e.lng),parseFloat(e.lat));t.centerAndZoom(i,18),t.enableScrollWheelZoom();var s=new BMap.Marker(i);t.addOverlay(s);var n=new BMap.InfoWindow(e.title);s.addEventListener(\"click\",function(){t.openInfoWindow(n,i)})})},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{hiddenView:function(){this.$emit(\"hidden\")}}},a=(i(\"I+NK\"),i(\"KHd+\")),o=Object(a.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"map-view\"},[t(\"div\",{attrs:{id:\"choicemap\"}}),this._v(\" \"),t(\"i\",{staticClass:\"el-icon-close map-close\",on:{click:this.hiddenView}})])},[],!1,null,\"33a9f6bf\",null);o.options.__file=\"MapView.vue\";t.a=o.exports},Vvln:function(e,t,i){\"use strict\";i.r(t);var s=i(\"GQeE\"),n=i.n(s),a=i(\"4XAY\"),o=i(\"ZoMv\"),l=i(\"Ra/C\"),c=i(\"dAOq\"),r=i(\"J4Uw\");t.default={components:{},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-300,list:[],fieldList:[],currentPage:1,pageSize:15,pageSizes:[15,30,45,60],total:0}},mixins:[c.a],computed:{showOptions:function(){return\"putInPoolRemind\"!=this.infoType&&\"returnVisitRemind\"!=this.infoType}},mounted:function(){var e=this;this.$bus.on(\"message-scroll\",function(t){e.tableHeight=t}),this.$bus.on(\"examine-handle-bus\",function(){e.getList()}),window.onresize=function(){e.updateTableHeight()}},methods:{handleRowClick:function(e,t,i){\"leads\"===this.crmType?\"leadsName\"===t.property?(this.rowID=e.leadsId,this.rowType=\"leads\",this.showDview=!0):this.showDview=!1:\"customer\"===this.crmType?\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):this.showDview=!1:\"contacts\"===this.crmType?\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):\"name\"===t.property?(this.rowID=e.contactsId,this.rowType=\"contacts\",this.showDview=!0):this.showDview=!1:\"business\"===this.crmType?\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===t.property?(this.rowID=e.businessId,this.rowType=\"business\",this.showDview=!0):this.showDview=!1:\"contract\"===this.crmType?\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===t.property?(this.rowID=e.businessId,this.rowType=\"business\",this.showDview=!0):\"contactsName\"===t.property?(this.rowID=e.contactsId,this.rowType=\"contacts\",this.showDview=!0):\"num\"===t.property?(this.rowID=e.contractId,this.rowType=\"contract\",this.showDview=!0):this.showDview=!1:\"product\"===this.crmType?\"name\"===t.property?(this.rowID=e.productId,this.showDview=!0):this.showDview=!1:\"receivables\"===this.crmType?\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):\"contractNum\"===t.property?(this.rowID=e.contractId,this.rowType=\"contract\",this.showDview=!0):\"number\"===t.property?(this.rowID=e.receivablesId,this.rowType=\"receivables\",this.showDview=!0):this.showDview=!1:\"receivables_plan\"===this.crmType?\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):\"contractNum\"===t.property||\"contractName\"===t.property?(this.rowID=e.contractId,this.rowType=\"contract\",this.showDview=!0):this.showDview=!1:\"invoice\"===this.crmType&&(\"customerName\"===t.property?(this.rowID=e.customerId,this.rowType=\"customer\",this.showDview=!0):\"contractNum\"===t.property?(this.rowID=e.contractId,this.rowType=\"contract\",this.showDview=!0):\"invoiceApplyNumber\"===t.property?(this.rowID=e.invoiceId,this.rowType=\"invoice\",this.showDview=!0):this.showDview=!1)},getList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=t;var i=this.getIndexRequest(),s={page:this.currentPage,limit:this.pageSize};this.showSubType&&(s.isSub=this.isSubType),this.showOptions&&(s.type=this.optionsType);var a=this.filterObj.obj;a&&n()(a).length>0&&(s.data=a),i(s).then(function(t){e.list=t.data.list,e.total=t.data.totalRow,e.loading=!1}).catch(function(){e.loading=!1})},getIndexRequest:function(){return{todayLeads:l.n,todayCustomer:l.m,todayBusiness:l.l,followLeads:l.k,followCustomer:l.j,checkContract:l.g,checkReceivables:l.i,remindReceivablesPlan:l.e,endContract:l.b,putInPoolRemind:l.d,returnVisitRemind:l.f,checkInvoice:l.h}[this.infoType]},getFieldList:function(){var e=this;if(\"receivables_plan\"==this.crmType||\"invoice\"==this.crmType){var t=[];return\"receivables_plan\"==this.crmType?(t=[{fieldName:\"num\",formType:\"text\",name:\"期数\"},{fieldName:\"customerName\",formType:\"customerName\",name:\"客户名称\"},{fieldName:\"contractNum\",formType:\"contractNum\",name:\"合同编号\"},{fieldName:\"money\",formType:\"text\",name:\"计划回款金额\"},{fieldName:\"returnDate\",formType:\"text\",name:\"计划回款日期\"},{fieldName:\"returnType\",formType:\"text\",name:\"计划回款方式\"},{fieldName:\"remind\",formType:\"text\",name:\"提前几日提醒\"},{fieldName:\"remark\",formType:\"text\",name:\"备注\"}],this.handelFieldList(t)):\"invoice\"==this.crmType&&(this.fieldList=r.invoiceHeaderFields),void this.getList()}Object(a.A)({label:o.default[this.crmType]}).then(function(t){e.handelFieldList(t.data),e.getList()}).catch(function(){e.loading=!1})},handelFieldList:function(e){for(var t=0;t<e.length;t++){var i=e[t],s=0;s=i.width?i.width:i.name&&i.name.length<=6?15*i.name.length+45:140,this.fieldList.push({prop:i.fieldName,label:i.name,width:s})}},fieldFormatter:function(e,t){return\"invoiceType\"==t.property?{1:\"增值税专用发票\",2:\"增值税普通发票\",3:\"国税通用机打发票\",4:\"地税通用机打发票\",5:\"收据\"}[e[t.property]]:\"\"===e[t.property]||null===e[t.property]?\"--\":e[t.property]},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getStatusStyle:function(e){return{backgroundColor:this.getStatusColor(e)}},updateTableHeight:function(){var e=document.documentElement.clientHeight,t=n()(this.filterObj).length>0?360:300;this.tableHeight=e-t}},beforeDestroy:function(){this.$bus.off(\"message-scroll\"),this.$bus.off(\"examine-handle-bus\"),document.getElementById(\"crm-table\")&&document.getElementById(\"crm-table\").removeEventListener(\"click\",function(e){e.stopPropagation()})}}},WGjG:function(e,t,i){\"use strict\";i.r(t);var s=i(\"8GhS\"),n=i(\"7Dod\"),a={name:\"AllocHandle\",components:{XhUserCell:s.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},poolId:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,visible:!1,usersList:[]}},computed:{},watch:{dialogVisible:{handler:function(e){this.visible=e,e||(this.usersList=[])},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(e){this.usersList=e.value},handleConfirm:function(){var e=this;if(0===this.usersList.length)this.$message.error(\"请选择负责人\");else{var t={userId:this.usersList[0].userId,poolId:this.poolId};t.ids=this.selectionList.map(function(t){return t[e.crmType+\"Id\"]}),this.loading=!0,Object(n.d)(t).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.$emit(\"handle\",{type:\"alloc\"}),e.handleCancel()}).catch(function(){e.loading=!1})}}}},o=(i(\"Klv4\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量分配\",width:\"400px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[e._v(\"请选择：\")]),e._v(\" \"),i(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:e.usersList},on:{\"value-change\":e.userChage}})],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"c3449ef0\",null);l.options.__file=\"AllocHandle.vue\";t.default=l.exports},WWx0:function(e,t,i){},ZX9L:function(e,t,i){\"use strict\";var s={name:\"TimeTypeSelect\",props:{defaultType:[String,Object],width:{type:Number,default:200},options:{type:Array,default:function(){return[{label:\"今天\",value:\"today\"},{label:\"昨天\",value:\"yesterday\"},{label:\"本周\",value:\"week\"},{label:\"上周\",value:\"lastWeek\"},{label:\"本月\",value:\"month\"},{label:\"上月\",value:\"lastMonth\"},{label:\"本季度\",value:\"quarter\"},{label:\"上季度\",value:\"lastQuarter\"},{label:\"本年\",value:\"year\"},{label:\"去年\",value:\"lastYear\"}]}}},data:function(){return{selectType:{label:\"本年\",value:\"year\"},showTypePopover:!1,showCustomContent:!1,sureCustomContent:!1,startTime:\"\",endTime:\"\"}},computed:{typeShowValue:function(){return this.sureCustomContent?this.startTime||this.endTime?(this.startTime||\"\")+\"-\"+(this.endTime||\"\"):\"\":this.selectType.label}},watch:{defaultType:function(){this.selectType.value!=this.defaultType&&(this.selectType=this.getDefaultTypeValue(this.defaultType))}},mounted:function(){void 0!==this.defaultType?\"string\"==typeof this.defaultType?this.selectType=this.getDefaultTypeValue(this.defaultType):this.defaultType.label?this.selectType=this.defaultType:\"default\"==this.defaultType.type?this.selectType=this.getDefaultTypeValue(this.defaultType.value):\"custom\"==this.defaultType.type&&(this.sureCustomContent=!0,this.showCustomContent=!0,this.startTime=this.defaultType.startTime,this.endTime=this.defaultType.endTime):this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},methods:{getDefaultTypeValue:function(e){for(var t=0;t<this.options.length;t++){var i=this.options[t];if(i.value==e)return i}return{label:\"本年\",value:\"year\"}},typeSelectClick:function(e){this.showTypePopover=!1,this.sureCustomContent=!1,this.showCustomContent=!1,this.selectType=e,this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},customSureClick:function(){this.startTime&&this.endTime&&(this.sureCustomContent=!0,this.showTypePopover=!1,this.$emit(\"change\",{type:\"custom\",startTime:this.startTime,endTime:this.endTime}))}}},n=(i(\"77fj\"),i(\"KHd+\")),a=Object(n.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-popover\",{staticClass:\"time-type-select\",attrs:{width:e.width,placement:\"bottom\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:e.showTypePopover,callback:function(t){e.showTypePopover=t},expression:\"showTypePopover\"}},[i(\"div\",{staticClass:\"type-popper\"},[i(\"div\",{staticClass:\"type-content\"},[e._l(e.options,function(t,s){return i(\"div\",{key:s,staticClass:\"type-content-item\",class:{selected:e.selectType.value==t.value&&!e.showCustomContent},on:{click:function(i){e.typeSelectClick(t)}}},[i(\"div\",{staticClass:\"mark\"}),e._v(e._s(t.label)+\"\\n      \")])}),e._v(\" \"),i(\"div\",{staticClass:\"type-content-item\",class:{selected:e.showCustomContent},on:{click:function(t){e.showCustomContent=!0}}},[i(\"div\",{staticClass:\"mark\"}),e._v(\"自定义\\n      \")])],2),e._v(\" \"),e.showCustomContent?i(\"div\",{staticClass:\"type-content-custom\"},[i(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:\"startTime\"}}),e._v(\" \"),i(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:\"endTime\"}}),e._v(\" \"),i(\"el-button\",{on:{click:e.customSureClick}},[e._v(\"确定\")])],1):e._e()]),e._v(\" \"),i(\"el-input\",{staticClass:\"type-select\",style:{width:e.width+\"px\"},attrs:{slot:\"reference\",readonly:!0},slot:\"reference\",model:{value:e.typeShowValue,callback:function(t){e.typeShowValue=t},expression:\"typeShowValue\"}},[i(\"i\",{class:[\"el-icon-arrow-up\",{\"is-reverse\":e.showTypePopover}],attrs:{slot:\"suffix\"},slot:\"suffix\"})])],1)},[],!1,null,\"20503202\",null);a.options.__file=\"index.vue\";t.a=a.exports},aKrz:function(e,t,i){e.exports=i.p+\"static/img/expense-examines.29e9174.png\"},bok9:function(e,t,i){e.exports=i.p+\"static/img/receivables.29e9174.png\"},cBfe:function(e,t,i){},cLla:function(e,t,i){e.exports=i.p+\"static/img/customer_not.7d40ec4.png\"},dAOq:function(e,t,i){\"use strict\";t.a={methods:{getStatusColor:function(e){return 0==e?\"#ffc539\":1==e?\"#20b559\":2==e?\"#f95a5a\":3==e?\"#398dff\":4==e?\"#999\":5==e?\"#d9d9d9\":6==e?\"#2362FB\":8==e?\"#bfbfbf\":void 0},getStatusName:function(e){return 0==e?\"待审核\":1==e?\"通过\":2==e?\"拒绝\":3==e?\"审核中\":4==e?\"撤回\":5==e?\"未提交\":6==e?\"创建\":8==e?\"已作废\":\"\"},getStatusIcon:function(e){return 0==e?\"wk wk-time\":1==e?\"wk wk-success\":2==e?\"wk wk-close\":3==e?\"wk wk-time\":4==e?\"wk wk-reset\":5==e?\"wk wk-time\":6==e?\"wk wk-l-plus\":8==e?\"wk wk-invalid\":\"\"},getXhStatusList:function(){return[{label:\"待审核\",value:0},{label:\"通过\",value:1},{label:\"拒绝\",value:2},{label:\"审核中\",value:3},{label:\"撤回\",value:4}]},getStatusImageIcon:function(e){return 0==e||3==e||5==e?i(\"6pZM\"):1==e?i(\"y4JV\"):2==e?i(\"migV\"):4==e?i(\"+xXq\"):6==e?i(\"wu/m\"):\"\"}}}},dTTw:function(e,t,i){e.exports=i.p+\"static/img/business.66d7980.png\"},eOwn:function(e,t,i){\"use strict\";i.r(t);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"7Dod\"),o=i(\"6iAj\"),l=i(\"4XAY\"),c=i(\"giPm\"),r=i(\"O8VQ\"),u=i(\"/G0b\"),d=i(\"8OTK\"),p=i(\"C3Po\"),h=i(\"ZoMv\"),m=i(\"7Qib\"),f=i(\"Z+Ht\"),v=i(\"vvxI\"),y=i(\"ZX9L\"),b=i(\"ehos\"),g=i(\"L2JU\"),T={name:\"Activity\",components:{LogAdd:c.default,LogCell:r.default,CRMAllCreate:d.default,TaskQuickAdd:p.default,TimeTypeSelect:y.a,LogEditDialog:u.default,CRMFullScreenDetail:function(){return Promise.all([i.e(\"chunk-66f9\"),i.e(\"chunk-63bb\"),i.e(\"chunk-7029\"),i.e(\"chunk-0aaf\"),i.e(\"chunk-24c6\")]).then(i.bind(null,\"3z7q\"))}},mixins:[f.a,v.default],props:{handle:{type:Array,default:function(){return[]}},id:[String,Number],contactsId:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},typeList:{type:Array,default:function(){return[]}},detail:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,filterValue:{},timeOptions:[{label:\"全部\",value:\"\"},{label:\"最近7天\",value:\"7\"},{label:\"最近30天\",value:\"30\"},{label:\"最近60天\",value:\"60\"}],contacts:[],followTypes:[],handleType:\"\",activityType:{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},list:[],noMore:!1,page:1,isCRMCreate:!1,createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},createCRMType:\"\",isTaskCreate:!1,showFullDetail:!1,relationID:\"\",relationCrmType:\"\",scrollKey:Date.now(),logEditData:null,logEditPosition:{seciton:0,index:0},logEditDialogVisible:!1}},computed:n()({},Object(g.b)([\"crm\"]),{canCreateFollowRecord:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.save},showRelate:function(){return\"customer\"==this.crmType},scrollDisabled:function(){return this.loading||this.noMore},taskParams:function(){var e={};return e[this.crmType+\"Ids\"]=this.id,e}}),watch:{id:function(){this.initInfo(),this.refreshLogList()}},created:function(){this.debouncedRefreshLogList=Object(b.debounce)(300,this.refreshLogList),this.initInfo()},methods:{getLogTypeList:function(){var e=this;Object(o.s)().then(function(t){e.followTypes=t.data.map(function(e){return{value:e,label:e}})}).catch(function(){})},getContactsList:function(){var e=this;Object(a.H)({customerId:this.id}).then(function(t){e.contacts=t.data.list}).catch(function(){})},sendLog:function(e){var t=this;if(e.content){var i={};i.activityType=h.default[this.crmType],i.activityTypeId=e.id,i.content=e.content,i.category=e.followType;var s=e.business.map(function(e){return e.businessId});i.batchId=e.batchId,i.businessIds=s.join(\",\"),i.contactsIds=e.contactsId,i.nextTime=e.nextTime||\"\",i.isEvent=0,this.sendLoading=!0,Object(l.a)(i).then(function(e){t.sendLoading=!1,t.$message.success(\"发布成功\"),t.$refs.logAdd&&t.$refs.logAdd.resetInfo(),t.refreshLogList()}).catch(function(){t.sendLoading=!1})}else this.$message.error(\"请输入跟进内容\")},handleClick:function(e){var t=this;if(this.handleType==e?this.handleType=\"\":this.handleType=e,\"log\"==e)this.isTaskCreate=!1,this.$nextTick(function(){t.$refs.logAdd&&(t.$refs.logAdd.isUnfold=t.handleType==e)});else if(\"task\"==e)this.isTaskCreate=!0,this.$nextTick(function(){t.$refs.taskAdd.inputFocus()});else{this.isTaskCreate=!1;var i={type:\"relative\",crmType:this.crmType,data:{}};\"contacts\"==this.crmType?(i.data.customer=Object(m.t)(this.detail),\"business\"==e&&(i.relativeData={contactsId:this.detail.contactsId})):\"customer\"==this.crmType?i.data.customer=Object(m.t)(this.detail):\"business\"==this.crmType?(i.data.customer=Object(m.t)(this.detail),i.data.business=Object(m.t)(this.detail),\"contacts\"==e&&(i.relativeData={businessId:this.detail.businessId})):\"contract\"==this.crmType&&(i.data.customer=Object(m.t)(this.detail),i.data.contract=Object(m.t)(this.detail)),this.createActionInfo=i,this.createCRMType=e,this.isCRMCreate=!0}},initInfo:function(){var e=this;this.$nextTick(function(){e.$refs.logAdd&&e.$refs.logAdd.resetInfo(),e.$refs.taskAdd&&e.$refs.taskAdd.resetSendData()}),this.filterValue={search:\"\",timeLine:{label:\"全部\",value:\"\"}},this.getLogTypeList(),this.showRelate&&this.getContactsList()},refreshLogList:function(){this.page=1,this.noMore=!1,this.list=[],this.scrollKey=Date.now()},handleSelectClick:function(e){this.activityType=e,this.refreshLogList()},timeTypeChange:function(e){this.filterValue.timeLine=e,this.refreshLogList()},getLogList:function(){var e=this;this.loading=!0;var t={page:this.page,crmType:h.default[this.crmType],activityType:this.activityType.command,activityTypeId:this.id};this.filterValue.search&&(t.search=this.filterValue.search),this.filterValue.timeLine.type&&(\"custom\"===this.filterValue.timeLine.type?(t.startDate=this.filterValue.timeLine.startTime.replace(/\\./g,\"-\"),t.endDate=this.filterValue.timeLine.endTime.replace(/\\./g,\"-\")):t.intervalDay=this.filterValue.timeLine.value||\"\"),Object(l.c)(t).then(function(t){if(e.loading=!1,!e.noMore)if(e.page++,e.list.length){var i=e.list[e.list.length-1];t.data.time&&t.data.list.length&&i.time!=t.data.time&&e.list.push(t.data)}else t.data.time&&t.data.list.length&&e.list.push(t.data);e.noMore=t.data.lastPage}).catch(function(){e.noMore=!0,e.loading=!1})},createCRMSuccess:function(){this.handleType=\"\",this.refreshLogList()},createCRMClose:function(){this.isCRMCreate=!1,this.handleType=\"\"},checkCRMDetail:function(e,t){this.relationID=t,this.relationCrmType=e,this.showFullDetail=!0},getActivityIcon:function(e){return this.getXrIcon(this.getActivityType(e))},getActivityTypeColor:function(e){return this.getXrIconColor(this.getActivityType(e))},logCellDelete:function(e,t,i){this.list[i].list.splice(t,1),0==this.list[i].list.length&&this.list.splice(i,1),this.scrollKey=Date.now()},logCellEdit:function(e,t,i){this.logEditData=e,this.logEditPosition={seciton:i,index:t},this.logEditDialogVisible=!0},logEditSave:function(e){this.logEditPosition.seciton>=0&&this.logEditPosition.index>=0&&this.list[this.logEditPosition.seciton].list.splice(this.logEditPosition.index,1,e)}}},w=(i(\"QSP8\"),i(\"KHd+\")),_=Object(w.a)(T,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:e.getLogList,expression:\"getLogList\"}],key:e.scrollKey,staticClass:\"main\",attrs:{\"infinite-scroll-distance\":\"100\",\"infinite-scroll-disabled\":\"scrollDisabled\"}},[i(\"div\",[!e.isSeas&&e.handle&&e.handle.length?i(\"div\",{staticClass:\"main-handle\"},e._l(e.handle,function(t,s){return i(\"el-button\",{key:s,class:{\"is-select\":e.handleType===t.type},attrs:{type:\"primary\",icon:\"wk wk-add\"},on:{click:function(i){e.handleClick(t.type)}}},[e._v(\"\\n        \"+e._s(t.label)+\"\\n      \")])})):e._e(),e._v(\" \"),!e.isSeas&&e.handle&&e.handle.length?[!e.isTaskCreate&&e.canCreateFollowRecord?i(\"log-add\",{ref:\"logAdd\",staticClass:\"log-add\",attrs:{id:e.id,\"show-business\":e.showRelate,\"show-contacts\":e.showRelate,contacts:e.contacts,\"contacts-id\":e.contactsId,\"follow-types\":e.followTypes,\"crm-type\":e.crmType},on:{send:e.sendLog,focus:function(t){e.handleType=\"log\"},close:function(t){e.handleClick(e.handleType)}}}):i(\"task-quick-add\",{ref:\"taskAdd\",staticClass:\"task-quick-add\",attrs:{params:e.taskParams},on:{focus:function(t){e.handleType=\"task\"},send:e.refreshLogList}})]:e._e(),e._v(\" \"),i(\"div\",{staticClass:\"log\",class:{\"is-top\":e.handle&&0==e.handle.length}},[i(\"flexbox\",{staticClass:\"log__header\",attrs:{justify:\"flex-end\"}},[i(\"el-input\",{attrs:{placeholder:\"关键字搜索\",\"prefix-icon\":\"el-icon-search\"},on:{input:e.debouncedRefreshLogList},model:{value:e.filterValue.search,callback:function(t){e.$set(e.filterValue,\"search\",t)},expression:\"filterValue.search\"}}),e._v(\" \"),i(\"time-type-select\",{attrs:{width:190,options:e.timeOptions,\"default-type\":e.filterValue.timeLine},on:{change:e.timeTypeChange}}),e._v(\" \"),e.typeList.length>1?i(\"el-dropdown\",{attrs:{trigger:\"click\"},on:{command:e.handleSelectClick}},[i(\"span\",{staticClass:\"el-dropdown-link\"},[i(\"i\",{class:[\"wk\",\"dropdown-icon\",\"wk-\"+e.activityType.icon],style:{backgroundColor:e.activityType.color}}),e._v(e._s(e.activityType.label)),i(\"i\",{staticClass:\"el-icon-arrow-down el-icon--right\"})]),e._v(\" \"),i(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},e._l(e.typeList,function(t,s){return i(\"el-dropdown-item\",{key:s,attrs:{command:t}},[i(\"i\",{class:[\"wk\",\"dropdown-icon\",\"wk-\"+t.icon],style:{backgroundColor:t.color}}),e._v(e._s(t.label))])}))],1):e._e()],1),e._v(\" \"),e._l(e.list,function(t,s){return i(\"div\",{key:s,staticClass:\"log-section\"},[i(\"div\",{staticClass:\"log-section__title\"},[i(\"span\",{staticClass:\"section-title\"},[i(\"span\",{staticClass:\"section-title__time\"},[e._v(e._s(t.time))])])]),e._v(\" \"),e._l(t.list,function(n,a){return[1==n.type?i(\"div\",{key:a,staticClass:\"log-cell\",class:{\"only-one\":1==t.list.length}},[i(\"log-cell\",{attrs:{item:n,section:s,index:a,\"can-delete\":!e.isSeas},on:{\"crm-detail\":e.checkCRMDetail,delete:e.logCellDelete,edit:e.logCellEdit}}),e._v(\" \"),i(\"i\",{staticClass:\"wk wk-message log-cell__mark\"})],1):i(\"div\",{key:a,staticClass:\"log-cell activity-cell\",class:{\"only-one\":1==t.list.length}},[2==n.type?i(\"div\",{staticClass:\"activity-cell\"},[i(\"span\",{staticClass:\"activity-cell__label\"},[e._v(e._s(n.createTime)+\" \"+e._s(n.realname)+\"创建了\"+e._s(e.getActivityTypeName(n.activityType))+\"：\")]),i(\"span\",{staticClass:\"activity-cell__content\",on:{click:function(t){e.checkCRMDetail(e.getActivityType(n.activityType),n.activityTypeId)}}},[e._v(e._s(n.activityTypeName||\"查看详情\"))])]):3==n.type?i(\"div\",{staticClass:\"activity-cell\"},[i(\"span\",{staticClass:\"activity-cell__label\"},[e._v(e._s(n.createTime)+\" \"+e._s(n.realname)+\"将商机：\")]),e._v(\" \"),i(\"span\",{staticClass:\"activity-cell__content\",on:{click:function(t){e.checkCRMDetail(\"business\",n.activityTypeId)}}},[e._v(e._s(n.activityTypeName))]),e._v(\" \"),i(\"span\",[e._v(e._s(\" 阶段变为 \"+n.content))])]):4==n.type?i(\"log-cell\",{attrs:{item:n,section:s,index:a,\"can-delete\":\"\"},on:{\"crm-detail\":e.checkCRMDetail,delete:e.logCellDelete}}):e._e(),e._v(\" \"),i(\"i\",{staticClass:\"log-cell__mark\",class:e.getActivityIcon(n.activityType),staticStyle:{\"background-color\":\"#FB9323\"},style:{backgroundColor:e.getActivityTypeColor(n.activityType)}})],1)]})],2)}),e._v(\" \"),e.loading?i(\"p\",{staticClass:\"scroll-bottom-tips\"},[e._v(\"加载中...\")]):e._e(),e._v(\" \"),e.noMore?i(\"p\",{staticClass:\"scroll-bottom-tips\"},[e._v(\"没有更多了\")]):e._e()],2)],2),e._v(\" \"),e.isCRMCreate?i(\"c-r-m-all-create\",{attrs:{\"crm-type\":e.createCRMType,action:e.createActionInfo},on:{\"save-success\":e.createCRMSuccess,close:e.createCRMClose}}):e._e(),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,\"crm-type\":e.relationCrmType,id:e.relationID},on:{\"update:visible\":function(t){e.showFullDetail=t}}}),e._v(\" \"),i(\"log-edit-dialog\",{attrs:{visible:e.logEditDialogVisible,data:e.logEditData},on:{\"update:visible\":function(t){e.logEditDialogVisible=t},save:e.logEditSave}})],1)},[],!1,null,\"7955f64b\",null);_.options.__file=\"index.vue\";t.default=_.exports},fpBj:function(e,t,i){},fpnN:function(e,t,i){\"use strict\";var s=i(\"yE3F\");i.n(s).a},gIBH:function(e,t,i){},gesf:function(e,t,i){},giPm:function(e,t,i){\"use strict\";i.r(t);var s=i(\"KTTK\"),n=i(\"mkuN\"),a=i(\"zMq1\"),o=i(\"ye9D\"),l=i(\"NYF1\"),c=i(\"YIeP\"),r=i(\"7Qib\");var u={methods:{dispatch:function(e,t,i){for(var s=this.$parent||this.$root,n=s.$options.componentName;s&&(!n||n!==e);)(s=s.$parent)&&(n=s.$options.componentName);s&&s.$emit.apply(s,[t].concat(i))},broadcast:function(e,t,i){(function e(t,i,s){this.$children.forEach(function(n){n.$options.componentName===t?n.$emit.apply(n,[i].concat(s)):e.apply(n,[t,i].concat([s]))})}).call(this,e,t,i)}}},d={name:\"LogAdd\",components:{CrmRelative:n.a,AddImageList:a.a,AddFileList:o.a,AddRelateList:l.a,CommonWords:c.a},mixins:[u],props:{showBusiness:{type:Boolean,default:!1},showContacts:{type:Boolean,default:!1},contacts:Array,contactsId:[String,Number],followTypes:Array,id:[String,Number],crmType:{type:String,default:\"\"}},data:function(){return{isUnfold:!1,content:\"\",imgFiles:[],businessAction:{},files:[],showBusinessPopover:!1,business:[],selectContactsId:\"\",followType:\"\",nextTime:\"\",showRelativeType:\"\",batchId:Object(r.r)()}},computed:{autosize:function(){return this.isUnfold?{minRows:3,maxRows:6}:{minRows:1,maxRows:1}}},watch:{followTypes:function(){this.getDefalutFollowType()},content:function(e){var t=!!(e&&e.length>0);this.dispatch(\"SlideView\",\"setEditClose\",[t])},contactsId:function(){this.selectContactsId=this.contactsId||\"\"},id:{handler:function(){this.businessAction={type:\"condition\",data:{moduleType:this.crmType,customerId:this.id}}},immediate:!0}},created:function(){this.selectContactsId=this.contactsId||\"\",this.getDefalutFollowType()},beforeDestroy:function(){},methods:{getDefalutFollowType:function(){this.followTypes&&this.followTypes.length>0?this.followType=this.followTypes[0].value:this.followType=\"\"},resetInfo:function(){this.nextTime=\"\",this.isUnfold=!1,this.content=\"\",this.dispatch(\"SlideView\",\"setEditClose\",[!1]),this.imgFiles=[],this.files=[],this.business=[],this.selectContactsId=this.contactsId||\"\",this.showRelativeType=\"\",this.batchId=Object(r.r)(),this.getDefalutFollowType()},commonWordsSelect:function(e){var t=this;this.content?this.$confirm(\"您选中的常用语将覆盖当前填写内容?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\",customClass:\"is-particulars\"}).then(function(){t.content=e}).catch(function(){}):this.content=e},checkRelativeInfos:function(e){\"business\"==this.showRelativeType&&(this.business=e.data)},barClick:function(e){this.showRelativeType=e,\"business\"==e?this.showBusinessPopover=!0:\"file\"==e?this.$refs.fileInput.click():\"img\"==e&&this.$refs.imgInput.click()},uploadFile:function(e){var t=e.target.files;if(t.length){for(var i=0;i<t.length;i++){if(-1==t[i].type.indexOf(\"image\")&&\"img\"==this.showRelativeType)return void this.$message.error(\"请上传正确的文件类型\")}for(var s=\"image/*\"==e.target.accept?\"img\":\"file\",n=0;n<t.length;n++){var a=t[n];this.uploadFileRequest(a,s)}e.target.value=\"\"}},uploadFileRequest:function(e,t,i){var s=this;this.$wkUploadFile.upload({file:e,params:{type:t,batchId:this.batchId}}).then(function(n){var a=n.res.data||{};a.size=Object(r.h)(e.size),\"img\"==t?s.imgFiles.push(a):(a.icon=Object(r.o)(e),s.files.push(a)),i&&i()}).catch(function(){})},deleteImage:function(e,t){this.deleteImgOrFile(\"image\",e,t)},deleteFile:function(e,t){this.deleteImgOrFile(\"file\",e,t)},deleteImgOrFile:function(e,t,i){var n=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.g)({id:t.fileId}).then(function(t){\"image\"==e?n.imgFiles.splice(i,1):n.files.splice(i,1),n.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteAllFile:function(e){var t=this;this.batchId&&this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s.i)({batchId:t.batchId,type:e}).then(function(i){2==e?t.imgFiles=[]:t.files=[],t.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteRelate:function(e,t){this.business.splice(t,1)},inputFocus:function(){var e=this;this.isUnfold=!0,this.$nextTick(function(){e.$refs.textarea.focus(),e.$emit(\"focus\")})},sendClick:function(){this.$emit(\"send\",{id:this.id,content:this.content,files:this.files,images:this.imgFiles,business:this.business,contactsId:this.selectContactsId,batchId:this.batchId,followType:this.followType,nextTime:this.nextTime})},close:function(){this.isUnfold=!1,this.$emit(\"close\")}}},p=(i(\"Nbko\"),i(\"KHd+\")),h=Object(p.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{class:[\"mix-content\",{unfold:!e.isUnfold}]},[e.isUnfold?i(\"i\",{staticClass:\"wk wk-close\",on:{click:e.close}}):e._e(),e._v(\" \"),e.isUnfold?i(\"div\",{staticClass:\"mix-content-select\"},[e.showContacts?i(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择联系人\"},model:{value:e.selectContactsId,callback:function(t){e.selectContactsId=t},expression:\"selectContactsId\"}},e._l(e.contacts,function(e){return i(\"el-option\",{key:e.contactsId,attrs:{label:e.name,value:e.contactsId}})})):e._e(),e._v(\" \"),i(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择跟进方式\"},model:{value:e.followType,callback:function(t){e.followType=t},expression:\"followType\"}},e._l(e.followTypes,function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(\" \"),i(\"el-date-picker\",{attrs:{editable:!1,type:\"datetime\",placeholder:\"选择下次联系时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:e.nextTime,callback:function(t){e.nextTime=t},expression:\"nextTime\"}}),e._v(\" \"),i(\"common-words\",{on:{select:e.commonWordsSelect}})],1):e._e(),e._v(\" \"),i(\"div\",{class:[\"i-cont\",{unfold:!e.isUnfold}]},[e.isUnfold?e._e():i(\"i\",{staticClass:\"wk wk-write\"}),e._v(\" \"),i(\"el-input\",{ref:\"textarea\",attrs:{autosize:e.autosize,maxlength:800,type:\"textarea\",clearable:\"\",resize:\"none\",placeholder:\"请输入内容\"},on:{focus:e.inputFocus},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}})],1),e._v(\" \"),e.imgFiles.length>0&&e.isUnfold?i(\"add-image-list\",{attrs:{data:e.imgFiles},on:{delete:e.deleteImage,\"delete-all\":function(t){e.deleteAllFile(2)},upload:e.uploadFile}}):e._e(),e._v(\" \"),e.files.length>0&&e.isUnfold?i(\"add-file-list\",{attrs:{data:e.files},on:{delete:e.deleteFile,\"delete-all\":function(t){e.deleteAllFile(1)}}}):e._e(),e._v(\" \"),e.business.length>0&&e.isUnfold?i(\"add-relate-list\",{attrs:{data:e.business,type:\"business\"},on:{delete:e.deleteRelate}}):e._e(),e._v(\" \"),e.isUnfold?i(\"div\",{staticClass:\"bar-cont\"},[i(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-picture\"},on:{click:function(t){e.barClick(\"img\")}}},[e._v(\"图片\")]),e._v(\" \"),i(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-file\"},on:{click:function(t){e.barClick(\"file\")}}},[e._v(\"附件\")]),e._v(\" \"),e.showBusiness?i(\"el-popover\",{attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:e.showBusinessPopover,callback:function(t){e.showBusinessPopover=t},expression:\"showBusinessPopover\"}},[i(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:e.showBusinessPopover,radio:!1,action:e.businessAction,\"selected-data\":{business:e.business},\"crm-type\":\"business\"},on:{close:function(t){e.showBusinessPopover=!1},changeCheckout:e.checkRelativeInfos}}),e._v(\" \"),i(\"el-button\",{staticClass:\"handle-button\",staticStyle:{\"margin-left\":\"10px\"},attrs:{slot:\"reference\",type:\"text\",icon:\"wk wk-associate\"},on:{click:function(t){e.barClick(\"business\")}},slot:\"reference\"},[e._v(\"关联商机\")])],1):e._e(),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.sendClick,expression:\"sendClick\"}],staticClass:\"send-btn\",attrs:{type:\"primary\"}},[e._v(\"发布\")])],1):e._e(),e._v(\" \"),i(\"input\",{ref:\"fileInput\",staticClass:\"file-input\",attrs:{accept:\"*.*\",type:\"file\",multiple:\"\"},on:{change:e.uploadFile}}),e._v(\" \"),i(\"input\",{ref:\"imgInput\",staticClass:\"file-input\",attrs:{accept:\"image/*\",type:\"file\",multiple:\"\"},on:{change:e.uploadFile}})],1)},[],!1,null,\"670c00a3\",null);h.options.__file=\"LogAdd.vue\";t.default=h.exports},\"goM+\":function(e,t,i){e.exports=i.p+\"static/img/seas_not.68f3f48.png\"},hwzM:function(e,t,i){\"use strict\";i.r(t);var s=i(\"7Qib\"),n=i(\"KTTK\"),a={name:\"FileCell\",filters:{getFileSize:function(e){return Object(s.h)(e)}},props:{cellIndex:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1},module_id:[String,Number]},data:function(){return{}},computed:{fileIcon:function(){var e=this.data.name?this.data.name.split(\".\"):[],t=\"\";return t=e.length>0?e[e.length-1]:\"\",Object(s.n)(t)},previewShow:function(){return this.list}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){Object(s.d)({path:this.data.filePath||this.data.url,name:this.data.name})},previewClick:function(){Object(s.a)(this.data.name)?Object(s.G)(this.data.filePath||this.data.url,this.data.name):this.$bus.emit(\"preview-image-bus\",{index:this.cellIndex||0,data:this.list.map(function(e){return{url:e.filePath||e.url,name:e.name}})})},deleteClick:function(){var e=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(n.g)({id:e.data.fileId}).then(function(t){e.$message.success(\"操作成功\"),e.$emit(\"delete\",e.cellIndex,e.data)}).catch(function(){})}).catch(function(){e.$message({type:\"info\",message:\"已取消删除\"})})}}},o=(i(\"Bd1s\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"flexbox\",{staticClass:\"cell\"},[s(\"img\",{staticClass:\"cell-head\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:e.fileIcon,alt:\"\"}}),e._v(\" \"),s(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":e.cursorPointer}},[s(\"span\",[e._v(e._s(e.data.name.length>20?e.data.name.substring(0,20)+\"...\":e.data.name))])]),e._v(\" \"),s(\"div\",{staticClass:\"size\"},[e._v(\"\\n    (\"+e._s(e._f(\"getFileSize\")(e.data.size))+\")\\n  \")]),e._v(\" \"),s(\"div\",{staticClass:\"cell-foot\"},[e.previewShow?s(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:e.previewClick}},[e._v(\"预览\")]):e._e(),e._v(\" \"),s(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:e.downloadClick}},[e._v(\"下载\")]),e._v(\" \"),e.showDelete?s(\"span\",{staticClass:\"xr-text-btn delete\",on:{click:e.deleteClick}},[e._v(\"删除\")]):e._e()])])},[],!1,null,\"4a3d86b8\",null);l.options.__file=\"index.vue\";t.default=l.exports},i6id:function(e,t,i){},j4Q1:function(e,t,i){\"use strict\";i.r(t);var s=i(\"EJiy\"),n=i.n(s),a={name:\"FilterContent\",props:{obj:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{optionsNames:{is:\"等于\",in:\"等于\",isNot:\"不等于\",contains:\"包含\",notContains:\"不包含\",startWith:\"开始于\",endWith:\"结束于\",isNull:\"为空\",isNotNull:\"不为空\",eq:\"等于\",neq:\"不等于\",gt:\"大于\",egt:\"大于等于\",lt:\"小于\",elt:\"小于等于\"},showObj:{}}},computed:{},watch:{obj:function(e){this.showObj=e}},mounted:function(){this.showObj=this.obj},methods:{handleDelete:function(e,t){this.showObj.obj.splice(t,1),this.showObj.form.splice(t,1),this.$emit(\"delete\",{item:e,index:t,obj:this.showObj})},getTypesName:function(e){return e.typeId&&e.typeOption.find(function(t){return t.typeId===e.typeId}).name||\"\"},getNameValue:function(e){var t=e.setting.find(function(t){return t.value===e.value});return t?t.name:\"\"},getStatusName:function(e){if(e.statusId){var t=e.statusOption.find(function(t){return t.statusId===e.statusId});return t.name?\"-\"+t.name:\"\"}return\"\"},getDealStatus:function(e){return 0==e?\"未成交\":1==e?\"已成交\":\"\"},getSettingValueType:function(e){if(e&&e.length>0){var t=e[0];return void 0===t?\"undefined\":n()(t)}return[]}}},o=(i(\"p6ZA\"),i(\"KHd+\")),l=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"wrapper\"},[i(\"ul\",{staticClass:\"list\"},e._l(e.showObj.form,function(t,s){return i(\"li\",{key:s,staticClass:\"list-item\"},[\"date\"==t.formType?i(\"span\",[e._v(e._s(t.name+\" “\"+t.value[0]+\"-\"+t.value[1]+\"”\"))]):\"datetime\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" “\"+t.value[0]+\"-\"+t.value[1]+\"”\"))]):\"business_type\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" “\"+e.getTypesName(t)+e.getStatusName(t)+\"”\"))]):\"map_address\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" \"+t.address.state+\" \"+t.address.city+\" \"+t.address.area))]):\"checkStatus\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" “\"+e.optionsNames[t.condition]+\"” \"+e.getNameValue(t)))]):\"dealStatus\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" “\"+e.optionsNames[t.condition]+\"” \"+e.getDealStatus(t.value)))]):\"user\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" \"+e.optionsNames[t.condition]+\"“\"+t.value[0].realname+\"”\"))]):\"structure\"===t.formType?i(\"span\",[e._v(e._s(t.name+\" \"+e.optionsNames[t.condition]+\"“\"+t.value[0].name+\"”\"))]):\"category\"===t.formType&&t.value.length>0?i(\"span\",[e._v(e._s(t.name+\" “\"+t.valueContent+\"”\"))]):\"select\"===t.formType&&\"string\"!=e.getSettingValueType(t.setting)?i(\"span\",[e._v(e._s(t.name+\" “\"+e.getNameValue(t)+\"”\"))]):i(\"span\",[e._v(e._s(t.name+\" \"+e.optionsNames[t.condition]+\"“\"+t.value+\"”\"))]),e._v(\" \"),i(\"i\",{staticClass:\"el-icon-close icon\",on:{click:function(i){e.handleDelete(t,s)}}})])}))])},[],!1,null,\"540fc399\",null);l.options.__file=\"FilterContent.vue\";t.default=l.exports},jDh9:function(e,t,i){\"use strict\";i.r(t);var s=i(\"QbLZ\"),n=i.n(s),a=i(\"6r2N\"),o=i(\"L2JU\"),l=i(\"7Qib\"),c={name:\"XrMenuItem\",components:{},props:{iconClass:String,iconColor:String,label:String,name:String,num:[String,Number],select:Boolean},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{}},r=(i(\"G+h+\"),i(\"KHd+\")),u=Object(r.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"xr-menu-item\",class:{\"is-select\":e.select}},[i(\"i\",{class:[\"xr-menu-item__icon\",e.iconClass]}),e._v(\" \"),i(\"span\",{staticClass:\"xr-menu-item__label\"},[e._v(e._s(e.label))]),e._v(\" \"),e.num>0?i(\"el-badge\",{attrs:{max:99,value:e.num}}):e._e()],1)},[],!1,null,\"57686fca\",null);u.options.__file=\"XrMenuItem.vue\";var d=u.exports,p={name:\"Message\",components:{CRMMessage:a.default,XrMenuItem:d},data:function(){return{loading:!1,leftType:\"\",leftSides:[{name:\"今日需联系线索\",crmType:\"leads\",color:\"#2362FB\",iconClass:\"wk wk-leads\",infoType:\"todayLeads\",model:11,num:0,tips:\"下次跟进时间为今日的线索\",hidden:!0},{name:\"今日需联系客户\",crmType:\"customer\",color:\"#2362FB\",iconClass:\"wk wk-customer\",infoType:\"todayCustomer\",model:1,num:0,tips:\"下次跟进时间为今日的客户\",hidden:!0},{name:\"今日需联系商机\",crmType:\"business\",color:\"#2362FB\",iconClass:\"wk wk-business\",infoType:\"todayBusiness\",model:12,num:0,tips:\"下次跟进时间为今日的商机\",hidden:!0},{name:\"分配给我的线索\",crmType:\"leads\",color:\"#704AFD\",iconClass:\"wk wk-leads\",infoType:\"followLeads\",model:2,num:0,tips:\"转移之后未跟进的线索\",hidden:!0},{name:\"分配给我的客户\",crmType:\"customer\",color:\"#19B5F6\",iconClass:\"wk wk-s-seas\",infoType:\"followCustomer\",model:3,num:0,tips:\"转移、领取、分配之后未跟进的客户，默认显示自己负责的客户\",hidden:!0},{name:\"待进入公海的客户\",crmType:\"customer\",color:\"#26D4DA\",iconClass:\"wk wk-seas\",infoType:\"putInPoolRemind\",model:4,num:0,tips:\"\",hidden:!0},{name:\"待审核合同\",crmType:\"contract\",color:\"#FD5B4A\",iconClass:\"wk wk-contract\",infoType:\"checkContract\",model:5,num:0,tips:\"\",hidden:!0},{name:\"待审核回款\",crmType:\"receivables\",color:\"#FFB940\",iconClass:\"wk wk-receivables\",infoType:\"checkReceivables\",model:6,num:0,tips:\"\",hidden:!0},{name:\"待回款提醒\",crmType:\"receivables_plan\",color:\"#27BA4A\",iconClass:\"wk wk-bell\",infoType:\"remindReceivablesPlan\",model:7,num:0,tips:\"\",hidden:!0},{name:\"即将到期的合同\",crmType:\"contract\",color:\"#FF7A38\",iconClass:\"wk wk-contract\",infoType:\"endContract\",model:8,num:0,tips:\"根据“合同到期时间”及设置的“提前提醒天数”提醒\",hidden:!0},{name:\"待回访合同\",crmType:\"contract\",color:\"#ff9232\",iconClass:\"wk wk-house\",infoType:\"returnVisitRemind\",model:9,num:0,tips:\"\",hidden:!0},{name:\"待审核费用报销\",crmType:\"expense-examines\",color:\"#FFB940\",iconClass:\"wk wk-expense\",infoType:\"checkExpenses\",model:9,num:0,tips:\"\",hidden:!0},{name:\"待审核发票\",crmType:\"invoice\",color:\"#ff9232\",iconClass:\"wk wk-invoice\",infoType:\"checkInvoice\",model:10,num:0,tips:\"\",hidden:!0}]}},computed:n()({},Object(o.b)([\"messageNum\"]),{showLeftSides:function(){return this.leftSides.filter(function(e){return!e.hidden})}}),watch:{messageNum:function(){this.refreshNum()}},mounted:function(){var e=this;this.loading=!0,this.requestNumCount(),window.onresize=function(){var t=document.documentElement.clientHeight;e.$bus.emit(\"message-scroll\",t-300)}},methods:{requestNumCount:function(){var e=this;this.$store.dispatch(\"GetMessageNum\").then(function(t){e.loading=!1,e.refreshNum()}).catch(function(){e.loading=!1})},refreshNum:function(){for(var e=0;e<this.leftSides.length;e++){var t=this.leftSides[e];this.messageNum.hasOwnProperty(t.infoType)?(t.num=this.messageNum[t.infoType]||0,t.hidden=!1):t.hidden=!0}!this.leftType&&this.showLeftSides.length>0&&(this.leftType=this.showLeftSides[0].infoType)},messageHandle:function(e){if(\"follow\"==e.type){var t=Object(l.t)(this.messageNum),i=parseInt(t[e.infoType])-e.value;t[e.infoType]=i>0?i:0,this.$store.commit(\"SET_MESSAGENUM\",t)}},sideClick:function(e){this.leftType=e.infoType}}},h=(i(\"fpnN\"),Object(r.a)(p,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticStyle:{height:\"100%\"}},[s(\"flexbox\",{staticClass:\"message-header\"},[s(\"img\",{staticClass:\"title-icon\",attrs:{onerror:'this.src=\"'+i(\"Tww3\")+'\"',src:i(\"0Dkb\")}}),e._v(\" \"),s(\"span\",{staticClass:\"title\"},[e._v(\"待办事项\")])]),e._v(\" \"),s(\"div\",{staticClass:\"message-body\"},[s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"message-content\"},[s(\"div\",{staticClass:\"message-body-side\"},e._l(e.showLeftSides,function(t,i){return s(\"xr-menu-item\",{key:i,attrs:{label:t.name,num:t.num,\"icon-class\":t.iconClass,select:e.leftType==t.infoType},nativeOn:{click:function(i){e.sideClick(t)}}})})),e._v(\" \"),s(\"div\",{staticClass:\"message-body-content\"},e._l(e.showLeftSides,function(t,i){return s(\"c-r-m-message\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.leftType==t.infoType,expression:\"leftType==item.infoType\"}],key:i,attrs:{\"crm-type\":t.crmType,\"info-type\":t.infoType,\"info-title\":t.name,\"info-tips\":t.tips,model:t.model,show:e.leftType==t.infoType,\"icon-data\":t},on:{\"on-handle\":e.messageHandle}})}))])])],1)},[],!1,null,\"6d5b8812\",null));h.options.__file=\"index.vue\";t.default=h.exports},jUvl:function(e,t,i){\"use strict\";var s=i(\"gesf\");i.n(s).a},keIY:function(e,t,i){e.exports=i.p+\"static/img/leads.2c5bddd.png\"},\"lrb+\":function(e,t,i){},migV:function(e,t,i){e.exports=i.p+\"static/img/check_fail.f446ba8.png\"},nslc:function(e,t,i){\"use strict\";i.r(t);var s=i(\"7Dod\"),n={name:\"DealStatusHandle\",components:{},mixins:[],props:{value:Number,visible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,status:1,options:[{label:\"已成交\",value:1},{label:\"未成交\",value:0}]}},computed:{},watch:{value:{handler:function(e){void 0!==e&&(this.status=0==e?1:0)},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.status=1,this.$emit(\"update:visible\",!1)},handleConfirm:function(){var e=this,t=this.selectionList.map(function(t){return t[e.crmType+\"Id\"]}).join(\",\"),i={dealStatus:this.status};i.ids=t,this.loading=!0,Object(s.b)(i).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.$emit(\"handle\",{type:\"deal_status\"}),e.handleCancel()}).catch(function(){e.loading=!1})}}},a=(i(\"E/pc\"),i(\"KHd+\")),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"客户成交状态\",width:\"400px\"},on:{close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[e._v(\"成交状态：\")]),e._v(\" \"),i(\"el-select\",{staticClass:\"handle-item-content\",model:{value:e.status,callback:function(t){e.status=t},expression:\"status\"}},e._l(e.options,function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"5fb62a3b\",null);o.options.__file=\"DealStatusHandle.vue\";t.default=o.exports},\"p3/6\":function(e,t,i){\"use strict\";i.r(t);var s=i(\"8GhS\"),n=i(\"7Dod\"),a=i(\"d9x6\"),o=i(\"ERJp\"),l={name:\"TeamsHandle\",components:{XhUserCell:s.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},title:{type:String,default:\"\"},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],handleType:1,addsTypes:[]}},computed:{},watch:{dialogVisible:{handler:function(e){this.visible=e,e||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(e){this.usersList=e.value},handleConfirm:function(){var e=this;if(0===this.usersList.length)this.$message.error(\"请选择团队成员\");else{var t={ids:this.selectionList.map(function(t){return t[e.crmType+\"Id\"]}),memberIds:this.usersList.map(function(e){return e.userId})};\"customer\"===this.crmType&&\"添加团队成员\"==this.title&&(t.changeType=this.addsTypes.map(function(e){return parseInt(e)}));var i=void 0;\"添加团队成员\"==this.title?(t.power=this.handleType,i={customer:n.U,contract:a.q,business:o.s}[this.crmType]):i={customer:n.T,contract:a.p,business:o.r}[this.crmType],this.loading=!0,i(t).then(function(t){e.$message({type:\"success\",message:\"操作成功\"}),e.loading=!1,e.handleCancel(),e.$emit(\"handle\",{type:\"添加团队成员\"==e.title?\"add_user\":\"delete_user\"})}).catch(function(){e.loading=!1})}}}},c=(i(\"xmeh\"),i(\"KHd+\")),r=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{title:e.title,visible:e.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,width:\"400px\"},on:{\"update:visible\":function(t){e.visible=t},close:e.handleCancel}},[i(\"div\",{staticClass:\"handle-box\"},[i(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[i(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[e._v(\"选择团队成员：\")]),e._v(\" \"),i(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{radio:!1,value:e.usersList,placeholder:\"点击选择（多选）\"},on:{\"value-change\":e.userChage}}),e._v(\" \"),\"添加团队成员\"!=e.title?i(\"div\",{staticClass:\"tips\"},[e._v(\"此操作不可移除数据负责人\")]):e._e()],1),e._v(\" \"),\"添加团队成员\"==e.title?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"权限：\")]),e._v(\" \"),i(\"el-radio-group\",{model:{value:e.handleType,callback:function(t){e.handleType=t},expression:\"handleType\"}},[i(\"el-radio\",{attrs:{label:1}},[e._v(\"只读\")]),e._v(\" \"),i(\"el-radio\",{attrs:{label:2}},[e._v(\"读写\")])],1)],1):e._e(),e._v(\" \"),\"添加团队成员\"==e.title&&\"customer\"===e.crmType?i(\"flexbox\",{staticClass:\"handle-item\"},[i(\"div\",{staticClass:\"handle-item-name\"},[e._v(\"同时添加至：\")]),e._v(\" \"),i(\"el-checkbox-group\",{model:{value:e.addsTypes,callback:function(t){e.addsTypes=t},expression:\"addsTypes\"}},[i(\"el-checkbox\",{attrs:{label:\"2\"}},[e._v(\"商机\")]),e._v(\" \"),i(\"el-checkbox\",{attrs:{label:\"3\"}},[e._v(\"合同\")])],1)],1):e._e()],1),e._v(\" \"),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:e.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[e._v(\"保存\")])],1)])},[],!1,null,\"3390e593\",null);r.options.__file=\"TeamsHandle.vue\";t.default=r.exports},p3hS:function(e,t,i){var s={\"./board.png\":\"5XBl\",\"./business.png\":\"dTTw\",\"./contacts.png\":\"JAjk\",\"./contract.png\":\"U4MQ\",\"./customer.png\":\"wfwE\",\"./customer_not.png\":\"cLla\",\"./expense-examines.png\":\"aKrz\",\"./expense.png\":\"ugew\",\"./invoice.png\":\"R1k5\",\"./leads.png\":\"keIY\",\"./leads_not.png\":\"K4QM\",\"./marketing.png\":\"ShYU\",\"./nearby.png\":\"t4Dm\",\"./nearby_not.png\":\"L+lS\",\"./product.png\":\"wbJn\",\"./receivables.png\":\"bok9\",\"./seas.png\":\"riSQ\",\"./seas_not.png\":\"goM+\",\"./todo.png\":\"0Dkb\",\"./visit.png\":\"9cPJ\"};function n(e){var t=a(e);return i(t)}function a(e){var t=s[e];if(!(t+1)){var i=new Error(\"Cannot find module '\"+e+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}return t}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=\"p3hS\"},p6ZA:function(e,t,i){\"use strict\";var s=i(\"FD7p\");i.n(s).a},riSQ:function(e,t,i){e.exports=i.p+\"static/img/seas.83becad.png\"},t4Dm:function(e,t,i){e.exports=i.p+\"static/img/nearby.2d86e3c.png\"},ugew:function(e,t,i){e.exports=i.p+\"static/img/expense.29e9174.png\"},wbJn:function(e,t,i){e.exports=i.p+\"static/img/product.663b457.png\"},wfwE:function(e,t,i){e.exports=i.p+\"static/img/customer.6f13c37.png\"},\"wu/m\":function(e,t,i){e.exports=i.p+\"static/img/check_create.09736ed.png\"},xmeh:function(e,t,i){\"use strict\";var s=i(\"cBfe\");i.n(s).a},y4JV:function(e,t,i){e.exports=i.p+\"static/img/check_suc.e52db27.png\"},yE3F:function(e,t,i){},zsVz:function(e,t,i){\"use strict\";i.d(t,\"g\",function(){return n}),i.d(t,\"e\",function(){return a}),i.d(t,\"a\",function(){return o}),i.d(t,\"b\",function(){return l}),i.d(t,\"d\",function(){return c}),i.d(t,\"c\",function(){return r}),i.d(t,\"f\",function(){return u}),i.d(t,\"h\",function(){return d});var s=i(\"t3Un\");function n(e){return Object(s.a)({url:\"oaTask/queryTaskList\",method:\"post\",data:e,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function a(e){return Object(s.a)({url:\"workTask/saveWorkTask\",method:\"post\",data:e,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(e){return Object(s.a)({url:\"workTask/queryTaskInfo/\"+e.taskId,method:\"post\"})}function l(e){return Object(s.a)({url:\"workTask/queryTrashTaskInfo\",method:\"post\",data:e})}function c(e){return Object(s.a)({url:\"workTaskLog/queryTaskLog/\"+e.taskId,method:\"post\"})}function r(e){return Object(s.a)({url:\"workTaskRelation/saveWorkTaskRelation\",method:\"post\",data:e,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function u(e){return Object(s.a)({url:\"oaTask/deleteWorkTaskLabel\",method:\"post\",data:e,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function d(e){return Object(s.a)({url:\"oaTask/oaTaskExport\",method:\"post\",data:e,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}}}]);","extractedComments":[]}