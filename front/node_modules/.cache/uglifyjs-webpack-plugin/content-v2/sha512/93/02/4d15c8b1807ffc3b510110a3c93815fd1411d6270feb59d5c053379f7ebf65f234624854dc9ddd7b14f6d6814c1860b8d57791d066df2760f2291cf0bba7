{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-6f57\"],{\"7rD8\":function(e,t,s){\"use strict\";s.r(t);var a=s(\"FyfS\"),l=s.n(a),o=s(\"Ajln\"),n=s(\"4dIA\"),i=s(\"pKm3\"),r=s(\"9GgJ\"),d={components:{TaskDetail:i.default,TaskCell:n.default,XrHeader:r.a},data:function(){return{loading:!0,labelId:\"\",taskList:[],colorList:[\"#53D397\",\"#20C1BD\",\"#58DADA\",\"#0FC9E7\",\"#3498DB\",\"#4586FF\",\"#8983F3\",\"#AEA1EA\",\"#FF6699\",\"#F24D70\",\"#FF6F6F\"],labelName:\"\",labelColor:\"#53D397\",collapseNames:[],editLabelName:\"\",editLabelColor:\"\",labelSetShow:!1,taskID:\"\",detailIndex:-1,detailSection:-1,taskDetailShow:!1}},beforeRouteUpdate:function(e,t,s){this.labelId=e.params.id,this.taskList=[],this.collapseNames=[],this.getDetail({labelId:e.params.id}),this.getList(),s()},created:function(){this.labelId=this.$route.params.id,this.getDetail({labelId:this.$route.params.id}),this.getList()},mounted:function(){document.getElementById(\"project-container\").addEventListener(\"click\",this.taskShowHandle,!1)},methods:{getDetail:function(e){var t=this;Object(o.d)(e).then(function(e){t.labelName=e.data.name,t.labelColor=e.data.color}).catch(function(){})},getList:function(){var e=this;this.loading=!0,Object(o.b)({labelId:this.labelId}).then(function(t){e.taskList=t.data||[];var s=!0,a=!1,o=void 0;try{for(var n,i=l()(e.taskList);!(s=(n=i.next()).done);s=!0){var r=n.value,d=!0,c=!1,u=void 0;try{for(var h,m=l()(r.list);!(d=(h=m.next()).done);d=!0){var b=h.value;5==b.status&&(b.checked=!0)}}catch(e){c=!0,u=e}finally{try{!d&&m.return&&m.return()}finally{if(c)throw u}}}}catch(e){a=!0,o=e}finally{try{!s&&i.return&&i.return()}finally{if(a)throw o}}e.collapseNames=t.data.map(function(e){return e.workId}),e.loading=!1}).catch(function(){e.loading=!1})},labelSetSave:function(){var e=this;Object(o.f)({name:this.editLabelName,labelId:this.labelId,color:this.editLabelColor}).then(function(t){e.labelName=e.editLabelName,e.labelColor=e.editLabelColor,e.labelSetShow=!1})},labelSetClick:function(){this.editLabelName=this.labelName,this.editLabelColor=this.labelColor},taskCellHandle:function(e){if(\"view\"==e.type){var t=e.data;this.taskID=t.item.taskId,this.detailIndex=t.index,this.detailSection=t.section,this.taskDetailShow=!0}},closeBtn:function(){this.taskDetailShow=!1},detailHandle:function(e){if(0==e.index||e.index)if(\"title-check\"==e.type)this.$set(this.taskList[e.section].list[e.index],\"checked\",e.value);else if(\"delete\"==e.type||\"activate-task\"==e.type||\"recover-task\"==e.type||\"thorough-delete-task\"==e.type)this.taskList.splice(e.index,1);else if(\"change-stop-time\"==e.type){new Date(e.value).getTime()/1e3+86399>(new Date).getTime()/1e3?this.taskList[e.section].list[e.index].isEnd=!1:this.taskList[e.section].list[e.index].isEnd=!0,this.taskList[e.section].list[e.index].stopTime=e.value}else if(\"change-priority\"==e.type)this.taskList[e.section].list[e.index].priority=e.value.id;else if(\"change-name\"==e.type)this.taskList[e.section].list[e.index].name=e.value;else if(\"change-comments\"==e.type){var t=this.taskList[e.section].list[e.index].commentCount;\"add\"==e.value?this.taskList[e.section].list[e.index].commentCount=t+1:this.taskList[e.section].list[e.index].commentCount=t-1}else\"change-sub-task\"==e.type?(this.taskList[e.section].list[e.index].childWCCount=e.value.subdonecount,this.taskList[e.section].list[e.index].childAllCount=e.value.allcount):\"change-main-user\"==e.type?this.taskList[e.section].list[e.index].mainUser=e.value:\"change-label\"==e.type&&(this.taskList[e.section].list[e.index].labelList=e.value)},taskShowHandle:function(e){if(this.$refs.particulars&&!this.$refs.particulars.$el.contains(e.target)){for(var t=!0,s=document.getElementsByClassName(\"board-column\"),a=0;a<s.length;a++){if(s[a].contains(e.target)){t=!1;break}}this.taskDetailShow=!t}}}},c=(s(\"I7XJ\"),s(\"KHd+\")),u=Object(c.a)(d,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"project-tag\"},[s(\"xr-header\",{staticClass:\"xr-header\",attrs:{\"icon-color\":e.labelColor||\"#4AB8B8\",\"icon-class\":\"wk wk-label\"}},[s(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[e._v(e._s(e.labelName))]),e._v(\" \"),s(\"el-popover\",{attrs:{slot:\"label\",placement:\"bottom-start\",width:\"300\",trigger:\"click\"},slot:\"label\",model:{value:e.labelSetShow,callback:function(t){e.labelSetShow=t},expression:\"labelSetShow\"}},[s(\"div\",{staticClass:\"new-tag-dialog\"},[s(\"div\",{staticClass:\"title\"},[s(\"span\",[e._v(\"标签设置\")]),e._v(\" \"),s(\"span\",{staticClass:\"el-icon-close rt\",on:{click:function(t){e.labelSetShow=!1}}})]),e._v(\" \"),s(\"div\",{staticClass:\"search\"},[s(\"el-input\",{attrs:{size:\"mini\",placeholder:\"输入标签名\"},model:{value:e.editLabelName,callback:function(t){e.editLabelName=t},expression:\"editLabelName\"}}),e._v(\" \"),s(\"span\",{staticClass:\"checked-color\",style:{background:e.editLabelColor}})],1),e._v(\" \"),s(\"div\",{staticClass:\"color-box\"},e._l(e.colorList,function(t,a){return s(\"span\",{key:a,style:{background:t},on:{click:function(s){e.editLabelColor=t}}})})),e._v(\" \"),s(\"div\",{staticClass:\"footer\"},[s(\"el-button\",{attrs:{type:\"primary\",size:\"medium\"},on:{click:e.labelSetSave}},[e._v(\"保存\")]),e._v(\" \"),s(\"el-button\",{attrs:{size:\"medium\"},on:{click:function(t){e.labelSetShow=!1}}},[e._v(\"取消\")])],1)]),e._v(\" \"),s(\"i\",{staticClass:\"wk wk-manage img-set\",attrs:{slot:\"reference\"},on:{click:e.labelSetClick},slot:\"reference\"})])],1),e._v(\" \"),s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"content\"},[s(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:0==e.taskList.length&&0==e.loading,expression:\"taskList.length == 0 && loading == false\"}],staticClass:\"content-body-items\"},[s(\"el-collapse\",{model:{value:e.collapseNames,callback:function(t){e.collapseNames=t},expression:\"collapseNames\"}},e._l(e.taskList,function(t,a){return s(\"el-collapse-item\",{key:a,staticClass:\"list-box\",attrs:{name:t.workId}},[s(\"i\",{staticClass:\"wukong wukong-subproject\",style:{color:t.color?t.color:\"#4AB8B8\"},attrs:{slot:\"title\"},slot:\"title\"}),e._v(\" \"),s(\"span\",{staticClass:\"title\",attrs:{slot:\"title\"},slot:\"title\"},[e._v(e._s(t.name))]),e._v(\" \"),e._l(t.list,function(t,l){return s(\"task-cell\",{key:l,staticClass:\"item-list\",attrs:{data:t,\"data-section\":a,\"data-index\":l},on:{\"on-handle\":e.taskCellHandle}})})],2)}))],1)]),e._v(\" \"),e.taskDetailShow?s(\"task-detail\",{ref:\"particulars\",attrs:{id:e.taskID,\"detail-index\":e.detailIndex,\"detail-section\":e.detailSection},on:{\"on-handle\":e.detailHandle,close:e.closeBtn}}):e._e()],1)},[],!1,null,\"876b51b6\",null);u.options.__file=\"index.vue\";t.default=u.exports},Ebat:function(e,t){throw new Error(\"Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\\nModuleBuildError: Module build failed (from ./node_modules/sass-loader/lib/loader.js):\\nError: Node Sass does not yet support your current environment: Windows 64-bit with Unsupported runtime (93)\\nFor more information on which environments are supported please see:\\nhttps://github.com/sass/node-sass/releases/tag/v4.14.1\\n    at module.exports (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\binding.js:13:13)\\n    at Object.<anonymous> (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\node-sass\\\\lib\\\\index.js:14:35)\\n    at Module._compile (node:internal/modules/cjs/loader:1198:14)\\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)\\n    at Module.load (node:internal/modules/cjs/loader:1076:32)\\n    at Function.Module._load (node:internal/modules/cjs/loader:911:12)\\n    at Module.require (node:internal/modules/cjs/loader:1100:19)\\n    at require (node:internal/modules/cjs/helpers:119:18)\\n    at Object.sassLoader (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js:24:22)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\webpack\\\\lib\\\\NormalModule.js:286:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:367:11\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:233:18\\n    at runSyncOrAsync (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:143:3)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:232:2)\\n    at iterateNormalLoaders (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:221:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:236:3\\n    at context.callback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\loader-runner\\\\lib\\\\LoaderRunner.js:111:13)\\n    at processResources (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\processResources.js:58:10)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\loader.js:76:38\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:252:13\\n    at wrapper (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:272:20)\\n    at iteratorCallback (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:502:17)\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:328:20\\n    at D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\node_modules\\\\async\\\\dist\\\\async.js:249:17\\n    at rewritePaths (D:\\\\project\\\\zhgd\\\\zhgd-front\\\\crm_web\\\\node_modules\\\\sass-resources-loader\\\\lib\\\\utils\\\\rewritePaths.js:60:3)\")},I7XJ:function(e,t,s){\"use strict\";var a=s(\"Ebat\");s.n(a).a}}]);","extractedComments":[]}