{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-7757\"],{PiJg:function(t,e,i){},aBWg:function(t,e,i){\"use strict\";var a=i(\"PiJg\");i.n(a).a},jcXo:function(t,e,i){\"use strict\";i.r(e);var a=i(\"FyfS\"),n=i.n(a),s=i(\"2X1c\"),l=i(\"4dIA\"),d=i(\"pKm3\"),o=i(\"9GgJ\"),c={components:{TaskDetail:d.default,TaskCell:l.default,XrHeader:o.a},data:function(){return{loading:!0,list:[],taskID:\"\",detailIndex:-1,taskDetailShow:!1}},created:function(){this.getList()},mounted:function(){document.getElementById(\"project-container\").addEventListener(\"click\",this.taskShowHandle,!1)},methods:{getList:function(){var t=this;Object(s.b)().then(function(e){t.list=e.data;var i=!0,a=!1,s=void 0;try{for(var l,d=n()(t.list);!(i=(l=d.next()).done);i=!0){var o=l.value;o.isDeleted=!0,5==o.status&&(o.checked=!0)}}catch(t){a=!0,s=t}finally{try{!i&&d.return&&d.return()}finally{if(a)throw s}}t.loading=!1}).catch(function(){t.loading=!0})},taskCellHandle:function(t){if(\"view\"==t.type){var e=t.data;this.taskID=e.item.taskId,this.detailIndex=e.index,this.taskDetailShow=!0}},detailHandle:function(t){if(0==t.index||t.index)if(\"title-check\"==t.type)this.$set(this.list[t.index],\"checked\",t.value);else if(\"delete\"==t.type||\"activate-task\"==t.type||\"recover-task\"==t.type||\"thorough-delete-task\"==t.type)this.list.splice(t.index,1);else if(\"change-stop-time\"==t.type){new Date(t.value).getTime()/1e3+86399>(new Date).getTime()/1e3?this.list[t.index].isEnd=!1:this.list[t.index].isEnd=!0,this.list[t.index].stopTime=t.value}else if(\"change-priority\"==t.type)this.list[t.index].priority=t.value.id;else if(\"change-name\"==t.type)this.list[t.index].name=t.value;else if(\"change-comments\"==t.type){var e=this.list[t.index].commentCount;\"add\"==t.value?this.list[t.index].commentCount=e+1:this.list[t.index].commentCount=e-1}else\"change-sub-task\"==t.type?(this.list[t.index].childWCCount=t.value.subdonecount,this.list[t.index].childAllCount=t.value.allcount):\"change-main-user\"==t.type?this.list[t.index].mainUser=t.value:\"change-label\"==t.type&&(this.list[t.index].labelList=t.value)},closeBtn:function(){this.taskDetailShow=!1},taskShowHandle:function(t){if(this.$refs.particulars&&!this.$refs.particulars.$el.contains(t.target)){for(var e=!0,i=document.getElementsByClassName(\"item-list\"),a=0;a<i.length;a++){if(i[a].contains(t.target)){e=!1;break}}this.taskDetailShow=!e}}}},r=(i(\"aBWg\"),i(\"KHd+\")),h=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"recycle\"},[i(\"xr-header\",{attrs:{\"icon-class\":\"wk wk-bin\",\"icon-color\":\"#fd5b4a\",label:\"回收站\"}}),t._v(\" \"),i(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:0===t.list.length&&!t.loading,expression:\"list.length === 0 && !loading\"}],staticClass:\"content\"},[i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"task-cells\"},t._l(t.list,function(e,a){return i(\"task-cell\",{key:a,staticClass:\"item-list\",attrs:{data:e,\"data-index\":a},on:{\"on-handle\":t.taskCellHandle}})}))]),t._v(\" \"),t.taskDetailShow?i(\"task-detail\",{ref:\"particulars\",attrs:{id:t.taskID,\"detail-index\":t.detailIndex,\"is-trash\":\"\"},on:{\"on-handle\":t.detailHandle,close:t.closeBtn}}):t._e()],1)},[],!1,null,\"5766fe10\",null);h.options.__file=\"index.vue\";e.default=h.exports}}]);","extractedComments":[]}