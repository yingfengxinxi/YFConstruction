{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-4b26\",\"chunk-620e\",\"chunk-9dc6\",\"chunk-6b71\",\"chunk-ae32\"],{\"+5Si\":function(t,e,s){\"use strict\";var i=s(\"71TI\");s.n(i).a},\"+QFE\":function(t,e,s){},\"+cqn\":function(t,e,s){\"use strict\";var i=s(\"OKZ7\");s.n(i).a},\"+lNB\":function(t,e,s){\"use strict\";s.r(e);var i=s(\"8GhS\"),a=s(\"7Dod\"),n=s(\"AAeT\"),o=s(\"ERJp\"),l=s(\"d9x6\"),c=s(\"c2Co\"),r=s(\"Y4Le\"),u=s(\"1DpC\"),d=s(\"VcMt\"),h={name:\"TransferHandle\",components:{XhUserCell:i.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],removeType:1,handleType:1,addsTypes:[]}},computed:{showRemoveType:function(){return\"leads\"!=this.crmType&&\"contacts\"!=this.crmType&&\"receivables\"!=this.crmType&&\"product\"!=this.crmType&&\"invoice\"!=this.crmType}},watch:{dialogVisible:{handler:function(t){this.visible=t,t||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.removeType=1,this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;0===this.usersList.length?this.$message.error(\"请选择变更负责人\"):(this.loading=!0,this.getRequest()(this.getParams()).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.handleCancel(),\"customer\"!=t.crmType&&\"contract\"!=t.crmType&&\"leads\"!=t.crmType||t.$store.dispatch(\"GetMessageNum\"),t.$emit(\"handle\",{type:\"transfer\"})}).catch(function(){t.loading=!1}))},getRequest:function(){return\"leads\"===this.crmType?c.m:\"customer\"===this.crmType?a.X:\"contacts\"===this.crmType?n.o:\"business\"===this.crmType?o.x:\"contract\"===this.crmType?l.s:\"receivables\"===this.crmType?u.k:\"product\"===this.crmType?r.m:\"invoice\"===this.crmType?d.k:void 0},getParams:function(){var t=this,e={ownerUserId:this.usersList[0].userId};return this.showRemoveType&&(e.transferType=this.removeType),2===this.removeType&&(e.power=this.handleType),e.ids=this.selectionList.map(function(e){return parseInt(e[t.crmType+\"Id\"])}),\"customer\"===this.crmType&&(e.changeType=this.addsTypes.map(function(t){return parseInt(t)})),e}}},p=(s(\"+cqn\"),s(\"KHd+\")),m=Object(p.a)(h,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量转移\",width:\"450px\"},on:{\"update:visible\":function(e){t.visible=e},close:t.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"变更负责人为：\")]),t._v(\" \"),s(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:t.usersList},on:{\"value-change\":t.userChage}})],1),t._v(\" \"),t.showRemoveType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"将原负责人：\")]),t._v(\" \"),s(\"el-radio-group\",{model:{value:t.removeType,callback:function(e){t.removeType=e},expression:\"removeType\"}},[s(\"el-radio\",{attrs:{label:1}},[t._v(\"移出\")]),t._v(\" \"),s(\"el-radio\",{attrs:{label:2}},[t._v(\"转为团队成员\")])],1)],1):t._e(),t._v(\" \"),2==t.removeType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"权限：\")]),t._v(\" \"),s(\"el-radio-group\",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:\"handleType\"}},[s(\"el-radio\",{attrs:{label:1}},[t._v(\"只读\")]),t._v(\" \"),s(\"el-radio\",{attrs:{label:2}},[t._v(\"读写\")])],1)],1):t._e(),t._v(\" \"),\"customer\"===t.crmType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"同时变更负责人至：\")]),t._v(\" \"),s(\"el-checkbox-group\",{model:{value:t.addsTypes,callback:function(e){t.addsTypes=e},expression:\"addsTypes\"}},[s(\"el-checkbox\",{attrs:{label:\"1\"}},[t._v(\"联系人\")]),t._v(\" \"),s(\"el-checkbox\",{attrs:{label:\"2\"}},[t._v(\"商机\")]),t._v(\" \"),s(\"el-checkbox\",{attrs:{label:\"3\"}},[t._v(\"合同\")])],1)],1):t._e()],1),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"730da104\",null);m.options.__file=\"TransferHandle.vue\";e.default=m.exports},\"+xXq\":function(t,e,s){t.exports=s.p+\"static/img/check_revoke.0500d70.png\"},\"/407\":function(t,e,s){\"use strict\";s.r(e);var i={name:\"RelatedBusinessCell\",props:{type:{type:String,default:\"\"},cellIndex:Number,data:Object,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!0}},data:function(){return{}},computed:{typeName:function(){return\"customer\"==this.type?\"客户\":\"contacts\"==this.type?\"联系人\":\"business\"==this.type?\"商机\":\"contract\"==this.type?\"合同\":\"\"},name:function(){return this.data.name||this.data.businessName||this.data.customerName||this.data.number}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{footClick:function(){this.$emit(\"unbind\",this.type,this.cellIndex,this.data)},bodyClick:function(){this.$emit(\"detail\",this.type,this.cellIndex,this.data)}}},a=(s(\"/hyb\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"flexbox\",{staticClass:\"cell\"},[s(\"div\",{staticClass:\"cell-head\"},[s(\"i\",{class:t._f(\"wkIconPre\")(t.type)}),t._v(\" \"),s(\"span\",[t._v(\"\\n      \"+t._s(\"相关\"+t.typeName+\"-\")+\"\\n    \")])]),t._v(\" \"),s(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":t.cursorPointer},on:{click:t.bodyClick}},[t._v(\"\\n    \"+t._s(t.name)+\"\\n  \")]),t._v(\" \"),s(\"div\",{staticClass:\"cell-foot\"},[t.showFoot?s(\"a\",{staticClass:\"cancel-btn\",on:{click:t.footClick}},[t._v(\"取消关联\")]):t._e()])])},[],!1,null,\"061d0168\",null);n.options.__file=\"index.vue\";e.default=n.exports},\"/G0b\":function(t,e,s){\"use strict\";s.r(e);var i=s(\"KTTK\"),a=s(\"6iAj\"),n=s(\"4XAY\"),o=s(\"7Dod\"),l=s(\"7Qib\"),c=s(\"mkuN\"),r=s(\"zMq1\"),u=s(\"ye9D\"),d=s(\"NYF1\"),h=s(\"YIeP\"),p=s(\"ZoMv\"),m={name:\"LogEditDialog\",components:{CrmRelative:c.a,AddImageList:r.a,AddFileList:u.a,AddRelateList:d.a,CommonWords:h.a},props:{visible:{type:Boolean,required:!0,default:!1},data:Object},data:function(){return{loading:!1,crmType:\"\",content:\"\",imgFiles:[],businessAction:{},files:[],showBusinessPopover:!1,business:[],contacts:[],selectContactsId:\"\",followTypes:[],followType:\"\",nextTime:\"\",showRelativeType:\"\",batchId:\"\"}},computed:{autosize:function(){return{minRows:4,maxRows:8}},id:function(){return this.data?this.data.activityTypeId:\"\"},showBusiness:function(){return\"customer\"==this.crmType},showContacts:function(){return this.showBusiness}},watch:{visible:{handler:function(t){if(t){var e=p.default.convertTypeToKey(this.data.activityType);this.crmType!=e&&(this.crmType=e),this.handleDetailInfo(Object(l.t)(this.data))}},immediate:!0,deep:!0},id:{handler:function(){this.businessAction={type:\"condition\",data:{moduleType:this.crmType,customerId:this.id}}},immediate:!0}},created:function(){},beforeDestroy:function(){},methods:{handleDetailInfo:function(t){var e=this;this.showContacts&&this.getContactsList(),0==this.followTypes.length&&this.getLogTypeList(),this.content=t.content,this.imgFiles=t.img||[];var s=t.file||[];this.files=s.map(function(t){return t.icon=e.getFileTypeIcon(t.name),t});var i=t.businessList||[];this.business=i.map(function(t){return{businessName:t.name,businessId:t.id}}),this.selectContactsId=t.contactsList&&t.contactsList.length?t.contactsList[0].id:\"\",this.followType=t.category,this.nextTime=t.nextTime,this.batchId=t.batchId},getFileTypeIcon:function(t){if(!t)return\"\";var e=t?t.split(\".\"):[],s=\"\";return s=e.length>0?e[e.length-1]:\"\",Object(l.n)(s)},getLogTypeList:function(){var t=this;Object(a.s)().then(function(e){t.followTypes=e.data.map(function(t){return{value:t,label:t}})}).catch(function(){})},getContactsList:function(){var t=this;Object(o.H)({customerId:this.id}).then(function(e){t.contacts=e.data.list}).catch(function(){})},getDefalutFollowType:function(){this.followTypes&&this.followTypes.length>0?this.followType=this.followTypes[0].value:this.followType=\"\"},resetInfo:function(){this.nextTime=\"\",this.content=\"\",this.imgFiles=[],this.files=[],this.business=[],this.selectContactsId=this.contactsId||\"\",this.showRelativeType=\"\",this.batchId=\"\",this.getDefalutFollowType()},commonWordsSelect:function(t){var e=this;this.content?this.$confirm(\"您选中的常用语将覆盖当前填写内容?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\",customClass:\"is-particulars\"}).then(function(){e.content=t}).catch(function(){}):this.content=t},checkRelativeInfos:function(t){\"business\"==this.showRelativeType&&(this.business=t.data)},barClick:function(t){this.showRelativeType=t,\"business\"==t?this.showBusinessPopover=!0:\"file\"==t?this.$refs.fileInput.click():\"img\"==t&&this.$refs.imgInput.click()},uploadFile:function(t){var e=t.target.files;if(e.length){for(var s=0;s<e.length;s++){if(-1==e[s].type.indexOf(\"image\")&&\"img\"==this.showRelativeType)return void this.$message.error(\"请上传正确的文件类型\")}for(var i=\"image/*\"==t.target.accept?\"img\":\"file\",a=0;a<e.length;a++){var n=e[a];this.uploadFileRequest(n,i)}t.target.value=\"\"}},uploadFileRequest:function(t,e,s){var i=this;this.$wkUploadFile.upload({file:t,params:{type:e,batchId:this.batchId}}).then(function(a){var n=a.res.data||{};n.size=Object(l.h)(t.size),\"img\"==e?i.imgFiles.push(n):(n.icon=Object(l.o)(t),i.files.push(n)),s&&s()}).catch(function(){})},deleteImage:function(t,e){this.deleteImgOrFile(\"image\",t,e)},deleteFile:function(t,e){this.deleteImgOrFile(\"file\",t,e)},deleteImgOrFile:function(t,e,s){var a=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(i.g)({id:e.fileId}).then(function(e){\"image\"==t?a.imgFiles.splice(s,1):a.files.splice(s,1),a.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteAllFile:function(t){var e=this;this.batchId&&this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(i.i)({batchId:e.batchId,type:t}).then(function(s){2==t?e.imgFiles=[]:e.files=[],e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteRelate:function(t,e){this.business.splice(e,1)},inputFocus:function(){var t=this;this.$nextTick(function(){t.$refs.textarea.focus(),t.$emit(\"focus\")})},handleConfirm:function(){var t=this;if(this.content){var e={};e.activityId=this.data.activityId,e.activityType=this.data.activityType,e.activityTypeId=this.id,e.content=this.content,e.category=this.followType;var s=this.business.map(function(t){return t.businessId||t.id});e.batchId=this.batchId,e.businessIds=s.join(\",\"),e.contactsIds=this.contactsId,e.nextTime=this.nextTime||\"\",e.isEvent=0,this.loading=!0,Object(n.e)(e).then(function(e){t.loading=!1,t.$message.success(\"编辑成功\"),t.$emit(\"save\",e.data),t.handleCancel()}).catch(function(){t.loading=!1})}else this.$message.error(\"请输入跟进内容\")},handleCancel:function(){this.$emit(\"update:visible\",!1)}}},f=(s(\"B2DG\"),s(\"KHd+\")),v=Object(f.a)(m,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"编辑跟进记录\",width:\"700px\",\"custom-class\":\"no-padding-dialog\"},on:{close:t.handleCancel}},[s(\"div\",{staticClass:\"mix-content\"},[s(\"div\",{staticClass:\"mix-content__body\"},[s(\"div\",{staticClass:\"mix-content-select\"},[t.showContacts?s(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择联系人\"},model:{value:t.selectContactsId,callback:function(e){t.selectContactsId=e},expression:\"selectContactsId\"}},t._l(t.contacts,function(t){return s(\"el-option\",{key:t.contactsId,attrs:{label:t.name,value:t.contactsId}})})):t._e(),t._v(\" \"),s(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择跟进方式\"},model:{value:t.followType,callback:function(e){t.followType=e},expression:\"followType\"}},t._l(t.followTypes,function(t){return s(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(\" \"),s(\"el-date-picker\",{attrs:{editable:!1,type:\"datetime\",placeholder:\"选择下次联系时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:t.nextTime,callback:function(e){t.nextTime=e},expression:\"nextTime\"}}),t._v(\" \"),s(\"common-words\",{on:{select:t.commonWordsSelect}})],1),t._v(\" \"),s(\"div\",{staticClass:\"i-cont\"},[s(\"el-input\",{ref:\"textarea\",attrs:{autosize:t.autosize,maxlength:800,type:\"textarea\",clearable:\"\",resize:\"none\",placeholder:\"请输入内容\"},on:{focus:t.inputFocus},model:{value:t.content,callback:function(e){t.content=e},expression:\"content\"}})],1),t._v(\" \"),t.imgFiles.length>0?s(\"add-image-list\",{attrs:{data:t.imgFiles},on:{delete:t.deleteImage,\"delete-all\":function(e){t.deleteAllFile(2)},upload:t.uploadFile}}):t._e(),t._v(\" \"),t.files.length>0?s(\"add-file-list\",{attrs:{data:t.files},on:{delete:t.deleteFile,\"delete-all\":function(e){t.deleteAllFile(1)}}}):t._e(),t._v(\" \"),t.business.length>0?s(\"add-relate-list\",{attrs:{data:t.business,type:\"business\"},on:{delete:t.deleteRelate}}):t._e()],1),t._v(\" \"),s(\"div\",{staticClass:\"bar-cont\"},[s(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-picture\"},on:{click:function(e){t.barClick(\"img\")}}},[t._v(\"图片\")]),t._v(\" \"),s(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-file\"},on:{click:function(e){t.barClick(\"file\")}}},[t._v(\"附件\")]),t._v(\" \"),t.showBusiness?s(\"el-popover\",{attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showBusinessPopover,callback:function(e){t.showBusinessPopover=e},expression:\"showBusinessPopover\"}},[s(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:t.showBusinessPopover,radio:!1,action:t.businessAction,\"selected-data\":{business:t.business},\"crm-type\":\"business\"},on:{close:function(e){t.showBusinessPopover=!1},changeCheckout:t.checkRelativeInfos}}),t._v(\" \"),s(\"el-button\",{staticClass:\"handle-button\",staticStyle:{\"margin-left\":\"10px\"},attrs:{slot:\"reference\",type:\"text\",icon:\"wk wk-associate\"},on:{click:function(e){t.barClick(\"business\")}},slot:\"reference\"},[t._v(\"关联商机\")])],1):t._e()],1),t._v(\" \"),s(\"input\",{ref:\"fileInput\",staticClass:\"file-input\",attrs:{accept:\"*.*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}}),t._v(\" \"),s(\"input\",{ref:\"imgInput\",staticClass:\"file-input\",attrs:{accept:\"image/*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}})]),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"确定\")])],1)])},[],!1,null,\"60b478b5\",null);v.options.__file=\"LogEditDialog.vue\";e.default=v.exports},\"/hyb\":function(t,e,s){\"use strict\";var i=s(\"KOLf\");s.n(i).a},\"08m3\":function(t,e,s){},\"0Dkb\":function(t,e,s){t.exports=s.p+\"static/img/todo.b7ec535.png\"},\"1F+2\":function(t,e,s){},\"1h2A\":function(t,e,s){t.exports={xrColorPrimary:\"#409eff\"}},\"2MCj\":function(t,e,s){\"use strict\";var i=s(\"1F+2\");s.n(i).a},\"3Qrg\":function(t,e,s){\"use strict\";var i=s(\"XFCB\");s.n(i).a},\"4lzj\":function(t,e,s){},\"5XBl\":function(t,e,s){t.exports=s.p+\"static/img/board.e62f270.png\"},\"5pSV\":function(t,e,s){\"use strict\";var i=s(\"Rq8O\");s.n(i).a},\"6o/o\":function(t,e,s){},\"6pZM\":function(t,e,s){t.exports=s.p+\"static/img/check_wait.81cfb8e.png\"},\"71TI\":function(t,e,s){},\"77fj\":function(t,e,s){\"use strict\";var i=s(\"Btlj\");s.n(i).a},\"9Y/r\":function(t,e,s){\"use strict\";var i=s(\"6o/o\");s.n(i).a},\"9cPJ\":function(t,e,s){t.exports=s.p+\"static/img/visit.ffb589c.png\"},ANtS:function(t,e,s){\"use strict\";var i=s(\"fRE+\");s.n(i).a},AVjW:function(t,e,s){\"use strict\";var i=s(\"gIBH\");s.n(i).a},B2DG:function(t,e,s){\"use strict\";var i=s(\"lebS\");s.n(i).a},Bd1s:function(t,e,s){\"use strict\";var i=s(\"08m3\");s.n(i).a},BsgX:function(t,e,s){\"use strict\";s.r(e);var i={name:\"ReportMenu\",components:{},mixins:[s(\"Z+Ht\").a],props:{list:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{itemClick:function(t){this.$emit(\"select\",t)}}},a=(s(\"2MCj\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"span\",{staticClass:\"report-menu\"},t._l(t.list,function(e,i){return s(\"span\",{key:i,staticClass:\"report-menu-btn\",on:{click:function(s){t.itemClick(e)}}},[s(\"i\",{staticClass:\"report-menu-btn__icon\",class:t.getXrIcon(e.type),style:{color:t.getXrIconColor(e.type)}}),t._v(\" \"),s(\"span\",{staticClass:\"report-menu-btn__name\"},[t._v(t._s(e.name))])])}))},[],!1,null,\"37799401\",null);n.options.__file=\"ReportMenu.vue\";e.default=n.exports},Btlj:function(t,e,s){},BzA1:function(t,e,s){\"use strict\";s.r(e);var i=s(\"a/5N\"),a={name:\"ImportInfo\",components:{},props:{list:Array},data:function(){return{}},computed:{showList:function(){return this.list.filter(function(t){return\"file\"!==t.formType})}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{getValueContent:function(t){if(\"map_address\"===t.formType)return t.value?t.value.detailAddress:\"\";if(\"structure\"===t.formType||\"user\"===t.formType||\"checkbox\"===t.formType){if(Object(i.a)(t.value)){var e={structure:\"name\",user:\"realname\",checkbox:\"\"}[t.formType];return t.value.map(function(t){return e?t[e]:t}).join(\"，\")}return\"\"}if(\"single_user\"===t.formType)return Object(i.c)(t.value)&&t.value.realname?t.value.realname:\"\";if(\"customer\"===t.formType||\"business\"===t.formType||\"contract\"===t.formType||\"contacts\"===t.formType||\"category\"===t.formType||\"statusName\"===t.formType||\"typeName\"===t.formType){var s={customer:\"customerName\",business:\"businessName\",contract:\"contractNum\",contacts:\"contactsName\",category:\"categoryName\",statusName:\"statusName\",typeName:\"typeName\"}[t.formType];return Object(i.a)(t.value)?t.value.length>0?t.value[0][s]:\"\":t.value?t.value[s]:\"\"}return t.value}}},n=(s(\"AVjW\"),s(\"KHd+\")),o=Object(n.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"content\"},[s(\"div\",{staticClass:\"content-title\"},[t._v(\"基本信息\")]),t._v(\" \"),t._l(t.showList,function(e,i){return s(\"p\",{key:i,staticClass:\"detail-cell\"},[s(\"span\",{staticClass:\"detail-cell__label\"},[t._v(\"\\n      \"+t._s(e.name)+\"\\n    \")]),s(\"br\"),t._v(\" \"),s(\"span\",{staticClass:\"detail-cell__value\"},[t._v(\"\\n      \"+t._s(t.getValueContent(e))+\"\\n    \")])])})],2)},[],!1,null,\"74c3ac7c\",null);o.options.__file=\"ImportInfo.vue\";e.default=o.exports},C3Po:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"8GhS\"),o=s(\"zsVz\"),l={name:\"TaskQuickAdd\",components:{XhUserCell:n.p},props:{params:Object},data:function(){return{sendLoading:!1,isUnfold:!1,sendContent:\"\",sendStopTime:\"\",mainUser:[]}},computed:{createMainUser:function(){return this.mainUser&&this.mainUser.length?this.mainUser[0]:null}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{inputFocus:function(){var t=this;this.$emit(\"focus\"),this.isUnfold=!0,this.$nextTick(function(){t.$refs.input.focus()})},selectMainUser:function(t){this.mainUser=t.value},send:function(){var t=this;if(this.sendContent.length){this.sendLoading=!0;var e={name:this.sendContent,stopTime:this.sendStopTime,mainUserId:this.createMainUser?this.createMainUser.userId:\"\"};this.params&&(e=a()({},e,this.params)),Object(o.e)(e).then(function(e){t.sendLoading=!1,t.$message.success(\"新建成功\"),t.resetSendData(),t.$emit(\"send\")}).catch(function(){t.sendLoading=!1})}else this.$message.error(\"请填写任务标题\")},resetSendData:function(){this.sendContent=\"\",this.sendStopTime=\"\",this.mainUser=[],this.isUnfold=!1},addClose:function(){this.isUnfold=!1}}},c=(s(\"5pSV\"),s(\"KHd+\")),r=Object(c.a)(l,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.sendLoading,expression:\"sendLoading\"}],staticClass:\"task-quick-add\",class:[\"add\",{unfold:t.isUnfold,\"is-close\":!t.isUnfold}]},[t.isUnfold?s(\"i\",{staticClass:\"wk wk-close\",on:{click:t.addClose}}):t._e(),t._v(\" \"),s(\"el-input\",{ref:\"input\",staticClass:\"input\",attrs:{maxlength:100,\"prefix-icon\":t.isUnfold?\"\":\"el-icon-plus\",placeholder:\"添加任务\"},on:{focus:t.inputFocus},model:{value:t.sendContent,callback:function(e){t.sendContent=e},expression:\"sendContent\"}}),t._v(\" \"),s(\"flexbox\",{staticClass:\"add-info\"},[s(\"el-date-picker\",{ref:\"endTime\",class:{\"no-time-top\":!t.sendStopTime},attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"\"},model:{value:t.sendStopTime,callback:function(e){t.sendStopTime=e},expression:\"sendStopTime\"}}),t._v(\" \"),s(\"xh-user-cell\",{attrs:{value:t.mainUser,radio:\"\",placement:\"top\"},on:{\"value-change\":t.selectMainUser}},[s(\"div\",{staticClass:\"select-user\",attrs:{slot:\"reference\"},slot:\"reference\"},[t.createMainUser?s(\"xr-avatar\",{attrs:{name:t.createMainUser.realname,size:24,src:t.createMainUser.img}}):s(\"i\",{staticClass:\"wk wk-persons add-info--person\"})],1)])],1),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.send,expression:\"send\"}],staticClass:\"send-btn\",attrs:{icon:\"wk wk-top\",type:\"primary\"}},[t._v(\"发布\")])],1)},[],!1,null,\"38430333\",null);r.options.__file=\"TaskQuickAdd.vue\";e.default=r.exports},CH6S:function(t,e,s){},Cbuk:function(t,e,s){},\"E/pc\":function(t,e,s){\"use strict\";var i=s(\"fpBj\");s.n(i).a},EBQf:function(t,e,s){\"use strict\";var i=s(\"QbLZ\"),a=s.n(i),n=s(\"mkuN\"),o=s(\"/407\"),l=s(\"L2JU\"),c={name:\"RelatedBusiness\",components:{CrmRelative:n.a,RelatedBusinessCell:o.default},props:{marginLeft:{type:String,default:\"20px\"},allData:{type:Object,default:function(){return{contacts:[],customer:[],business:[],contract:[]}}},showFoot:{type:Boolean,default:!1},showAdd:{type:Boolean,default:!0}},data:function(){return{showTypes:[\"customer\",\"contacts\",\"business\",\"contract\"],showPopover:!1,relevanceAll:{customerIds:[],contractIds:[],contactsIds:[],businessIds:[]},relatedListData:{},showRelative:!1}},computed:a()({},Object(l.b)([\"crm\"]),{showCRMPermission:function(){return this.crm}}),watch:{allData:function(){this.relatedListData=this.allData}},mounted:function(){this.relatedListData=this.allData},methods:{crmrelativeClose:function(){this.showPopover=!1},checkInfos:function(t){var e=this;this.showPopover=!1,this.relatedListData=t.data;var s=function(s){var i=t.data[s];e.relevanceAll[s+\"Ids\"]=i.map(function(t){return t[s+\"Id\"]})};for(var i in t.data)s(i);this.$emit(\"checkInfos\",this.relevanceAll,t.data)},delRelevance:function(t,e,s){this.$emit(\"unbind\",t,s,e)},checkRelatedDetail:function(t,e){e.key=e[t+\"Id\"]||e.id,this.$emit(\"checkRelatedDetail\",t,e)}}},r=(s(\"PdhK\"),s(\"KHd+\")),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"related-business\",style:{\"margin-left\":t.marginLeft}},[t.showAdd?s(\"el-popover\",{attrs:{placement:\"right-end\",width:\"800\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:\"showPopover\"}},[t.showRelative?s(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:t.showPopover,radio:!1,\"selected-data\":t.relatedListData,\"show-types\":t.showTypes},on:{close:t.crmrelativeClose,changeCheckout:t.checkInfos}}):t._e(),t._v(\" \"),t.showCRMPermission?s(\"span\",{staticClass:\"add-btn\",attrs:{slot:\"reference\"},on:{click:function(e){t.showRelative=!0}},slot:\"reference\"},[s(\"i\",{staticClass:\"wk wk-l-plus\"}),t._v(\" \"),s(\"span\",{staticClass:\"label\"},[t._v(\"关联业务\")])]):t._e()],1):t._e(),t._v(\" \"),t._l(t.relatedListData,function(e,i){return s(\"div\",{key:i,staticStyle:{\"margin-top\":\"10px\"}},t._l(e,function(e,a){return s(\"related-business-cell\",{key:a,attrs:{data:e,\"cell-index\":a,type:i,\"show-foot\":t.showFoot},on:{unbind:t.delRelevance,detail:function(s){t.checkRelatedDetail(i,e)}}})}))})],2)},[],!1,null,\"2724a194\",null);u.options.__file=\"RelatedBusiness.vue\";e.a=u.exports},GhBu:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"VmBU\"),o=s(\"Ir+r\"),l=s(\"MdnP\"),c=s(\"u2hk\"),r=s(\"dPzk\"),u={name:\"RelatedBusinessList\",components:{CRMAllDetail:s(\"yPq4\").default},props:{data:{type:Object,required:!0}},data:function(){return{options:{customer:{label:\"客户\",type:\"customer\",key:\"customerName\",icon:\"wk-customer\"},contacts:{label:\"联系人\",type:\"contacts\",key:\"contactsName\",icon:\"wk-contacts\"},business:{label:\"商机\",type:\"business\",key:\"businessName\",icon:\"wk-business\"},contract:{label:\"合同\",type:\"contract\",key:\"name\",icon:\"wk-contract\"}}}},methods:{handlerToDetail:function(t,e){this.$emit(\"select\",t,this.data[t][e])}}},d=(s(\"+5Si\"),s(\"KHd+\")),h=Object(d.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"related-business-list\"},t._l(t.options,function(e,i){return t.data[e.type].length>0?s(\"div\",{key:i,staticClass:\"list-item\"},[s(\"div\",{staticClass:\"left\"},[s(\"span\",{staticClass:\"wk icon\",class:e.icon}),t._v(\" \"),s(\"span\",[t._v(\"相关\"+t._s(e.label)+\"：\")])]),t._v(\" \"),s(\"div\",{staticClass:\"content\"},t._l(t.data[e.type],function(i,a){return s(\"div\",{key:a,staticClass:\"content-item\",on:{click:function(s){t.handlerToDetail(e.type,a)}}},[t._v(\"\\n        \"+t._s(i[e.key]||i.name)+\"\\n      \")])}))]):t._e()}))},[],!1,null,\"459a1c16\",null);h.options.__file=\"RelatedBusinessList.vue\";var p=h.exports,m=s(\"z7oh\"),f=s(\"BsgX\"),v=s(\"L2JU\"),g=s(\"jHPx\"),y={name:\"LogItem\",components:{PictureListView:l.a,FileListView:c.a,RelatedBusinessList:p,CommentList:m.a,ReplyComment:r.a,ReportMenu:f.default},props:{data:{type:Object,required:!0},index:{type:Number,default:0},showHistoryBtn:{type:Boolean,default:!1}},data:function(){return{isWaiting:!1,showReply:!1,commentLoading:!1,replyList:[],reportList:[{type:\"customer\",key:\"customerCount\",info:\"今日新增客户\",name:\"今日新增客户 0\"},{type:\"business\",key:\"businessCount\",info:\"今日新增商机\",name:\"今日新增商机 0\"},{type:\"contract\",key:\"contractCount\",info:\"今日新增合同\",name:\"今日新增合同 0\"},{type:\"receivables\",key:\"receivablesMoney\",info:\"今日新增回款\",name:\"今日新增回款 0\"},{type:\"record\",key:\"recordCount\",info:\"今日新增跟进记录\",name:\"今日新增跟进记录 0\"}]}},computed:a()({},Object(v.b)([\"userInfo\"]),{allData:function(){return{business:this.data?this.data.businessList:[],contacts:this.data?this.data.contactsList:[],contract:this.data?this.data.contractList:[],customer:this.data?this.data.customerList:[]}},allDataLen:function(){var t=this,e=0;if(!this.data)return e;return[\"businessList\",\"contactsList\",\"contractList\",\"customerList\"].forEach(function(s){e+=t.data[s].length||0}),e},replyTotal:function(){var t=0;return this.replyList.forEach(function(e){t++,t+=e.childCommentList.length||0}),t||this.data.replyNum},logTitleName:function(){return{1:\"今日\",2:\"本周\",3:\"本月\"}[this.data.categoryId]+\"工作内容\"},logNextTitleName:function(){return{1:\"明日\",2:\"下周\",3:\"下月\"}[this.data.categoryId]+\"工作内容\"}}),created:function(){if(this.data.getBulletin){var t=this.data.bulletin||{};this.reportList=this.reportList.map(function(e){return\"receivablesMoney\"==e.key&&(t.receivablesMoney=Object(g.h)(Math.floor(t.receivablesMoney||0))),e.name=e.info+\" \"+t[e.key],e})}},beforeDestroy:function(){},methods:{getCategory:function(t){return{1:\"日报\",2:\"周报\",3:\"月报\"}[t]},handleCommand:function(t,e){var s=this;\"delete\"===t?this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(n.b)({logId:s.data.logId}).then(function(){s.$message.success(\"删除成功!\"),s.$emit(\"delete\",e)})}).catch(function(){s.$message.info(\"已取消删除\")}):this.$emit(\"edit\",this.index,this.data)},calcVisible:function(t){if(1===this.data.isRead)return!1;var e=this.$el.getBoundingClientRect();return t>e.top+e.height},readLog:function(){var t=this;1!==this.data.isRead&&(this.$emit(\"read\"),Object(n.j)({logId:this.data.logId}).then(function(){t.$bus.off(\"load-more-work-log\")}).catch())},handleReply:function(t){var e=this;this.commentLoading=!0,Object(o.c)({type:2,content:t,typeId:this.data.logId}).then(function(t){t.data.user={userId:e.userInfo.userId,realname:e.userInfo.realname,img:e.userInfo.img},t.data.childCommentList=[],e.replyList.push(t.data),e.commentLoading=!1,e.showReply=!1,e.$nextTick(function(){e.showReply=!0})}).catch(function(){e.commentLoading=!1})},deleteComment:function(t){this.replyList.splice(t,1)},closeOtherReply:function(t){!t&&this.$refs.comment_list&&this.$refs.comment_list.closeReply()},relatedClick:function(t,e){this.$emit(\"relate-detail\",t,e)},replayClick:function(){this.showReply=!this.showReply,0==this.replyList.length&&this.getCommentList()},getCommentList:function(){var t=this;Object(o.b)({typeId:this.data.logId,type:2}).then(function(e){var s=e.data||[];t.replyList=s}).catch(function(){})},reportSelect:function(t){this.$emit(\"report-detail\",t,this.data)},checkHistoryClick:function(){this.$emit(\"check-history\",this.data.createUser)}}},b=(s(\"RQpY\"),Object(d.a)(y,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"log-item\"},[s(\"div\",{staticClass:\"main\"},[s(\"div\",{staticClass:\"user\"},[t.data.createUser?s(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:t.data.createUser.realname,id:t.data.createUser.userId,size:38,src:t.data.createUser.img,disabled:!1}}):t._e(),t._v(\" \"),s(\"div\",{staticClass:\"box\"},[s(\"div\",{staticClass:\"username\"},[t._v(\"\\n          \"+t._s(t.data.realname)+\"\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"time\"},[t._v(\"\\n          创建日志于 \"+t._s(t.data.createTime)+\" \")]),t._v(\" \"),s(\"div\",{staticClass:\"handle\"},[t.showHistoryBtn?s(\"el-button\",{attrs:{type:\"text\"},on:{click:t.checkHistoryClick}},[t._v(\"查看以往日志\")]):t._e()],1),t._v(\" \"),s(\"div\",{staticClass:\"comment-status\"},[s(\"span\",{staticClass:\"icon wk wk-task\"}),t._v(\" \"),s(\"span\",[t._v(t._s(t.getCategory(t.data.categoryId))+\"-\"+t._s(0===t.data.replyNum?\"未点评\":\"已点评\"))]),t._v(\" \"),s(\"span\",{staticClass:\"dot\",class:{active:0!==t.data.replyNum}})])])],1),t._v(\" \"),s(\"div\",{staticClass:\"content\"},[t.data.content?s(\"div\",{staticClass:\"content-box\"},[s(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n          \"+t._s(t.logTitleName)+\"：\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"content-text\"},[t._v(t._s(t.data.content))])]):t._e(),t._v(\" \"),t.data.tomorrow?s(\"div\",{staticClass:\"content-box\"},[s(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n          \"+t._s(t.logNextTitleName)+\"：\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"content-text\"},[t._v(t._s(t.data.tomorrow))])]):t._e(),t._v(\" \"),t.data.question?s(\"div\",{staticClass:\"content-box\"},[s(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n          遇到的问题：\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"content-text\"},[t._v(t._s(t.data.question))])]):t._e()]),t._v(\" \"),t.data.img&&0!==t.data.img.length?s(\"picture-list-view\",{attrs:{list:t.data.img}}):t._e(),t._v(\" \"),t.data.file&&0!==t.data.file.length?s(\"file-list-view\",{attrs:{list:t.data.file}}):t._e(),t._v(\" \"),t.allDataLen>0?s(\"related-business-list\",{attrs:{data:t.allData},on:{select:t.relatedClick}}):t._e(),t._v(\" \"),t.data.getBulletin?s(\"div\",{staticClass:\"content\"},[s(\"div\",{staticClass:\"content-box\"},[s(\"div\",{staticClass:\"content-title\"},[t._v(\"\\n          销售简报\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"content-text\"},[s(\"report-menu\",{attrs:{list:t.reportList},on:{select:t.reportSelect}})],1)])]):t._e(),t._v(\" \"),t.data.sendUserList&&t.data.sendUserList.length?s(\"flexbox\",{staticClass:\"send-list\"},[s(\"span\",{staticClass:\"send-list__label\"},[t._v(\"发送给：\")]),t._v(\" \"),t._l(t.data.sendUserList,function(t,e){return s(\"span\",{key:e,staticClass:\"send-list__user\"},[s(\"xr-avatar\",{attrs:{name:t.realname,id:t.userId,size:32,src:t.img,disabled:!1}})],1)})],2):t._e()],1),t._v(\" \"),s(\"div\",{staticClass:\"footer\"},[t.data.permission&&(t.data.permission.isUpdate||t.data.permission.isDelete)?s(\"el-dropdown\",{attrs:{trigger:\"click\"},on:{command:t.handleCommand}},[s(\"el-button\",{staticClass:\"more\",attrs:{icon:\"el-icon-more\"}}),t._v(\" \"),s(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[t.data.permission.isUpdate?s(\"el-dropdown-item\",{attrs:{command:\"edit\"}},[t._v(\"编辑\")]):t._e(),t._v(\" \"),t.data.permission.isDelete?s(\"el-dropdown-item\",{attrs:{command:\"delete\"}},[t._v(\"删除\")]):t._e()],1)],1):t._e(),t._v(\" \"),s(\"el-button\",{staticClass:\"replay-btn\",attrs:{type:\"primary\",icon:\"wk wk-message\"},on:{click:t.replayClick}},[t._v(t._s(\"回复\"+(t.replyTotal>0?\"(\"+t.replyTotal+\")\":\"\")))])],1),t._v(\" \"),t.showReply?s(\"div\",{staticClass:\"reply-wrapper\"},[s(\"reply-comment\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.commentLoading,expression:\"commentLoading\"}],ref:\"f_reply\",on:{toggle:t.closeOtherReply,reply:t.handleReply}}),t._v(\" \"),t.replyList.length>0?s(\"comment-list\",{ref:\"comment_list\",attrs:{id:t.data.logId,list:t.replyList,type:\"2\"},on:{delete:t.deleteComment,\"close-other-reply\":function(e){t.$refs.f_reply.toggleFocus(!0)}}}):t._e()],1):t._e()])},[],!1,null,\"1d00c433\",null));b.options.__file=\"LogItem.vue\";e.default=b.exports},HtQe:function(t,e,s){\"use strict\";var i=s(\"OM3V\");s.n(i).a},\"I+NK\":function(t,e,s){\"use strict\";var i=s(\"PWYh\");s.n(i).a},IJOA:function(t,e,s){\"use strict\";var i=s(\"ujp9\");s.n(i).a},\"Ir+r\":function(t,e,s){\"use strict\";s.d(e,\"c\",function(){return a}),s.d(e,\"a\",function(){return n}),s.d(e,\"b\",function(){return o});var i=s(\"t3Un\");function a(t){return Object(i.a)({url:\"workTaskComment/setComment\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function n(t){return Object(i.a)({url:\"workTaskComment/deleteComment\",method:\"post\",data:t})}function o(t){return Object(i.a)({url:\"workTaskComment/queryCommentList\",method:\"post\",data:t})}},JAjk:function(t,e,s){t.exports=s.p+\"static/img/contacts.83d4b7f.png\"},JCWM:function(t,e,s){\"use strict\";s.r(e);var i=s(\"7Dod\"),a=s(\"XJYT\"),n={name:\"PutPoolHandle\",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},id:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{selectId:\"\",list:[]}},computed:{},watch:{list:{handler:function(){this.selectId=this.list&&this.list.length>0?this.list[0].poolId:\"\"},immediate:!0},visible:function(t){t&&0===this.list.length&&this.getList()}},mounted:function(){},methods:{getList:function(){var t=this,e=a.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(i.u)().then(function(s){t.list=s.data||[],e&&e.close()}).catch(function(){e&&e.close()})},handleCancel:function(){this.$emit(\"update:visible\",!1)},handleConfirm:function(){var t=this;if(this.selectId){var e=a.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"放入公海\"]')});Object(i.F)({ids:this.selectionList.map(function(t){return t.customerId}),poolId:this.selectId}).then(function(s){t.$message({type:\"success\",message:\"操作成功\"}),e.close(),t.$emit(\"handle\",{type:\"put_seas\"}),t.handleCancel()}).catch(function(){e.close()})}}}},o=(s(\"jUvl\"),s(\"KHd+\")),l=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"放入公海\",width:\"450px\"},on:{close:t.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"公海：\")]),t._v(\" \"),s(\"el-select\",{model:{value:t.selectId,callback:function(e){t.selectId=e},expression:\"selectId\"}},t._l(t.list,function(t){return s(\"el-option\",{key:t.poolId,attrs:{label:t.poolName,value:t.poolId}})}))],1)],1),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"7b1cec81\",null);l.options.__file=\"PutPoolHandle.vue\";e.default=l.exports},K4QM:function(t,e,s){t.exports=s.p+\"static/img/leads_not.d26c261.png\"},KOLf:function(t,e,s){},Klv4:function(t,e,s){\"use strict\";var i=s(\"lrb+\");s.n(i).a},KmSi:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"4XAY\"),o=s(\"ZoMv\"),l=s(\"yPq4\"),c=s(\"qDfk\"),r=s(\"L2JU\"),u=s(\"4peS\"),d=s.n(u),h=s(\"dAOq\"),p={name:\"ReportList\",components:{CRMAllDetail:l.default,RecordList:c.default},filters:{dealIcon:function(t){return 1==t?\"wk wk-success deal-suc\":\"wk wk-close deal-un\"},dealName:function(t){return 1==t?\"已成交\":\"未成交\"}},mixins:[h.a],props:{show:{type:Boolean,default:!1},title:String,placeholder:{type:String,default:\"请输入搜索内容\"},crmType:String,fieldList:Array,recordRequest:Function,request:Function,params:Object,paging:{type:Boolean,default:!0},sortable:{type:[Boolean,String],default:!1}},data:function(){return{inputContent:\"\",loading:!1,tableHeight:this.getTableHeight(),list:[],showFieldList:[],sortData:{},currentPage:1,pageSize:d.a.get(\"crmPageSizes\")||15,pageSizes:[15,30,60,100],total:0,rowID:\"\",rowType:\"\",showDview:!1,recordParams:{},recordShow:!1}},computed:a()({},Object(r.b)([\"crm\"]),{showExamineStatus:function(){return\"contract\"==this.crmType&&\"receivables\"==this.crmType},showFillColumn:function(){return!this.fieldList||!this.fieldList.length}}),watch:{show:function(t){t&&this.initInfo()}},mounted:function(){this.$el.addEventListener(\"click\",this.handleDocumentClick,!1)},destroyed:function(){this.$el&&this.$el.removeEventListener(\"click\",this.handleDocumentClick,!1)},methods:{getTableHeight:function(){var t=document.documentElement.clientHeight;return t-.2*t-200},initInfo:function(){var t=this;this.inputContent=\"\",this.showFieldList=[],this.sortData={},this.$nextTick(function(){t.$refs.crmTable.clearSort()}),this.list=[],this.currentPage=1,window.onresize=function(){t.tableHeight=t.getTableHeight()},this.fieldList?(this.showFieldList=this.fieldList,this.getList()):this.getFieldList()},searchInput:function(){this.currentPage=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e={};this.paging&&(e={page:this.currentPage,limit:this.pageSize}),this.placeholder&&(e.search=this.inputContent),this.sortData.order&&(e.sortField=this.sortData.prop,e.order=\"ascending\"==this.sortData.order?2:1),this.request(a()({},e,this.params)).then(function(e){t.paging?(t.list=e.data.list,t.total=e.data.totalRow):t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},getFieldList:function(){var t=this;if(0==this.showFieldList.length){this.loading=!0;var e=\"business_status\"==this.crmType?\"business\":this.crmType,s={label:o.default[e]};Object(n.A)(s).then(function(e){for(var s=0;s<e.data.length;s++){var i=e.data[s],a=0;a=i.width?i.width:i.name&&i.name.length<=6?15*i.name.length+45:140,t.showFieldList.push({prop:i.fieldName,label:i.name,width:a})}t.getList()}).catch(function(){t.loading=!1})}else this.getList()},fieldFormatter:function(t,e){return this.fieldList&&this.fieldList.length&&\"crmType\"==e.property?o.default.convertTypeToName(t[e.property]):\"\"===t[e.property]||null===t[e.property]?\"--\":t[e.property]},sortChange:function(t,e,s){this.sortData=t,this.getList()},handleSizeChange:function(t){d.a.set(\"crmPageSizes\",t),this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},handleRowClick:function(t,e,s){\"leads\"===this.crmType?\"leadsName\"===e.property?(this.rowID=t.leadsId,this.showDview=!0):this.showDview=!1:\"customer\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):this.showDview=!1:\"contacts\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"name\"===e.property?(this.rowID=t.contactsId,this.rowType=\"contacts\",this.showDview=!0):this.showDview=!1:\"business\"===this.crmType||\"business_status\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===e.property?(this.rowID=t.businessId,this.rowType=\"business\",this.showDview=!0):this.showDview=!1:\"contract\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"businessName\"===e.property?(this.rowID=t.businessId,this.rowType=\"business\",this.showDview=!0):\"contactsName\"===e.property?(this.rowID=t.contactsId,this.rowType=\"contacts\",this.showDview=!0):\"num\"===e.property||\"name\"===e.property?(this.rowID=t.contractId,this.rowType=\"contract\",this.showDview=!0):this.showDview=!1:\"product\"===this.crmType?\"name\"===e.property?(this.rowID=t.productId,this.showDview=!0):this.showDview=!1:\"receivables\"===this.crmType?\"customerName\"===e.property?(this.rowID=t.customerId,this.rowType=\"customer\",this.showDview=!0):\"contractNum\"===e.property?(this.rowID=t.contractId,this.rowType=\"contract\",this.showDview=!0):\"number\"===e.property?(this.rowID=t.receivablesId,this.rowType=\"receivables\",this.showDview=!0):this.showDview=!1:\"record\"===this.crmType&&(\"count\"===e.property&&t.count?(this.rowType=\"crm_\"+o.default.convertTypeToKey(t.crmType),this.recordParams=a()({crmType:t.crmType,queryType:0},this.params),this.recordShow=!0):this.recordShow=!1)},handleHandle:function(t){\"alloc\"!==t.type&&\"get\"!==t.type&&\"transfer\"!==t.type&&\"transform\"!==t.type&&\"delete\"!==t.type&&\"put_seas\"!==t.type||(this.showDview=!1),\"edit\"!==t.type&&this.getList()},cellClassName:function(t){var e=t.row,s=t.column;t.rowIndex,t.columnIndex;return this.crmType&&(\"customerName\"===s.property||\"businessName\"===s.property||\"name\"===s.property||\"contactsName\"===s.property||\"num\"===s.property||\"contractNum\"===s.property||\"number\"===s.property||\"record\"===this.crmType&&\"count\"===s.property&&e[s.property])?\"can-visit--underline\":\"\"},hideView:function(){this.$emit(\"update:show\",!1),this.$emit(\"hide\")},handleDocumentClick:function(t){var e=!0,s=document.getElementsByClassName(\"el-table__row\");if(s&&e)for(var i=0;i<s.length;i++){if(s[i].contains(t.target)){e=!1;break}}document.getElementById(\"slide\")&&document.getElementById(\"slide\").contains(t.target)&&(e=!1),e&&(this.showDview=!1)}}},m=(s(\"hr1e\"),s(\"KHd+\")),f=Object(m.a)(p,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{attrs:{visible:t.show,\"append-to-body\":!0,\"close-on-click-modal\":!1,top:\"10vh\",width:\"80%\",\"custom-class\":\"no-padding-dialog\"},on:{close:t.hideView}},[s(\"div\",{staticClass:\"header\",attrs:{slot:\"title\"},on:{click:function(e){t.showDview=!1}},slot:\"title\"},[s(\"span\",{staticClass:\"title\"},[t._v(t._s(t.title))]),t._v(\" \"),t.placeholder?s(\"el-input\",{staticClass:\"search-input\",attrs:{placeholder:t.placeholder},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.searchInput(e):null}},model:{value:t.inputContent,callback:function(e){t.inputContent=e},expression:\"inputContent\"}},[s(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},nativeOn:{click:function(e){return t.searchInput(e)}},slot:\"append\"})],1):t._e()],1),t._v(\" \"),s(\"div\",{staticClass:\"container\"},[s(\"div\",{staticClass:\"content\"},[s(\"div\",{staticClass:\"list-body\"},[s(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],ref:\"crmTable\",staticStyle:{width:\"100%\"},attrs:{id:\"crm-table\",data:t.list,height:t.tableHeight,\"cell-class-name\":t.cellClassName,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"row-click\":t.handleRowClick,\"sort-change\":t.sortChange}},[t._l(t.showFieldList,function(e,i){return s(\"el-table-column\",{key:i,attrs:{sortable:\"poolDay\"!=e.prop&&\"custom\",fixed:0==i,prop:e.prop,label:e.label,width:e.width,\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(i){return[\"dealStatus\"==e.prop?[s(\"i\",{class:t._f(\"dealIcon\")(i.row[e.prop])}),t._v(\" \"),s(\"span\",[t._v(t._s(t._f(\"dealName\")(i.row[e.prop])))])]:\"status\"==e.prop?[2==i.row.status?s(\"i\",{staticClass:\"wk wk-circle-password customer-lock\"}):t._e()]:\"checkStatus\"==e.prop?[s(\"span\",{staticClass:\"status-mark\",style:{backgroundColor:t.getStatusColor(i.row.checkStatus)}}),t._v(\" \"),s(\"span\",[t._v(t._s(t.getStatusName(i.row.checkStatus)))])]:[t._v(t._s(t.fieldFormatter(i.row,i.column)))]]}}])})}),t._v(\" \"),t.showFillColumn?s(\"el-table-column\"):t._e()],2),t._v(\" \"),t.paging?s(\"div\",{staticClass:\"p-contianer\"},[s(\"el-pagination\",{staticClass:\"p-bar\",attrs:{\"current-page\":t.currentPage,\"page-sizes\":t.pageSizes,\"page-size\":t.pageSize,total:t.total,background:\"\",layout:\"prev, pager, next, sizes, total, jumper\"},on:{\"update:pageSize\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1):t._e()],1)]),t._v(\" \"),s(\"c-r-m-all-detail\",{staticClass:\"d-view\",attrs:{visible:t.showDview,\"crm-type\":t.rowType,id:t.rowID},on:{\"update:visible\":function(e){t.showDview=e},handle:t.handleHandle}}),t._v(\" \"),t.recordShow?s(\"record-list\",{attrs:{\"crm-type\":t.rowType,request:t.recordRequest,params:t.recordParams},on:{handle:t.getList,hide:function(e){t.recordShow=!1}}}):t._e()],1)])},[],!1,null,\"a44b35be\",null);f.options.__file=\"index.vue\";e.default=f.exports},\"L+lS\":function(t,e,s){t.exports=s.p+\"static/img/nearby_not.016fa6f.png\"},\"La+m\":function(t,e,s){},MdnP:function(t,e,s){\"use strict\";var i={name:\"PictureListView\",props:{list:{type:Array,required:!0}},methods:{imgZoom:function(t,e){this.$bus.emit(\"preview-image-bus\",{index:e,data:t.map(function(t,e,s){return{url:t.filePath||t.url,name:t.name}})})}}},a=(s(\"IJOA\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"picture-list-view\"},t._l(t.list,function(e,a){return i(\"div\",{key:a,staticClass:\"img-list-item\",on:{click:function(e){t.imgZoom(t.list,a)}}},[i(\"img\",{directives:[{name:\"src\",rawName:\"v-src\",value:e.filePath||e.url,expression:\"imgItem.filePath || imgItem.url\"}],key:e.filePath||e.url,attrs:{onerror:'this.src=\"'+s(\"Tww3\")+'\"'}})])}))},[],!1,null,\"29b203af\",null);n.options.__file=\"PictureListView.vue\";e.a=n.exports},NYF1:function(t,e,s){\"use strict\";var i={name:\"AddRelateList\",components:{},props:{data:Array,type:{type:[String,Number],require:!0},label:String},data:function(){return{}},computed:{typeName:function(){return this.label?this.label:{customer:\"客户\",contacts:\"联系人\",business:\"商机\",contract:\"合同\"}[this.type]}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{getItemName:function(t){return t[{customer:\"customerName\",contacts:\"name\",business:\"businessName\",contract:\"name\"}[this.type]]||t.name},deleteItem:function(t,e){this.$emit(\"delete\",t,e,this.type)}}},a=(s(\"s357\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"section\",{staticClass:\"c-cont\"},[s(\"flexbox\",{staticClass:\"c-header\"},[s(\"i\",{class:[\"wk\",\"wk-\"+t.type]}),t._v(\" \"),s(\"div\",{staticClass:\"c-name\"},[t._v(t._s(t.typeName))])]),t._v(\" \"),s(\"div\",{staticClass:\"c-body\"},[s(\"flexbox\",{attrs:{wrap:\"wrap\"}},t._l(t.data,function(e,i){return s(\"flexbox\",{key:i,staticClass:\"c-item\"},[s(\"div\",{staticClass:\"c-item-name\"},[t._v(t._s(t.getItemName(e)))]),t._v(\" \"),s(\"div\",{staticClass:\"c-item-close\",on:{click:function(s){t.deleteItem(e,i)}}},[t._v(\"×\")])])}))],1)],1)},[],!1,null,\"60fd2091\",null);n.options.__file=\"AddRelateList.vue\";e.a=n.exports},Nbko:function(t,e,s){\"use strict\";var i=s(\"La+m\");s.n(i).a},O8VQ:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"4XAY\"),o=s(\"Vm8M\"),l=s(\"7Qib\"),c=s(\"Z+Ht\"),r=s(\"vvxI\"),u=s(\"L2JU\"),d={name:\"LogCell\",components:{MapView:o.a},filters:{getFileSize:function(t){return Object(l.h)(t)}},mixins:[c.a,r.default],props:{item:{type:Object,default:function(){return{}}},section:[String,Number],index:[String,Number],canDelete:{type:Boolean,default:!0}},data:function(){return{showMapView:!1,mapViewInfo:{}}},computed:a()({},Object(u.b)([\"crm\"]),{hasEditAuth:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.update},hasDeleteAuth:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.delete},activityIcon:function(){return this.getXrIcon(this.getActivityType(this.item.activityType))},activityIconColor:function(){return this.getXrIconColor(this.getActivityType(this.item.activityType))}}),mounted:function(){},methods:{previewImg:function(t,e){this.$bus.emit(\"preview-image-bus\",{index:e,data:t})},downloadFile:function(t){Object(l.d)({path:t.url,name:t.name})},handleCommand:function(t){var e=this;\"delete\"==t?this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){(4==e.item.type?n.d:n.b)({activityId:e.item.activityId}).then(function(t){e.$emit(\"delete\",e.item,e.index,e.section),e.$store.dispatch(\"GetMessageNum\"),e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){}):\"edit\"==t&&this.$emit(\"edit\",this.item,this.index,this.section)},checkRelationDetail:function(t,e){this.$emit(\"crm-detail\",t,e)},checkMapView:function(t){t.address&&(this.mapViewInfo={title:t.address,lat:t.lat,lng:t.lng},this.showMapView=!0)}}},h=(s(\"3Qrg\"),s(\"KHd+\")),p=Object(h.a)(d,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"fl-c\"},[s(\"flexbox\",{staticClass:\"fl-h\"},[s(\"xr-avatar\",{staticClass:\"fl-h-img\",attrs:{name:t.item.realname,id:t.item.createUserId,size:30,src:t.item.userImg,disabled:!1}}),t._v(\" \"),s(\"div\",{staticClass:\"fl-h-b\"},[s(\"div\",{staticClass:\"fl-h-name\"},[t._v(t._s(t.item.realname))]),t._v(\" \"),s(\"div\",{staticClass:\"fl-h-time\"},[t._v(t._s(t.item.createTime))])]),t._v(\" \"),t.item.category?s(\"div\",{staticClass:\"follow\"},[s(\"span\",{staticClass:\"follow-info\"},[t._v(t._s(t.item.category))])]):t._e(),t._v(\" \"),s(\"span\",{staticClass:\"log-mark\",style:{right:t.canDelete?\"40px\":\"15px\"}},[s(\"i\",{class:t.activityIcon,style:{color:t.activityIconColor}}),t._v(\" \"),s(\"span\",{staticClass:\"log-mark__label\"},[t._v(t._s(t.getActivityTypeName(t.item.activityType)+\"-\"+t.getRecordLogTypeName(t.item.type)))])]),t._v(\" \"),t.canDelete&&(t.hasDeleteAuth||t.hasEditAuth)?s(\"el-dropdown\",{staticClass:\"more-drop\",attrs:{trigger:\"click\"},on:{command:t.handleCommand}},[s(\"i\",{staticClass:\"el-icon-arrow-down el-icon-more\"}),t._v(\" \"),s(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[t.hasEditAuth?s(\"el-dropdown-item\",{attrs:{command:\"edit\"}},[t._v(\"编辑\")]):t._e(),t._v(\" \"),t.hasDeleteAuth?s(\"el-dropdown-item\",{attrs:{command:\"delete\"}},[t._v(\"删除\")]):t._e()],1)],1):t._e()],1),t._v(\" \"),s(\"div\",{staticClass:\"fl-b\"},[s(\"div\",{staticClass:\"fl-b-content\"},[t._v(t._s(t.item.content))]),t._v(\" \"),t.item.img&&t.item.img.length>0?s(\"flexbox\",{staticClass:\"fl-b-images\",attrs:{wrap:\"wrap\"}},t._l(t.item.img,function(e,i){return s(\"div\",{directives:[{name:\"src\",rawName:\"v-src:background-image\",value:e.url,expression:\"file.url\",arg:\"background-image\"}],key:e.url,staticClass:\"fl-b-img-item\",on:{click:function(e){t.previewImg(t.item.img,i)}}})})):t._e(),t._v(\" \"),t.item.file&&t.item.file.length>0?s(\"div\",t._l(t.item.file,function(e,i){return s(\"flexbox\",{key:i,staticClass:\"cell\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"cell-hd first-show\"},[s(\"i\",{staticClass:\"wk wk-file\"})]),t._v(\" \"),s(\"div\",{staticClass:\"cell-hd first-show\"},[t._v(\"\\n          附件：\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"cell-bd text-one-line\"},[t._v(\"\\n          \"+t._s(e.name)+\"\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"cell-ft\"},[s(\"span\",{staticClass:\"des\"},[t._v(\"（\"+t._s(t._f(\"getFileSize\")(e.size))+\"）\")]),t._v(\" \"),s(\"a\",{on:{click:function(e){t.previewImg(t.item.file,i)}}},[t._v(\"预览\")]),t._v(\" \"),s(\"a\",{on:{click:function(s){t.downloadFile(e)}}},[t._v(\"下载\")])])])})):t._e(),t._v(\" \"),t.item.contactsList&&t.item.contactsList.length>0?s(\"div\",[s(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"cell-hd\"},[s(\"i\",{staticClass:\"wk wk-contacts\"})]),t._v(\" \"),s(\"div\",{staticClass:\"cell-bd\"},[t._v(\"\\n          相关联系人：\\n        \")]),t._v(\" \"),t._l(t.item.contactsList,function(e,i){return s(\"div\",{key:i,staticClass:\"cell-ft__item text-one-line\"},[s(\"a\",{on:{click:function(s){t.checkRelationDetail(\"contacts\",e.id)}}},[t._v(t._s(e.name))])])})],2)],1):t._e(),t._v(\" \"),t.item.businessList&&t.item.businessList.length>0?s(\"div\",[s(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"cell-hd\"},[s(\"i\",{staticClass:\"wk wk-business\"})]),t._v(\" \"),s(\"div\",{staticClass:\"cell-bd\"},[t._v(\"\\n          相关商机：\\n        \")]),t._v(\" \"),s(\"div\",{staticClass:\"cell-ft\"},t._l(t.item.businessList,function(e,i){return s(\"div\",{key:i,staticClass:\"cell-ft__item text-one-line\"},[s(\"a\",{on:{click:function(s){t.checkRelationDetail(\"business\",e.id)}}},[t._v(t._s(e.name))])])}))])],1):t._e(),t._v(\" \"),t.item.nextTime?s(\"div\",{staticClass:\"cell-top\"},[s(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"cell-hd\"},[s(\"i\",{staticClass:\"wk wk-time\"})]),t._v(\" \"),s(\"div\",{staticClass:\"cell-bd text-one-line\"},[t._v(\"\\n          下次联系时间：\"+t._s(t.item.nextTime)+\"\\n        \")])])],1):t._e(),t._v(\" \"),t.item.address?s(\"div\",{staticClass:\"cell-top\"},[s(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"cell-hd is-address\"},[s(\"i\",{staticClass:\"wk wk-location\"})]),t._v(\" \"),s(\"div\",{staticClass:\"cell-bd text-one-line can-visit--underline\",on:{click:function(e){t.checkMapView(t.item)}}},[t._v(t._s(t.item.address))])])],1):t._e()],1),t._v(\" \"),t.showMapView?s(\"map-view\",{attrs:{title:t.mapViewInfo.title,lat:t.mapViewInfo.lat,lng:t.mapViewInfo.lng},on:{hidden:function(e){t.showMapView=!1}}}):t._e(),t._v(\" \"),t._t(\"default\")],2)},[],!1,null,\"99f77bf4\",null);p.options.__file=\"LogCell.vue\";e.default=p.exports},OKZ7:function(t,e,s){},OM3V:function(t,e,s){},OdVz:function(t,e,s){\"use strict\";var i=s(\"VlxE\");s.n(i).a},\"P8c/\":function(t,e,s){},PWYh:function(t,e,s){},PdhK:function(t,e,s){\"use strict\";var i=s(\"Cbuk\");s.n(i).a},QSP8:function(t,e,s){\"use strict\";var i=s(\"WWx0\");s.n(i).a},R1k5:function(t,e,s){t.exports=s.p+\"static/img/invoice.d717c31.png\"},RQpY:function(t,e,s){\"use strict\";var i=s(\"+QFE\");s.n(i).a},Rq8O:function(t,e,s){},ShYU:function(t,e,s){t.exports=s.p+\"static/img/marketing.0612591.png\"},TDiV:function(t,e,s){},U4MQ:function(t,e,s){t.exports=s.p+\"static/img/contract.65548f9.png\"},VlxE:function(t,e,s){},Vm8M:function(t,e,s){\"use strict\";var i=s(\"7Qib\"),a={name:\"MapView\",components:{},props:{title:{type:String,default:\"\"},lat:{type:[String,Number],default:0},lng:{type:[String,Number],default:0}},data:function(){return{}},computed:{},mounted:function(){var t=this;this.$el.style.zIndex=Object(i.q)(),document.body.appendChild(this.$el),Object(i.l)().then(function(){var e=new BMap.Map(\"choicemap\",{enableMapClick:!1}),s=new BMap.Point(parseFloat(t.lng),parseFloat(t.lat));e.centerAndZoom(s,18),e.enableScrollWheelZoom();var i=new BMap.Marker(s);e.addOverlay(i);var a=new BMap.InfoWindow(t.title);i.addEventListener(\"click\",function(){e.openInfoWindow(a,s)})})},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{hiddenView:function(){this.$emit(\"hidden\")}}},n=(s(\"I+NK\"),s(\"KHd+\")),o=Object(n.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"map-view\"},[e(\"div\",{attrs:{id:\"choicemap\"}}),this._v(\" \"),e(\"i\",{staticClass:\"el-icon-close map-close\",on:{click:this.hiddenView}})])},[],!1,null,\"33a9f6bf\",null);o.options.__file=\"MapView.vue\";e.a=o.exports},VmBU:function(t,e,s){\"use strict\";s.d(e,\"e\",function(){return a}),s.d(e,\"a\",function(){return n}),s.d(e,\"c\",function(){return o}),s.d(e,\"b\",function(){return l}),s.d(e,\"j\",function(){return c}),s.d(e,\"h\",function(){return r}),s.d(e,\"f\",function(){return u}),s.d(e,\"g\",function(){return d}),s.d(e,\"i\",function(){return h}),s.d(e,\"d\",function(){return p}),s.d(e,\"m\",function(){return m}),s.d(e,\"l\",function(){return f}),s.d(e,\"k\",function(){return v}),s.d(e,\"n\",function(){return g});var i=s(\"t3Un\");function a(t){return Object(i.a)({url:\"oaLog/queryList\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}function n(t){return Object(i.a)({url:\"oaLog/addOrUpdate\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}function o(t){return Object(i.a)({url:\"oaLog/addOrUpdate\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}function l(t){return Object(i.a)({url:\"oaLog/deleteById\",method:\"post\",data:t})}function c(t){return Object(i.a)({url:\"oaLog/readLog\",method:\"post\",data:t})}function r(t){return Object(i.a)({url:\"oaLog/queryById\",method:\"post\",data:t})}function u(t){return Object(i.a)({url:\"oaLog/queryLogBulletin\",method:\"post\",data:t})}function d(t){return Object(i.a)({url:\"oaLog/queryLogBulletinByType\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function h(t){return Object(i.a)({url:\"oaLog/queryLogRecordCount\",method:\"post\",data:t})}function p(t){return Object(i.a)({url:\"oaLog/getLogWelcomeSpeech\",method:\"post\",data:t})}function m(t){return Object(i.a)({url:\"oaLog/export\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},responseType:\"blob\"})}function f(t){return Object(i.a)({url:\"oaLog/queryCompleteStats\",method:\"post\",data:t})}function v(t){return Object(i.a)({url:\"oaLog/queryCompleteOaLogList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function g(t){return Object(i.a)({url:\"oaLog/queryIncompleteOaLogList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}},WGjG:function(t,e,s){\"use strict\";s.r(e);var i=s(\"8GhS\"),a=s(\"7Dod\"),n={name:\"AllocHandle\",components:{XhUserCell:i.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},poolId:[String,Number],selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,visible:!1,usersList:[]}},computed:{},watch:{dialogVisible:{handler:function(t){this.visible=t,t||(this.usersList=[])},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;if(0===this.usersList.length)this.$message.error(\"请选择负责人\");else{var e={userId:this.usersList[0].userId,poolId:this.poolId};e.ids=this.selectionList.map(function(e){return e[t.crmType+\"Id\"]}),this.loading=!0,Object(a.d)(e).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.$emit(\"handle\",{type:\"alloc\"}),t.handleCancel()}).catch(function(){t.loading=!1})}}}},o=(s(\"Klv4\"),s(\"KHd+\")),l=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"批量分配\",width:\"400px\"},on:{\"update:visible\":function(e){t.visible=e},close:t.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[t._v(\"请选择：\")]),t._v(\" \"),s(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{value:t.usersList},on:{\"value-change\":t.userChage}})],1)],1),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"c3449ef0\",null);l.options.__file=\"AllocHandle.vue\";e.default=l.exports},WWx0:function(t,e,s){},WwhD:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"GQeE\"),o=s.n(n),l=s(\"VmBU\"),c=s(\"7Qib\"),r=s(\"KTTK\"),u=s(\"zMq1\"),d=s(\"ye9D\"),h=s(\"mkuN\"),p=s(\"NYF1\"),m=s(\"U8n8\"),f={name:\"CreateLog\",components:{AddImageList:u.a,AddFileList:d.a,CrmRelative:h.a,AddRelateList:p.a,MembersDep:m.a},data:function(){return{form:{},isRelevanceReport:!0,textFormKeyList:[],activeTab:\"day\",activeMap:{day:\"日报\",week:\"周报\",month:\"月报\"},showLoading:!1,categoryIdMap:{day:1,week:2,month:3},showRelativeType:\"\",imgFiles:[],files:[],batchId:Object(c.r)(),showRelatePopover:!1,relateData:{},sendUserList:[],showMore:!1,completeInfo:{completeNum:0,totalNum:0}}},computed:{showRelateData:function(){var t=this,e={};return o()(this.relateData).forEach(function(s){var i=t.relateData[s];i&&i.length&&(e[s]=i)}),e},showSendUserList:function(){return this.sendUserList&&this.sendUserList.length>5?this.sendUserList.slice(0,5):this.sendUserList}},watch:{activeTab:{handler:function(){this.getCompelteInfo()},immediate:!0}},created:function(){this.handleTabToggle()},methods:{handleTabToggle:function(){var t={day:[\"今日\",\"明日\"],week:[\"本周\",\"下周\"],month:[\"本月\",\"下月\"]}[this.activeTab];this.textFormKeyList=[{label:t[0]+\"工作的内容：\",key:\"content\"},{label:t[1]+\"工作的内容：\",key:\"tomorrow\"},{label:\"遇到的问题：\",key:\"question\"}]},handleCreate:function(){var t=this;if(this.form.content||this.form.tomorrow||this.form.question){this.showLoading=!0;var e={},s=function(s){e[s+\"Ids\"]=t.relateData[s].map(function(t){return t[s+\"Id\"]}).join(\",\")};for(var i in this.relateData)s(i);var n=a()({},this.form,{batchId:this.batchId,sendUserIds:this.sendUserList.map(function(t){return t.userId}).join(\",\")},e,{categoryId:this.categoryIdMap[this.activeTab]});this.isRelevanceReport&&(n.getBulletin=1),Object(l.a)(n).then(function(){t.showLoading=!1,t.resetData(),t.$emit(\"update\"),t.$message.success(\"添加成功\")}).catch(function(){t.showLoading=!1})}else this.$message.error(\"请填写日志内容\")},resetData:function(){this.form={},this.isRelevanceReport=!0,this.batchId=Object(c.r)(),this.imgFiles=[],this.files=[],this.sendUserList=[],this.relateData={}},barClick:function(t){this.showRelativeType=t,\"relate\"==t?this.showRelatePopover=!0:\"file\"==t?this.$refs.fileInput.click():\"img\"==t&&this.$refs.imgInput.click()},uploadFile:function(t){var e=t.target.files;if(e.length){for(var s=0;s<e.length;s++){if(-1==e[s].type.indexOf(\"image\")&&\"img\"==this.showRelativeType)return void this.$message.error(\"请上传正确的文件类型\")}for(var i=\"image/*\"==t.target.accept?\"img\":\"file\",a=0;a<e.length;a++){var n=e[a];this.uploadFileRequest(n,i)}t.target.value=\"\"}},uploadFileRequest:function(t,e,s){var i=this;this.$wkUploadFile.upload({file:t,params:{type:e,batchId:this.batchId}}).then(function(a){var n=a.res.data||{};n.size=Object(c.h)(t.size),\"img\"==e?i.imgFiles.push(n):(n.icon=Object(c.o)(t),i.files.push(n)),s&&s()}).catch(function(){})},deleteImage:function(t,e){this.deleteImgOrFile(\"image\",t,e)},deleteFile:function(t,e){this.deleteImgOrFile(\"file\",t,e)},deleteImgOrFile:function(t,e,s){var i=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(r.g)({id:e.fileId}).then(function(e){\"image\"==t?i.imgFiles.splice(s,1):i.files.splice(s,1),i.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){i.$message({type:\"info\",message:\"已取消操作\"})})},deleteAllFile:function(t){var e=this;this.batchId&&this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(r.i)({batchId:e.batchId,type:t}).then(function(s){2==t?e.imgFiles=[]:e.files=[],e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){e.$message({type:\"info\",message:\"已取消操作\"})})},relateDataChange:function(t){this.showRelatePopover=!1,this.relateData=t.data},deleteRelate:function(t,e,s){this.relateData[s].splice(e,1)},sendUserChange:function(t){this.sendUserList=t},completeClick:function(){this.$emit(\"completeSelect\",this.categoryIdMap[this.activeTab])},getCompelteInfo:function(){var t=this;Object(l.l)({type:this.categoryIdMap[this.activeTab]}).then(function(e){t.completeInfo=e.data}).catch(function(){})}}},v=(s(\"asBs\"),s(\"KHd+\")),g=Object(v.a)(f,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.showLoading,expression:\"showLoading\"}],staticClass:\"create-log\"},[s(\"el-tabs\",{on:{\"tab-click\":t.handleTabToggle},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:\"activeTab\"}},[s(\"el-tab-pane\",{attrs:{label:\"日报\",name:\"day\"}}),t._v(\" \"),s(\"el-tab-pane\",{attrs:{label:\"周报\",name:\"week\"}}),t._v(\" \"),s(\"el-tab-pane\",{attrs:{label:\"月报\",name:\"month\"}})],1),t._v(\" \"),0!==t.completeInfo.status?s(\"span\",{staticClass:\"complete-btn\",on:{click:t.completeClick}},[s(\"i\",{staticClass:\"wk wk-log complete-btn__icon\",staticStyle:{color:\"#2362FB\"}}),t._v(\" \"),s(\"span\",{staticClass:\"complete-btn__name\"},[t._v(t._s(t.activeMap[t.activeTab])+\"完成情况\"),s(\"span\",{staticClass:\"value\"},[t._v(t._s(t.completeInfo.completeNum))]),t._v(\"/\"),s(\"span\",{staticClass:\"value\"},[t._v(t._s(t.completeInfo.totalNum))])])]):t._e(),t._v(\" \"),t.showMore?[s(\"el-form\",[t._l(t.textFormKeyList,function(e,i){return s(\"el-form-item\",{key:i,attrs:{label:e.label}},[s(\"el-input\",{attrs:{autosize:{minRows:2,maxRows:10},maxlength:1e3,type:\"textarea\",resize:\"none\",placeholder:\"请输入内容\"},model:{value:t.form[e.key],callback:function(s){t.$set(t.form,e.key,s)},expression:\"form[item.key]\"}})],1)}),t._v(\" \"),s(\"span\",{staticClass:\"wk wk-close close-icon\",on:{click:function(e){t.showMore=!1}}})],2),t._v(\" \"),t.imgFiles.length>0?s(\"add-image-list\",{attrs:{data:t.imgFiles},on:{delete:t.deleteImage,\"delete-all\":function(e){t.deleteAllFile(2)},upload:t.uploadFile}}):t._e(),t._v(\" \"),t.files.length>0?s(\"add-file-list\",{attrs:{data:t.files},on:{delete:t.deleteFile,\"delete-all\":function(e){t.deleteAllFile(1)}}}):t._e(),t._v(\" \"),t._l(t.showRelateData,function(e,i,a){return s(\"add-relate-list\",{key:a,attrs:{data:e,type:i},on:{delete:t.deleteRelate}})}),t._v(\" \"),s(\"div\",{staticClass:\"add-control\"},[s(\"div\",{staticClass:\"control-item\",on:{click:function(e){t.barClick(\"img\")}}},[s(\"span\",{staticClass:\"icon wk wk-picture\"}),t._v(\" \"),s(\"span\",[t._v(\"图片\")])]),t._v(\" \"),s(\"div\",{staticClass:\"control-item\",on:{click:function(e){t.barClick(\"file\")}}},[s(\"span\",{staticClass:\"icon wk wk-file\"}),t._v(\" \"),s(\"span\",[t._v(\"附件\")])]),t._v(\" \"),s(\"el-popover\",{attrs:{placement:\"right-end\",width:\"800\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showRelatePopover,callback:function(e){t.showRelatePopover=e},expression:\"showRelatePopover\"}},[s(\"crm-relative\",{ref:\"crmrelative\",attrs:{radio:!1,\"show-types\":[\"customer\",\"contacts\",\"business\",\"contract\"],\"selected-data\":t.relateData,show:t.showRelatePopover},on:{close:function(e){t.showRelatePopover=!1},changeCheckout:t.relateDataChange}}),t._v(\" \"),s(\"div\",{staticClass:\"control-item\",attrs:{slot:\"reference\"},on:{click:function(e){t.barClick(\"relate\")}},slot:\"reference\"},[s(\"span\",{staticClass:\"icon wk wk-associated\"}),t._v(\" \"),s(\"span\",[t._v(\"关联业务\")])])],1),t._v(\" \"),s(\"div\",{staticClass:\"control-item\"},[s(\"span\",{staticClass:\"cursor-default\"},[t._v(\"发送给：\")]),t._v(\" \"),t._l(t.showSendUserList,function(e,i){return s(\"span\",{key:i,staticClass:\"send-user\"},[s(\"el-tooltip\",{attrs:{placement:\"bottom\",effect:\"light\",\"popper-class\":\"tooltip-change-border\"}},[s(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[s(\"span\",[t._v(t._s(e.realname))])]),t._v(\" \"),s(\"xr-avatar\",{attrs:{name:e.realname,size:32,src:e.img}})],1)],1)}),t._v(\" \"),s(\"members-dep\",{attrs:{\"close-dep\":!0,\"content-block\":!1,\"user-checked-data\":t.sendUserList},on:{popoverSubmit:t.sendUserChange}},[s(\"span\",{attrs:{slot:\"membersDep\"},slot:\"membersDep\"},[s(\"el-tooltip\",{attrs:{placement:\"bottom\",effect:\"light\",\"popper-class\":\"tooltip-change-border\"}},[s(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[s(\"span\",[t._v(t._s(\"等\"+t.sendUserList.length+\"人\"))])]),t._v(\" \"),s(\"i\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.sendUserList.length>5,expression:\"sendUserList.length > 5\"}],staticClass:\"el-icon-more more-user-btn\"})]),t._v(\" \"),s(\"i\",{staticClass:\"el-icon-plus add-user-btn\"})],1)])],2),t._v(\" \"),s(\"span\",{staticClass:\"control-relevance\"},[s(\"span\",[t._v(\"关联销售简报\")]),t._v(\" \"),s(\"el-switch\",{model:{value:t.isRelevanceReport,callback:function(e){t.isRelevanceReport=e},expression:\"isRelevanceReport\"}}),t._v(\" \"),s(\"span\",[t._v(\"是\")])],1),t._v(\" \"),s(\"div\",{staticClass:\"others\"},[s(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:t.handleCreate}},[t._v(\"\\n          发布\\n        \")])],1)],1)]:[s(\"div\",{staticClass:\"content-box\"},[s(\"flexbox\",{staticClass:\"box\",attrs:{justify:\"flex-start\"},nativeOn:{click:function(e){t.showMore=!0}}},[s(\"span\",{staticClass:\"wk wk-write icon\"}),t._v(\" \"),s(\"span\",{staticClass:\"info\"},[t._v(\"请输入日志内容\")])])],1)],t._v(\" \"),s(\"input\",{ref:\"fileInput\",staticClass:\"file-input\",attrs:{accept:\"*.*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}}),t._v(\" \"),s(\"input\",{ref:\"imgInput\",staticClass:\"file-input\",attrs:{accept:\"image/*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}})],2)},[],!1,null,\"c0aec842\",null);g.options.__file=\"CreateLog.vue\";e.default=g.exports},XFCB:function(t,e,s){},YIeP:function(t,e,s){\"use strict\";var i=s(\"4XAY\"),a=s(\"XJYT\"),n=s(\"t2rG\"),o={name:\"Set\",components:{draggable:s.n(n).a},props:{visible:{type:Boolean,required:!0,default:!1},list:Array},data:function(){return{setList:[],isDrag:!1}},computed:{},watch:{list:{handler:function(){this.initInfo()},immediate:!0},visible:function(t){t&&this.initInfo()}},created:function(){},beforeDestroy:function(){},methods:{initInfo:function(){this.setList=this.list.map(function(t){return{value:t}}),0==this.setList.length&&(this.setList=[{value:\"\"}])},close:function(){this.$emit(\"update:visible\",!1)},addClick:function(){this.setList.push({value:\"\"})},deleteClick:function(t){this.setList.splice(t,1)},sureClick:function(){for(var t=this,e=[],s=0;s<this.setList.length;s++){var n=this.setList[s];n.value&&e.push(n.value)}if(0!=e.length){var o=a.Loading.service({target:document.querySelector('.el-dialog[aria-label=\"常用语管理\"]')});Object(i.G)(e).then(function(s){o.close(),t.$emit(\"update\",e),t.close()}).catch(function(){o.close()})}else this.$message.error(\"请输入常用语\")},dragEnter:function(){this.isDrag=!0},dragLeave:function(){this.isDrag=!1}}},l=(s(\"nD2f\"),s(\"KHd+\")),c=Object(l.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"常用语管理\",width:\"600px\"},on:{close:t.close}},[s(\"div\",{staticClass:\"set\"},[s(\"draggable\",{attrs:{options:{group:\"list\",forceFallback:!1,fallbackClass:\"draggingStyle\",filter:\".el-input__inner\",preventOnFilter:!1}},model:{value:t.setList,callback:function(e){t.setList=e},expression:\"setList\"}},t._l(t.setList,function(e,i){return s(\"flexbox\",{key:i,staticClass:\"set-item\",class:{\"is-drag\":t.isDrag}},[s(\"el-input\",{attrs:{maxlength:100},model:{value:e.value,callback:function(s){t.$set(e,\"value\",s)},expression:\"item.value\"}},[s(\"div\",{staticClass:\"drag-handle\",attrs:{slot:\"suffix\"},on:{mouseenter:t.dragEnter,mouseleave:t.dragLeave},slot:\"suffix\"},[t._v(\"⋮⋮\")])]),t._v(\" \"),s(\"i\",{staticClass:\"el-icon-remove\",on:{click:function(e){t.deleteClick(i)}}})],1)})),t._v(\" \"),s(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-circle-plus\"},on:{click:t.addClick}},[t._v(\"添加常用语\")])],1),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.sureClick,expression:\"sureClick\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"1a59f706\",null);c.options.__file=\"Set.vue\";var r={name:\"CommonWords\",components:{Set:c.exports},props:{},data:function(){return{loading:!1,showPopover:!1,setShow:!1,list:[]}},computed:{},watch:{showPopover:function(t){t&&0==this.list.length&&this.getCommonWords()}},mounted:function(){},beforeDestroy:function(){},methods:{selectScene:function(t,e){this.$emit(\"select\",t),this.showPopover=!1},setClick:function(){this.setShow=!0},getCommonWords:function(){var t=this;this.loading=!0,Object(i.F)().then(function(e){t.loading=!1,t.list=e.data||[]}).catch(function(){t.loading=!1})},udpateCommonWords:function(t){this.list=t}}},u=(s(\"q0fG\"),Object(l.a)(r,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-popover\",{attrs:{placement:\"bottom\",width:\"320\",trigger:\"click\",\"popper-class\":\"no-padding-popover\"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:\"showPopover\"}},[s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"common-words\"},[s(\"div\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:t.list&&0==t.list.length,expression:\"list && list.length == 0\"}],staticClass:\"word\",attrs:{\"xs-empty-icon\":\"none\"}},t._l(t.list,function(e,i){return s(\"div\",{key:i,staticClass:\"word-item\",on:{click:function(s){t.selectScene(e,i)}}},[t._v(\"\\n        \"+t._s(e)+\"\\n      \")])})),t._v(\" \"),s(\"div\",{staticClass:\"handle-interval\"},[s(\"flexbox\",{staticClass:\"handle-button\",nativeOn:{click:function(e){return t.setClick(e)}}},[s(\"i\",{staticClass:\"wk wk-manage handle-button-icon\"}),t._v(\" \"),s(\"div\",{staticClass:\"handle-button-name\"},[t._v(\"管理\")])])],1)]),t._v(\" \"),s(\"el-button\",{staticClass:\"word-button\",attrs:{slot:\"reference\"},slot:\"reference\"},[t._v(\"常用语\")]),t._v(\" \"),s(\"set\",{attrs:{visible:t.setShow,list:t.list},on:{\"update:visible\":function(e){t.setShow=e},update:t.udpateCommonWords}})],1)},[],!1,null,\"6ddd3652\",null));u.options.__file=\"index.vue\";e.a=u.exports},\"Z+Ht\":function(t,e,s){\"use strict\";e.a={methods:{getXrIcon:function(t){return{leads:\"wk wk-leads\",customer:\"wk wk-customer\",contacts:\"wk wk-contacts\",product:\"wk wk-product\",business:\"wk wk-business\",contract:\"wk wk-contract\",receivables:\"wk wk-receivables\",invoice:\"wk wk-invoice\",log:\"wk wk-log\",examine:\"wk wk-approve\",task:\"wk wk-o-task\",record:\"wk wk-record\"}[t]},getXrIconColor:function(t){return{leads:\"#704afd\",customer:\"#487DFF\",contacts:\"#27BA4A\",product:\"#26d4da\",business:\"#FB9323\",contract:\"#FD5B4A\",receivables:\"#FFB940\",invoice:\"#1cbaf5\",log:\"#5864FF\",approve:\"#9376FF\",task:\"#D376FF\",record:\"#19B5F6\"}[t]}}}},\"Z/5k\":function(t,e,s){\"use strict\";var i=s(\"u2Af\");s.n(i).a},ZX9L:function(t,e,s){\"use strict\";var i={name:\"TimeTypeSelect\",props:{defaultType:[String,Object],width:{type:Number,default:200},options:{type:Array,default:function(){return[{label:\"今天\",value:\"today\"},{label:\"昨天\",value:\"yesterday\"},{label:\"本周\",value:\"week\"},{label:\"上周\",value:\"lastWeek\"},{label:\"本月\",value:\"month\"},{label:\"上月\",value:\"lastMonth\"},{label:\"本季度\",value:\"quarter\"},{label:\"上季度\",value:\"lastQuarter\"},{label:\"本年\",value:\"year\"},{label:\"去年\",value:\"lastYear\"}]}}},data:function(){return{selectType:{label:\"本年\",value:\"year\"},showTypePopover:!1,showCustomContent:!1,sureCustomContent:!1,startTime:\"\",endTime:\"\"}},computed:{typeShowValue:function(){return this.sureCustomContent?this.startTime||this.endTime?(this.startTime||\"\")+\"-\"+(this.endTime||\"\"):\"\":this.selectType.label}},watch:{defaultType:function(){this.selectType.value!=this.defaultType&&(this.selectType=this.getDefaultTypeValue(this.defaultType))}},mounted:function(){void 0!==this.defaultType?\"string\"==typeof this.defaultType?this.selectType=this.getDefaultTypeValue(this.defaultType):this.defaultType.label?this.selectType=this.defaultType:\"default\"==this.defaultType.type?this.selectType=this.getDefaultTypeValue(this.defaultType.value):\"custom\"==this.defaultType.type&&(this.sureCustomContent=!0,this.showCustomContent=!0,this.startTime=this.defaultType.startTime,this.endTime=this.defaultType.endTime):this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},methods:{getDefaultTypeValue:function(t){for(var e=0;e<this.options.length;e++){var s=this.options[e];if(s.value==t)return s}return{label:\"本年\",value:\"year\"}},typeSelectClick:function(t){this.showTypePopover=!1,this.sureCustomContent=!1,this.showCustomContent=!1,this.selectType=t,this.$emit(\"change\",{type:\"default\",value:this.selectType.value})},customSureClick:function(){this.startTime&&this.endTime&&(this.sureCustomContent=!0,this.showTypePopover=!1,this.$emit(\"change\",{type:\"custom\",startTime:this.startTime,endTime:this.endTime}))}}},a=(s(\"77fj\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-popover\",{staticClass:\"time-type-select\",attrs:{width:t.width,placement:\"bottom\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showTypePopover,callback:function(e){t.showTypePopover=e},expression:\"showTypePopover\"}},[s(\"div\",{staticClass:\"type-popper\"},[s(\"div\",{staticClass:\"type-content\"},[t._l(t.options,function(e,i){return s(\"div\",{key:i,staticClass:\"type-content-item\",class:{selected:t.selectType.value==e.value&&!t.showCustomContent},on:{click:function(s){t.typeSelectClick(e)}}},[s(\"div\",{staticClass:\"mark\"}),t._v(t._s(e.label)+\"\\n      \")])}),t._v(\" \"),s(\"div\",{staticClass:\"type-content-item\",class:{selected:t.showCustomContent},on:{click:function(e){t.showCustomContent=!0}}},[s(\"div\",{staticClass:\"mark\"}),t._v(\"自定义\\n      \")])],2),t._v(\" \"),t.showCustomContent?s(\"div\",{staticClass:\"type-content-custom\"},[s(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:\"startTime\"}}),t._v(\" \"),s(\"el-date-picker\",{attrs:{type:\"date\",\"value-format\":\"yyyy.MM.dd\",placeholder:\"选择日期\"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:\"endTime\"}}),t._v(\" \"),s(\"el-button\",{on:{click:t.customSureClick}},[t._v(\"确定\")])],1):t._e()]),t._v(\" \"),s(\"el-input\",{staticClass:\"type-select\",style:{width:t.width+\"px\"},attrs:{slot:\"reference\",readonly:!0},slot:\"reference\",model:{value:t.typeShowValue,callback:function(e){t.typeShowValue=e},expression:\"typeShowValue\"}},[s(\"i\",{class:[\"el-icon-arrow-up\",{\"is-reverse\":t.showTypePopover}],attrs:{slot:\"suffix\"},slot:\"suffix\"})])],1)},[],!1,null,\"20503202\",null);n.options.__file=\"index.vue\";e.a=n.exports},aKrz:function(t,e,s){t.exports=s.p+\"static/img/expense-examines.29e9174.png\"},asBs:function(t,e,s){\"use strict\";var i=s(\"CH6S\");s.n(i).a},bok9:function(t,e,s){t.exports=s.p+\"static/img/receivables.29e9174.png\"},bzOf:function(t,e,s){\"use strict\";var i=s(\"qej1\");s.n(i).a},cBfe:function(t,e,s){},cLla:function(t,e,s){t.exports=s.p+\"static/img/customer_not.7d40ec4.png\"},d5Rn:function(t,e,s){},dAOq:function(t,e,s){\"use strict\";e.a={methods:{getStatusColor:function(t){return 0==t?\"#ffc539\":1==t?\"#20b559\":2==t?\"#f95a5a\":3==t?\"#398dff\":4==t?\"#999\":5==t?\"#d9d9d9\":6==t?\"#2362FB\":8==t?\"#bfbfbf\":void 0},getStatusName:function(t){return 0==t?\"待审核\":1==t?\"通过\":2==t?\"拒绝\":3==t?\"审核中\":4==t?\"撤回\":5==t?\"未提交\":6==t?\"创建\":8==t?\"已作废\":\"\"},getStatusIcon:function(t){return 0==t?\"wk wk-time\":1==t?\"wk wk-success\":2==t?\"wk wk-close\":3==t?\"wk wk-time\":4==t?\"wk wk-reset\":5==t?\"wk wk-time\":6==t?\"wk wk-l-plus\":8==t?\"wk wk-invalid\":\"\"},getXhStatusList:function(){return[{label:\"待审核\",value:0},{label:\"通过\",value:1},{label:\"拒绝\",value:2},{label:\"审核中\",value:3},{label:\"撤回\",value:4}]},getStatusImageIcon:function(t){return 0==t||3==t||5==t?s(\"6pZM\"):1==t?s(\"y4JV\"):2==t?s(\"migV\"):4==t?s(\"+xXq\"):6==t?s(\"wu/m\"):\"\"}}}},dPzk:function(t,e,s){\"use strict\";var i=s(\"Xjjk\"),a=s.n(i),n={name:\"ReplyComment\",components:{Emoji:s(\"u+Mw\").a},data:function(){return{commentLoading:!1,blurIndex:0,commentsTextarea:\"\",showEmoji:!1,showNoFocus:!1}},methods:{blurFun:function(t){this.blurIndex=t.target.selectionEnd},selectEmoji:function(t){if(this.commentsTextarea&&this.commentsTextarea.length+t.length<=2e3||!this.commentsTextarea){var e=this.commentsTextarea.split(\"\");e.splice(this.blurIndex,0,t),this.commentsTextarea=e.join(\"\"),this.showEmoji=!1}},commentSubmit:function(){this.commentsTextarea?this.$emit(\"reply\",a()(this.commentsTextarea)):this.$message.error(\"回复内容不能为空\")},closeComment:function(){this.showEmoji=!1,this.$emit(\"close\"),this.toggleFocus()},toggleFocus:function(t){this.showNoFocus=\"boolean\"==typeof t?t:!this.showNoFocus,this.$emit(\"toggle\",this.showNoFocus)}}},o=(s(\"szeO\"),s(\"KHd+\")),l=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.commentLoading,expression:\"commentLoading\"}],staticClass:\"reply-comment\"},[t.showNoFocus?s(\"div\",{staticClass:\"no-focus\",on:{click:function(e){t.toggleFocus()}}},[t._v(\"\\n    请输入回复内容\\n  \")]):[s(\"el-input\",{attrs:{rows:3,maxlength:2e3,\"show-word-limit\":\"\",type:\"textarea\",placeholder:\"请输入回复内容\"},on:{blur:t.blurFun},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:\"commentsTextarea\"}}),t._v(\" \"),s(\"div\",{staticClass:\"btn-group\"},[s(\"el-popover\",{attrs:{placement:\"top\",width:\"400\",trigger:\"click\"},model:{value:t.showEmoji,callback:function(e){t.showEmoji=e},expression:\"showEmoji\"}},[s(\"emoji\",{on:{select:t.selectEmoji}}),t._v(\" \"),s(\"i\",{staticClass:\"wk wk-expression smiling-img\",attrs:{slot:\"reference\"},slot:\"reference\"})],1),t._v(\" \"),s(\"div\",{staticClass:\"btn-box\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.commentSubmit}},[t._v(\"回复\")]),t._v(\" \"),s(\"el-button\",{on:{click:t.closeComment}},[t._v(\"取消\")])],1)],1)]],2)},[],!1,null,\"cdcf716e\",null);l.options.__file=\"ReplyComment.vue\";e.a=l.exports},dTTw:function(t,e,s){t.exports=s.p+\"static/img/business.66d7980.png\"},da4V:function(t,e,s){\"use strict\";s.r(e);var i=s(\"FyfS\"),a=s.n(i),n=s(\"QbLZ\"),o=s.n(n),l=s(\"VmBU\"),c=s(\"kZxc\"),r=s(\"BsgX\"),u=s(\"GhBu\"),d=s(\"WwhD\"),h=s(\"ivS5\"),p=s(\"HHBN\"),m=s(\"yPq4\"),f=s(\"kJU/\"),v=s(\"ZX9L\"),g=s(\"KmSi\"),y=s(\"L2JU\"),b=s(\"wd/R\"),_=s.n(b),w=s(\"7Qib\"),C=s(\"jHPx\"),k={name:\"WorkLog\",components:{ReportMenu:r.default,LogItem:u.default,CreateLog:d.default,LogComDetail:h.default,XhUserCell:p.a,CRMAllDetail:m.default,NewDialog:f.default,TimeTypeSelect:v.a,ReportList:g.default},data:function(){return{logType:\"\",headData:{nowNum:0,allNum:0,timeLabel:\"\",timeRemind:\"\"},reportList:[{type:\"customer\",key:\"customerCount\",info:\"今日新增客户\",name:\"今日新增客户 0\"},{type:\"business\",key:\"businessCount\",info:\"今日新增商机\",name:\"今日新增商机 0\"},{type:\"contract\",key:\"contractCount\",info:\"今日新增合同\",name:\"今日新增合同 0\"},{type:\"receivables\",key:\"receivablesMoney\",info:\"今日新增回款\",name:\"今日新增回款 0\"},{type:\"record\",key:\"recordCount\",info:\"今日新增跟进记录\",name:\"今日新增跟进记录 0\"}],listData:[],loading:!1,noMore:!1,page:1,totalCount:0,scrollKey:Date.now(),options:[{label:\"全部\",value:0},{label:\"日报\",value:1},{label:\"周报\",value:2},{label:\"月报\",value:3}],filterForm:{categoryId:0,createUserId:\"\"},userSelects:[],timeOptions:[{label:\"今天\",value:\"today\"},{label:\"昨天\",value:\"yesterday\"},{label:\"本周\",value:\"week\"},{label:\"上周\",value:\"lastWeek\"},{label:\"最近30天\",value:\"recent30\"},{label:\"最近60天\",value:\"recent60\"},{label:\"本月\",value:\"month\"},{label:\"上月\",value:\"lastMonth\"},{label:\"本季度\",value:\"quarter\"},{label:\"上季度\",value:\"lastQuarter\"},{label:\"本年\",value:\"year\"},{label:\"去年\",value:\"lastYear\"}],timeSelect:{type:\"default\",value:\"recent30\"},search:\"\",relatedID:\"\",relatedCRMType:\"\",showRelatedDetail:!1,newLoading:!1,showNewDialog:!1,formData:{},imgFileList:[],accessoryFileList:[],reportListShow:!1,fieldReportList:null,reportData:{title:\"\",placeholder:\"\",crmType:\"\",request:null,recordRequest:l.g,params:null,paging:!0,sortable:!1},logComDetailType:\"\",logComDetailShow:!1}},computed:o()({},Object(y.b)([\"userInfo\"]),{showUserSelect:function(){return\"send\"!=this.logType},showAdd:function(){return\"received\"!=this.logType},userDoneStatus:function(){return{icon:this.headData.nowNum>0?\"wk-success\":\"wk-close\",label:this.headData.nowNum>0?\"今天日志已完成\":\"今天日志还未完成\"}},scrollDisabled:function(){return this.loading||this.noMore},nickName:function(){if(!this.userInfo.realname)return this.userInfo.username;return/[a-zA-Z]+/.test(this.userInfo.realname)||!this.userInfo.sex?this.userInfo.realname:this.userInfo.realname.slice(0,1)+(1===this.userInfo.sex?\"先生\":\"女士\")}}),watch:{filterForm:{handler:function(){this.refreshList()},deep:!0}},created:function(){this.logType=this.$route.params.type,this.getLogRemind(),this.getHeadDetail(),this.getReportData()},beforeRouteUpdate:function(t,e,s){this.logType=t.params.type,this.totalCount=0,this.$refs.createLog&&(this.$refs.createLog.showMore=!1),this.filterForm={categoryId:0,createUserId:\"\"},this.userSelects=[],this.timeSelect={type:\"default\",value:\"recent30\"},this.refreshList(),s()},methods:{getHeadDetail:function(){var t=this;Object(l.f)().then(function(e){t.headData.nowNum=e.data.nowNum,t.headData.allNum=e.data.allNum}).catch(function(){})},getReportData:function(){var t=this;this.loading=!0,Object(c.k)({type:\"today\",isUser:1,userId:this.userInfo.userId}).then(function(e){t.loading=!1;var s=e.data.data||{};t.reportList=t.reportList.map(function(t){return\"receivablesMoney\"==t.key&&(s.receivablesMoney=Object(C.h)(Math.floor(s.receivablesMoney||0))),t.name=t.info+\" \"+s[t.key],t})}).catch(function(){t.loading=!1})},getLogRemind:function(){this.getNetworkWelcome();var t=_()().format(\"H\");this.headData.timeLabel=t<12?\"早上好\":t<18?\"下午好\":\"晚上好\"},getNetworkWelcome:function(){var t=this;Object(l.d)().then(function(e){t.headData.timeRemind=e.data}).catch(function(){})},refreshList:function(){this.page=1,this.listData=[],this.noMore=!1,this.totalCount=0,this.scrollKey=Date.now()},getList:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.loading){this.loading=!0;var e=this.getBaseParams();e.page=this.page,e.limit=5,Object(l.e)(e).then(function(e){t.loading=!1,t.noMore||(t.listData=t.listData.concat(e.data.list),t.page++),t.totalCount=e.data.totalRow,t.noMore=e.data.lastPage}).catch(function(){t.noMore=!0,t.loading=!1})}},getBaseParams:function(){var t=o()({search:this.search},this.filterForm);return this.timeSelect.type&&(\"custom\"===this.timeSelect.type?(t.startTime=this.timeSelect.startTime.replace(/\\./g,\"-\"),t.endTime=this.timeSelect.endTime.replace(/\\./g,\"-\")):t.type=this.timeSelect.value||\"\"),\"all\"!=this.logType&&(t.by={send:1,received:2}[this.logType]),\"send\"==this.logType&&t.hasOwnProperty(\"createUserId\")&&delete t.createUserId,t.hasOwnProperty(\"categoryId\")&&0===t.categoryId&&delete t.categoryId,t},handleAddComment:function(t){this.listData[t.index].replyList.push(t.data)},handleDelete:function(t){this.listData.splice(t,1),this.getHeadDetail(),this.refreshList()},addLogSuccess:function(){this.refreshList(),this.headData.nowNum++,this.headData.allNum++},handleEdit:function(t,e){this.formData=e,this.imgFileList=e.img,this.accessoryFileList=e.file,this.showNewDialog=!0},submitEdit:function(t,e,s){var i=this;this.newLoading=!0;var n=[];if(this.formData.depData){var o=!0,c=!1,r=void 0;try{for(var u,d=a()(this.formData.depData);!(o=(u=d.next()).done);o=!0){var h=u.value;n.push(h.id)}}catch(t){c=!0,r=t}finally{try{!o&&d.return&&d.return()}finally{if(c)throw r}}}var p=[];if(this.formData.sendUserList){var m=!0,f=!1,v=void 0;try{for(var g,y=a()(this.formData.sendUserList);!(m=(g=y.next()).done);m=!0){var b=g.value;p.push(b.userId)}}catch(t){f=!0,v=t}finally{try{!m&&y.return&&y.return()}finally{if(f)throw v}}}var _={logId:this.formData.logId,categoryId:t,content:this.formData.content,tomorrow:this.formData.tomorrow,question:this.formData.question,batchId:e,sendUserIds:p.join(\",\"),sendDeptIds:n.join(\",\"),customerIds:s.customerIds.join(\",\"),contactsIds:s.contactsIds.join(\",\"),businessIds:s.businessIds.join(\",\"),contractIds:s.contractIds.join(\",\")};Object(l.c)(_).then(function(t){i.showNewDialog=!1,i.refreshList(),i.$message.success(\"编辑成功\"),i.newLoading=!1}).catch(function(){i.newLoading=!1,i.$message.error(\"编辑失败\")})},handleRead:function(t){this.listData[t].isRead=1},userChange:function(t){this.userSelects=t.value||[],t.value.length>0?this.filterForm.createUserId=t.value.map(function(t){return t.userId}).join(\",\"):this.filterForm.createUserId=\"\"},checkUserHistory:function(t){this.userSelects=t?[t]:[],this.filterForm.createUserId=t?t.userId:\"\"},timeTypeChange:function(t){this.timeSelect=t,this.refreshList()},enterRelateDetail:function(t,e){this.relatedID=e.id,this.relatedCRMType=t,this.showRelatedDetail=!0},reportSelect:function(t,e){t.type&&(this.reportData.title=\"销售简报-\"+t.info,this.reportData.placeholder={customer:\"请输入客户名称\",business:\"请输入商机名称\",contract:\"请输入合同名称\",receivables:\"请输入回款编号\",record:\"\"}[t.type],this.reportData.crmType=t.type,this.reportData.params=e?{logId:e.logId}:{today:1},this.reportData.params.type={customer:1,business:2,contract:3,receivables:4,record:5}[t.type],\"record\"==t.type?(this.fieldReportList=[{label:\"模块\",prop:\"crmType\",width:300},{label:\"新增跟进记录数\",prop:\"count\"}],this.reportData.request=l.i,this.reportData.paging=!1,this.reportData.sortable=!1):(this.fieldReportList=this.getReportFieldList(t.type),this.reportData.request=l.g,this.reportData.paging=!0,this.reportData.sortable=\"custom\"),this.reportListShow=!0)},getReportFieldList:function(t){return{customer:[{label:\"客户名称\",prop:\"customerName\"},{label:\"成交状态\",prop:\"dealStatus\"},{label:\"最后跟进时间\",prop:\"lastTime\"},{label:\"创建时间\",prop:\"createTime\"},{label:\"负责人\",prop:\"ownerUserName\"}],business:[{label:\"商机名称\",prop:\"businessName\"},{label:\"商机阶段\",prop:\"statusName\"},{label:\"最后跟进时间\",prop:\"lastTime\"},{label:\"创建时间\",prop:\"createTime\"},{label:\"负责人\",prop:\"ownerUserName\"}],contract:[{label:\"合同名称\",prop:\"name\"},{label:\"合同状态\",prop:\"checkStatus\"},{label:\"创建时间\",prop:\"createTime\"},{label:\"公司签约人\",prop:\"companyUserName\"}],receivables:[{label:\"回款编号\",prop:\"number\"},{label:\"回款时间\",prop:\"returnTime\"},{label:\"负责人\",prop:\"ownerUserName\"}]}[t]},logExportClick:function(){var t=this;0!=this.filterForm.categoryId?(this.loading=!0,Object(l.m)(this.getBaseParams()).then(function(e){Object(w.c)(e),t.loading=!1}).catch(function(){t.loading=!1})):this.$message.error(\"请先选择”日报、周报、月报“中的一种类型导出\")},completeSelect:function(t){this.logComDetailType=t,this.logComDetailShow=!0}}},T=(s(\"bzOf\"),s(\"KHd+\")),x=Object(T.a)(k,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.getList,expression:\"getList\"}],key:t.scrollKey,staticClass:\"main\",attrs:{\"infinite-scroll-distance\":\"100\",\"infinite-scroll-disabled\":\"scrollDisabled\"}},[s(\"div\",[s(\"div\",{staticClass:\"work-log scroll-body\"},[s(\"div\",{staticClass:\"card\"},[s(\"flexbox\",{staticClass:\"hello-card\"},[s(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:t.userInfo.realname,size:50,src:t.userInfo.img}}),t._v(\" \"),s(\"div\",{staticClass:\"greeting\"},[s(\"div\",{staticClass:\"hello\"},[t._v(\"\\n              \"+t._s(t.headData.timeLabel)+\"，\"+t._s(t.nickName)+\"\\n              \"),s(\"span\",{staticClass:\"status\"},[s(\"span\",{staticClass:\"icon wk\",class:t.userDoneStatus.icon}),t._v(\" \"),s(\"span\",[t._v(t._s(t.userDoneStatus.label))])])]),t._v(\" \"),t.headData&&t.headData.timeRemind?s(\"div\",{staticClass:\"text\"},[t._v(\"\\n              \"+t._s(t.headData.timeRemind)+\"\\n            \")]):t._e()]),t._v(\" \"),s(\"div\",{staticClass:\"statistics\"},[s(\"div\",{staticClass:\"title\"},[s(\"span\",[t._v(\"本月完成日志\")])]),t._v(\" \"),s(\"div\",{staticClass:\"info\"},[s(\"span\",{staticClass:\"special\"},[t._v(t._s(t.headData.allNum))]),t._v(\"篇\\n            \")])])],1),t._v(\" \"),s(\"flexbox\",{staticClass:\"report-card\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"report-card__label\"},[t._v(\"销售简报\")]),t._v(\" \"),s(\"report-menu\",{attrs:{list:t.reportList},on:{select:t.reportSelect}})],1)],1),t._v(\" \"),t.showAdd?s(\"create-log\",{ref:\"createLog\",staticClass:\"add-card card\",on:{update:t.addLogSuccess,completeSelect:t.completeSelect}}):t._e(),t._v(\" \"),s(\"flexbox\",{staticClass:\"filter-control card\"},[t.showUserSelect?s(\"xh-user-cell\",{staticClass:\"xh-user-cell\",attrs:{radio:!1,value:t.userSelects,placeholder:\"选择人员\"},on:{\"value-change\":t.userChange}}):t._e(),t._v(\" \"),s(\"time-type-select\",{attrs:{width:190,options:t.timeOptions,\"default-type\":t.timeSelect},on:{change:t.timeTypeChange}}),t._v(\" \"),s(\"el-select\",{attrs:{placeholder:\"类型\"},model:{value:t.filterForm.categoryId,callback:function(e){t.$set(t.filterForm,\"categoryId\",e)},expression:\"filterForm.categoryId\"}},t._l(t.options,function(t,e){return s(\"el-option\",{key:e,attrs:{label:t.label,value:t.value}})})),t._v(\" \"),s(\"el-input\",{attrs:{placeholder:\"请输入工作内容\",\"prefix-icon\":\"el-icon-search\"},on:{blur:t.refreshList},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.refreshList(e):null}},model:{value:t.search,callback:function(e){t.search=e},expression:\"search\"}}),t._v(\" \"),s(\"div\",{staticClass:\"filter-right\"},[s(\"span\",{staticClass:\"total-count\"},[t._v(\"已筛选出\"),s(\"span\",[t._v(t._s(t.totalCount))]),t._v(\"项\")]),t._v(\" \"),s(\"el-button\",{staticClass:\"export-btn\",on:{click:t.logExportClick}},[t._v(\"导出\")])],1)],1)],1),t._v(\" \"),t._l(t.listData,function(e,i){return s(\"div\",{key:i,staticClass:\"card\"},[s(\"log-item\",{attrs:{data:e,index:i,\"show-history-btn\":t.showUserSelect},on:{read:function(e){t.handleRead(i)},\"add-comment\":t.handleAddComment,delete:t.handleDelete,edit:t.handleEdit,\"relate-detail\":t.enterRelateDetail,\"report-detail\":t.reportSelect,\"check-history\":t.checkUserHistory}})],1)})],2),t._v(\" \"),t.loading?s(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"加载中...\")]):t._e(),t._v(\" \"),t.noMore?s(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"没有更多了\")]):t._e(),t._v(\" \"),s(\"c-r-m-all-detail\",{attrs:{visible:t.showRelatedDetail,\"crm-type\":t.relatedCRMType,id:t.relatedID,\"no-listener-class\":[\"content-item\"]},on:{\"update:visible\":function(e){t.showRelatedDetail=e}}}),t._v(\" \"),t.showNewDialog?s(\"new-dialog\",{attrs:{\"form-data\":t.formData,\"img-file-list\":t.imgFileList,\"accessory-file-list\":t.accessoryFileList,\"new-loading\":t.newLoading,\"dialog-title\":\"编辑日志\"},on:{close:function(e){t.showNewDialog=!1},submitBtn:t.submitEdit}}):t._e(),t._v(\" \"),s(\"report-list\",{attrs:{show:t.reportListShow,title:t.reportData.title,placeholder:t.reportData.placeholder,\"crm-type\":t.reportData.crmType,request:t.reportData.request,params:t.reportData.params,\"record-request\":t.reportData.recordRequest,\"field-list\":t.fieldReportList,paging:t.reportData.paging,sortable:t.reportData.sortable},on:{\"update:show\":function(e){t.reportListShow=e}}}),t._v(\" \"),s(\"log-com-detail\",{attrs:{show:t.logComDetailShow,type:t.logComDetailType},on:{\"update:show\":function(e){t.logComDetailShow=e}}})],1)},[],!1,null,\"9150d370\",null);x.options.__file=\"index.vue\";e.default=x.exports},eOwn:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"7Dod\"),o=s(\"6iAj\"),l=s(\"4XAY\"),c=s(\"giPm\"),r=s(\"O8VQ\"),u=s(\"/G0b\"),d=s(\"8OTK\"),h=s(\"C3Po\"),p=s(\"ZoMv\"),m=s(\"7Qib\"),f=s(\"Z+Ht\"),v=s(\"vvxI\"),g=s(\"ZX9L\"),y=s(\"ehos\"),b=s(\"L2JU\"),_={name:\"Activity\",components:{LogAdd:c.default,LogCell:r.default,CRMAllCreate:d.default,TaskQuickAdd:h.default,TimeTypeSelect:g.a,LogEditDialog:u.default,CRMFullScreenDetail:function(){return Promise.all([s.e(\"chunk-66f9\"),s.e(\"chunk-63bb\"),s.e(\"chunk-7029\"),s.e(\"chunk-0aaf\"),s.e(\"chunk-24c6\")]).then(s.bind(null,\"3z7q\"))}},mixins:[f.a,v.default],props:{handle:{type:Array,default:function(){return[]}},id:[String,Number],contactsId:[String,Number],crmType:{type:String,default:\"\"},isSeas:{type:Boolean,default:!1},typeList:{type:Array,default:function(){return[]}},detail:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,filterValue:{},timeOptions:[{label:\"全部\",value:\"\"},{label:\"最近7天\",value:\"7\"},{label:\"最近30天\",value:\"30\"},{label:\"最近60天\",value:\"60\"}],contacts:[],followTypes:[],handleType:\"\",activityType:{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},list:[],noMore:!1,page:1,isCRMCreate:!1,createActionInfo:{type:\"relative\",crmType:this.crmType,data:{}},createCRMType:\"\",isTaskCreate:!1,showFullDetail:!1,relationID:\"\",relationCrmType:\"\",scrollKey:Date.now(),logEditData:null,logEditPosition:{seciton:0,index:0},logEditDialogVisible:!1}},computed:a()({},Object(b.b)([\"crm\"]),{canCreateFollowRecord:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.save},showRelate:function(){return\"customer\"==this.crmType},scrollDisabled:function(){return this.loading||this.noMore},taskParams:function(){var t={};return t[this.crmType+\"Ids\"]=this.id,t}}),watch:{id:function(){this.initInfo(),this.refreshLogList()}},created:function(){this.debouncedRefreshLogList=Object(y.debounce)(300,this.refreshLogList),this.initInfo()},methods:{getLogTypeList:function(){var t=this;Object(o.s)().then(function(e){t.followTypes=e.data.map(function(t){return{value:t,label:t}})}).catch(function(){})},getContactsList:function(){var t=this;Object(n.H)({customerId:this.id}).then(function(e){t.contacts=e.data.list}).catch(function(){})},sendLog:function(t){var e=this;if(t.content){var s={};s.activityType=p.default[this.crmType],s.activityTypeId=t.id,s.content=t.content,s.category=t.followType;var i=t.business.map(function(t){return t.businessId});s.batchId=t.batchId,s.businessIds=i.join(\",\"),s.contactsIds=t.contactsId,s.nextTime=t.nextTime||\"\",s.isEvent=0,this.sendLoading=!0,Object(l.a)(s).then(function(t){e.sendLoading=!1,e.$message.success(\"发布成功\"),e.$refs.logAdd&&e.$refs.logAdd.resetInfo(),e.refreshLogList()}).catch(function(){e.sendLoading=!1})}else this.$message.error(\"请输入跟进内容\")},handleClick:function(t){var e=this;if(this.handleType==t?this.handleType=\"\":this.handleType=t,\"log\"==t)this.isTaskCreate=!1,this.$nextTick(function(){e.$refs.logAdd&&(e.$refs.logAdd.isUnfold=e.handleType==t)});else if(\"task\"==t)this.isTaskCreate=!0,this.$nextTick(function(){e.$refs.taskAdd.inputFocus()});else{this.isTaskCreate=!1;var s={type:\"relative\",crmType:this.crmType,data:{}};\"contacts\"==this.crmType?(s.data.customer=Object(m.t)(this.detail),\"business\"==t&&(s.relativeData={contactsId:this.detail.contactsId})):\"customer\"==this.crmType?s.data.customer=Object(m.t)(this.detail):\"business\"==this.crmType?(s.data.customer=Object(m.t)(this.detail),s.data.business=Object(m.t)(this.detail),\"contacts\"==t&&(s.relativeData={businessId:this.detail.businessId})):\"contract\"==this.crmType&&(s.data.customer=Object(m.t)(this.detail),s.data.contract=Object(m.t)(this.detail)),this.createActionInfo=s,this.createCRMType=t,this.isCRMCreate=!0}},initInfo:function(){var t=this;this.$nextTick(function(){t.$refs.logAdd&&t.$refs.logAdd.resetInfo(),t.$refs.taskAdd&&t.$refs.taskAdd.resetSendData()}),this.filterValue={search:\"\",timeLine:{label:\"全部\",value:\"\"}},this.getLogTypeList(),this.showRelate&&this.getContactsList()},refreshLogList:function(){this.page=1,this.noMore=!1,this.list=[],this.scrollKey=Date.now()},handleSelectClick:function(t){this.activityType=t,this.refreshLogList()},timeTypeChange:function(t){this.filterValue.timeLine=t,this.refreshLogList()},getLogList:function(){var t=this;this.loading=!0;var e={page:this.page,crmType:p.default[this.crmType],activityType:this.activityType.command,activityTypeId:this.id};this.filterValue.search&&(e.search=this.filterValue.search),this.filterValue.timeLine.type&&(\"custom\"===this.filterValue.timeLine.type?(e.startDate=this.filterValue.timeLine.startTime.replace(/\\./g,\"-\"),e.endDate=this.filterValue.timeLine.endTime.replace(/\\./g,\"-\")):e.intervalDay=this.filterValue.timeLine.value||\"\"),Object(l.c)(e).then(function(e){if(t.loading=!1,!t.noMore)if(t.page++,t.list.length){var s=t.list[t.list.length-1];e.data.time&&e.data.list.length&&s.time!=e.data.time&&t.list.push(e.data)}else e.data.time&&e.data.list.length&&t.list.push(e.data);t.noMore=e.data.lastPage}).catch(function(){t.noMore=!0,t.loading=!1})},createCRMSuccess:function(){this.handleType=\"\",this.refreshLogList()},createCRMClose:function(){this.isCRMCreate=!1,this.handleType=\"\"},checkCRMDetail:function(t,e){this.relationID=e,this.relationCrmType=t,this.showFullDetail=!0},getActivityIcon:function(t){return this.getXrIcon(this.getActivityType(t))},getActivityTypeColor:function(t){return this.getXrIconColor(this.getActivityType(t))},logCellDelete:function(t,e,s){this.list[s].list.splice(e,1),0==this.list[s].list.length&&this.list.splice(s,1),this.scrollKey=Date.now()},logCellEdit:function(t,e,s){this.logEditData=t,this.logEditPosition={seciton:s,index:e},this.logEditDialogVisible=!0},logEditSave:function(t){this.logEditPosition.seciton>=0&&this.logEditPosition.index>=0&&this.list[this.logEditPosition.seciton].list.splice(this.logEditPosition.index,1,t)}}},w=(s(\"QSP8\"),s(\"KHd+\")),C=Object(w.a)(_,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.getLogList,expression:\"getLogList\"}],key:t.scrollKey,staticClass:\"main\",attrs:{\"infinite-scroll-distance\":\"100\",\"infinite-scroll-disabled\":\"scrollDisabled\"}},[s(\"div\",[!t.isSeas&&t.handle&&t.handle.length?s(\"div\",{staticClass:\"main-handle\"},t._l(t.handle,function(e,i){return s(\"el-button\",{key:i,class:{\"is-select\":t.handleType===e.type},attrs:{type:\"primary\",icon:\"wk wk-add\"},on:{click:function(s){t.handleClick(e.type)}}},[t._v(\"\\n        \"+t._s(e.label)+\"\\n      \")])})):t._e(),t._v(\" \"),!t.isSeas&&t.handle&&t.handle.length?[!t.isTaskCreate&&t.canCreateFollowRecord?s(\"log-add\",{ref:\"logAdd\",staticClass:\"log-add\",attrs:{id:t.id,\"show-business\":t.showRelate,\"show-contacts\":t.showRelate,contacts:t.contacts,\"contacts-id\":t.contactsId,\"follow-types\":t.followTypes,\"crm-type\":t.crmType},on:{send:t.sendLog,focus:function(e){t.handleType=\"log\"},close:function(e){t.handleClick(t.handleType)}}}):s(\"task-quick-add\",{ref:\"taskAdd\",staticClass:\"task-quick-add\",attrs:{params:t.taskParams},on:{focus:function(e){t.handleType=\"task\"},send:t.refreshLogList}})]:t._e(),t._v(\" \"),s(\"div\",{staticClass:\"log\",class:{\"is-top\":t.handle&&0==t.handle.length}},[s(\"flexbox\",{staticClass:\"log__header\",attrs:{justify:\"flex-end\"}},[s(\"el-input\",{attrs:{placeholder:\"关键字搜索\",\"prefix-icon\":\"el-icon-search\"},on:{input:t.debouncedRefreshLogList},model:{value:t.filterValue.search,callback:function(e){t.$set(t.filterValue,\"search\",e)},expression:\"filterValue.search\"}}),t._v(\" \"),s(\"time-type-select\",{attrs:{width:190,options:t.timeOptions,\"default-type\":t.filterValue.timeLine},on:{change:t.timeTypeChange}}),t._v(\" \"),t.typeList.length>1?s(\"el-dropdown\",{attrs:{trigger:\"click\"},on:{command:t.handleSelectClick}},[s(\"span\",{staticClass:\"el-dropdown-link\"},[s(\"i\",{class:[\"wk\",\"dropdown-icon\",\"wk-\"+t.activityType.icon],style:{backgroundColor:t.activityType.color}}),t._v(t._s(t.activityType.label)),s(\"i\",{staticClass:\"el-icon-arrow-down el-icon--right\"})]),t._v(\" \"),s(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},t._l(t.typeList,function(e,i){return s(\"el-dropdown-item\",{key:i,attrs:{command:e}},[s(\"i\",{class:[\"wk\",\"dropdown-icon\",\"wk-\"+e.icon],style:{backgroundColor:e.color}}),t._v(t._s(e.label))])}))],1):t._e()],1),t._v(\" \"),t._l(t.list,function(e,i){return s(\"div\",{key:i,staticClass:\"log-section\"},[s(\"div\",{staticClass:\"log-section__title\"},[s(\"span\",{staticClass:\"section-title\"},[s(\"span\",{staticClass:\"section-title__time\"},[t._v(t._s(e.time))])])]),t._v(\" \"),t._l(e.list,function(a,n){return[1==a.type?s(\"div\",{key:n,staticClass:\"log-cell\",class:{\"only-one\":1==e.list.length}},[s(\"log-cell\",{attrs:{item:a,section:i,index:n,\"can-delete\":!t.isSeas},on:{\"crm-detail\":t.checkCRMDetail,delete:t.logCellDelete,edit:t.logCellEdit}}),t._v(\" \"),s(\"i\",{staticClass:\"wk wk-message log-cell__mark\"})],1):s(\"div\",{key:n,staticClass:\"log-cell activity-cell\",class:{\"only-one\":1==e.list.length}},[2==a.type?s(\"div\",{staticClass:\"activity-cell\"},[s(\"span\",{staticClass:\"activity-cell__label\"},[t._v(t._s(a.createTime)+\" \"+t._s(a.realname)+\"创建了\"+t._s(t.getActivityTypeName(a.activityType))+\"：\")]),s(\"span\",{staticClass:\"activity-cell__content\",on:{click:function(e){t.checkCRMDetail(t.getActivityType(a.activityType),a.activityTypeId)}}},[t._v(t._s(a.activityTypeName||\"查看详情\"))])]):3==a.type?s(\"div\",{staticClass:\"activity-cell\"},[s(\"span\",{staticClass:\"activity-cell__label\"},[t._v(t._s(a.createTime)+\" \"+t._s(a.realname)+\"将商机：\")]),t._v(\" \"),s(\"span\",{staticClass:\"activity-cell__content\",on:{click:function(e){t.checkCRMDetail(\"business\",a.activityTypeId)}}},[t._v(t._s(a.activityTypeName))]),t._v(\" \"),s(\"span\",[t._v(t._s(\" 阶段变为 \"+a.content))])]):4==a.type?s(\"log-cell\",{attrs:{item:a,section:i,index:n,\"can-delete\":\"\"},on:{\"crm-detail\":t.checkCRMDetail,delete:t.logCellDelete}}):t._e(),t._v(\" \"),s(\"i\",{staticClass:\"log-cell__mark\",class:t.getActivityIcon(a.activityType),staticStyle:{\"background-color\":\"#FB9323\"},style:{backgroundColor:t.getActivityTypeColor(a.activityType)}})],1)]})],2)}),t._v(\" \"),t.loading?s(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"加载中...\")]):t._e(),t._v(\" \"),t.noMore?s(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"没有更多了\")]):t._e()],2)],2),t._v(\" \"),t.isCRMCreate?s(\"c-r-m-all-create\",{attrs:{\"crm-type\":t.createCRMType,action:t.createActionInfo},on:{\"save-success\":t.createCRMSuccess,close:t.createCRMClose}}):t._e(),t._v(\" \"),s(\"c-r-m-full-screen-detail\",{attrs:{visible:t.showFullDetail,\"crm-type\":t.relationCrmType,id:t.relationID},on:{\"update:visible\":function(e){t.showFullDetail=e}}}),t._v(\" \"),s(\"log-edit-dialog\",{attrs:{visible:t.logEditDialogVisible,data:t.logEditData},on:{\"update:visible\":function(e){t.logEditDialogVisible=e},save:t.logEditSave}})],1)},[],!1,null,\"7955f64b\",null);C.options.__file=\"index.vue\";e.default=C.exports},ep8U:function(t,e,s){},\"fRE+\":function(t,e,s){},fpBj:function(t,e,s){},gIBH:function(t,e,s){},gesf:function(t,e,s){},giPm:function(t,e,s){\"use strict\";s.r(e);var i=s(\"KTTK\"),a=s(\"mkuN\"),n=s(\"zMq1\"),o=s(\"ye9D\"),l=s(\"NYF1\"),c=s(\"YIeP\"),r=s(\"7Qib\");var u={methods:{dispatch:function(t,e,s){for(var i=this.$parent||this.$root,a=i.$options.componentName;i&&(!a||a!==t);)(i=i.$parent)&&(a=i.$options.componentName);i&&i.$emit.apply(i,[e].concat(s))},broadcast:function(t,e,s){(function t(e,s,i){this.$children.forEach(function(a){a.$options.componentName===e?a.$emit.apply(a,[s].concat(i)):t.apply(a,[e,s].concat([i]))})}).call(this,t,e,s)}}},d={name:\"LogAdd\",components:{CrmRelative:a.a,AddImageList:n.a,AddFileList:o.a,AddRelateList:l.a,CommonWords:c.a},mixins:[u],props:{showBusiness:{type:Boolean,default:!1},showContacts:{type:Boolean,default:!1},contacts:Array,contactsId:[String,Number],followTypes:Array,id:[String,Number],crmType:{type:String,default:\"\"}},data:function(){return{isUnfold:!1,content:\"\",imgFiles:[],businessAction:{},files:[],showBusinessPopover:!1,business:[],selectContactsId:\"\",followType:\"\",nextTime:\"\",showRelativeType:\"\",batchId:Object(r.r)()}},computed:{autosize:function(){return this.isUnfold?{minRows:3,maxRows:6}:{minRows:1,maxRows:1}}},watch:{followTypes:function(){this.getDefalutFollowType()},content:function(t){var e=!!(t&&t.length>0);this.dispatch(\"SlideView\",\"setEditClose\",[e])},contactsId:function(){this.selectContactsId=this.contactsId||\"\"},id:{handler:function(){this.businessAction={type:\"condition\",data:{moduleType:this.crmType,customerId:this.id}}},immediate:!0}},created:function(){this.selectContactsId=this.contactsId||\"\",this.getDefalutFollowType()},beforeDestroy:function(){},methods:{getDefalutFollowType:function(){this.followTypes&&this.followTypes.length>0?this.followType=this.followTypes[0].value:this.followType=\"\"},resetInfo:function(){this.nextTime=\"\",this.isUnfold=!1,this.content=\"\",this.dispatch(\"SlideView\",\"setEditClose\",[!1]),this.imgFiles=[],this.files=[],this.business=[],this.selectContactsId=this.contactsId||\"\",this.showRelativeType=\"\",this.batchId=Object(r.r)(),this.getDefalutFollowType()},commonWordsSelect:function(t){var e=this;this.content?this.$confirm(\"您选中的常用语将覆盖当前填写内容?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\",customClass:\"is-particulars\"}).then(function(){e.content=t}).catch(function(){}):this.content=t},checkRelativeInfos:function(t){\"business\"==this.showRelativeType&&(this.business=t.data)},barClick:function(t){this.showRelativeType=t,\"business\"==t?this.showBusinessPopover=!0:\"file\"==t?this.$refs.fileInput.click():\"img\"==t&&this.$refs.imgInput.click()},uploadFile:function(t){var e=t.target.files;if(e.length){for(var s=0;s<e.length;s++){if(-1==e[s].type.indexOf(\"image\")&&\"img\"==this.showRelativeType)return void this.$message.error(\"请上传正确的文件类型\")}for(var i=\"image/*\"==t.target.accept?\"img\":\"file\",a=0;a<e.length;a++){var n=e[a];this.uploadFileRequest(n,i)}t.target.value=\"\"}},uploadFileRequest:function(t,e,s){var i=this;this.$wkUploadFile.upload({file:t,params:{type:e,batchId:this.batchId}}).then(function(a){var n=a.res.data||{};n.size=Object(r.h)(t.size),\"img\"==e?i.imgFiles.push(n):(n.icon=Object(r.o)(t),i.files.push(n)),s&&s()}).catch(function(){})},deleteImage:function(t,e){this.deleteImgOrFile(\"image\",t,e)},deleteFile:function(t,e){this.deleteImgOrFile(\"file\",t,e)},deleteImgOrFile:function(t,e,s){var a=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(i.g)({id:e.fileId}).then(function(e){\"image\"==t?a.imgFiles.splice(s,1):a.files.splice(s,1),a.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteAllFile:function(t){var e=this;this.batchId&&this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(i.i)({batchId:e.batchId,type:t}).then(function(s){2==t?e.imgFiles=[]:e.files=[],e.$message.success(\"操作成功\")}).catch(function(){})}).catch(function(){})},deleteRelate:function(t,e){this.business.splice(e,1)},inputFocus:function(){var t=this;this.isUnfold=!0,this.$nextTick(function(){t.$refs.textarea.focus(),t.$emit(\"focus\")})},sendClick:function(){this.$emit(\"send\",{id:this.id,content:this.content,files:this.files,images:this.imgFiles,business:this.business,contactsId:this.selectContactsId,batchId:this.batchId,followType:this.followType,nextTime:this.nextTime})},close:function(){this.isUnfold=!1,this.$emit(\"close\")}}},h=(s(\"Nbko\"),s(\"KHd+\")),p=Object(h.a)(d,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{class:[\"mix-content\",{unfold:!t.isUnfold}]},[t.isUnfold?s(\"i\",{staticClass:\"wk wk-close\",on:{click:t.close}}):t._e(),t._v(\" \"),t.isUnfold?s(\"div\",{staticClass:\"mix-content-select\"},[t.showContacts?s(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择联系人\"},model:{value:t.selectContactsId,callback:function(e){t.selectContactsId=e},expression:\"selectContactsId\"}},t._l(t.contacts,function(t){return s(\"el-option\",{key:t.contactsId,attrs:{label:t.name,value:t.contactsId}})})):t._e(),t._v(\" \"),s(\"el-select\",{attrs:{clearable:\"\",placeholder:\"选择跟进方式\"},model:{value:t.followType,callback:function(e){t.followType=e},expression:\"followType\"}},t._l(t.followTypes,function(t){return s(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(\" \"),s(\"el-date-picker\",{attrs:{editable:!1,type:\"datetime\",placeholder:\"选择下次联系时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:t.nextTime,callback:function(e){t.nextTime=e},expression:\"nextTime\"}}),t._v(\" \"),s(\"common-words\",{on:{select:t.commonWordsSelect}})],1):t._e(),t._v(\" \"),s(\"div\",{class:[\"i-cont\",{unfold:!t.isUnfold}]},[t.isUnfold?t._e():s(\"i\",{staticClass:\"wk wk-write\"}),t._v(\" \"),s(\"el-input\",{ref:\"textarea\",attrs:{autosize:t.autosize,maxlength:800,type:\"textarea\",clearable:\"\",resize:\"none\",placeholder:\"请输入内容\"},on:{focus:t.inputFocus},model:{value:t.content,callback:function(e){t.content=e},expression:\"content\"}})],1),t._v(\" \"),t.imgFiles.length>0&&t.isUnfold?s(\"add-image-list\",{attrs:{data:t.imgFiles},on:{delete:t.deleteImage,\"delete-all\":function(e){t.deleteAllFile(2)},upload:t.uploadFile}}):t._e(),t._v(\" \"),t.files.length>0&&t.isUnfold?s(\"add-file-list\",{attrs:{data:t.files},on:{delete:t.deleteFile,\"delete-all\":function(e){t.deleteAllFile(1)}}}):t._e(),t._v(\" \"),t.business.length>0&&t.isUnfold?s(\"add-relate-list\",{attrs:{data:t.business,type:\"business\"},on:{delete:t.deleteRelate}}):t._e(),t._v(\" \"),t.isUnfold?s(\"div\",{staticClass:\"bar-cont\"},[s(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-picture\"},on:{click:function(e){t.barClick(\"img\")}}},[t._v(\"图片\")]),t._v(\" \"),s(\"el-button\",{staticClass:\"handle-button\",attrs:{type:\"text\",icon:\"wk wk-file\"},on:{click:function(e){t.barClick(\"file\")}}},[t._v(\"附件\")]),t._v(\" \"),t.showBusiness?s(\"el-popover\",{attrs:{placement:\"bottom\",width:\"700\",\"popper-class\":\"no-padding-popover\",trigger:\"click\"},model:{value:t.showBusinessPopover,callback:function(e){t.showBusinessPopover=e},expression:\"showBusinessPopover\"}},[s(\"crm-relative\",{ref:\"crmrelative\",attrs:{show:t.showBusinessPopover,radio:!1,action:t.businessAction,\"selected-data\":{business:t.business},\"crm-type\":\"business\"},on:{close:function(e){t.showBusinessPopover=!1},changeCheckout:t.checkRelativeInfos}}),t._v(\" \"),s(\"el-button\",{staticClass:\"handle-button\",staticStyle:{\"margin-left\":\"10px\"},attrs:{slot:\"reference\",type:\"text\",icon:\"wk wk-associate\"},on:{click:function(e){t.barClick(\"business\")}},slot:\"reference\"},[t._v(\"关联商机\")])],1):t._e(),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.sendClick,expression:\"sendClick\"}],staticClass:\"send-btn\",attrs:{type:\"primary\"}},[t._v(\"发布\")])],1):t._e(),t._v(\" \"),s(\"input\",{ref:\"fileInput\",staticClass:\"file-input\",attrs:{accept:\"*.*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}}),t._v(\" \"),s(\"input\",{ref:\"imgInput\",staticClass:\"file-input\",attrs:{accept:\"image/*\",type:\"file\",multiple:\"\"},on:{change:t.uploadFile}})],1)},[],!1,null,\"670c00a3\",null);p.options.__file=\"LogAdd.vue\";e.default=p.exports},\"goM+\":function(t,e,s){t.exports=s.p+\"static/img/seas_not.68f3f48.png\"},hr1e:function(t,e,s){\"use strict\";var i=s(\"4lzj\");s.n(i).a},hwzM:function(t,e,s){\"use strict\";s.r(e);var i=s(\"7Qib\"),a=s(\"KTTK\"),n={name:\"FileCell\",filters:{getFileSize:function(t){return Object(i.h)(t)}},props:{cellIndex:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1},module_id:[String,Number]},data:function(){return{}},computed:{fileIcon:function(){var t=this.data.name?this.data.name.split(\".\"):[],e=\"\";return e=t.length>0?t[t.length-1]:\"\",Object(i.n)(e)},previewShow:function(){return this.list}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){Object(i.d)({path:this.data.filePath||this.data.url,name:this.data.name})},previewClick:function(){Object(i.a)(this.data.name)?Object(i.G)(this.data.filePath||this.data.url,this.data.name):this.$bus.emit(\"preview-image-bus\",{index:this.cellIndex||0,data:this.list.map(function(t){return{url:t.filePath||t.url,name:t.name}})})},deleteClick:function(){var t=this;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(a.g)({id:t.data.fileId}).then(function(e){t.$message.success(\"操作成功\"),t.$emit(\"delete\",t.cellIndex,t.data)}).catch(function(){})}).catch(function(){t.$message({type:\"info\",message:\"已取消删除\"})})}}},o=(s(\"Bd1s\"),s(\"KHd+\")),l=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"flexbox\",{staticClass:\"cell\"},[i(\"img\",{staticClass:\"cell-head\",attrs:{onerror:'this.src=\"'+s(\"Tww3\")+'\"',src:t.fileIcon,alt:\"\"}}),t._v(\" \"),i(\"div\",{staticClass:\"cell-body text-one-line\",class:{\"cursor-pointer\":t.cursorPointer}},[i(\"span\",[t._v(t._s(t.data.name.length>20?t.data.name.substring(0,20)+\"...\":t.data.name))])]),t._v(\" \"),i(\"div\",{staticClass:\"size\"},[t._v(\"\\n    (\"+t._s(t._f(\"getFileSize\")(t.data.size))+\")\\n  \")]),t._v(\" \"),i(\"div\",{staticClass:\"cell-foot\"},[t.previewShow?i(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:t.previewClick}},[t._v(\"预览\")]):t._e(),t._v(\" \"),i(\"span\",{staticClass:\"xr-text-btn primary\",on:{click:t.downloadClick}},[t._v(\"下载\")]),t._v(\" \"),t.showDelete?i(\"span\",{staticClass:\"xr-text-btn delete\",on:{click:t.deleteClick}},[t._v(\"删除\")]):t._e()])])},[],!1,null,\"4a3d86b8\",null);l.options.__file=\"index.vue\";e.default=l.exports},ivS5:function(t,e,s){\"use strict\";s.r(e);var i=s(\"VmBU\"),a={name:\"LogComDetail\",components:{CRMFullScreenDetail:function(){return Promise.all([s.e(\"chunk-0aaf\"),s.e(\"chunk-fcbe\")]).then(s.bind(null,\"3z7q\"))}},props:{show:{type:Boolean,default:!1},type:[Number,String]},data:function(){return{loading:!1,activeType:\"complete\",fieldList:[{label:\"姓名\",prop:\"realname\"},{label:\"日志内容\",prop:\"content\"},{label:\"创建时间\",prop:\"createTime\"}],tableHeight:this.getTableHeight(),list:[],currentPage:1,pageSize:15,pageSizes:[15,30,60],total:0,search:\"\",logDetailId:\"\",logDetailShow:!1}},computed:{},watch:{show:function(t){t&&this.initInfo()}},created:function(){var t=this;window.onresize=function(){t.tableHeight=t.getTableHeight()}},beforeDestroy:function(){},methods:{getTableHeight:function(){var t=document.documentElement.clientHeight;return t-.2*t-200},initInfo:function(){this.search=\"\",this.list=[],this.refreshList()},refreshList:function(){this.currentPage=1,this.getList()},cellClassName:function(t){t.row;var e=t.column;t.rowIndex,t.columnIndex;return\"content\"===e.property?\"can-visit--underline\":\"\"},hideView:function(){this.$emit(\"update:show\",!1)},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},getList:function(){var t=this;this.loading=!0;var e={page:this.currentPage,limit:this.pageSize,completeType:this.type,search:this.search};(\"complete\"==this.activeType?i.k:i.n)(e).then(function(e){t.list=e.data.list,t.total=e.data.totalRow,t.loading=!1}).catch(function(){t.loading=!1})},handleRowClick:function(t,e,s){\"complete\"==this.activeType&&\"content\"===e.property&&(this.logDetailId=t.logId,this.logDetailShow=!0)}}},n=(s(\"yXKV\"),s(\"KHd+\")),o=Object(n.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{attrs:{visible:t.show,\"append-to-body\":!0,\"close-on-click-modal\":!1,top:\"10vh\",width:\"900px\",\"custom-class\":\"no-padding-dialog log-comp-detail\"},on:{close:t.hideView}},[s(\"el-tabs\",{on:{\"tab-click\":t.refreshList},model:{value:t.activeType,callback:function(e){t.activeType=e},expression:\"activeType\"}},[s(\"el-tab-pane\",{attrs:{label:\"已完成日志的员工\",name:\"complete\"}}),t._v(\" \"),s(\"el-tab-pane\",{attrs:{label:\"未完成日志的员工\",name:\"uncomplete\"}})],1),t._v(\" \"),s(\"el-input\",{staticClass:\"search-input\",attrs:{placeholder:\"请输入姓名\"},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.refreshList(e):null}},model:{value:t.search,callback:function(e){t.search=e},expression:\"search\"}},[s(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},nativeOn:{click:function(e){return t.refreshList(e)}},slot:\"append\"})],1),t._v(\" \"),s(\"div\",{staticClass:\"list-body\"},[s(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.list,\"cell-class-name\":t.cellClassName,height:t.tableHeight,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"row-click\":t.handleRowClick}},t._l(t.fieldList,function(t,e){return s(\"el-table-column\",{key:e,attrs:{prop:t.prop,label:t.label,\"show-overflow-tooltip\":\"\"}})})),t._v(\" \"),s(\"div\",{staticClass:\"p-contianer\"},[s(\"el-pagination\",{staticClass:\"p-bar\",attrs:{\"current-page\":t.currentPage,\"page-sizes\":t.pageSizes,\"page-size\":t.pageSize,total:t.total,background:\"\",layout:\"prev, pager, next, sizes, total, jumper\"},on:{\"update:pageSize\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1)],1),t._v(\" \"),s(\"c-r-m-full-screen-detail\",{attrs:{visible:t.logDetailShow,id:t.logDetailId,\"crm-type\":\"log\"},on:{\"update:visible\":function(e){t.logDetailShow=e}}})],1)},[],!1,null,null,null);o.options.__file=\"LogComDetail.vue\";e.default=o.exports},jUvl:function(t,e,s){\"use strict\";var i=s(\"gesf\");s.n(i).a},\"kJU/\":function(t,e,s){\"use strict\";s.r(e);var i=s(\"vDqi\"),a=s.n(i),n=s(\"KTTK\"),o=s(\"7Qib\"),l=s(\"ViDN\"),c=s(\"U8n8\"),r=s(\"EBQf\"),u={components:{CreateView:l.a,MembersDep:c.a,RelatedBusiness:r.a},props:{formData:Object,dialogTitle:{type:String,default:\"写日志\"},accessoryFileList:{type:Array,default:function(){return[]}},imgFileList:{type:Array,default:function(){return[]}},newLoading:Boolean},data:function(){return{activeName:\"1\",tabsData:[{label:\"日报\",key:\"1\"},{label:\"周报\",key:\"2\"},{label:\"月报\",key:\"3\"}],formList:[],dateList:[{label:\"今日工作内容\",model:\"content\"},{label:\"明日工作内容\",model:\"tomorrow\"},{label:\"遇到的问题\",model:\"question\"}],weekList:[{label:\"本周工作内容\",model:\"content\"},{label:\"下周工作内容\",model:\"tomorrow\"},{label:\"遇到的问题\",model:\"question\"}],monthList:[{label:\"本月工作内容\",model:\"content\"},{label:\"下月工作内容\",model:\"tomorrow\"},{label:\"遇到的问题\",model:\"question\"}],batchId:Object(o.r)(),imageFileList:[],fileList:[],dialogVisible:!1,relevanceAll:{},allData:{}}},computed:{crmFileSaveUrl:function(){return n.l},httpHeader:function(){return{\"Admin-Token\":a.a.defaults.headers[\"Admin-Token\"]}},showSendUserList:function(){return this.formData?this.formData.sendUserList&&this.formData.sendUserList.length>5?this.formData.sendUserList.slice(0,5):this.formData.sendUserList||[]:[]}},mounted:function(){if(document.body.appendChild(this.$el),this.formList=this.dateList,this.formData.categoryId)switch(this.formData.categoryId){case 1:this.tabsData=[{label:\"日报\",key:\"1\"}],this.formList=this.dateList,this.activeName=\"1\";break;case 2:this.tabsData=[{label:\"周报\",key:\"2\"}],this.formList=this.weekList,this.activeName=\"2\";break;case 3:this.tabsData=[{label:\"月报\",key:\"3\"}],this.formList=this.monthList,this.activeName=\"3\"}\"写日志\"!=this.dialogTitle&&this.formData.batchId&&(this.batchId=this.formData.batchId);var t={};t.business=(this.formData.businessList||[]).map(function(t){return t.id&&(t.businessId=t.id),t}),t.contacts=(this.formData.contactsList||[]).map(function(t){return t.id&&(t.contactsId=t.id),t}),t.contract=(this.formData.contractList||[]).map(function(t){return t.id&&(t.contractId=t.id),t}),t.customer=(this.formData.customerList||[]).map(function(t){return t.id&&(t.customerId=t.id),t}),this.allData=t;var e={};e.businessIds=t.business.map(function(t){return t.businessId}),e.contactsIds=t.contacts.map(function(t){return t.contactsId}),e.contractIds=t.contract.map(function(t){return t.contractId}),e.customerIds=t.customer.map(function(t){return t.customerId}),this.relevanceAll=e,this.imageFileList=this.imgFileList.map(function(t){return t});for(var s=0;s<this.imageFileList.length;s++)this.setImageList(this.imageFileList[s],s);this.fileList=this.accessoryFileList.map(function(t){return t})},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{setImageList:function(t,e){var s=this;Object(o.p)(t.url).then(function(i){t.url=i.src,s.imageFileList.splice(e,1,t)}).catch(function(){})},close:function(){1==this.$route.query.routerKey?this.$router.go(-1):this.$emit(\"close\")},tabClick:function(){switch(this.activeName){case\"1\":this.formList=this.dateList;break;case\"2\":this.formList=this.weekList;break;case\"3\":this.formList=this.monthList}},submitBtn:function(){this.formData.content||this.formData.tomorrow||this.formData.question?this.$emit(\"submitBtn\",this.activeName,this.batchId,this.relevanceAll):this.$message.error(\"内容至少填写一项\")},imgFileUploadSuccess:function(t,e,s){this.imageFileList=s},handleFilePreview:function(t){if(t.response||t.fileId){var e=void 0;e=t.response?t.response.data:t,this.$bus.emit(\"preview-image-bus\",{index:0,data:[e]})}},beforeRemove:function(t,e){var s=this;if(t.response||t.fileId){var i=void 0;return i=t.response?t.response.data.fileId:t.fileId,this.$confirm(\"您确定要删除该文件吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(n.g)({id:i}).then(function(t){s.$message.success(\"操作成功\");var e=s.getFileIndex(s.$refs.imageUpload.uploadFiles,i);-1!=e&&s.$refs.imageUpload.uploadFiles.splice(e,1),-1!=(e=s.getFileIndex(s.imgFileList,i))&&s.imgFileList.splice(e,1)}).catch(function(){})}).catch(function(){s.$message({type:\"info\",message:\"已取消操作\"})}),!1}return!0},getFileIndex:function(t,e){for(var s=-1,i=0;i<t.length;i++){var a=t[i];if((a.response?a.response.data.fileId:a.fileId)==e){s=i;break}}return s},fileUploadSuccess:function(t,e,s){this.fileList=s},handleFileRemove:function(t,e){var s=this;if(t.response||t.fileId){var i=void 0;return i=t.response?t.response.data.fileId:t.fileId,this.$confirm(\"您确定要删除该文件吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(n.g)({id:i}).then(function(t){s.$message.success(\"操作成功\");var e=s.getFileIndex(s.$refs.fileUpload.uploadFiles,i);-1!=e&&s.$refs.fileUpload.uploadFiles.splice(e,1),-1!=(e=s.getFileIndex(s.fileList,i))&&s.fileList.splice(e,1)}).catch(function(){})}).catch(function(){s.$message({type:\"info\",message:\"已取消操作\"})}),!1}return!0},sendUserChange:function(t,e){this.formData.sendUserList=t},handleClose:function(){this.dialogVisible=!1},checkInfos:function(t){this.relevanceAll=t}}},d=(s(\"sCKB\"),s(\"KHd+\")),h=Object(d.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"create-view\",{attrs:{\"body-style\":{height:\"100%\"}}},[s(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.newLoading,expression:\"newLoading\"}],staticClass:\"new-journal\"},[s(\"div\",{staticClass:\"header\",attrs:{slot:\"header\"},slot:\"header\"},[s(\"span\",{staticClass:\"text\"},[t._v(t._s(t.dialogTitle))]),t._v(\" \"),s(\"i\",{staticClass:\"el-icon-close rt\",on:{click:t.close}})]),t._v(\" \"),s(\"div\",{staticClass:\"content\"},[s(\"el-tabs\",{on:{\"tab-click\":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:\"activeName\"}},t._l(t.tabsData,function(t,e){return s(\"el-tab-pane\",{key:e,attrs:{label:t.label,name:t.key}})})),t._v(\" \"),s(\"div\",{staticClass:\"form\"},[t._l(t.formList,function(e,i){return s(\"div\",{key:i,staticClass:\"row-list\"},[s(\"label\",{staticClass:\"item-label\"},[t._v(t._s(e.label)+\"：\")]),t._v(\" \"),s(\"el-input\",{attrs:{autosize:{minRows:4},maxlength:1e3,\"show-word-limit\":\"\",type:\"textarea\",placeholder:\"请输入内容\",resize:\"none\"},model:{value:t.formData[e.model],callback:function(s){t.$set(t.formData,e.model,s)},expression:\"formData[item.model]\"}})],1)}),t._v(\" \"),s(\"div\",{staticClass:\"img-accessory\"},[s(\"div\",{staticClass:\"img-box\"},[s(\"el-upload\",{ref:\"imageUpload\",attrs:{action:t.crmFileSaveUrl,headers:t.httpHeader,data:{type:\"img\",batchId:t.batchId},\"on-preview\":t.handleFilePreview,\"before-remove\":t.beforeRemove,\"on-success\":t.imgFileUploadSuccess,\"file-list\":t.imageFileList,name:\"file\",multiple:\"\",accept:\"image/*\",\"list-type\":\"picture-card\"}},[s(\"p\",{staticClass:\"add-img\"},[s(\"span\",{staticClass:\"el-icon-picture\"}),t._v(\" \"),s(\"span\",[t._v(\"添加图片\")])]),t._v(\" \"),s(\"i\",{staticClass:\"el-icon-plus\"})])],1),t._v(\" \"),s(\"p\",{staticClass:\"add-accessory\"},[s(\"el-upload\",{ref:\"fileUpload\",attrs:{action:t.crmFileSaveUrl,headers:t.httpHeader,data:{type:\"file\",batchId:t.batchId},\"on-preview\":t.handleFilePreview,\"before-remove\":t.handleFileRemove,\"on-success\":t.fileUploadSuccess,\"file-list\":t.fileList,name:\"file\",multiple:\"\",accept:\"*.*\"}},[s(\"p\",[s(\"i\",{staticClass:\"wukong wukong-file\"}),t._v(\"\\n                添加附件\\n              \")])])],1)]),t._v(\" \"),s(\"div\",{staticClass:\"sent-who\"},[s(\"span\",{staticClass:\"cursor-default\"},[t._v(\"发送给：\")]),t._v(\" \"),t._l(t.showSendUserList,function(e,i){return s(\"span\",{key:i,staticClass:\"send-user\"},[s(\"el-tooltip\",{attrs:{placement:\"bottom\",effect:\"light\",\"popper-class\":\"tooltip-change-border\"}},[s(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[s(\"span\",[t._v(t._s(e.realname))])]),t._v(\" \"),s(\"xr-avatar\",{staticClass:\"item-img\",attrs:{name:e.realname,size:26,src:e.img}})],1)],1)}),t._v(\" \"),s(\"members-dep\",{attrs:{\"close-dep\":!0,\"content-block\":!1,\"user-checked-data\":t.formData.sendUserList},on:{popoverSubmit:t.sendUserChange}},[s(\"span\",{attrs:{slot:\"membersDep\"},slot:\"membersDep\"},[s(\"el-tooltip\",{attrs:{placement:\"bottom\",effect:\"light\",\"popper-class\":\"tooltip-change-border\"}},[s(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[s(\"span\",[t._v(t._s(\"等\"+t.formData.sendUserList.length+\"人\"))])]),t._v(\" \"),s(\"i\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.formData.sendUserList.length>5,expression:\"formData.sendUserList.length > 5\"}],staticClass:\"el-icon-more more-user-btn\"})]),t._v(\" \"),s(\"i\",{staticClass:\"el-icon-plus add-user-btn\"})],1)])],2),t._v(\" \"),s(\"related-business\",{attrs:{\"margin-left\":\"0\",\"all-data\":t.allData},on:{checkInfos:t.checkInfos}})],2)],1),t._v(\" \"),s(\"div\",{staticClass:\"btn-group\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.submitBtn}},[t._v(\"提交\")]),t._v(\" \"),s(\"el-button\",{on:{click:t.close}},[t._v(\"取消\")])],1)])])},[],!1,null,\"a3dc7da4\",null);h.options.__file=\"NewDialog.vue\";e.default=h.exports},kZxc:function(t,e,s){\"use strict\";s.d(e,\"k\",function(){return a}),s.d(e,\"l\",function(){return n}),s.d(e,\"a\",function(){return o}),s.d(e,\"d\",function(){return l}),s.d(e,\"g\",function(){return c}),s.d(e,\"e\",function(){return r}),s.d(e,\"b\",function(){return u}),s.d(e,\"c\",function(){return d}),s.d(e,\"f\",function(){return h}),s.d(e,\"i\",function(){return p}),s.d(e,\"h\",function(){return m}),s.d(e,\"j\",function(){return f});var i=s(\"t3Un\");function a(t){return Object(i.a)({url:\"crmInstrument/queryBulletin\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function n(t){return Object(i.a)({url:\"crmInstrument/queryDataInfo\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(i.a)({url:\"crmInstrument/queryPerformance\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function l(t){return Object(i.a)({url:\"crmInstrument/sellFunnel\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function c(t){return Object(i.a)({url:\"crmInstrument/salesTrend\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function r(t){return t.label=t.crmType,Object(i.a)({url:\"crmInstrument/queryRecordList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function u(t){return Object(i.a)({url:\"crmInstrument/forgottenCustomerCount\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function d(t){return Object(i.a)({url:\"crmInstrument/forgottenCustomerPageList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function h(t){return Object(i.a)({url:\"biRanking/ranking\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function p(t){return Object(i.a)({url:\"crmInstrument/queryModelSort\",method:\"post\",data:t})}function m(t){return Object(i.a)({url:\"crmInstrument/setModelSort\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function f(t){return Object(i.a)({url:\"crmInstrument/unContactCustomerPageList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}},keIY:function(t,e,s){t.exports=s.p+\"static/img/leads.2c5bddd.png\"},lebS:function(t,e,s){},\"lrb+\":function(t,e,s){},migV:function(t,e,s){t.exports=s.p+\"static/img/check_fail.f446ba8.png\"},nD2f:function(t,e,s){\"use strict\";var i=s(\"tjFw\");s.n(i).a},nslc:function(t,e,s){\"use strict\";s.r(e);var i=s(\"7Dod\"),a={name:\"DealStatusHandle\",components:{},mixins:[],props:{value:Number,visible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,status:1,options:[{label:\"已成交\",value:1},{label:\"未成交\",value:0}]}},computed:{},watch:{value:{handler:function(t){void 0!==t&&(this.status=0==t?1:0)},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.status=1,this.$emit(\"update:visible\",!1)},handleConfirm:function(){var t=this,e=this.selectionList.map(function(e){return e[t.crmType+\"Id\"]}).join(\",\"),s={dealStatus:this.status};s.ids=e,this.loading=!0,Object(i.b)(s).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.$emit(\"handle\",{type:\"deal_status\"}),t.handleCancel()}).catch(function(){t.loading=!1})}}},n=(s(\"E/pc\"),s(\"KHd+\")),o=Object(n.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,title:\"客户成交状态\",width:\"400px\"},on:{close:t.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[t._v(\"成交状态：\")]),t._v(\" \"),s(\"el-select\",{staticClass:\"handle-item-content\",model:{value:t.status,callback:function(e){t.status=e},expression:\"status\"}},t._l(t.options,function(t){return s(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"5fb62a3b\",null);o.options.__file=\"DealStatusHandle.vue\";e.default=o.exports},\"p3/6\":function(t,e,s){\"use strict\";s.r(e);var i=s(\"8GhS\"),a=s(\"7Dod\"),n=s(\"d9x6\"),o=s(\"ERJp\"),l={name:\"TeamsHandle\",components:{XhUserCell:i.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},title:{type:String,default:\"\"},crmType:{type:String,default:\"\"},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],handleType:1,addsTypes:[]}},computed:{},watch:{dialogVisible:{handler:function(t){this.visible=t,t||this.resetData()},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{resetData:function(){this.usersList=[],this.handleType=1,this.addsTypes=[]},handleCancel:function(){this.visible=!1,this.$emit(\"update:dialogVisible\",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;if(0===this.usersList.length)this.$message.error(\"请选择团队成员\");else{var e={ids:this.selectionList.map(function(e){return e[t.crmType+\"Id\"]}),memberIds:this.usersList.map(function(t){return t.userId})};\"customer\"===this.crmType&&\"添加团队成员\"==this.title&&(e.changeType=this.addsTypes.map(function(t){return parseInt(t)}));var s=void 0;\"添加团队成员\"==this.title?(e.power=this.handleType,s={customer:a.U,contract:n.q,business:o.s}[this.crmType]):s={customer:a.T,contract:n.p,business:o.r}[this.crmType],this.loading=!0,s(e).then(function(e){t.$message({type:\"success\",message:\"操作成功\"}),t.loading=!1,t.handleCancel(),t.$emit(\"handle\",{type:\"添加团队成员\"==t.title?\"add_user\":\"delete_user\"})}).catch(function(){t.loading=!1})}}}},c=(s(\"xmeh\"),s(\"KHd+\")),r=Object(c.a)(l,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{title:t.title,visible:t.visible,\"append-to-body\":!0,\"close-on-click-modal\":!1,width:\"400px\"},on:{\"update:visible\":function(e){t.visible=e},close:t.handleCancel}},[s(\"div\",{staticClass:\"handle-box\"},[s(\"flexbox\",{staticClass:\"handle-item\",attrs:{align:\"stretch\"}},[s(\"div\",{staticClass:\"handle-item-name\",staticStyle:{\"margin-top\":\"8px\"}},[t._v(\"选择团队成员：\")]),t._v(\" \"),s(\"xh-user-cell\",{staticClass:\"handle-item-content\",attrs:{radio:!1,value:t.usersList,placeholder:\"点击选择（多选）\"},on:{\"value-change\":t.userChage}}),t._v(\" \"),\"添加团队成员\"!=t.title?s(\"div\",{staticClass:\"tips\"},[t._v(\"此操作不可移除数据负责人\")]):t._e()],1),t._v(\" \"),\"添加团队成员\"==t.title?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"权限：\")]),t._v(\" \"),s(\"el-radio-group\",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:\"handleType\"}},[s(\"el-radio\",{attrs:{label:1}},[t._v(\"只读\")]),t._v(\" \"),s(\"el-radio\",{attrs:{label:2}},[t._v(\"读写\")])],1)],1):t._e(),t._v(\" \"),\"添加团队成员\"==t.title&&\"customer\"===t.crmType?s(\"flexbox\",{staticClass:\"handle-item\"},[s(\"div\",{staticClass:\"handle-item-name\"},[t._v(\"同时添加至：\")]),t._v(\" \"),s(\"el-checkbox-group\",{model:{value:t.addsTypes,callback:function(e){t.addsTypes=e},expression:\"addsTypes\"}},[s(\"el-checkbox\",{attrs:{label:\"2\"}},[t._v(\"商机\")]),t._v(\" \"),s(\"el-checkbox\",{attrs:{label:\"3\"}},[t._v(\"合同\")])],1)],1):t._e()],1),t._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v(\"取消\")]),t._v(\" \"),s(\"el-button\",{directives:[{name:\"debounce\",rawName:\"v-debounce\",value:t.handleConfirm,expression:\"handleConfirm\"}],attrs:{type:\"primary\"}},[t._v(\"保存\")])],1)])},[],!1,null,\"3390e593\",null);r.options.__file=\"TeamsHandle.vue\";e.default=r.exports},p3hS:function(t,e,s){var i={\"./board.png\":\"5XBl\",\"./business.png\":\"dTTw\",\"./contacts.png\":\"JAjk\",\"./contract.png\":\"U4MQ\",\"./customer.png\":\"wfwE\",\"./customer_not.png\":\"cLla\",\"./expense-examines.png\":\"aKrz\",\"./expense.png\":\"ugew\",\"./invoice.png\":\"R1k5\",\"./leads.png\":\"keIY\",\"./leads_not.png\":\"K4QM\",\"./marketing.png\":\"ShYU\",\"./nearby.png\":\"t4Dm\",\"./nearby_not.png\":\"L+lS\",\"./product.png\":\"wbJn\",\"./receivables.png\":\"bok9\",\"./seas.png\":\"riSQ\",\"./seas_not.png\":\"goM+\",\"./todo.png\":\"0Dkb\",\"./visit.png\":\"9cPJ\"};function a(t){var e=n(t);return s(e)}function n(t){var e=i[t];if(!(e+1)){var s=new Error(\"Cannot find module '\"+t+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}return e}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id=\"p3hS\"},q0fG:function(t,e,s){\"use strict\";var i=s(\"ep8U\");s.n(i).a},qDfk:function(t,e,s){\"use strict\";s.r(e);var i=s(\"QbLZ\"),a=s.n(i),n=s(\"O8VQ\"),o=s(\"Ew9n\"),l=s(\"ZoMv\"),c={name:\"RecordList\",components:{LogCell:n.default,SlideView:o.a,CRMFullScreenDetail:function(){return Promise.all([s.e(\"chunk-66f9\"),s.e(\"chunk-0aaf\"),s.e(\"chunk-620e\"),s.e(\"chunk-36d0\")]).then(s.bind(null,\"3z7q\"))}},filters:{crmIconClass:function(t){return\"wk wk-\"+l.default.convertTypeToKey(t)},crmName:function(t){return l.default.convertTypeToName(t)}},props:{crmType:String,request:Function,params:Object,listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,page:1,noMore:!1,list:[],scrollKey:Date.now(),showFullDetail:!1,relationID:\"\",relationCrmType:\"\"}},computed:{crmIcon:function(){var t=this.crmType.replace(\"crm_\",\"\");return s(\"p3hS\")(\"./\"+t+\".png\")},scrollDisabled:function(){return this.loading||this.noMore}},watch:{params:function(){this.refreshList()}},mounted:function(){},methods:{refreshList:function(){this.page=1,this.list=[],this.noMore=!1,this.scrollKey=Date.now()},getList:function(){var t=this;this.loading=!0,this.request(a()({page:this.page,limit:15},this.params)).then(function(e){t.page++,t.list=t.list.concat(e.data.list),t.noMore=e.data.lastPage,t.loading=!1}).catch(function(){t.noMore=!0,t.loading=!1})},checkRelationDetail:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.relationID=e,this.relationCrmType=s?l.default.convertTypeToKey(t):t,this.showFullDetail=!0},hideView:function(){this.$emit(\"hide\")}}},r=(s(\"ANtS\"),s(\"KHd+\")),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"slide-view\",{staticClass:\"d-view\",attrs:{\"listener-ids\":t.listenerIDs,\"no-listener-ids\":t.noListenerIDs,\"no-listener-class\":t.noListenerClass,\"body-style\":{padding:0,height:\"100%\"}},on:{close:t.hideView}},[i(\"flexbox\",{staticClass:\"t-section\"},[i(\"img\",{staticClass:\"t-img\",attrs:{onerror:'this.src=\"'+s(\"Tww3\")+'\"',src:t.crmIcon}}),t._v(\" \"),i(\"div\",{staticClass:\"t-name\"},[t._v(\"跟进记录\")])]),t._v(\" \"),i(\"div\",{staticClass:\"t-content\"},[i(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.getList,expression:\"getList\"}],key:t.scrollKey,attrs:{\"infinite-scroll-disabled\":\"scrollDisabled\",\"infinite-scroll-distance\":\"100\"}},t._l(t.list,function(e,s){return i(\"log-cell\",{key:s,attrs:{item:e,index:s,\"can-delete\":!1},on:{\"crm-detail\":t.checkRelationDetail}},[i(\"div\",{staticClass:\"relate-cell\",on:{click:function(s){t.checkRelationDetail(e.activityType,e.activityTypeId,!0)}}},[i(\"i\",{staticClass:\"relate-cell-icon\",class:t._f(\"crmIconClass\")(e.activityType)}),t._v(\" \"),i(\"span\",{staticClass:\"relate-cell-type\"},[t._v(t._s(t._f(\"crmName\")(e.activityType))+\"-\")]),t._v(\" \"),i(\"span\",{staticClass:\"relate-cell-name\"},[t._v(t._s(e.crmTypeName))])])])})),t._v(\" \"),t.loading?i(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"加载中...\")]):t._e(),t._v(\" \"),t.noMore?i(\"p\",{staticClass:\"scroll-bottom-tips\"},[t._v(\"没有更多了\")]):t._e()]),t._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:t.showFullDetail,\"crm-type\":t.relationCrmType,id:t.relationID},on:{\"update:visible\":function(e){t.showFullDetail=e}}})],1)},[],!1,null,\"ec661820\",null);u.options.__file=\"RecordList.vue\";e.default=u.exports},qej1:function(t,e,s){},riSQ:function(t,e,s){t.exports=s.p+\"static/img/seas.83becad.png\"},s357:function(t,e,s){\"use strict\";var i=s(\"TDiV\");s.n(i).a},sCKB:function(t,e,s){\"use strict\";var i=s(\"P8c/\");s.n(i).a},szeO:function(t,e,s){\"use strict\";var i=s(\"d5Rn\");s.n(i).a},t4Dm:function(t,e,s){t.exports=s.p+\"static/img/nearby.2d86e3c.png\"},tjFw:function(t,e,s){},\"u+Mw\":function(t,e,s){\"use strict\";var i=s(\"GQeE\"),a=s.n(i),n=s(\"sCIN\"),o={name:\"Emoji\",data:function(){return{emojiData:n.a,pannels:[\"表情\",\"自然\",\"物品\",\"地点\",\"符号\"],activeIndex:0}},computed:{emojis:function(){var t=this;return this.pannels.map(function(e){return a()(t.emojiData[e])})}},created:function(){},methods:{changeActive:function(t){this.activeIndex=t},getPureName:function(t){return t.replace(/:/g,\"\")},selectItem:function(t){this.$emit(\"select\",t)}}},l=(s(\"HtQe\"),s(\"KHd+\")),c=Object(l.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"emoji\"},[s(\"ul\",{staticClass:\"emoji-controller\"},t._l(t.pannels,function(e,i){return s(\"li\",{key:i,class:{active:i===t.activeIndex},on:{click:function(e){t.changeActive(i)}}},[t._v(\"\\n      \"+t._s(e)+\"\\n    \")])})),t._v(\" \"),s(\"ul\",{staticClass:\"emoji-container\"},t._l(t.emojis,function(e,i){return i===t.activeIndex?s(\"li\",{key:i,staticStyle:{padding:\"0\"}},[t._v(\"\\n      \"+t._s(e)+\"--\"+t._s(i)+\"\\n      \"),t._l(e,function(e,i){return s(\"a\",{key:i,attrs:{href:\"javascript:;\"},on:{click:function(s){t.selectItem(e)}}},[s(\"span\",{staticClass:\"emoji-item\",class:\"sprite-\"+t.getPureName(e),attrs:{title:e}})])})],2):t._e()}))])},[],!1,null,\"36243ed9\",null);c.options.__file=\"Emoji.vue\";e.a=c.exports},u2Af:function(t,e,s){},ugew:function(t,e,s){t.exports=s.p+\"static/img/expense.29e9174.png\"},ujp9:function(t,e,s){},vvxI:function(t,e,s){\"use strict\";s.r(e),e.default={filters:{},methods:{getActivityType:function(t){return{1:\"leads\",2:\"customer\",3:\"contacts\",4:\"product\",5:\"business\",6:\"contract\",7:\"receivables\",8:\"log\",9:\"examine\",11:\"task\"}[t]},getActivityTypeName:function(t){return{1:\"线索\",2:\"客户\",3:\"联系人\",4:\"产品\",5:\"商机\",6:\"合同\",7:\"回款\",8:\"日志\",9:\"审批\",10:\"日程\",11:\"任务\",12:\"发邮件\"}[t]},getRecordLogTypeName:function(t){return t?{1:\"跟进记录\",2:\"创建记录\",3:\"商机阶段变更\",4:\"外勤签到\"}[t]:\"跟进记录\"}}}},wbJn:function(t,e,s){t.exports=s.p+\"static/img/product.663b457.png\"},wfwE:function(t,e,s){t.exports=s.p+\"static/img/customer.6f13c37.png\"},\"wu/m\":function(t,e,s){t.exports=s.p+\"static/img/check_create.09736ed.png\"},xmeh:function(t,e,s){\"use strict\";var i=s(\"cBfe\");s.n(i).a},y4JV:function(t,e,s){t.exports=s.p+\"static/img/check_suc.e52db27.png\"},yXKV:function(t,e,s){\"use strict\";var i=s(\"1h2A\");s.n(i).a},ye9D:function(t,e,s){\"use strict\";var i={name:\"AddFileList\",components:{},props:{data:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{deleteItem:function(t,e){this.$emit(\"delete\",t,e)},deleteAll:function(){this.$emit(\"delete-all\")}}},a=(s(\"9Y/r\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"section\",{staticClass:\"file-cont\"},[i(\"flexbox\",{staticClass:\"f-header\"},[i(\"i\",{staticClass:\"wk wk-file\"}),t._v(\" \"),i(\"div\",{staticClass:\"f-name\"},[t._v(\"附件\")])]),t._v(\" \"),i(\"div\",{staticClass:\"f-body\"},t._l(t.data,function(e,a){return i(\"flexbox\",{key:a,staticClass:\"f-item\"},[i(\"img\",{staticClass:\"f-img\",attrs:{onerror:'this.src=\"'+s(\"Tww3\")+'\"',src:e.icon}}),t._v(\" \"),i(\"div\",{staticClass:\"f-name\"},[t._v(t._s(e.name)),i(\"span\",{staticClass:\"f-size\"},[t._v(t._s(\"（\"+e.size+\"）\"))])]),t._v(\" \"),i(\"div\",{staticClass:\"close-button\",on:{click:function(s){t.deleteItem(e,a)}}},[t._v(\"×\")])])})),t._v(\" \"),i(\"el-button\",{attrs:{type:\"text\"},on:{click:t.deleteAll}},[t._v(\"全部删除\")])],1)},[],!1,null,\"72a25ee2\",null);n.options.__file=\"AddFileList.vue\";e.a=n.exports},z7oh:function(t,e,s){\"use strict\";var i=s(\"QbLZ\"),a=s.n(i),n=s(\"dPzk\"),o=s(\"Ir+r\"),l=s(\"L2JU\"),c=s(\"Xjjk\"),r=s.n(c),u={name:\"CommentList\",components:{ReplyComment:n.a},props:{list:{type:Array,required:!0},id:{type:[String,Number],required:!0},type:[String,Number]},data:function(){return{replyIndex:null,commentLoading:!1}},computed:a()({},Object(l.b)([\"userInfo\"])),methods:{handleToReply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=t+(null!==e?\"-\"+e:\"\");this.$emit(\"close-other-reply\"),s!==this.replyIndex&&(this.replyIndex=s)},closeReply:function(){this.replyIndex=null},handleReply:function(t){var e=this,s={type:this.type,content:r()(t),typeId:this.id},i=null,a=this.replyIndex.split(\"-\"),n=this.list[a[0]];a[1]&&(i=n.childCommentList[a[1]]),n&&(s.mainId=n.commentId,s.pid=n.userId),i&&(s.pid=i.userId),this.commentLoading=!0,Object(o.c)(s).then(function(t){t.data.user={userId:e.userInfo.id,realname:e.userInfo.realname,img:e.userInfo.img},t.data.replyUser=i?i.user:n.user,e.list[a[0]].childCommentList.push(t.data),e.replyIndex=null,e.commentLoading=!1}).catch(function(){e.commentLoading=!1})},handleToDelete:function(t,e){var s=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.$confirm(\"确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(o.a)({commentId:t.commentId}).then(function(t){s.$message({type:\"success\",message:\"删除成功!\"}),i>=0?s.list[e].childCommentList.splice(i,1):s.$emit(\"delete\",e)})}).catch(function(){s.$message({type:\"info\",message:\"已取消删除\"})})}}},d=(s(\"OdVz\"),s(\"KHd+\")),h=Object(d.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"comment-list\"},t._l(t.list,function(e,i){return s(\"div\",{key:i,staticClass:\"comment-list-item\"},[s(\"div\",{staticClass:\"parent-reply reply\"},[s(\"div\",{staticClass:\"user-info\"},[s(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:e.user.realname,id:e.user.userId,size:34,src:e.user.img,disabled:!1}}),t._v(\" \"),s(\"div\",{staticClass:\"user-info__bd\"},[s(\"div\",{staticClass:\"user\"},[t._v(t._s(e.user.realname))]),t._v(\" \"),s(\"div\",{staticClass:\"time\"},[t._v(\"\\n            \"+t._s(e.createTime)+\"\\n          \")])]),t._v(\" \"),s(\"div\",{staticClass:\"control\"},[s(\"span\",{staticClass:\"reply-btn\",on:{click:function(e){t.handleToReply(i)}}},[s(\"i\",{staticClass:\"wk wk-reply\"}),t._v(\" \"),s(\"span\",[t._v(\"回复\")])]),t._v(\" \"),s(\"span\",{staticClass:\"delete-btn\",on:{click:function(s){t.handleToDelete(e,i)}}},[s(\"i\",{staticClass:\"wk wk-s-delete\"}),t._v(\" \"),s(\"span\",[t._v(\"删除\")])])])],1),t._v(\" \"),s(\"div\",{staticClass:\"content\",domProps:{innerHTML:t._s(t.emoji(e.content))}}),t._v(\" \"),t.replyIndex===String(i)?s(\"reply-comment\",{on:{reply:t.handleReply,close:function(e){t.replyIndex=null}}}):t._e()],1),t._v(\" \"),e.childCommentList&&e.childCommentList.length>0?t._l(e.childCommentList,function(e,a){return s(\"div\",{key:a},[s(\"div\",{staticClass:\"child-reply reply\"},[s(\"div\",{staticClass:\"user-info\"},[s(\"xr-avatar\",{staticClass:\"user-img\",attrs:{name:e.user.realname,id:e.user.userId,size:34,src:e.user.img,disabled:!1}}),t._v(\" \"),s(\"div\",{staticClass:\"user-info__bd\"},[s(\"div\",{staticClass:\"user\"},[t._v(\"\\n                \"+t._s(e.user.realname)+\"\\n              \")]),t._v(\" \"),s(\"div\",{staticClass:\"time\"},[t._v(\"\\n                \"+t._s(e.createTime)+\"\\n              \")])]),t._v(\" \"),s(\"div\",{staticClass:\"control\"},[s(\"span\",{staticClass:\"reply-btn\",on:{click:function(e){t.handleToReply(i,a)}}},[s(\"i\",{staticClass:\"wk wk-reply\"}),t._v(\" \"),s(\"span\",[t._v(\"回复\")])]),t._v(\" \"),s(\"span\",{staticClass:\"delete-btn\",on:{click:function(s){t.handleToDelete(e,i,a)}}},[s(\"i\",{staticClass:\"wk wk-s-delete\"}),t._v(\" \"),s(\"span\",[t._v(\"删除\")])])])],1),t._v(\" \"),s(\"div\",{staticClass:\"child-content\"},[s(\"span\",[t._v(\"\\n              回复 @\"+t._s(e.replyUser.realname)+\"：\\n            \")]),t._v(\" \"),s(\"span\",{staticClass:\"content\",domProps:{innerHTML:t._s(t.emoji(e.content))}})]),t._v(\" \"),t.replyIndex===i+\"-\"+a?s(\"reply-comment\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.commentLoading,expression:\"commentLoading\"}],on:{reply:t.handleReply,close:function(e){t.replyIndex=null}}}):t._e()],1)])}):t._e()],2)}))},[],!1,null,\"714ff9da\",null);h.options.__file=\"CommentList.vue\";e.a=h.exports},zMq1:function(t,e,s){\"use strict\";var i={name:\"AddImageList\",components:{},props:{data:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{mouseImgOver:function(t,e){t.showDelete=!0,this.$set(this.data,e,t)},mouseImgLeave:function(t,e){t.showDelete=!1,this.$set(this.data,e,t)},deleteItem:function(t,e){this.$emit(\"delete\",t,e)},deleteAll:function(){this.$emit(\"delete-all\")},uploadFile:function(t){this.$emit(\"upload\",t)}}},a=(s(\"Z/5k\"),s(\"KHd+\")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"section\",{staticClass:\"img-cont\"},[s(\"flexbox\",{attrs:{wrap:\"wrap\"}},[t._l(t.data,function(e,i){return s(\"div\",{directives:[{name:\"src\",rawName:\"v-src:background-image\",value:e.url||e.filePath,expression:\"item.url || item.filePath\",arg:\"background-image\"}],key:i,staticClass:\"img-item\",on:{mouseover:function(s){t.mouseImgOver(e,i)},mouseleave:function(s){t.mouseImgLeave(e,i)}}},[e.showDelete?s(\"div\",{staticClass:\"img-delete\",on:{click:function(s){t.deleteItem(e,i)}}},[t._v(\"×\")]):t._e()])}),t._v(\" \"),s(\"div\",{staticClass:\"img-item-add\"},[s(\"input\",{staticClass:\"img-item-iput\",attrs:{type:\"file\",accept:\"image/*\",multiple:\"\"},on:{change:t.uploadFile}})])],2),t._v(\" \"),s(\"el-button\",{attrs:{type:\"text\"},on:{click:t.deleteAll}},[t._v(\"全部删除\")])],1)},[],!1,null,\"605cd0e7\",null);n.options.__file=\"AddImageList.vue\";e.a=n.exports},zsVz:function(t,e,s){\"use strict\";s.d(e,\"g\",function(){return a}),s.d(e,\"e\",function(){return n}),s.d(e,\"a\",function(){return o}),s.d(e,\"b\",function(){return l}),s.d(e,\"d\",function(){return c}),s.d(e,\"c\",function(){return r}),s.d(e,\"f\",function(){return u}),s.d(e,\"h\",function(){return d});var i=s(\"t3Un\");function a(t){return Object(i.a)({url:\"oaTask/queryTaskList\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function n(t){return Object(i.a)({url:\"workTask/saveWorkTask\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function o(t){return Object(i.a)({url:\"workTask/queryTaskInfo/\"+t.taskId,method:\"post\"})}function l(t){return Object(i.a)({url:\"workTask/queryTrashTaskInfo\",method:\"post\",data:t})}function c(t){return Object(i.a)({url:\"workTaskLog/queryTaskLog/\"+t.taskId,method:\"post\"})}function r(t){return Object(i.a)({url:\"workTaskRelation/saveWorkTaskRelation\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function u(t){return Object(i.a)({url:\"oaTask/deleteWorkTaskLabel\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}function d(t){return Object(i.a)({url:\"oaTask/oaTaskExport\",method:\"post\",data:t,responseType:\"blob\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"}})}}}]);","extractedComments":[]}