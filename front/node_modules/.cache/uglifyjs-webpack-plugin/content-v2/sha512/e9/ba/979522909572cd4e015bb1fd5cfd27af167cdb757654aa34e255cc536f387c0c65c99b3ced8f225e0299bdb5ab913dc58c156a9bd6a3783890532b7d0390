{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-7029\"],{\"/Cex\":function(e,t,a){},\"/MOH\":function(e,t,a){},\"0dur\":function(e,t,a){\"use strict\";a.r(t);var i=a(\"zhwh\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"w4ZA\"),r=a(\"3gPr\"),o=a(\"CjUg\"),c=a(\"8OTK\"),d=a(\"h59h\"),u=a(\"f6dm\"),m={name:\"VisitDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,CRMEditBaseInfo:l.default,RelativeFiles:r.default,RelativeHandle:o.default,CRMAllCreate:c.default,Sections:d.default},mixins:[u.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"visit\",headDetails:[{title:\"客户名称\",value:\"\"},{title:\"回访时间\",value:\"\"},{title:\"回访人\",value:\"\"},{title:\"回访形式\",value:\"\"}],tabCurrentName:\"CRMEditBaseInfo\",isCreate:!1}},computed:{tabNames:function(){return[{label:\"详细资料\",name:\"CRMEditBaseInfo\"},{label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"},{label:\"操作记录\",name:\"RelativeHandle\"}]}},mounted:function(){},methods:{getDetial:function(){var e=this;this.loading=!0,Object(i.d)(this.id).then(function(t){e.loading=!1,e.detailData=t.data,e.headDetails[0].value=t.data.customerName,e.headDetails[1].value=t.data.visitTime,e.headDetails[2].value=t.data.ownerUserName,e.headDetails[3].value=t.data.returnVisitType}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},editSaveSuccess:function(){this.$emit(\"handle\",{type:\"save-success\"}),this.getDetial()},previewImage:function(e,t){this.$bus.emit(\"preview-image-bus\",{index:t,data:e})}}},f=(a(\"B+cC\"),a(\"KHd+\")),h=Object(f.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}}),e._v(\" \"),a(\"flexbox\",{staticClass:\"d-container-bd\",attrs:{align:\"stretch\"}},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{tag:\"component\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?a(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId,editDetail:e.detailData},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"407468bc\",null);h.options.__file=\"Detail.vue\";t.default=h.exports},\"2/p+\":function(e,t,a){},\"3ojK\":function(e,t,a){\"use strict\";a.r(t);var i=a(\"c2Co\"),n=a(\"4XAY\"),s=a(\"ZoMv\"),l=a(\"Ew9n\"),r=a(\"raay\"),o=a(\"eOwn\"),c=a(\"BzA1\"),d=a(\"w4ZA\"),u=a(\"3gPr\"),m=a(\"CjUg\"),f=a(\"8OTK\"),h=a(\"f6dm\"),v={name:\"LeadsDetail\",components:{SlideView:l.a,CRMDetailHead:r.default,Activity:o.default,CRMEditBaseInfo:d.default,RelativeFiles:u.default,RelativeHandle:m.default,ImportInfo:c.default,CRMAllCreate:f.default},mixins:[h.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"leads\",headDetails:[{title:\"姓名\",value:\"\"},{title:\"线索来源\",value:\"\"},{title:\"手机\",value:\"\"},{title:\"负责人\",value:\"\"},{title:\"创建时间\",value:\"\"}],tabCurrentName:\"Activity\",isCreate:!1,showImportInfo:!0,importList:[]}},computed:{activityHandle:function(){var e=[];return this.canCreateFollowRecord&&(e=[{type:\"log\",label:\"写跟进\"}]),e},tabNames:function(){return[{label:\"活动\",name:\"Activity\"},{label:\"详细资料\",name:\"CRMEditBaseInfo\"},{label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"},{label:\"操作记录\",name:\"RelativeHandle\"}]}},mounted:function(){},methods:{getDetial:function(){var e=this;this.loading=!0,Object(i.i)(this.id).then(function(t){e.detailData=t.data,e.headDetails[0].value=t.data.name,e.headDetails[1].value=t.data.source,e.headDetails[2].value=t.data.mobile,e.headDetails[3].value=t.data.ownerUserName,e.headDetails[4].value=t.data.createTime,e.loading=!1}).catch(function(){e.loading=!1,e.hideView()}),this.getBaseInfo()},getBaseInfo:function(){var e=this;this.loading=!0,Object(n.y)({types:s.default[this.crmType],id:this.id}).then(function(t){e.importList=t.data,e.loading=!1}).catch(function(){e.loading=!1})},hideView:function(){this.$emit(\"hide-view\")}}},p=(a(\"b/Ne\"),a(\"KHd+\")),b=Object(p.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}},[a(\"template\",{slot:\"name\"},[a(\"el-tooltip\",{attrs:{content:0==e.detailData.star?\"添加关注\":\"取消关注\",effect:\"dark\",placement:\"top\"}},[a(\"i\",{staticClass:\"wk wk-focus-on focus-icon\",class:{active:0!=e.detailData.star},on:{click:function(t){e.toggleStar()}}})])],1)],2),e._v(\" \"),a(\"flexbox\",{staticClass:\"d-container-bd\",attrs:{align:\"stretch\"}},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{tag:\"component\",attrs:{detail:e.detailData,id:e.id,handle:e.activityHandle,\"crm-type\":e.crmType}})],1)})),e._v(\" \"),a(\"transition\",{attrs:{name:\"slide-fade\"}},[a(\"el-tabs\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showImportInfo,expression:\"showImportInfo\"}],staticClass:\"d-container-bd--right\",attrs:{value:\"chiefly-contacts\",type:\"border-card\"}},[a(\"el-tab-pane\",{attrs:{label:\"重要信息\",name:\"chiefly-contacts\",lazy:\"\"}},[a(\"import-info\",{staticClass:\"import-info\",attrs:{list:e.importList}})],1)],1)],1)],1)],1):e._e()],1),e._v(\" \"),a(\"el-button\",{staticClass:\"firse-button\",on:{click:function(t){e.showImportInfo=!e.showImportInfo}}},[e._v(\"重\"),a(\"br\"),e._v(\"要\"),a(\"br\"),e._v(\"信\"),a(\"br\"),e._v(\"息\"),a(\"br\"),a(\"i\",{staticClass:\"el-icon-arrow-right el-icon--right\",class:{\"is-reverse\":!e.showImportInfo}})]),e._v(\" \"),e.isCreate?a(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"a5835b74\",null);b.options.__file=\"Detail.vue\";t.default=b.exports},\"6M1a\":function(e,t,a){\"use strict\";var i=a(\"njgv\");a.n(i).a},\"8kda\":function(e,t,a){\"use strict\";var i=a(\"FOXl\");a.n(i).a},ALhW:function(e,t,a){\"use strict\";a.r(t);var i=a(\"1DpC\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"w4ZA\"),r=a(\"3gPr\"),o=a(\"CjUg\"),c=a(\"RE/G\"),d=a(\"8OTK\"),u=a(\"3biH\"),m=a(\"f6dm\"),f=a(\"jHPx\"),h={name:\"ReceivablesDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,CRMEditBaseInfo:l.default,RelativeFiles:r.default,RelativeHandle:o.default,RelativePrint:c.default,ExamineInfo:u.a,CRMAllCreate:d.default},mixins:[m.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"receivables\",name:\"\",headDetails:[{title:\"客户名称\",value:\"\"},{title:\"合同金额\",value:\"\"},{title:\"合同名称\",value:\"\"},{title:\"回款日期\",value:\"\"},{title:\"回款金额\",value:\"\"},{title:\"负责人\",value:\"\"}],tabCurrentName:\"CRMEditBaseInfo\",isCreate:!1}},computed:{tabNames:function(){var e=[{label:\"详细资料\",name:\"CRMEditBaseInfo\"},{label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"},{label:\"操作记录\",name:\"RelativeHandle\"}];return this.crm.receivables&&this.crm.receivables.print&&e.push({label:\"打印记录\",name:\"RelativePrint\"}),e}},mounted:function(){},methods:{getDetial:function(){var e=this;this.loading=!0,Object(i.i)({id:this.id}).then(function(t){e.loading=!1,e.name=t.data.number,e.detailData=t.data,e.headDetails[0].value=t.data.customerName,e.headDetails[1].value=Object(f.h)(t.data.contractMoney||0),e.headDetails[2].value=t.data.contractName,e.headDetails[3].value=t.data.returnTime,e.headDetails[4].value=Object(f.h)(t.data.money||0),e.headDetails[5].value=t.data.ownerUserName}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},examineHandle:function(){this.$emit(\"handle\",{type:\"examine\"})}}},v=(a(\"vhkk\"),a(\"KHd+\")),p=Object(v.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}}),e._v(\" \"),e.detailData.examineRecordId?a(\"examine-info\",{staticClass:\"examine-info\",attrs:{id:e.id,\"record-id\":e.detailData.examineRecordId,\"owner-user-id\":e.detailData.ownerUserId,\"examine-type\":\"crm_receivables\"},on:{\"on-handle\":e.examineHandle}}):e._e(),e._v(\" \"),a(\"div\",{staticClass:\"d-container-bd\"},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{tag:\"component\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?a(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"5d1ca7f1\",null);p.options.__file=\"Detail.vue\";t.default=p.exports},AWvD:function(e,t,a){\"use strict\";a.r(t);var i=a(\"X5SI\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"CjUg\"),r=a(\"k7Wj\"),o=a(\"jHPx\"),c=a(\"3biH\"),d=a(\"tZ34\"),u=a(\"ViIy\"),m={name:\"ExpenseDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,RelativeHandle:l.default,ExpenseExamine:u.default,ExpenseItems:d.default,ExamineInfo:c.a},mixins:[r.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"expense-examines\",name:\"\",headDetails:[{title:\"费用总额\",value:\"\"}],tabCurrentName:\"ExpenseItems\",isCreate:!1}},watch:{id:function(){this.canShowExaminesDetail&&(this.detailData=null,this.tabsNumber={},this.getDetail(),this.getTabsNum())},detailData:function(){this.$refs.crmDetailMain&&\"white\"==this.$refs.crmDetailMain.style.background&&(this.$refs.crmDetailMain.style.background=\"inherit\")}},computed:{tabNames:function(){return[{label:this.getTabName(\"费用明细\",this.tabsNumber.moneyCount),name:\"ExpenseItems\"},{label:\"操作记录\",name:\"RelativeHandle\"}]},canShowExaminesDetail:function(){return(!this.detailData||0!==this.detailData.dataAuth)&&(this.crm&&this.crm.expense&&this.crm.expense.read)}},mounted:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(i.f)({id:this.id}).then(function(t){e.loading=!1,e.detailData=t.data,e.headDetails[0].value=Object(o.h)(t.data.money||0)}).catch(function(){e.loading=!1,e.hideView()})},deleteExpenseExamine:function(){var e=this;this.loading=!0,Object(i.c)({id:this.id}).then(function(t){e.loading=!1,e.hideView()}).catch(function(){e.loading=!1})},handleHandle:function(e){var t=this;this.$nextTick(function(){t.$bus.emit(\"crm-tab-num-update\")}),this.$refs.ExpenseItems[0].getDetail(),this.getDetail(),this.$emit(\"handle\",e)},hideView:function(){this.$emit(\"hide-view\")},examineHandle:function(){this.$emit(\"handle\",{type:\"examine\"})}}},f=(a(\"Kiib\"),a(\"KHd+\")),h=Object(f.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowExaminesDetail,expression:\"!canShowExaminesDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowExaminesDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,\"save-success\":e.detailHeadHandle,close:e.hideView}}),e._v(\" \"),e.detailData.examineRecordId?a(\"examine-info\",{staticClass:\"examine-info\",attrs:{id:e.id,\"record-id\":e.detailData.examineRecordId,\"owner-user-id\":e.detailData.createUserId,\"examine-type\":\"crm_expense\"},on:{\"on-handle\":e.examineHandle}}):e._e(),e._v(\" \"),a(\"div\",{staticClass:\"d-container-bd\"},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{ref:t.name,refInFor:!0,tag:\"component\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType},on:{handle:e.handleHandle}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?a(\"expense-examine\",{attrs:{action:{type:\"update\",id:e.id,data:e.detailData}},on:{close:function(t){e.isCreate=!1},\"save-success\":e.handleHandle}}):e._e()],1)},[],!1,null,\"a6792ee0\",null);h.options.__file=\"ExamineDetail.vue\";t.default=h.exports},\"B+cC\":function(e,t,a){\"use strict\";var i=a(\"pTPx\");a.n(i).a},FOXl:function(e,t,a){},Kiib:function(e,t,a){\"use strict\";var i=a(\"/MOH\");a.n(i).a},KoXU:function(e,t,a){\"use strict\";var i=a(\"QSk5\");a.n(i).a},QSk5:function(e,t,a){},QjGH:function(e,t,a){\"use strict\";var i=a(\"/Cex\");a.n(i).a},\"Ts3+\":function(e,t,a){},\"U+Y4\":function(e,t,a){\"use strict\";a.r(t);var i=a(\"7Dod\"),n=a(\"ZoMv\"),s=a(\"4XAY\"),l={name:\"ContactsImport\",components:{ImportInfo:a(\"BzA1\").default},props:{id:[Number,String],customerId:[Number,String]},data:function(){return{loading:!1,detail:null,list:[]}},computed:{hasInfo:function(){return this.id&&this.customerId},isDeal:function(){return 1==this.detail.dealStatus},dealIcon:function(){return this.isDeal?\"wk wk-success\":\"wk wk-close\"},dealName:function(){return this.isDeal?\"已成交\":\"未成交\"}},watch:{customerId:function(){this.detail=null,this.list=[],this.getDetial()},id:function(){this.detail=null,this.list=[],this.getDetial()}},created:function(){var e=this;this.$bus.on(\"crm-detail-update\",function(t){e.getBaseInfo()})},mounted:function(){this.getDetial()},beforeDestroy:function(){this.$bus.off(\"crm-detail-update\")},methods:{getDetial:function(){var e=this;this.hasInfo&&(this.loading=!0,Object(i.O)({customerId:this.customerId}).then(function(t){e.loading=!1,e.detail=t.data}).catch(function(){e.loading=!1}),this.getBaseInfo())},getBaseInfo:function(){var e=this;this.loading=!0,Object(s.y)({types:n.default.contacts,id:this.id}).then(function(t){e.list=t.data,e.loading=!1}).catch(function(){e.loading=!1})}}},r=(a(\"8kda\"),a(\"KHd+\")),o=Object(r.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"contacts-import\"},[e.detail?i(\"flexbox\",{staticClass:\"cell\",attrs:{align:\"stretch\"}},[i(\"img\",{staticClass:\"cell-hd\",attrs:{onerror:'this.src=\"'+a(\"Tww3\")+'\"',src:a(\"wfwE\")}}),e._v(\" \"),i(\"div\",{staticClass:\"cell-bd\"},[i(\"p\",{staticClass:\"cell-bd__name\"},[i(\"span\",[e._v(e._s(e.detail.customerName))])]),e._v(\" \"),i(\"div\",{staticClass:\"cell-bd__detail\"},[i(\"i\",{staticClass:\"wk wk-circle-iphone\"}),e._v(\" \"),e.detail.mobile?i(\"span\",[e._v(e._s(e.detail.mobile))]):i(\"span\",{staticClass:\"no-data\"},[e._v(\"暂无电话\")]),e._v(\" \"),i(\"div\",{staticClass:\"deal-info\"},[i(\"span\",{class:[\"mark\",e.isDeal?\"mark-suc\":\"mark-un\"]},[i(\"i\",{class:e.dealIcon}),e._v(e._s(e.dealName))])])])])]):e._e(),e._v(\" \"),e.list.length?i(\"import-info\",{attrs:{list:e.list}}):e._e()],1)},[],!1,null,\"6ce39916\",null);o.options.__file=\"ContactsImport.vue\";t.default=o.exports},aGYc:function(e,t,a){\"use strict\";var i=a(\"Ts3+\");a.n(i).a},\"b/Ne\":function(e,t,a){\"use strict\";var i=a(\"2/p+\");a.n(i).a},blTa:function(e,t,a){},f462:function(e,t,a){\"use strict\";a.r(t);var i=a(\"X5SI\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"w4ZA\"),r=a(\"3gPr\"),o=a(\"CjUg\"),c=a(\"8OTK\"),d=a(\"3biH\"),u=a(\"f6dm\"),m=a(\"jHPx\"),f={name:\"ExpenseDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,CRMEditBaseInfo:l.default,RelativeFiles:r.default,RelativeHandle:o.default,ExamineInfo:d.a,CRMAllCreate:c.default},mixins:[u.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"expense\",name:\"\",headDetails:[{title:\"费用类型\",value:\"\"},{title:\"费用金额\",value:\"\"},{title:\"费用日期\",value:\"\"}],tabCurrentName:\"CRMEditBaseInfo\",isCreate:!1}},computed:{tabNames:function(){var e=[{label:\"详细资料\",name:\"CRMEditBaseInfo\"},{label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"},{label:\"操作记录\",name:\"RelativeHandle\"}];return this.crm.expense&&this.crm.expense.print&&e.push({label:\"打印记录\",name:\"RelativePrint\"}),e}},mounted:function(){},methods:{editExpenseSaveSuccess:function(){this.$bus.emit(\"crm-tab-num-update\"),this.$emit(\"handle\",{type:\"save-success\"}),this.getDetial(),this.tabCurrentName=\"CRMEditBaseInfo\"},getDetial:function(){var e=this;this.loading=!0,Object(i.l)({id:this.id}).then(function(t){e.loading=!1,e.name=t.data.expenseNum,e.detailData=t.data,e.headDetails[0].value=t.data.expenseType,e.headDetails[1].value=Object(m.h)(t.data.money||0),e.headDetails[2].value=t.data.expenseTime}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},examineHandle:function(){this.$emit(\"handle\",{type:\"examine\"})}}},h=(a(\"aGYc\"),a(\"KHd+\")),v=Object(h.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}}),e._v(\" \"),e.detailData.examineRecordId?a(\"examine-info\",{staticClass:\"examine-info\",attrs:{id:e.id,\"record-id\":e.detailData.examineRecordId,\"owner-user-id\":e.detailData.ownerUserId,\"examine-type\":\"crm_receivables\"},on:{\"on-handle\":e.examineHandle}}):e._e(),e._v(\" \"),a(\"div\",{staticClass:\"d-container-bd\"},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{tag:\"component\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?a(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId},\"crm-type\":e.crmType},on:{\"save-success\":e.editExpenseSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"0e55ae5f\",null);v.options.__file=\"Detail.vue\";t.default=v.exports},ft4M:function(e,t,a){\"use strict\";var i=a(\"oaLG\");a.n(i).a},gwiD:function(e,t,a){\"use strict\";a.r(t);var i=a(\"AAeT\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"eOwn\"),r=a(\"U+Y4\"),o=a(\"w4ZA\"),c=a(\"QUqu\"),d=a(\"35zX\"),u=a(\"CjUg\"),m=a(\"3gPr\"),f=a(\"8OTK\"),h=a(\"f6dm\"),v={name:\"ContactsDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,Activity:l.default,CRMEditBaseInfo:o.default,RelativeBusiness:c.default,RelativeHandle:u.default,RelativeFiles:m.default,CRMAllCreate:f.default,ContactsImport:r.default,RelativeVisit:d.default},mixins:[h.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"contacts\",headDetails:[{title:\"客户名称\",value:\"\"},{title:\"职务\",value:\"\"},{title:\"手机\",value:\"\"},{title:\"创建时间\",value:\"\"}],tabCurrentName:\"Activity\",isCreate:!1,showImportInfo:!0}},computed:{activityHandle:function(){var e=[{type:\"task\",label:\"创建任务\"},{type:\"business\",label:\"创建商机\"},{type:\"contract\",label:\"创建合同\"},{type:\"receivables\",label:\"创建回款\"}];return this.canCreateFollowRecord&&(e=[{type:\"log\",label:\"写跟进\"}].concat(e)),e},tabNames:function(){var e=[];return e.push({label:\"活动\",name:\"Activity\"}),this.crm.contacts&&this.crm.contacts.read&&e.push({label:\"详细资料\",name:\"CRMEditBaseInfo\"}),this.crm.business&&this.crm.business.index&&e.push({label:this.getTabName(\"商机\",this.tabsNumber.businessCount),name:\"RelativeBusiness\"}),this.crm.visit&&this.crm.visit.index&&e.push({label:this.getTabName(\"回访\",this.tabsNumber.returnVisitCount),name:\"RelativeVisit\"}),e.push({label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"}),e.push({label:\"操作记录\",name:\"RelativeHandle\"}),e},logTyps:function(){return[{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},{icon:\"contacts\",color:\"#27BA4A\",command:3,label:\"联系人\"},{icon:\"o-task\",color:\"#D376FF\",command:11,label:\"任务\"},{icon:\"log\",color:\"#5864FF\",command:8,label:\"日志\"},{icon:\"approve\",color:\"#9376FF\",command:9,label:\"审批\"}]},customerId:function(){return this.detailData&&this.detailData.customerId||\"\"}},mounted:function(){},methods:{getDetial:function(){var e=this;this.loading=!0,Object(i.k)({contactsId:this.id}).then(function(t){e.loading=!1,e.detailData=t.data,e.headDetails[0].value=t.data.customerName,e.headDetails[1].value=t.data.post,e.headDetails[2].value=t.data.mobile,e.headDetails[3].value=t.data.createTime}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")}}},p=(a(\"KoXU\"),a(\"KHd+\")),b=Object(p.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}},[a(\"template\",{slot:\"name\"},[a(\"el-tooltip\",{attrs:{content:0==e.detailData.star?\"添加关注\":\"取消关注\",effect:\"dark\",placement:\"top\"}},[a(\"i\",{staticClass:\"wk wk-focus-on focus-icon\",class:{active:0!=e.detailData.star},on:{click:function(t){e.toggleStar()}}})])],1)],2),e._v(\" \"),a(\"flexbox\",{staticClass:\"d-container-bd\",attrs:{align:\"stretch\"}},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{tag:\"component\",attrs:{detail:e.detailData,\"type-list\":e.logTyps,id:e.id,handle:e.activityHandle,\"crm-type\":e.crmType}})],1)})),e._v(\" \"),a(\"transition\",{attrs:{name:\"slide-fade\"}},[a(\"el-tabs\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showImportInfo,expression:\"showImportInfo\"}],staticClass:\"d-container-bd--right\",attrs:{value:\"chiefly-contacts\",type:\"border-card\"}},[a(\"el-tab-pane\",{attrs:{label:\"重要信息\",name:\"chiefly-contacts\",lazy:\"\"}},[a(\"contacts-import\",{attrs:{id:e.id,\"customer-id\":e.customerId}})],1)],1)],1)],1)],1):e._e()],1),e._v(\" \"),a(\"el-button\",{staticClass:\"firse-button\",on:{click:function(t){e.showImportInfo=!e.showImportInfo}}},[e._v(\"重\"),a(\"br\"),e._v(\"要\"),a(\"br\"),e._v(\"信\"),a(\"br\"),e._v(\"息\"),a(\"br\"),a(\"i\",{staticClass:\"el-icon-arrow-right el-icon--right\",class:{\"is-reverse\":!e.showImportInfo}})]),e._v(\" \"),e.isCreate?a(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"70448e72\",null);b.options.__file=\"Detail.vue\";t.default=b.exports},k7Wj:function(e,t,a){\"use strict\";a.r(t);var i=a(\"QbLZ\"),n=a.n(i),s=a(\"L2JU\"),l=a(\"c2Co\"),r=a(\"7Dod\"),o=a(\"AAeT\"),c=a(\"ERJp\"),d=a(\"d9x6\"),u=a(\"Y4Le\"),m=a(\"1DpC\"),f=(a(\"LWkM\"),a(\"X5SI\")),h=a(\"ehos\");t.default={data:function(){return{showFirstDetail:!0,detailData:null,tabsNumber:{}}},props:{isSeas:{type:Boolean,default:!1}},computed:n()({},Object(s.b)([\"crm\"]),Object(s.b)([\"project\"]),{canCreateFollowRecord:function(){return this.crm&&this.crm.followRecord&&this.crm.followRecord.save},showTabsNumber:function(){return\"visit\"!==this.crmType}}),mounted:function(){this.$refs.crmDetailMain.style.background=\"white\",this.debouncedGetTabsNum=Object(h.debounce)(300,this.getTabsNum)},beforeDestroy:function(){this.$bus.off(\"crm-tab-num-update\",this.debouncedGetTabsNum)},methods:{viewAfterEnter:function(){this.canShowExaminesDetail&&(this.getDetail(),this.getTabsNum(),this.$bus.on(\"crm-tab-num-update\",this.debouncedGetTabsNum))},detailHeadHandle:function(e){\"edit\"===e.type?this.isCreate=!0:\"cancel\"===e.type?this.getDetail():\"delete\"===e.type||\"exit-team\"===e.type?this.hideView():\"state_start\"!==e.type&&\"state_disable\"!==e.type||this.getDetail(),\"edit\"===e.type&&this.getDetail(),this.$emit(\"handle\",e)},editSaveSuccess:function(){this.$bus.$emit(\"crm-detail-update\",this.crmType),this.$emit(\"handle\",{type:\"save-success\"}),this.getDetail()},getTabsNum:function(){var e=this;if(this.showTabsNumber){var t={leads:l.h,customer:r.o,contacts:o.h,business:c.h,contract:d.h,product:u.h,receivables:m.f,expense:f.k,\"expense-examines\":f.e}[this.crmType],a={};a.id=this.id,t(a).then(function(t){e.tabsNumber=t.data||{}}).catch(function(){})}},getTabName:function(e,t){return e+(t&&t>0?\"（\"+t+\"）\":\"\")},toggleStar:function(){var e=this;this.loading=!0;var t={leads:l.l,customer:r.V,contacts:o.n,business:c.t}[this.crmType],a={};a.id=this.detailData[this.crmType+\"Id\"],t(a).then(function(){e.loading=!1,e.$message.success(e.detailData.star>0?\"取消关注成功\":\"关注成功\"),e.detailData.star=e.detailData.star>0?0:1,e.$emit(\"handle\",{type:\"star\"})}).catch(function(){e.loading=!1})}},deactivated:function(){}}},lTLD:function(e,t,a){},njgv:function(e,t,a){},oWzH:function(e,t,a){\"use strict\";a.r(t),t.default={methods:{getCategoryIcon:function(e){var t=e&&\"string\"==typeof e?e.split(\",\"):[];return t.length>1?{icon:t[0],color:t[1]}:{icon:\"wk wk-approve\",color:\"#9376FF\"}}}}},oaLG:function(e,t,a){},pTPx:function(e,t,a){},sXfQ:function(e,t,a){\"use strict\";var i=a(\"blTa\");a.n(i).a},slnp:function(e,t,a){\"use strict\";a.r(t);var i=a(\"7qmR\"),n=a(\"Ew9n\"),s=a(\"3biH\"),l=a(\"/407\"),r=a(\"hwzM\"),o=a(\"7Qib\"),c=a(\"oWzH\"),d={name:\"ExamineDetail\",components:{SlideView:n.a,ExamineInfo:s.a,RelatedBusinessCell:l.default,CRMFullScreenDetail:function(){return Promise.all([a.e(\"chunk-66f9\"),a.e(\"chunk-0aaf\"),a.e(\"chunk-620e\"),a.e(\"chunk-3997\")]).then(a.bind(null,\"3z7q\"))},FileCell:r.default},filters:{fileName:function(e){return(e.name&&e.name.length>10?e.name.substring(0,10)+\"...\":e.name)+\"(\"+Object(o.h)(e.size)+\")\"}},mixins:[c.default],props:{id:[String,Number],detailIndex:[String,Number],detailSection:[String,Number],noListenerClass:{type:Array,default:function(){return[\"list-box\"]}}},data:function(){return{loading:!1,categoryId:\"\",type:\"\",detail:null,list:[],categoryName:\"\",fileList:[],imgList:[],travelList:[],travelField:[{prop:\"vehicle\",label:\"交通工具\"},{prop:\"trip\",label:\"单程往返\"},{prop:\"startAddress\",label:\"出发城市\"},{prop:\"endAddress\",label:\"目的城市\"},{prop:\"startTime\",label:\"开始时间\"},{prop:\"endTime\",label:\"结束时间\"},{prop:\"duration\",label:\"时长（天）\"},{prop:\"description\",label:\"备注\"}],expensesField:[{prop:\"description\",label:\"费用说明\"},{prop:\"expenseType\",label:\"费用类型\"},{prop:\"money\",label:\"费用金额（元）\"},{prop:\"expenseTime\",label:\"费用日期\"},{prop:\"hasInvoice\",label:\"有发票\"},{prop:\"invoiceNum\",label:\"发票号码\"},{prop:\"remarks\",label:\"备注\"}],relatedID:\"\",relatedCRMType:\"\",showRelatedDetail:!1}},computed:{relatedListData:function(){for(var e=this,t={},a=[\"contacts\",\"customer\",\"business\",\"contract\"],i=function(i){var n=a[i],s=e.detail[n+\"List\"]||[];s.length>0&&(t[n]=s.map(function(e){return e.id&&(e[n+\"Id\"]=e.id),e}))},n=0;n<a.length;n++)i(n);return t},detailIcon:function(){return this.getCategoryIcon(this.detail.icon)}},watch:{id:function(e){this.detail=null,this.getDetail()}},mounted:function(){},methods:{viewAfterEnter:function(){this.getDetail()},getBaseInfo:function(){var e=this;this.loading=!0,Object(i.h)({examineId:this.id,isDetail:1}).then(function(t){e.list=t.data,e.loading=!1}).catch(function(){e.loading=!1})},getDetail:function(){var e=this;this.loading=!0,Object(i.k)(this.id).then(function(t){e.loading=!1,e.categoryId=t.data.categoryId,e.type=t.data.type,e.getBaseInfo(),e.detail=t.data,e.categoryName=e.detail.categoryTitle,e.fileList=e.detail.file,e.imgList=e.detail.img,e.travelList=e.detail.examineTravelList}).catch(function(){e.loading=!1,e.hideView()})},hideView:function(){this.$emit(\"hide-view\")},checkRelatedDetail:function(e,t){this.relatedID=t[e+\"Id\"]||t.id,this.relatedCRMType=e,this.showRelatedDetail=!0},handleFile:function(e,t,a){\"preview\"===e?t&&t.length>0&&this.$bus.emit(\"preview-image-bus\",{index:a,data:t}):\"download\"===e&&Object(o.d)({path:t.url,name:t.name})},imgZoom:function(e,t){this.$bus.emit(\"preview-image-bus\",{index:t,data:e})},downloadFile:function(e){Object(o.d)({path:e.url,name:e.name})},examineHandle:function(e){this.$emit(\"on-examine-handle\",e,this.detailIndex),this.$emit(\"handle\",e,this.detailIndex)}}},u=(a(\"y9AN\"),a(\"KHd+\")),m=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"slide-view\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"d-view\",attrs:{\"listener-ids\":[\"workbench-main-container\"],\"no-listener-class\":e.noListenerClass},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[e.detail?i(\"flexbox\",{staticClass:\"detail-main\",attrs:{orient:\"vertical\"}},[i(\"flexbox\",{staticClass:\"detail-header\"},[i(\"div\",{staticClass:\"header-icon\",style:{backgroundColor:e.detailIcon.color}},[i(\"i\",{class:[\"wk\",\"wk-\"+e.detailIcon.icon]})]),e._v(\" \"),i(\"div\",{staticClass:\"header-name\"},[e._v(e._s(e.categoryName))])]),e._v(\" \"),i(\"div\",{staticClass:\"detail-body\"},[i(\"flexbox\",{attrs:{gutter:0,align:\"stretch\",wrap:\"wrap\"}},e._l(e.list,function(t,a){return\"examine_cause\"!==t.formType&&\"business_cause\"!==t.formType?i(\"flexbox-item\",{key:a,staticClass:\"b-cell\",attrs:{span:.5}},[\"checkbox\"===t.formType?i(\"div\",{staticClass:\"b-cell-b\"},[i(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),i(\"div\",{staticClass:\"b-cell-value\"},[i(\"flexbox\",{staticStyle:{padding:\"0px 10px 10px 0px\"},attrs:{gutter:0,wrap:\"wrap\"}},e._l(t.value,function(t,a){return i(\"div\",{key:a},[e._v(\"\\n                  \"+e._s(t)+\"  \\n                \")])}))],1)]):\"file\"===t.formType?i(\"div\",{staticClass:\"b-cell-b\"},[i(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),i(\"div\",{staticClass:\"b-cell-value\"},e._l(t.value,function(a,n){return i(\"flexbox\",{key:n,staticClass:\"f-item\"},[i(\"i\",{staticClass:\"wukong wukong-file f-img\"}),e._v(\" \"),i(\"div\",{staticClass:\"f-name\"},[e._v(e._s(e._f(\"fileName\")(a)))]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"text\"},nativeOn:{click:function(a){e.handleFile(\"preview\",t.value,n)}}},[e._v(\"预览\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"text\"},nativeOn:{click:function(t){e.handleFile(\"download\",a,n)}}},[e._v(\"下载\")])],1)}))]):i(\"div\",{staticClass:\"b-cell-b\"},[i(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),i(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(t.value))])])]):e._e()})),e._v(\" \"),e.imgList.length>0?i(\"div\",{staticClass:\"img-box\"},e._l(e.imgList,function(t,n){return i(\"div\",{key:n,staticClass:\"img-list\",on:{click:function(t){e.imgZoom(e.imgList,n)}}},[i(\"img\",{directives:[{name:\"src\",rawName:\"v-src\",value:t.url,expression:\"imgItem.url\"}],key:t.url,attrs:{onerror:'this.src=\"'+a(\"Tww3\")+'\"'}})])})):e._e(),e._v(\" \"),e.fileList.length?i(\"div\",{staticClass:\"section\"},[i(\"div\",{staticClass:\"section__hd\"},[i(\"i\",{staticClass:\"wukong wukong-file\"}),e._v(\" \"),i(\"span\",[e._v(\"附件\")]),e._v(\" \"),i(\"span\",[e._v(\"(\"+e._s(e.fileList.length)+\")\")])]),e._v(\" \"),i(\"div\",{staticClass:\"section__bd\"},e._l(e.fileList,function(t,a){return i(\"file-cell\",{key:a,attrs:{data:t,list:e.fileList,\"cell-index\":a}})}))]):e._e(),e._v(\" \"),e.type&&3==e.type&&e.travelList&&e.travelList.length>0?i(\"div\",{staticClass:\"table-sections\"},[i(\"div\",{staticClass:\"table-sections__title\"},[e._v(\"行程\")]),e._v(\" \"),i(\"el-table\",{staticStyle:{\"font-size\":\"13px\"},attrs:{data:e.travelList,align:\"center\",\"header-align\":\"center\",stripe:\"\"}},e._l(e.travelField,function(e,t){return i(\"el-table-column\",{key:t,attrs:{prop:e.prop,label:e.label,\"show-overflow-tooltip\":\"\"}})}))],1):e._e(),e._v(\" \"),e.type&&5==e.type&&e.travelList&&e.travelList.length>0?i(\"div\",{staticClass:\"table-sections\"},[i(\"div\",{staticClass:\"table-sections__title\"},[e._v(\"报销\")]),e._v(\" \"),i(\"el-table\",{staticStyle:{\"font-size\":\"13px\"},attrs:{data:e.travelList,align:\"center\",\"header-align\":\"center\",stripe:\"\"}},[e._l(e.expensesField,function(t,a){return i(\"el-table-column\",{key:a,attrs:{prop:t.prop,label:t.label,\"show-overflow-tooltip\":\"\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[\"hasInvoice\"==t.prop?i(\"flexbox\",[e._v(\"\\n                \"+e._s(\"0\"==a.row.hasInvoice?\"否\":\"是\")+\"\\n              \")]):\"expenseTime\"==t.prop?i(\"flexbox\",[e._v(\"\\n                \"+e._s(e.parseTime(a.row.expenseTime,\"{y}-{m}-{d}\"))+\"\\n              \")]):i(\"flexbox\",[e._v(\"\\n                \"+e._s(a.row[t.prop])+\"\\n              \")])]}}])})}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"发票\",width:\"50\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"flexbox\",{attrs:{justify:\"center\"}},[i(\"el-button\",{attrs:{type:\"text\"},nativeOn:{click:function(a){e.handleFile(\"preview\",t.row.img,0)}}},[e._v(e._s(t.row.img?t.row.img.length:0)+\"张\")])],1)]}}])})],2)],1):e._e(),e._v(\" \"),Object.keys(e.relatedListData).length>0?i(\"div\",{staticClass:\"section\"},[i(\"div\",{staticClass:\"section__hd\"},[i(\"i\",{staticClass:\"wukong wukong-relevance\"}),e._v(\" \"),i(\"span\",[e._v(\"相关信息\")])]),e._v(\" \"),i(\"div\",{staticClass:\"section__bd\"},e._l(e.relatedListData,function(t,a){return i(\"div\",{key:a},e._l(t,function(t,n){return i(\"related-business-cell\",{key:n,attrs:{data:t,\"cell-index\":n,type:a,\"show-foot\":!1},nativeOn:{click:function(i){e.checkRelatedDetail(a,t)}}})}))}))]):e._e(),e._v(\" \"),i(\"div\",{staticClass:\"examine-section\"},[i(\"examine-info\",{staticClass:\"create-sections-content\",attrs:{id:e.id,\"record-id\":e.detail.examineRecordId,\"examine-type\":\"oa_examine\"},on:{\"on-handle\":e.examineHandle}})],1)],1)],1):e._e(),e._v(\" \"),i(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showRelatedDetail,\"crm-type\":e.relatedCRMType,id:e.relatedID},on:{\"update:visible\":function(t){e.showRelatedDetail=t}}})],1)},[],!1,null,\"088ef2fa\",null);m.options.__file=\"ExamineDetail.vue\";t.default=m.exports},uAiP:function(e,t,a){\"use strict\";a.r(t);var i=a(\"LZF0\"),n=a(\"ZoMv\"),s=a(\"h59h\"),l=a(\"4XAY\"),r=a(\"Vm8M\"),o=a(\"u2hk\"),c=a(\"dAOq\"),d=a(\"jHPx\"),u=a(\"a/5N\"),m={name:\"CRMBaseInfo\",components:{Sections:s.default,MapView:r.a,FileListView:o.a,CRMFullScreenDetail:function(){return Promise.all([a.e(\"chunk-66f9\"),a.e(\"chunk-0aaf\"),a.e(\"chunk-620e\"),a.e(\"chunk-3997\")]).then(a.bind(null,\"3z7q\"))}},filters:{arrayValue:function(e,t){return e&&\"[object Array]\"===Object.prototype.toString.call(e)?e.map(function(e){return t?e[t]:e}).join(\"，\"):\"\"}},mixins:[i.default,c.a],props:{id:[String,Number],poolId:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:\"\"},filedList:Array},data:function(){return{list:[],showMapView:!1,mapViewInfo:{},showFullDetail:!1,fullDetailId:\"\",fullDetailType:\"\"}},inject:[\"rootTabs\"],computed:{},watch:{id:function(e){this.filedList||this.getBaseInfo(!0)},filedList:function(){this.list=this.filedList},\"rootTabs.currentName\":function(e){\"CRMBaseInfo\"===e&&this.getBaseInfo(!1)}},created:function(){var e=this;this.$bus.on(\"crm-detail-update\",function(t){e.getBaseInfo(!1)})},beforeDestroy:function(){this.$bus.off(\"crm-detail-update\")},mounted:function(){this.filedList?this.list=this.filedList:this.getBaseInfo(!0)},methods:{getBaseInfo:function(e){var t=this;this.loading=!!e;var a={types:n.default[this.crmType],id:this.id};this.poolId&&(a.poolId=this.poolId),Object(l.y)(a).then(function(e){var a=[],i=[];e.data.forEach(function(e){\"floatnumber\"===e.formType&&(e.value=Object(d.h)(e.value)),1==e.sysInformation?i.push(e):a.push(e)}),t.list=[{name:\"基本信息\",list:a},{name:\"系统信息\",list:i}],t.loading=!1}).catch(function(){t.loading=!1})},checkMapView:function(e){e.value&&\"\"!==e.value&&(this.mapViewInfo={title:e.value.location,lat:e.value.lat,lng:e.value.lng},this.showMapView=!0)},getArrayKey:function(e){return\"structure\"===e?\"name\":\"user\"===e?\"realname\":\"\"},isModule:function(e){return[\"customer\",\"business\",\"contract\",\"contacts\",\"category\",\"statusName\",\"typeName\"].includes(e.formType)},getShowBlock:function(e){return[\"map_address\",\"file\"].includes(e)},getModuleName:function(e){var t={customer:\"customerName\",business:\"businessName\",contract:\"contractNum\",contacts:\"contactsName\",category:\"categoryName\",statusName:\"statusName\",typeName:\"typeName\"}[e.formType];return e.value?e.value[t]:\"\"},checkModuleDetail:function(e){Object(u.c)(e.value)&&(this.fullDetailType=e.formType,this.fullDetailId=e.value[e.formType+\"Id\"],this.showFullDetail=!0)}}},f=(a(\"ft4M\"),a(\"KHd+\")),h=Object(f.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"b-cont\"},[a(\"div\",[e._l(e.list,function(t,i){return a(\"sections\",{key:i,staticClass:\"b-cells\",attrs:{title:t.name,\"content-height\":\"auto\"}},[a(\"flexbox\",{staticStyle:{padding:\"10px 8px 0\"},attrs:{gutter:0,align:\"stretch\",wrap:\"wrap\"}},e._l(t.list,function(t,i){return a(\"flexbox-item\",{key:i,class:{\"b-cell\":\"map_address\"!==t.formType},attrs:{span:e.getShowBlock(t.formType)?12:.5}},[\"map_address\"===t.formType?a(\"flexbox\",{attrs:{gutter:0,wrap:\"wrap\"}},[a(\"flexbox-item\",{staticClass:\"b-cell\",attrs:{span:.5},nativeOn:{click:function(a){e.checkMapView(t)}}},[a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(\"定位\")]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\",staticStyle:{color:\"#3E84E9\",cursor:\"pointer\"}},[e._v(e._s(t.value.location))])])],1),e._v(\" \"),a(\"flexbox-item\",{staticClass:\"b-cell\",attrs:{span:.5}},[a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(\"区域\")]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(t.value.address))])])],1),e._v(\" \"),a(\"flexbox-item\",{staticClass:\"b-cell\",attrs:{span:.5}},[a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(\"详细地址\")]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(t.value.detailAddress))])])],1)],1):\"single_user\"===t.formType?a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(t.value?t.value.realname:\"\"))])]):e.isModule(t)?a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value can-check\",on:{click:function(a){e.checkModuleDetail(t)}}},[e._v(e._s(e.getModuleName(t)))])]):\"checkbox\"===t.formType||\"structure\"===t.formType||\"user\"===t.formType?a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(e._f(\"arrayValue\")(t.value,e.getArrayKey(t.formType))))])]):\"file\"===t.formType?a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[a(\"file-list-view\",{attrs:{list:t.value||[]}})],1)]):\"check_status\"===t.formType?a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(e.getStatusName(t.value)))])]):a(\"flexbox\",{staticClass:\"b-cell-b\",attrs:{align:\"stretch\"}},[a(\"div\",{staticClass:\"b-cell-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"div\",{staticClass:\"b-cell-value\"},[e._v(e._s(t.value))])])],1)}))],1)}),e._v(\" \"),e._t(\"default\")],2),e._v(\" \"),e.showMapView?a(\"map-view\",{attrs:{title:e.mapViewInfo.title,lat:e.mapViewInfo.lat,lng:e.mapViewInfo.lng},on:{hidden:function(t){e.showMapView=!1}}}):e._e(),e._v(\" \"),a(\"c-r-m-full-screen-detail\",{attrs:{visible:e.showFullDetail,id:e.fullDetailId,\"crm-type\":e.fullDetailType},on:{\"update:visible\":function(t){e.showFullDetail=t}}})],1)},[],!1,null,\"430cb146\",null);h.options.__file=\"CRMBaseInfo.vue\";t.default=h.exports},uSKd:function(e,t,a){\"use strict\";a.r(t);var i=a(\"VcMt\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"uAiP\"),r=a(\"3gPr\"),o=a(\"CjUg\"),c=a(\"3biH\"),d=a(\"ROSF\"),u=a(\"f6dm\"),m=a(\"jHPx\"),f={name:\"InvoiceDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,CRMBaseInfo:l.default,RelativeFiles:r.default,RelativeHandle:o.default,ExamineInfo:c.a,Create:d.default},mixins:[u.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"invoice\",name:\"\",headDetails:[{title:\"客户名称\",value:\"\"},{title:\"开票金额\",value:\"\"},{title:\"发票号码\",value:\"\"},{title:\"开票日期\",value:\"\"}],tabCurrentName:\"CRMBaseInfo\",baseDetailList:[],isCreate:!1}},computed:{tabNames:function(){return[{label:\"详细资料\",name:\"CRMBaseInfo\"},{label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"},{label:\"操作记录\",name:\"RelativeHandle\"}]}},mounted:function(){},methods:{viewAfterEnter:function(){this.getDetial()},getDetial:function(){var e=this;this.loading=!0,Object(i.f)(this.id).then(function(t){e.loading=!1,e.name=t.data.invoiceNumber,e.detailData=t.data,e.getBaseList(t.data),e.headDetails[0].value=t.data.customerName,e.headDetails[1].value=Object(m.h)(t.data.invoiceMoney||0),e.headDetails[2].value=t.data.invoiceNumber,e.headDetails[3].value=t.data.invoiceDate}).catch(function(){e.loading=!1,e.hideView()})},getBaseList:function(e){this.baseDetailList=[{name:\"基本信息\",list:[{name:\"发票申请编号\",formType:\"text\",value:e.invoiceApplyNumber},{name:\"客户名称\",formType:\"customer\",value:e},{name:\"合同编号\",formType:\"contract\",value:e},{name:\"合同金额\",formType:\"text\",value:e.contractMoney},{name:\"开票金额（元）\",formType:\"text\",value:e.invoiceMoney},{name:\"开票日期\",formType:\"text\",value:e.invoiceDate},{name:\"开票类型\",formType:\"text\",value:{1:\"增值税专用发票\",2:\"增值税普通发票\",3:\"国税通用机打发票\",4:\"地税通用机打发票\",5:\"收据\"}[e.invoiceType]},{name:\"备注\",formType:\"text\",value:e.remark},{name:\"创建人\",formType:\"text\",value:e.createUserName},{name:\"负责人\",formType:\"text\",value:e.ownerUserName},{name:\"创建时间\",formType:\"text\",value:e.createTime},{name:\"更新时间\",formType:\"text\",value:e.updateTime}]},{name:\"发票信息\",list:[{name:\"抬头类型\",formType:\"text\",value:{1:\"单位\",2:\"个人\"}[e.titleType]},{name:\"开票抬头\",formType:\"text\",value:e.invoiceTitle},{name:\"纳税人识别号\",formType:\"text\",value:e.taxNumber},{name:\"开户行\",formType:\"text\",value:e.depositBank},{name:\"开户账号\",formType:\"text\",value:e.depositAccount},{name:\"开票地址\",formType:\"text\",value:e.depositAddress},{name:\"电话\",formType:\"text\",value:e.telephone}]},{name:\"邮寄信息\",list:[{name:\"联系人\",formType:\"text\",value:e.contactsName},{name:\"联系方式\",formType:\"text\",value:e.contactsMobile},{name:\"邮寄地址\",formType:\"text\",value:e.contactsAddress}]}]},hideView:function(){this.$emit(\"hide-view\")},editSaveSuccess:function(){this.$emit(\"handle\",{type:\"save-success\"}),this.getDetial()},examineHandle:function(){this.$emit(\"handle\",{type:\"examine\"})}}},h=(a(\"sXfQ\"),a(\"KHd+\")),v=Object(h.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?a(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[a(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}}),e._v(\" \"),e.detailData.examineRecordId?a(\"examine-info\",{staticClass:\"examine-info\",attrs:{id:e.id,\"record-id\":e.detailData.examineRecordId,\"owner-user-id\":e.detailData.ownerUserId,\"examine-type\":\"crm_invoice\"},on:{\"on-handle\":e.examineHandle}}):e._e(),e._v(\" \"),a(\"div\",{staticClass:\"d-container-bd\"},[a(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,i){return a(\"el-tab-pane\",{key:i,attrs:{label:t.label,name:t.name,lazy:\"\"}},[a(t.name,{tag:\"component\",attrs:{detail:e.detailData,id:e.id,\"crm-type\":e.crmType,\"filed-list\":e.baseDetailList}})],1)}))],1)],1):e._e()],1),e._v(\" \"),e.isCreate?a(\"create\",{attrs:{detail:e.detailData},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"356ecc9a\",null);v.options.__file=\"Detail.vue\";t.default=v.exports},uSiN:function(e,t,a){},\"vV2+\":function(e,t,a){\"use strict\";a.r(t);var i=a(\"ERJp\"),n=a(\"Ew9n\"),s=a(\"raay\"),l=a(\"eOwn\"),r=a(\"gTyn\"),o=a(\"w4ZA\"),c=a(\"J7m9\"),d=a(\"f2Lb\"),u=a(\"CjUg\"),m=a(\"RDgq\"),f=a(\"cnnj\"),h=a(\"3gPr\"),v=a(\"RE/G\"),p=a(\"tZ34\"),b=a(\"35zX\"),y=a(\"8OTK\"),g=a(\"f6dm\"),x=a(\"jHPx\"),D=(a(\"/akV\"),{name:\"BusinessDetail\",components:{SlideView:n.a,CRMDetailHead:s.default,Activity:l.default,ChieflyContacts:r.default,CRMEditBaseInfo:o.default,RelativeContract:c.default,RelativeContacts:d.default,RelativeHandle:u.default,RelativeTeam:m.default,RelativeProduct:f.default,RelativeFiles:h.default,RelativePrint:v.default,RelativeExpense:p.default,RelativeVisit:b.default,CRMAllCreate:y.default},mixins:[g.default],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{loading:!1,crmType:\"business\",headDetails:[{title:\"客户名称\",value:\"\"},{title:\"商机金额（元）\",value:\"\"},{title:\"商机组\",value:\"\"},{title:\"负责人\",value:\"\"},{title:\"创建时间\",value:\"\"}],tabCurrentName:\"Activity\",status:[],statuHandleItems:[{name:\"赢单\",type:1,value:\"100%\",img:a(\"y4JV\")},{name:\"输单\",type:2,value:\"0%\",img:a(\"migV\")},{name:\"无效\",type:3,value:\"0%\",img:a(\"x8Bg\")}],isCreate:!1,showImportInfo:!0,firstContactsId:\"\"}},computed:{activityHandle:function(){var e=[{type:\"task\",label:\"创建任务\"},{type:\"contacts\",label:\"创建联系人\"},{type:\"contract\",label:\"创建合同\"},{type:\"receivables\",label:\"创建回款\"}];return this.canCreateFollowRecord&&(e=[{type:\"log\",label:\"写跟进\"}].concat(e)),e},tabNames:function(){var e=[];return e.push({label:\"活动\",name:\"Activity\"}),this.crm.business&&this.crm.business.read&&e.push({label:\"详细资料\",name:\"CRMEditBaseInfo\"}),this.crm.contacts&&this.crm.contacts.index&&e.push({label:this.getTabName(\"联系人\",this.tabsNumber.contactCount),name:\"RelativeContacts\"}),this.crm.contract&&this.crm.contract.index&&e.push({label:this.getTabName(\"合同\",this.tabsNumber.contractCount),name:\"RelativeContract\"}),this.crm.invoice&&this.crm.invoice.index&&e.push({label:this.getTabName(\"费用\",this.tabsNumber.moneyCount),name:\"RelativeExpense\"}),this.crm.visit&&this.crm.visit.index&&e.push({label:this.getTabName(\"回访\",this.tabsNumber.returnVisitCount),name:\"RelativeVisit\"}),this.crm.product&&this.crm.product.index&&e.push({label:this.getTabName(\"产品\",this.tabsNumber.productCount),name:\"RelativeProduct\"}),e.push({label:this.getTabName(\"团队成员\",this.tabsNumber.memberCount),name:\"RelativeTeam\"}),e.push({label:this.getTabName(\"附件\",this.tabsNumber.fileCount),name:\"RelativeFiles\"}),e.push({label:\"操作记录\",name:\"RelativeHandle\"}),this.crm.business&&this.crm.business.print&&e.push({label:\"打印记录\",name:\"RelativePrint\"}),e},logTyps:function(){return[{icon:\"all\",color:\"#2362FB\",command:\"\",label:\"全部活动\"},{icon:\"customer\",color:\"#487DFF\",command:2,label:\"客户\"},{icon:\"o-task\",color:\"#D376FF\",command:11,label:\"任务\"},{icon:\"business\",color:\"#FB9323\",command:5,label:\"商机\"},{icon:\"contract\",color:\"#FD5B4A\",command:6,label:\"合同\"},{icon:\"contacts\",color:\"#27BA4A\",command:3,label:\"联系人\"},{icon:\"receivables\",color:\"#FFB940\",command:7,label:\"回款\"},{icon:\"log\",color:\"#5864FF\",command:8,label:\"日志\"},{icon:\"approve\",color:\"#9376FF\",command:9,label:\"审批\"}]}},mounted:function(){},methods:{getDetial:function(){var e=this;this.firstContactsId=\"\",this.loading=!0,this.getBusinessStatusById(),Object(i.n)({businessId:this.id}).then(function(t){e.loading=!1,e.detailData=t.data,e.firstContactsId=e.detailData.contactsId,e.headDetails[0].value=t.data.customerName;var a=t.data.money||0;e.headDetails[1].value=a>0?Object(x.h)(a):\"\",e.headDetails[2].value=t.data.typeName,e.headDetails[3].value=t.data.ownerUserName,e.headDetails[4].value=t.data.createTime}).catch(function(){e.loading=!1,e.hideView()})},getBusinessStatusById:function(){var e=this;this.loading=!0,Object(i.u)({businessId:this.id}).then(function(t){e.loading=!1;var a=t.data;e.handleBusinessStatus(a.isEnd,a.statusId,a.statusList,a.statusRemark)}).catch(function(){e.loading=!1})},hideView:function(){this.$emit(\"hide-view\")},handleBusinessStatus:function(e,t,a,i){if(this.status=[],a&&a.length>0){for(var n=0==e,s=-1,l=0;l<a.length;l++){var r=a[l];n?r.statusId==t?(s=l,r.class=\"state-suc\"):r.class=s>=0?\"state-undo\":\"state-suc\":r.statusId==t?(s=l,r.class=\"state-suc\"):r.class=s>=0?\"state-invalid\":\"state-suc\",this.status.push(r)}var o={type:e};0==e?(o.name=\"结束\",o.overIcon=[\"el-icon-arrow-down\",\"el-icon--right\"],s==a.length-1?o.class=\"state-doing\":(this.status.length>0&&0!=t&&(this.status[s+1].class=\"state-doing\"),o.class=\"state-undo\")):1==e?(o.name=\"赢单\",o.title=\"赢单\",o.detail=\"赢单率100%\",o.overIcon=[\"el-icon-check\",\"el-icon--right\"],o.class=\"state-suc\"):2==e?(o.name=\"输单\",o.title=\"赢单率0%\",o.detail=i,o.overIcon=[\"el-icon-circle-close\",\"el-icon--right\"],o.class=\"state-fail\"):3==e&&(o.name=\"无效\",o.title=\"赢单率0%\",o.detail=i,o.overIcon=[\"el-icon-remove-outline\",\"el-icon--right\"],o.class=\"state-invalid\"),this.status.push(o)}},handleStatuChange:function(e,t){var a=this;if(0==this.detailData.isEnd&&!e.isdoing){var n=\"确定进入\"+e.name+\"阶段\";this.$confirm(n,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.loading=!0,Object(i.a)({businessId:a.id,statusId:e.statusId}).then(function(e){a.loading=!1,a.$message.success(\"操作成功\"),a.getDetial()}).catch(function(){a.loading=!1})}).catch(function(){})}},handleStatuResult:function(e,t){var a=this;if(0==this.detailData.isEnd)if(2==e.type||3==e.type){var n=\"请填写\"+e.name+\"原因：\",s=e.name+\"原因\";this.$prompt(n,s,{confirmButtonText:\"确定\",cancelButtonText:\"取消\"}).then(function(t){var n=t.value;a.loading=!0,Object(i.a)({businessId:a.id,statusId:e.statusId,isEnd:e.type,statusRemark:n}).then(function(e){a.loading=!1,a.$message.success(\"操作成功\"),a.getDetial()}).catch(function(){a.loading=!1})}).catch(function(){})}else this.$confirm(\"确定将当前商机设为\"+e.name+\"吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.loading=!0,Object(i.a)({businessId:a.id,statusId:e.statusId,isEnd:e.type}).then(function(e){a.loading=!1,a.$message.success(\"操作成功\"),a.getDetial()}).catch(function(){a.loading=!1})}).catch(function(){})}}}),C=(a(\"6M1a\"),a(\"KHd+\")),_=Object(C.a)(D,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"slide-view\",{directives:[{name:\"empty\",rawName:\"v-empty\",value:!e.canShowDetail,expression:\"!canShowDetail\"}],attrs:{\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass,\"body-style\":{padding:0,height:\"100%\"},\"xs-empty-icon\":\"nopermission\",\"xs-empty-text\":\"暂无权限\"},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"crmDetailMain\",staticClass:\"detail-main\"},[e.canShowDetail&&e.detailData?i(\"flexbox\",{staticClass:\"d-container\",attrs:{direction:\"column\",align:\"stretch\"}},[i(\"c-r-m-detail-head\",{attrs:{detail:e.detailData,\"head-details\":e.headDetails,id:e.id,\"crm-type\":e.crmType},on:{handle:e.detailHeadHandle,close:e.hideView}},[i(\"template\",{slot:\"name\"},[i(\"el-tooltip\",{attrs:{content:0==e.detailData.star?\"添加关注\":\"取消关注\",effect:\"dark\",placement:\"top\"}},[i(\"i\",{staticClass:\"wk wk-focus-on focus-icon\",class:{active:0!=e.detailData.star},on:{click:function(t){e.toggleStar()}}})])],1)],2),e._v(\" \"),e.status.length>0?i(\"div\",{staticClass:\"busi-state-main\"},[i(\"flexbox\",{staticClass:\"busi-state\",style:{opacity:(e.detailData.isEnd,1)}},e._l(e.status,function(t,n){return i(\"a\",{key:n},[i(\"el-popover\",{attrs:{title:t.name,content:\"赢单率\"+t.rate+\"%\",placement:\"bottom\",width:\"150\",trigger:\"hover\"}},[e.status.length-1!=n?i(\"div\",{staticClass:\"busi-state-item\",class:t.class,attrs:{slot:\"reference\"},on:{click:function(a){e.handleStatuChange(t,n)}},slot:\"reference\"},[e._v(\"\\n                \"+e._s(t.name)+\"\\n                \"),0==n?i(\"div\",{staticClass:\"state-circle circle-left\"}):e._e(),e._v(\" \"),0!=n?i(\"div\",{staticClass:\"state-arrow arrow-left\"}):e._e(),e._v(\" \"),i(\"div\",{staticClass:\"state-arrow arrow-right\"})]):e._e()]),e._v(\" \"),e.status.length-1==n?i(\"el-popover\",{attrs:{title:0==t.type?\"\":t.title,content:0==t.type?\"\":t.detail,placement:\"bottom\",width:\"150\",trigger:\"hover\"}},[0==t.type?i(\"div\",{staticClass:\"state-handel-cont\"},e._l(e.statuHandleItems,function(t,n){return i(\"flexbox\",{key:n,staticClass:\"state-handel-item\",nativeOn:{click:function(a){e.handleStatuResult(t,n)}}},[i(\"img\",{staticClass:\"state-handel-item-img\",attrs:{onerror:'this.src=\"'+a(\"Tww3\")+'\"',src:t.img}}),e._v(\" \"),i(\"div\",{staticClass:\"state-handel-item-name\"},[e._v(e._s(t.name))]),e._v(\" \"),i(\"div\",{staticClass:\"state-handel-item-value\"},[e._v(e._s(t.value))])])})):e._e(),e._v(\" \"),i(\"div\",{staticClass:\"busi-state-item\",class:t.class,attrs:{slot:\"reference\"},slot:\"reference\"},[i(\"i\",{class:t.overIcon,staticStyle:{\"margin-right\":\"8px\"}}),e._v(\"\\n                \"+e._s(t.name)+\"\\n                \"),i(\"div\",{staticClass:\"state-arrow arrow-left\"}),e._v(\" \"),i(\"div\",{staticClass:\"state-circle circle-right\"})])]):e._e()],1)}))],1):e._e(),e._v(\" \"),i(\"flexbox\",{staticClass:\"d-container-bd\",attrs:{align:\"stretch\"}},[i(\"el-tabs\",{staticClass:\"d-container-bd--left\",attrs:{type:\"border-card\"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:\"tabCurrentName\"}},e._l(e.tabNames,function(t,a){return i(\"el-tab-pane\",{key:a,attrs:{label:t.label,name:t.name,lazy:\"\"}},[i(t.name,{tag:\"component\",attrs:{detail:e.detailData,\"type-list\":e.logTyps,id:e.id,handle:e.activityHandle,\"crm-type\":e.crmType,\"contacts-id\":e.firstContactsId},on:{\"update:contactsId\":function(t){e.firstContactsId=t},\"on-handle\":e.detailHeadHandle}})],1)})),e._v(\" \"),i(\"transition\",{attrs:{name:\"slide-fade\"}},[i(\"el-tabs\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showImportInfo,expression:\"showImportInfo\"}],staticClass:\"d-container-bd--right\",attrs:{value:\"chiefly-contacts\",type:\"border-card\"}},[i(\"el-tab-pane\",{attrs:{label:\"重要信息\",name:\"chiefly-contacts\",lazy:\"\"}},[i(\"chiefly-contacts\",{attrs:{\"contacts-id\":e.firstContactsId,id:e.id,\"crm-type\":e.crmType}})],1)],1)],1)],1)],1):e._e()],1),e._v(\" \"),i(\"el-button\",{staticClass:\"firse-button\",on:{click:function(t){e.showImportInfo=!e.showImportInfo}}},[e._v(\"重\"),i(\"br\"),e._v(\"要\"),i(\"br\"),e._v(\"信\"),i(\"br\"),e._v(\"息\"),i(\"br\"),i(\"i\",{staticClass:\"el-icon-arrow-right el-icon--right\",class:{\"is-reverse\":!e.showImportInfo}})]),e._v(\" \"),e.isCreate?i(\"c-r-m-all-create\",{attrs:{action:{type:\"update\",id:e.id,batchId:e.detailData.batchId},\"crm-type\":e.crmType},on:{\"save-success\":e.editSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,\"74945e8a\",null);_.options.__file=\"Detail.vue\";t.default=_.exports},vhkk:function(e,t,a){\"use strict\";var i=a(\"uSiN\");a.n(i).a},x8Bg:function(e,t,a){e.exports=a.p+\"static/img/check_cancel.eb1f5f4.png\"},y9AN:function(e,t,a){\"use strict\";var i=a(\"lTLD\");a.n(i).a},yPq4:function(e,t,a){\"use strict\";a.r(t);var i=a(\"7Qib\"),n=a(\"3ojK\"),s=a(\"1bNe\"),l=a(\"gwiD\"),r=a(\"vV2+\"),o=a(\"mVxz\"),c=a(\"tMlD\"),d=a(\"ALhW\"),u=a(\"0dur\"),m=a(\"uSKd\"),f=a(\"slnp\"),h=a(\"f462\"),v=a(\"AWvD\"),p={name:\"CRMAllDetail\",components:{LeadsDetail:n.default,CustomerDetail:s.default,ContactsDetail:l.default,BusinessDetail:r.default,ContractDetail:o.default,ProductDetail:c.default,ReceivablesDetail:d.default,VisitDetail:u.default,InvoiceDetail:m.default,ExamineDetail:f.default,ExpenseDetail:h.default,ExpenseExamineDetail:v.default},props:{id:[String,Number],crmType:{type:String,default:\"\"},visible:{type:Boolean,default:!1},listenerIDs:{type:Array,default:function(){return[\"crm-main-container\"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[\"el-table__body\"]}}},data:function(){return{tabName:\"\"}},computed:{},watch:{crmType:function(e){\"leads\"==this.crmType?this.tabName=\"LeadsDetail\":\"customer\"==this.crmType?this.tabName=\"CustomerDetail\":\"contacts\"==this.crmType?this.tabName=\"ContactsDetail\":\"business\"==this.crmType?this.tabName=\"BusinessDetail\":\"contract\"==this.crmType?this.tabName=\"ContractDetail\":\"product\"==this.crmType?this.tabName=\"ProductDetail\":\"receivables\"==this.crmType?this.tabName=\"ReceivablesDetail\":\"visit\"==this.crmType?this.tabName=\"VisitDetail\":\"invoice\"==this.crmType?this.tabName=\"InvoiceDetail\":\"examine\"==this.crmType?this.tabName=\"ExamineDetail\":\"expense\"==this.crmType?this.tabName=\"ExpenseDetail\":\"expense-examines\"==this.crmType?this.tabName=\"ExpenseExamineDetail\":this.tabName=\"\"}},mounted:function(){this.visible&&(document.body.appendChild(this.$el),this.$el.style.zIndex=Object(i.q)())},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{hiddenView:function(){this.$emit(\"update:visible\",!1)},detailHandle:function(e){\"alloc\"!==e.type&&\"get\"!==e.type&&\"transfer\"!==e.type&&\"transform\"!==e.type&&\"delete\"!==e.type&&\"put_seas\"!==e.type||this.hiddenView(),this.$emit(\"handle\",e)}}},b=(a(\"QjGH\"),a(\"KHd+\")),y=Object(b.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.id&&e.visible?a(e.tabName,{tag:\"component\",staticClass:\"d-view\",attrs:{\"crm-type\":e.crmType,id:e.id,\"listener-ids\":e.listenerIDs,\"no-listener-ids\":e.noListenerIDs,\"no-listener-class\":e.noListenerClass},on:{handle:e.detailHandle,\"hide-view\":e.hiddenView}}):e._e()},[],!1,null,\"296f914c\",null);y.options.__file=\"CRMAllDetail.vue\";t.default=y.exports}}]);","extractedComments":[]}