(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-329f"],{A4N6:function(e,t,a){},"G+lJ":function(e,t,a){"use strict";var n=a("tuyL");a.n(n).a},HuqW:function(e,t,a){},SPfF:function(e,t,a){},Sv8J:function(e,t,a){"use strict";var n=a("koqc");a.n(n).a},Vm8M:function(e,t,a){"use strict";var n=a("7Qib"),l={name:"MapView",components:{},props:{title:{type:String,default:""},lat:{type:[String,Number],default:0},lng:{type:[String,Number],default:0}},data:function(){return{}},computed:{},mounted:function(){var e=this;this.$el.style.zIndex=Object(n.q)(),document.body.appendChild(this.$el),Object(n.l)().then(function(){var t=new BMap.Map("choicemap",{enableMapClick:!1}),a=new BMap.Point(parseFloat(e.lng),parseFloat(e.lat));t.centerAndZoom(a,18),t.enableScrollWheelZoom();var n=new BMap.Marker(a);t.addOverlay(n);var l=new BMap.InfoWindow(e.title);n.addEventListener("click",function(){t.openInfoWindow(l,a)})})},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{hiddenView:function(){this.$emit("hidden")}}},s=(a("Sv8J"),a("KHd+")),i=Object(s.a)(l,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"map-view"},[t("div",{attrs:{id:"choicemap"}}),this._v(" "),t("i",{staticClass:"el-icon-close map-close",on:{click:this.hiddenView}})])},[],!1,null,"69088704",null);i.options.__file="MapView.vue";t.a=i.exports},ZX9L:function(e,t,a){"use strict";var n={name:"TimeTypeSelect",props:{defaultType:[String,Object],width:{type:Number,default:200},options:{type:Array,default:function(){return[{label:"今天",value:"today"},{label:"昨天",value:"yesterday"},{label:"本周",value:"week"},{label:"上周",value:"lastWeek"},{label:"本月",value:"month"},{label:"上月",value:"lastMonth"},{label:"本季度",value:"quarter"},{label:"上季度",value:"lastQuarter"},{label:"本年",value:"year"},{label:"去年",value:"lastYear"}]}}},data:function(){return{selectType:{label:"本年",value:"year"},showTypePopover:!1,showCustomContent:!1,sureCustomContent:!1,startTime:"",endTime:""}},computed:{typeShowValue:function(){return this.sureCustomContent?this.startTime||this.endTime?(this.startTime||"")+"-"+(this.endTime||""):"":this.selectType.label}},watch:{defaultType:function(){this.selectType.value!=this.defaultType&&(this.selectType=this.getDefaultTypeValue(this.defaultType))}},mounted:function(){void 0!==this.defaultType?"string"==typeof this.defaultType?this.selectType=this.getDefaultTypeValue(this.defaultType):this.defaultType.label?this.selectType=this.defaultType:"default"==this.defaultType.type?this.selectType=this.getDefaultTypeValue(this.defaultType.value):"custom"==this.defaultType.type&&(this.sureCustomContent=!0,this.showCustomContent=!0,this.startTime=this.defaultType.startTime,this.endTime=this.defaultType.endTime):this.$emit("change",{type:"default",value:this.selectType.value})},methods:{getDefaultTypeValue:function(e){for(var t=0;t<this.options.length;t++){var a=this.options[t];if(a.value==e)return a}return{label:"本年",value:"year"}},typeSelectClick:function(e){this.showTypePopover=!1,this.sureCustomContent=!1,this.showCustomContent=!1,this.selectType=e,this.$emit("change",{type:"default",value:this.selectType.value})},customSureClick:function(){this.startTime&&this.endTime&&(this.sureCustomContent=!0,this.showTypePopover=!1,this.$emit("change",{type:"custom",startTime:this.startTime,endTime:this.endTime}))}}},l=(a("G+lJ"),a("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{staticClass:"time-type-select",attrs:{width:e.width,placement:"bottom","popper-class":"no-padding-popover",trigger:"click"},model:{value:e.showTypePopover,callback:function(t){e.showTypePopover=t},expression:"showTypePopover"}},[a("div",{staticClass:"type-popper"},[a("div",{staticClass:"type-content"},[e._l(e.options,function(t,n){return a("div",{key:n,staticClass:"type-content-item",class:{selected:e.selectType.value==t.value&&!e.showCustomContent},on:{click:function(a){e.typeSelectClick(t)}}},[a("div",{staticClass:"mark"}),e._v(e._s(t.label)+"\n      ")])}),e._v(" "),a("div",{staticClass:"type-content-item",class:{selected:e.showCustomContent},on:{click:function(t){e.showCustomContent=!0}}},[a("div",{staticClass:"mark"}),e._v("自定义\n      ")])],2),e._v(" "),e.showCustomContent?a("div",{staticClass:"type-content-custom"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("el-button",{on:{click:e.customSureClick}},[e._v("确定")])],1):e._e()]),e._v(" "),a("el-input",{staticClass:"type-select",style:{width:e.width+"px"},attrs:{slot:"reference",readonly:!0},slot:"reference",model:{value:e.typeShowValue,callback:function(t){e.typeShowValue=t},expression:"typeShowValue"}},[a("i",{class:["el-icon-arrow-up",{"is-reverse":e.showTypePopover}],attrs:{slot:"suffix"},slot:"suffix"})])],1)},[],!1,null,"9dc9cb18",null);s.options.__file="index.vue";t.a=s.exports},"ej9+":function(e,t,a){"use strict";var n={name:"BaseTabsHead",components:{},props:{selectValue:[String,Number],tabs:Array},data:function(){return{currentValue:""}},computed:{},watch:{selectValue:function(){this.currentValue=this.selectValue}},mounted:function(){this.currentValue=this.selectValue},beforeDestroy:function(){},methods:{handleTabsClick:function(e,t){this.$emit("update:selectValue",e.name),this.$emit("change",e.name)}}},l=(a("jGgZ"),a("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"base-tabs-head",attrs:{justify:"space-between"}},[a("div",[e._t("left")],2),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleTabsClick},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.tabs,function(e,t){return a("el-tab-pane",{key:t+e.name,attrs:{label:e.label,name:e.name}})})),e._v(" "),a("div",[e._t("right")],2)],1)},[],!1,null,"52d082d3",null);s.options.__file="index.vue";t.a=s.exports},jGgZ:function(e,t,a){"use strict";var n=a("A4N6");a.n(n).a},kZxc:function(e,t,a){"use strict";a.d(t,"l",function(){return l}),a.d(t,"n",function(){return s}),a.d(t,"f",function(){return i}),a.d(t,"m",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"d",function(){return c}),a.d(t,"h",function(){return u}),a.d(t,"e",function(){return d}),a.d(t,"b",function(){return p}),a.d(t,"c",function(){return h}),a.d(t,"g",function(){return m}),a.d(t,"j",function(){return f}),a.d(t,"i",function(){return y}),a.d(t,"k",function(){return v});var n=a("t3Un");function l(e){return Object(n.a)({url:"crmInstrument/queryBulletin",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(n.a)({url:"crmInstrument/queryDataInfo",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function i(e){return Object(n.a)({url:"crmInstrument/queryBulletinInfo",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(n.a)({url:"crmInstrument/queryRecordCount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(n.a)({url:"crmInstrument/queryPerformance",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(n.a)({url:"crmInstrument/sellFunnel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(n.a)({url:"crmInstrument/salesTrend",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return e.label=e.crmType,Object(n.a)({url:"crmInstrument/queryRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(n.a)({url:"crmInstrument/forgottenCustomerCount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(n.a)({url:"crmInstrument/forgottenCustomerPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(n.a)({url:"biRanking/ranking",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(n.a)({url:"crmInstrument/queryModelSort",method:"post",data:e})}function y(e){return Object(n.a)({url:"crmInstrument/setModelSort",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(n.a)({url:"crmInstrument/unContactCustomerPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},koqc:function(e,t,a){},os3Q:function(e,t,a){"use strict";var n=a("SPfF");a.n(n).a},sHaP:function(e,t,a){"use strict";var n=a("HuqW");a.n(n).a},tuyL:function(e,t,a){},z6WW:function(e,t,a){"use strict";a.r(t);var n=a("QbLZ"),l=a.n(n),s=a("kZxc"),i={name:"RecordTabHead",components:{BaseTabsHead:a("ej9+").a},props:{count:{type:[String,Number],default:0}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{}},o=(a("sHaP"),a("KHd+")),r=Object(o.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("base-tabs-head",this._g(this._b({staticClass:"Task-tabs-head"},"base-tabs-head",this.$attrs,!1),this.$listeners),[t("span",{staticClass:"title",attrs:{slot:"left"},slot:"left"},[t("i",{staticClass:"wk wk-message"}),this._v("跟进记录（"+this._s(this.count)+"）\n  ")])])},[],!1,null,"7215321f",null);r.options.__file="RecordTabHead.vue";var c=r.exports,u=a("HHBN"),d=a("ZX9L"),p=a("O8VQ"),h=a("/G0b"),m=a("ZoMv"),f={name:"FollowIndex",components:{RecordTabHead:c,XhUserCell:u.a,TimeTypeSelect:d.a,LogCell:p.a,LogEditDialog:h.a,CRMFullScreenDetail:function(){return Promise.all([a.e("chunk-d929"),a.e("chunk-f781"),a.e("chunk-494f"),a.e("chunk-331e"),a.e("chunk-0ead")]).then(a.bind(null,"3z7q"))}},filters:{crmIconClass:function(e){return"wk wk-"+m.a.convertTypeToKey(e)},crmName:function(e){return m.a.convertTypeToName(e)}},props:{},data:function(){return{tabsSelectValue:"all",tabs:[{label:"全部",name:"all"},{label:"我创建的",name:"0"},{label:"我下属创建的",name:"1"}],options:[{label:"全部",value:""},{label:"线索",value:1},{label:"客户",value:2},{label:"联系人",value:3},{label:"商机",value:5},{label:"合同",value:6}],count:0,filterForm:{crmType:"",isUser:1,userId:"",subUser:"",queryType:0},timeSelect:{type:"default",value:"month"},list:[],loading:!1,noMore:!1,page:1,scrollKey:Date.now(),showFullDetail:!1,relationID:"",relationCrmType:"",logEditData:null,logEditPosition:{seciton:0,index:0},logEditDialogVisible:!1}},computed:{scrollDisabled:function(){return this.loading||this.noMore},userSelectShow:function(){return"0"!==this.filterForm.subUser}},watch:{filterForm:{handler:function(){this.refreshList()},deep:!0}},mounted:function(){},beforeDestroy:function(){},methods:{tabsChange:function(e){this.filterForm.subUser="all"===e?"":e},refreshList:function(){this.page=1,this.list=[],this.noMore=!1,this.scrollKey=Date.now()},getList:function(){var e=this;this.loading=!0;var t={page:this.page,limit:15,isUser:1,queryType:0};this.timeSelect.type&&("custom"===this.timeSelect.type?(t.startTime=this.timeSelect.startTime.replace(/\./g,"-"),t.endTime=this.timeSelect.endTime.replace(/\./g,"-")):t.type=this.timeSelect.value||""),this.userSelectShow?t=l()({},t,this.filterForm):(t.label=this.filterForm.crmType,t.subUser=this.filterForm.subUser,t.dataType=this.filterForm.queryType,t.search=this.filterForm.search),Object(s.e)(t).then(function(a){e.loading=!1,e.filterForm.subUser!=t.subUser?e.refreshList():(e.noMore||(e.list=e.list.concat(a.data.list||[]),e.page++),e.count=a.data.totalRow||0,e.noMore=a.data.lastPage)}).catch(function(){e.noMore=!0,e.loading=!1})},checkRelationDetail:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.relationID=t,this.relationCrmType=a?m.a.convertTypeToKey(e):e,this.showFullDetail=!0},userChange:function(e){this.filterForm.userId=e.value.length>0?e.value[0].userId:""},timeTypeChange:function(e){this.timeSelect=e,this.refreshList()},detailHandle:function(e){"delete"==e.type&&this.refreshList()},logCellDelete:function(e,t,a){this.list.splice(t,1),this.scrollKey=Date.now()},logCellEdit:function(e,t,a){this.logEditData=e,this.logEditPosition={seciton:a,index:t},this.logEditDialogVisible=!0},logEditSave:function(e){this.logEditPosition.index>=0&&this.list.splice(this.logEditPosition.index,1,e)}}},y=(a("os3Q"),Object(o.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("record-tab-head",{attrs:{tabs:e.tabs,count:e.count,"select-value":e.tabsSelectValue},on:{"update:selectValue":function(t){e.tabsSelectValue=t},change:e.tabsChange}}),e._v(" "),a("flexbox",{staticClass:"filter-control card"},[a("el-input",{attrs:{placeholder:"关键字搜索","prefix-icon":"el-icon-search"},model:{value:e.filterForm.search,callback:function(t){e.$set(e.filterForm,"search",t)},expression:"filterForm.search"}}),e._v(" "),e.userSelectShow?a("xh-user-cell",{staticClass:"xh-user-cell",attrs:{radio:"",placeholder:"选择人员"},on:{"value-change":e.userChange}}):e._e(),e._v(" "),a("time-type-select",{attrs:{width:190,"default-type":e.timeSelect.value},on:{change:e.timeTypeChange}}),e._v(" "),a("el-select",{attrs:{placeholder:"选择"},model:{value:e.filterForm.crmType,callback:function(t){e.$set(e.filterForm,"crmType",t)},expression:"filterForm.crmType"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{attrs:{placeholder:"选择"},model:{value:e.filterForm.queryType,callback:function(t){e.$set(e.filterForm,"queryType",t)},expression:"filterForm.queryType"}},e._l([{label:"全部",value:0},{label:"跟进记录",value:1},{label:"外勤签到",value:4}],function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.getList,expression:"getList"}],key:""+e.scrollKey+e.tabsSelectValue,staticClass:"cell-section",attrs:{"infinite-scroll-distance":"100","infinite-scroll-disabled":"scrollDisabled"}},[e._l(e.list,function(t,n){return a("log-cell",{key:n,staticClass:"log-cell",attrs:{item:t,index:n},on:{"crm-detail":e.checkRelationDetail,delete:e.logCellDelete,edit:e.logCellEdit}},[a("div",{staticClass:"relate-cell",on:{click:function(a){e.checkRelationDetail(t.activityType,t.activityTypeId,!0)}}},[a("i",{staticClass:"relate-cell-icon",class:e._f("crmIconClass")(t.activityType)}),e._v(" "),a("span",{staticClass:"relate-cell-type"},[e._v(e._s(e._f("crmName")(t.activityType))+"-")]),e._v(" "),a("span",{staticClass:"relate-cell-name"},[e._v(e._s(t.crmTypeName))])])])}),e._v(" "),e.loading?a("p",{staticClass:"scroll-bottom-tips"},[e._v("加载中...")]):e._e(),e._v(" "),e.noMore?a("p",{staticClass:"scroll-bottom-tips"},[e._v("没有更多了")]):e._e()],2),e._v(" "),a("c-r-m-full-screen-detail",{attrs:{visible:e.showFullDetail,"crm-type":e.relationCrmType,id:e.relationID},on:{"update:visible":function(t){e.showFullDetail=t},handle:e.detailHandle}}),e._v(" "),a("log-edit-dialog",{attrs:{visible:e.logEditDialogVisible,data:e.logEditData},on:{"update:visible":function(t){e.logEditDialogVisible=t},save:e.logEditSave}})],1)},[],!1,null,"8f1a6024",null));y.options.__file="FollowIndex.vue";t.default=y.exports}}]);